/*!
 * Copyright (c) 2017 ~ present NAVER Corp.
 * billboard.js project is licensed under the MIT license
 *
 * billboard.js, JavaScript chart library
 * https://naver.github.io/billboard.js/
 *
 * @version 3.11.3
 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3-axis"),require("d3-brush"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-hierarchy"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom"));else if("function"==typeof define&&define.amd)define(["d3-axis","d3-brush","d3-drag","d3-dsv","d3-ease","d3-hierarchy","d3-interpolate","d3-scale","d3-selection","d3-shape","d3-time-format","d3-transition","d3-zoom"],e);else{var i="object"==typeof exports?e(require("d3-axis"),require("d3-brush"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-hierarchy"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom")):e(t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3);for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(this,(function(t,e,i,n,s,a,r,o,c,l,d,u,h){return function(){"use strict";var g=[,,function(t){t.exports=d},function(t){t.exports=c},function(t){t.exports=e},function(t){t.exports=n},function(t){t.exports=i},function(t){t.exports=o},function(t){t.exports=u},function(t){t.exports=l},function(e){e.exports=t},function(t){t.exports=s},function(t){t.exports=r},function(t){t.exports=a},function(t){t.exports=h}],f={};function p(t){var e=f[t];if(void 0!==e)return e.exports;var i=f[t]={exports:{}};return g[t](i,i.exports,p),i.exports}p.d=function(t,e){for(var i in e)p.o(e,i)&&!p.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},p.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},p.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var x={};return function(){p.r(x),p.d(x,{bb:function(){return Us},default:function(){return Us}});var t={};p.r(t),p.d(t,{area:function(){return os},areaLineRange:function(){return cs},areaSpline:function(){return ls},areaSplineRange:function(){return ds},areaStep:function(){return us},bar:function(){return vs},bubble:function(){return ys},candlestick:function(){return Ts},donut:function(){return ps},gauge:function(){return xs},line:function(){return hs},pie:function(){return bs},polar:function(){return ms},radar:function(){return _s},scatter:function(){return ws},spline:function(){return gs},step:function(){return fs},treemap:function(){return As}});var e={};function i(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}p.r(e),p.d(e,{selection:function(){return Gs},subchart:function(){return Vs},zoom:function(){return Ys}});var n=p(2),s=p(3);const a="object"==typeof globalThis&&null!==globalThis&&globalThis.Object===Object&&globalThis||"object"==typeof global&&null!==global&&global.Object===Object&&global||"object"==typeof self&&null!==self&&self.Object===Object&&self||Function("return this")(),r=null==a?void 0:a.document,o=function(t){var e=this;const n="function"==typeof(null==t?void 0:t.requestAnimationFrame)&&"function"==typeof(null==t?void 0:t.cancelAnimationFrame),s="function"==typeof(null==t?void 0:t.requestIdleCallback)&&"function"==typeof(null==t?void 0:t.cancelIdleCallback),a=function(t){return i(this,e),setTimeout(t,1)}.bind(this),r=function(t){return i(this,e),clearTimeout(t)}.bind(this);return[n?t.requestAnimationFrame:a,n?t.cancelAnimationFrame:r,s?t.requestIdleCallback:a,s?t.cancelIdleCallback:r]}(a),c=o[0],l=(o[1],o[2]),d=(o[3],{AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",BAR:"bar",BUBBLE:"bubble",CANDLESTICK:"candlestick",DONUT:"donut",GAUGE:"gauge",LINE:"line",PIE:"pie",POLAR:"polar",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step",TREEMAP:"treemap"}),u={AREA:"initArea",AREA_LINE_RANGE:"initArea",AREA_SPLINE:"initArea",AREA_SPLINE_RANGE:"initArea",AREA_STEP:"initArea",BAR:"initBar",BUBBLE:"initCircle",CANDLESTICK:"initCandlestick",DONUT:"initArc",GAUGE:"initArc",LINE:"initLine",PIE:"initArc",POLAR:"initPolar",RADAR:"initCircle",SCATTER:"initCircle",SPLINE:"initLine",STEP:"initLine",TREEMAP:"initTreemap"},h={Area:[d.AREA,d.AREA_SPLINE,d.AREA_SPLINE_RANGE,d.AREA_LINE_RANGE,d.AREA_STEP],AreaRange:[d.AREA_SPLINE_RANGE,d.AREA_LINE_RANGE],Arc:[d.PIE,d.DONUT,d.GAUGE,d.POLAR,d.RADAR],Line:[d.LINE,d.SPLINE,d.AREA,d.AREA_SPLINE,d.AREA_SPLINE_RANGE,d.AREA_LINE_RANGE,d.STEP,d.AREA_STEP],Step:[d.STEP,d.AREA_STEP],Spline:[d.SPLINE,d.AREA_SPLINE,d.AREA_SPLINE_RANGE]};function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function f(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==g(e)?e:String(e)}function b(t,e,i){return(e=f(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var m=p(4),_=void 0;function v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function y(t){for(var e,i=1;i<arguments.length;i++)e=null!=arguments[i]?arguments[i]:{},i%2?v(Object(e),!0).forEach((function(i){b(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):v(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}));return t}const T=function(t){return i(this,_),t||0===t}.bind(void 0),w=function(t){return i(this,_),"function"==typeof t}.bind(void 0),A=function(t){return i(this,_),"string"==typeof t}.bind(void 0),S=function(t){return i(this,_),"number"==typeof t}.bind(void 0),k=function(t){return i(this,_),void 0===t}.bind(void 0),R=function(t){return i(this,_),void 0!==t}.bind(void 0),C=function(t){return i(this,_),"boolean"==typeof t}.bind(void 0),E=function(t){return i(this,_),10*Math.ceil(t/10)}.bind(void 0),O=function(t){return i(this,_),Math.ceil(t)+.5}.bind(void 0),L=function(t){return i(this,_),t[1]-t[0]}.bind(void 0),P=function(t){return i(this,_),"object"==typeof t}.bind(void 0),D=function(t){return i(this,_),k(t)||null===t||A(t)&&0===t.length||P(t)&&!(t instanceof Date)&&0===Object.keys(t).length||S(t)&&isNaN(t)}.bind(void 0),I=function(t){return i(this,_),!D(t)}.bind(void 0),z=function(t){return i(this,_),Array.isArray(t)}.bind(void 0),M=function(t){return i(this,_),t&&!(null!=t&&t.nodeType)&&P(t)&&!z(t)}.bind(void 0);function $(t,e,i){return R(t[e])?t[e]:i}function X(t,e){const i=w(t);for(var n=arguments.length,s=Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a];return i&&t.call.apply(t,[e].concat(s)),i}function F(t,e){var n=this;let s=0;const a=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];--s||e.apply.apply(e,[this].concat(i))};"duration"in t?t.each(function(){return i(this,n),++s}.bind(this)).on("end",a):(++s,t.call(a))}function B(t){return A(t)?t.replace(/<(script|img)?/gi,"&lt;").replace(/(script)?>/gi,"&gt;"):t}function N(t,e,n,s){var a=this;if(void 0===n&&(n=[-1,1]),void 0===s&&(s=!1),t&&A(e))if(-1===e.indexOf("\n"))t.text(e);else{const r=[t.text(),e].map(function(t){return i(this,a),t.replace(/[\s\n]/g,"")}.bind(this));if(r[0]!==r[1]){const r=e.split("\n"),o=s?r.length-1:1;t.html(""),r.forEach(function(e,s){i(this,a),t.append("tspan").attr("x",0).attr("dy",(0===s?n[0]*o:n[1])+"em").text(e)}.bind(this))}}}function j(t){const e=t.getBBox(),i=e.x,n=e.y,s=e.width,a=e.height;return[{x:i,y:n+a},{x:i,y:n},{x:i+s,y:n},{x:i+s,y:n+a}]}function G(t){const e=t.getBoundingClientRect(),i=e.width,n=e.height,s=j(t);return{x:s[0].x,y:Math.min(s[0].y,s[1].y),width:i,height:n}}function V(t,e){var n,a=this;const r=t&&(null==(n=t.touches||t.sourceEvent&&t.sourceEvent.touches)?void 0:n[0]);let o=[0,0];try{o=(0,s.pointer)(r||t,e)}catch(t){}return o.map(function(t){return i(this,a),isNaN(t)?0:t}.bind(this))}function Y(t){const e=t.event,i=t.$el,n=i.subchart.main||i.main;let s;return e&&"brush"===e.type?s=e.selection:n&&(s=n.select(".bb-brush").node())&&(s=(0,m.brushSelection)(s)),s}function H(t){return!("rect"in t)||"rect"in t&&t.hasAttribute("width")&&t.rect.width!==+t.getAttribute("width")?t.rect=t.getBoundingClientRect():t.rect}function U(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=0),void 0===i&&(i=1e4);const n=a.crypto||a.msCrypto,s=n?e+n.getRandomValues(new Uint32Array(1))[0]%(i-e+1):Math.floor(Math.random()*(i-e)+e);return t?s+"":s}function W(t,e,i,n,s){if(i>n)return-1;const a=Math.floor((i+n)/2);let r=t[a],o=r.x,c=r.w,l=void 0===c?0:c;return s&&(o=t[a].y,l=t[a].h),e>=o&&e<=o+l?a:e<o?W(t,e,i,a-1,s):W(t,e,a+1,n,s)}function Z(t){const e=Y(t);return!e||e[0]===e[1]}function q(t,e){var n=this;void 0===t&&(t={}),z(e)&&e.forEach(function(e){return i(this,n),q(t,e)}.bind(this));for(const i in e)/^\d+$/.test(i)||i in t||(t[i]=e[i]);return t}const K=function(t){return i(this,_),t.charAt(0).toUpperCase()+t.slice(1)}.bind(void 0);const J=function(t){return i(this,_),[].slice.call(t)}.bind(void 0);function Q(t){var e,i,n,s,r,o;return{x:null!=(e=(null!=(i=null!=(n=a.pageXOffset)?n:a.scrollX)?i:0)+t.scrollLeft)?e:0,y:null!=(s=(null!=(r=null!=(o=a.pageYOffset)?o:a.scrollY)?r:0)+t.scrollTop)?s:0}}function tt(t){const e=t?t.transform:null,i=e&&e.baseVal;return i&&i.numberOfItems?i.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}}function et(t){var e=this;const n=t[0]instanceof Date,s=(n?t.map(Number):t).filter(function(t,n,s){return i(this,e),s.indexOf(t)===n}.bind(this));return n?s.map(function(t){return i(this,e),new Date(t)}.bind(this)):s}function it(t){var e=this;return t&&t.length?t.reduce(function(t,n){return i(this,e),t.concat(n)}.bind(this)):[]}function nt(t){for(var e=this,n=arguments.length,s=Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];if(!s.length||1===s.length&&!s[0])return t;const r=s.shift();return M(t)&&M(r)&&Object.keys(r).forEach(function(n){i(this,e);const s=r[n];M(s)?(t[n]||(t[n]={}),t[n]=nt(t[n],s)):t[n]=z(s)?s.concat():s}.bind(this)),nt.apply(void 0,[t].concat(s))}function st(t,e){var n=this;let s;return void 0===e&&(e=!0),t[0]instanceof Date?s=e?function(t,e){return i(this,n),t-e}.bind(this):function(t,e){return i(this,n),e-t}.bind(this):e&&!t.every(isNaN)?s=function(t,e){return i(this,n),t-e}.bind(this):e||(s=function(t,e){return i(this,n),(t>e?-1:t<e&&1)||t===e&&0}.bind(this)),t.concat().sort(s)}function at(t,e){var n=this;let s=e.filter(function(t){return i(this,n),I(t)}.bind(this));return s.length?S(s[0])?s=Math[t].apply(Math,s):s[0]instanceof Date&&(s=st(s,"min"===t)[0]):s=void 0,s}const rt=function(t,e,n){void 0===n&&(n=1),i(this,_);const s=[],a=0|Math.max(0,Math.ceil((e-t)/n));for(let e=t;e<a;e++)s.push(t+e*n);return s}.bind(void 0),ot={mouse:function(){var t=this;i(this,_);const e=function(){return i(this,t),{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0}}.bind(this);try{return new MouseEvent("t"),function(n,s,a){void 0===a&&(a=e()),i(this,t),n.dispatchEvent(new MouseEvent(s,a))}.bind(this)}catch(n){return function(n,s,o){void 0===o&&(o=e()),i(this,t);const c=r.createEvent("MouseEvent");c.initMouseEvent(s,o.bubbles,o.cancelable,a,0,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),n.dispatchEvent(c)}.bind(this)}}.bind(void 0)(),touch:function(t,e,n){i(this,_);const s=new Touch(nt({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},n));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[s],targetTouches:[],changedTouches:[s]}))}.bind(void 0)};function ct(t,e){let i=t;for(const t in e)i=i.replace(new RegExp("{="+t+"}","g"),e[t]);return i}function lt(t){let e;if(t instanceof Date)e=t;else if(A(t)){var i;const n=this.config;e=null!=(i=this.format.dataTime(n.data_xFormat)(t))?i:new Date(t)}else S(t)&&!isNaN(t)&&(e=new Date(+t));return e&&!isNaN(+e)||console&&console.error&&console.error("Failed to parse x '"+t+"' to Date object"),e}function dt(){return!1===(null==r?void 0:r.hidden)||"visible"===(null==r?void 0:r.visibilityState)}function ut(t,e){var n=this;!1===e()?c(function(){return i(this,n),ut(t,e)}.bind(this)):t()}function ht(t){const e=t,n=e.config;let s="";if(D(n.data_type||n.data_types)&&!e[u.LINE])s="line";else for(const t in u){const i=d[t];if(e.hasType(i)&&!e[u[t]]){s=i;break}}s&&function(t,e){var i;(null==(i=a.console)?void 0:i.error)&&(console.error("❌ [billboard.js] "+t,"background:red;color:white;display:block;font-size:15px",e),console.info("%cℹ️","font-size:15px","https://github.com/naver/billboard.js/wiki/CHANGELOG-v2#modularization-by-its-functionality"));throw Error("[billboard.js] "+t.replace(/\%c([a-z-]+)/i,"'$1' ")+" "+e)}("Please, make sure if %c"+function(t,e){var n=this;return void 0===e&&(e="-"),t.split(e).map(function(t,e){return i(this,n),e?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()}.bind(this)).join("")}(s),"module has been imported and specified correctly.")}function gt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function ft(t){for(var e,i=1;i<arguments.length;i++)e=null!=arguments[i]?arguments[i]:{},i%2?gt(Object(e),!0).forEach((function(i){b(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):gt(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}));return t}const pt={button:"bb-button",chart:"bb-chart",empty:"bb-empty",main:"bb-main",target:"bb-target",EXPANDED:"_expanded_"},xt={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcRange:"bb-arc-range",arcs:"bb-arcs",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsTitle:"bb-chart-arcs-title",needle:"bb-needle"},bt={area:"bb-area",areas:"bb-areas"},mt={axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label"},_t={bar:"bb-bar",bars:"bb-bars",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars"},vt={candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",valueDown:"bb-value-down",valueUp:"bb-value-up"},yt={chartCircles:"bb-chart-circles",circle:"bb-circle",circles:"bb-circles"},Tt={colorPattern:"bb-color-pattern",colorScale:"bb-colorscale"},wt={dragarea:"bb-dragarea",INCLUDED:"_included_"},At={chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",gaugeValue:"bb-gauge-value"},St={legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile"},kt={chartLine:"bb-chart-line",chartLines:"bb-chart-lines",line:"bb-line",lines:"bb-lines"},Rt={eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single"},Ct={focused:"bb-focused",defocused:"bb-defocused",legendItemFocused:"bb-legend-item-focused",xgridFocus:"bb-xgrid-focus",ygridFocus:"bb-ygrid-focus"},Et={grid:"bb-grid",gridLines:"bb-grid-lines",xgrid:"bb-xgrid",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids"},Ot="bb-level",Lt="bb-levels",Pt={chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars"},Dt={region:"bb-region",regions:"bb-regions"},It={selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",SELECTED:"_selected_"},zt={shape:"bb-shape",shapes:"bb-shapes"},Mt={brush:"bb-brush",subchart:"bb-subchart"},$t={chartText:"bb-chart-text",chartTexts:"bb-chart-texts",text:"bb-text",texts:"bb-texts",title:"bb-title",TextOverlapping:"text-overlapping"},Xt={tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name"},Ft={treemap:"bb-treemap",chartTreemap:"bb-chart-treemap",chartTreemaps:"bb-chart-treemaps"},Bt={buttonZoomReset:"bb-zoom-reset",zoomBrush:"bb-zoom-brush"};var Nt=ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft({},pt),xt),bt),mt),_t),vt),yt),Tt),wt),At),St),kt),Rt),Ct),Et),Pt),Dt),It),zt),Mt),$t),Xt),Ft),Bt);const jt={element:function(){return{chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,candlestick:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null,zoomResetBtn:null}},state:function(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasRadar:!1,hasTreemap:!1,cssRule:{},current:{domain:void 0,width:0,height:0,dataMax:0,maxTickSize:{x:{width:0,height:0,ticks:[],clipPath:0,domain:""},y:{width:0,height:0,domain:""},y2:{width:0,height:0,domain:""}},types:[],needle:void 0},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,eventReceiver:{currentIdx:-1,rect:{},data:[],coords:[]},axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},event:null,dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,redrawing:!1,resizing:!1,toggling:!1,zooming:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",orgConfig:{},hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,outerRadius:void 0,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null}}}};let Gt=function(){function t(){var t=this;Object.keys(jt).forEach(function(e){i(this,t),this[e]=new jt[e]}.bind(this))}return t.prototype.getStore=function(t){return this[t]},t}();var Vt={bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding:!0,padding_mode:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,resize_timer:!0,onclick:void 0,onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:250,plugins:[],render:{},regions:[]},Yt={boost_useCssRule:!1,boost_useWorker:!1},Ht=void 0,Ut={data_x:void 0,data_idConverter:function(t){return i(this,Ht),t}.bind(void 0),data_names:{},data_classes:{},data_type:void 0,data_types:{},data_order:"desc",data_groups:[],data_groupsZeroAs:"positive",data_color:void 0,data_colors:{},data_labels:{},data_labels_backgroundColors:void 0,data_labels_colors:void 0,data_labels_position:{},data_hide:!1,data_filter:void 0,data_onclick:function(){i(this,Ht)}.bind(void 0),data_onover:function(){i(this,Ht)}.bind(void 0),data_onout:function(){i(this,Ht)}.bind(void 0),data_onshown:void 0,data_onhidden:void 0,data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:""},Wt={color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0},Zt={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{}},qt={legend_contents_bindto:void 0,legend_contents_template:"<span style='color:#fff;padding:5px;background-color:{=COLOR}'>{=TITLE}</span>",legend_equally:!1,legend_hide:!1,legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_interaction:!0,legend_item_dblclick:!1,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_item_tile_width:10,legend_item_tile_height:10,legend_item_tile_r:5,legend_item_tile_type:"rectangle",legend_format:void 0,legend_padding:0,legend_position:"bottom",legend_show:!0,legend_tooltip:!1,legend_usePoint:!1},Kt={title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"},Jt=void 0,Qt={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:void 0,tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){i(this,Jt)}.bind(void 0),tooltip_onhide:function(){i(this,Jt)}.bind(void 0),tooltip_onshown:function(){i(this,Jt)}.bind(void 0),tooltip_onhidden:function(){i(this,Jt)}.bind(void 0),tooltip_order:null};function te(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function ee(t){for(var e,i=1;i<arguments.length;i++)e=null!=arguments[i]?arguments[i]:{},i%2?te(Object(e),!0).forEach((function(i){b(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):te(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}));return t}let ie=function(){function t(){return function(){var t=this;const e=function(n){if(i(this,t),M(n)&&n.constructor){const t=new n.constructor;for(const i in n)t[i]=e(n[i]);return t}return n}.bind(this);for(var n=arguments.length,s=Array(n),a=0;a<n;a++)s[a]=arguments[a];return s.map(function(n){return i(this,t),e(n)}.bind(this)).reduce(function(e,n){return i(this,t),y(y({},e),n)}.bind(this))}(Vt,Yt,Ut,Wt,Zt,qt,Kt,Qt,t.data)}return t.setOptions=function(t){var e=this;this.data=t.reduce(function(t,n){return i(this,e),ee(ee({},t),n)}.bind(this),this.data)},t}();ie.data={};const ne="$baseLength",se="__colorPattern__",ae="$dataMinMax",re="$dataTotalSum",oe="$totalPerIndex",ce="legendItemTextBox",le="$radarPoints",de="$radarTextWidth",ue="setOverOut",he="callOverOutForTouch",ge="textRect";let fe=function(){function t(){this.cache={}}var e=t.prototype;return e.add=function(t,e,i){return void 0===i&&(i=!1),this.cache[t]=i?this.cloneTarget(e):e,this.cache[t]},e.remove=function(t){var e=this;(A(t)?[t]:t).forEach(function(t){return i(this,e),delete this.cache[t]}.bind(this))},e.get=function(t,e){if(void 0===e&&(e=!1),e&&Array.isArray(t)){const e=[];for(let i,n=0;i=t[n];n++)i in this.cache&&e.push(this.cloneTarget(this.cache[i]));return e}{const e=this.cache[t];return T(e)?e:null}},e.reset=function(t){const e=this;for(const i in e.cache)(t||/^\$/.test(i))&&(e.cache[i]=null)},e.cloneTarget=function(t){var e=this;return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return i(this,e),{x:t.x,value:t.value,id:t.id}}.bind(this))}},t}();const pe=a.setTimeout,xe=a.clearTimeout;function be(){let t=[];const e=function(e,n){var s=this;ut(function(){i(this,s),null==n||n()}.bind(this),(function(){let e=0;for(let i,n=0;i=t[n];n++)if(!0===i||null!=i.empty&&i.empty())e++;else{if(!1===dt()){e=t.length;break}try{i.transition()}catch(t){e++}}return e===t.length}))};return e.add=function(e){z(e)?t=t.concat(e):t.push(e)},e}const me={};function _e(t,e,i,n){void 0===t&&(t=!0);let s=function(){const t=e.apply(void 0,arguments);i(t)};if(a.Worker&&t){const t=function(t,e){const i=t.toString(),n=i.replace(/(function|[\s\W\n])/g,"").substring(0,15);var s;return n in me||(me[n]=new a.Blob([(null!=(s=null==e?void 0:e.map(String).join(";"))?s:"")+"\n\n\t\t\tself.onmessage=function({data}) {\n\t\t\t\tconst result = ("+i+").apply(null, data);\n\t\t\t\tself.postMessage(result);\n\t\t\t};"],{type:"text/javascript"})),a.URL.createObjectURL(me[n])}(e,n),r=function(t){const e=new a.Worker(t);return e.onerror=function(t){console.error?console.error(t):console.log(t)},e}(t);s=function(){for(var e=arguments.length,n=Array(e),s=0;s<e;s++)n[s]=arguments[s];r.postMessage(n),r.onmessage=function(e){return a.URL.revokeObjectURL(t),i(e.data)}}}return s}var ve=p(5);function ye(t){const e=[];return t.forEach((function(t,i){const n=t[0];t.forEach((function(t,s){if(s>0){if(void 0===e[s-1]&&(e[s-1]={}),void 0===t)throw new Error("Source data is missing a component at ("+i+", "+s+")!");e[s-1][n]=t}}))})),e}function Te(t){const e=t[0],i=[];return t.forEach((function(t,n){if(n>0){const s={};t.forEach((function(t,i){if(void 0===t)throw new Error("Source data is missing a component at ("+n+", "+i+")!");s[e[i]]=t})),i.push(s)}})),i}function we(t,e){const i=[];let n,s;if(Array.isArray(t)){const a=function(t,e){if(void 0!==t[e])return t[e];const i=e.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split(".");let n=t;return i.some((function(t){return!(n=n&&t in n?n[t]:void 0)})),n};n=e.x?e.value.concat(e.x):e.value,i.push(n),t.forEach((function(t){const e=n.map((function(e){let i=a(t,e);return void 0===i&&(i=null),i}));i.push(e)})),s=Te(i)}else Object.keys(t).forEach((function(e){const n=t[e].concat();null==n.unshift||n.unshift(e),i.push(n)})),s=ye(i);return s}function Ae(t,e){var n=this;const s=t.rows(e);let a;return 1===s.length?(a=[{}],s[0].forEach(function(t){i(this,n),a[0][t]=null}.bind(this))):a=t.parse(e),a}function Se(t){return Ae({rows:ve.csvParseRows,parse:ve.csvParse},t)}function ke(t){return Ae({rows:ve.tsvParseRows,parse:ve.tsvParse},t)}function Re(t,e){const i=t||(null==e?void 0:e.data_keys);return null!=i&&i.x&&(e.data_x=i.x),i}var Ce={convertData:function(t,e){var n=this;const s=this.config,a=s.boost_useWorker;let r=t;if(t.bindto&&(r={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(e){i(this,n);const s="data_"+e;s in t&&(r[e]=t[s])}.bind(this))),r.url&&e)!function(t,e,i,n,s){void 0===e&&(e="csv");const a=new XMLHttpRequest,r={csv:Se,tsv:ke,json:we};a.open("GET",t),i&&Object.keys(i).forEach((function(t){a.setRequestHeader(t,i[t])})),a.onreadystatechange=function(){if(4===a.readyState){if(200!==a.status)throw new Error(t+": Something went wrong loading!");{const t=a.responseText;t&&s.call(this,r[e]("json"===e?JSON.parse(t):t,n))}}},a.send()}(r.url,r.mimeType,r.headers,Re(r.keys,s),e);else if(r.json)_e(a,we,e,[ye,Te])(r.json,Re(r.keys,s));else if(r.rows)_e(a,Te,e)(r.rows);else if(r.columns)_e(a,ye,e)(r.columns);else if(t.bindto)throw Error("url or json or rows or columns is required.")},convertDataToTargets:function(t,e){var n=this;const s=this,a=s.axis,r=s.config,o=s.state,c=r.data_type;let l=!1,d=!1,u=!1;a&&(l=a.isCategorized(),d=a.isTimeSeries(),u=a.isCustomX());const h=Object.keys(t[0]||{}),g=h.length?h.filter(s.isNotX,s):[],f=h.length?h.filter(s.isX,s):[];let p;g.forEach(function(a){var o=this;i(this,n);const c=this.getXKey(a);u||d?f.indexOf(c)>=0?p=(e&&s.data.xs[a]||[]).concat(t.map(function(t){return i(this,o),t[c]}.bind(this)).filter(T).map(function(t,e){return i(this,o),s.generateTargetX(t,a,e)}.bind(this))):r.data_x?p=this.getOtherTargetXs():I(r.data_xs)&&(p=s.getXValuesOfXKey(c,s.data.targets)):p=t.map(function(t,e){return i(this,o),e}.bind(this)),p&&(this.data.xs[a]=p)}.bind(this)),g.forEach(function(t){if(i(this,n),!this.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}.bind(this));const x=g.map(function(e,a){var c=this;i(this,n);const d=r.data_idConverter.bind(s.api)(e),h=s.getXKey(e),g=u&&l,f=g&&t.map(function(t){return i(this,c),t.x}.bind(this)).every(function(t){return i(this,c),r.axis_x_categories.indexOf(t)>-1}.bind(this)),p=t.__append__,x=null===h&&p?s.api.data.values(e).length:0;return{id:d,id_org:e,values:t.map(function(t,n){i(this,c);const l=t[h];let u,b=t[e];return b=null===b||isNaN(b)||M(b)?z(b)||M(b)?b:null:+b,!g&&!o.hasRadar||0!==a||k(l)?u=s.generateTargetX(l,e,x+n):(f||0!==a||0!==n||p||(r.axis_x_categories=[]),u=r.axis_x_categories.indexOf(l),-1===u&&(u=r.axis_x_categories.length,r.axis_x_categories.push(l))),(k(b)||s.data.xs[e].length<=n)&&(u=void 0),{x:u,value:b,id:d,index:-1}}.bind(this)).filter(function(t){return i(this,c),R(t.x)}.bind(this))}}.bind(this));if(x.forEach(function(t){var e,a=this;i(this,n),r.data_xSort&&(t.values=t.values.sort(function(t,e){i(this,a);return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)}.bind(this))),t.values.forEach(function(t,e){return i(this,a),t.index=e}.bind(this)),null==(e=s.data.xs[t.id])||e.sort(function(t,e){return i(this,a),t-e}.bind(this))}.bind(this)),o.hasNegativeValue=s.hasNegativeValueInTargets(x),o.hasPositiveValue=s.hasPositiveValueInTargets(x),c&&s.isValidChartType(c)){const t=s.mapToIds(x).filter(function(t){return i(this,n),!(t in r.data_types)||!s.isValidChartType(r.data_types[t])}.bind(this));s.setTargetType(t,c)}return x.forEach(function(t){return i(this,n),s.cache.add(t.id_org,t,!0)}.bind(this)),x}},Ee={isX:function(t){const e=this.config,n=e.data_x&&t===e.data_x,s=I(e.data_xs)&&function(t,e){var n=this;let s=!1;return Object.keys(t).forEach(function(a){return i(this,n),t[a]===e&&(s=!0)}.bind(this)),s}(e.data_xs,t);return n||s},isNotX:function(t){return!this.isX(t)},isStackNormalized:function(){const t=this.config;return!(!t.data_stack_normalize||!t.data_groups.length)},isGrouped:function(t){var e=this;const n=this.config.data_groups;return t?n.some(function(n){return i(this,e),n.indexOf(t)>=0&&n.length>1}.bind(this)):n.length>0},getXKey:function(t){const e=this.config;return e.data_x?e.data_x:I(e.data_xs)?e.data_xs[t]:null},getXValuesOfXKey:function(t,e){var n=this;const s=this;let a;return(e&&I(e)?s.mapToIds(e):[]).forEach(function(e){i(this,n),s.getXKey(e)===t&&(a=s.data.xs[e])}.bind(this)),a},getIndexByX:function(t,e){return e?e.indexOf(A(t)?t:+t):(this.filterByX(this.data.targets,t)[0]||{index:null}).index},getXValue:function(t,e){const i=this;return t in i.data.xs&&i.data.xs[t]&&T(i.data.xs[t][e])?i.data.xs[t][e]:e},getOtherTargetXs:function(){const t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},getOtherTargetX:function(t){const e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function(t){var e=this;const n=this.config;Object.keys(t).forEach(function(s){i(this,e),n.data_xs[s]=t[s]}.bind(this))},isMultipleX:function(){return I(this.config.data_xs)||this.hasType("bubble")||this.hasType("scatter")},addName:function(t){const e=this.config;let i;return t&&(i=e.data_names[t.id],t.name=void 0!==i?i:t.id),t},getAllValuesOnIndex:function(t,e){var n=this;void 0===e&&(e=!1);const s=this;let a=s.filterTargetsToShow(s.data.targets).map(function(e){return i(this,n),s.addName(s.getValueOnIndex(e.values,t))}.bind(this));return e&&(a=a.filter(function(t){return i(this,n),t&&"value"in t&&T(t.value)}.bind(this))),a},getValueOnIndex:function(t,e){var n=this;const s=t.filter(function(t){return i(this,n),t.index===e}.bind(this));return s.length?s[0]:null},updateTargetX:function(t,e){var n=this;const s=this;t.forEach(function(t){var a=this;i(this,n),t.values.forEach(function(n,r){i(this,a),n.x=s.generateTargetX(e[r],t.id,r)}.bind(this)),s.data.xs[t.id]=e}.bind(this))},updateTargetXs:function(t,e){var n=this;const s=this;t.forEach(function(t){i(this,n),e[t.id]&&s.updateTargetX([t],e[t.id])}.bind(this))},generateTargetX:function(t,e,i){const n=this,s=n.axis;let a=null!=s&&s.isCategorized()?i:t||i;if(null!=s&&s.isTimeSeries()){const s=lt.bind(n);a=s(t||n.getXValue(e,i))}else null==s||!s.isCustomX()||null!=s&&s.isCategorized()||(a=T(t)?+t:n.getXValue(e,i));return a},updateXs:function(t){var e=this;t.length&&(this.axis.xs=t.map(function(t){return i(this,e),t.x}.bind(this)))},getPrevX:function(t){const e=this.axis.xs[t-1];return R(e)?e:null},getNextX:function(t){const e=this.axis.xs[t+1];return R(e)?e:null},getBaseValue:function(t){const e=this,i=e.state.hasAxis;let n=t.value;return n&&i&&(e.isAreaRangeType(t)?n=e.getRangedData(t,"mid"):e.isBubbleZType(t)&&(n=e.getBubbleZData(n,"y"))),n},getMinMaxValue:function(t){var e=this;const n=this.getBaseValue.bind(this);let s,a;return(t||this.data.targets.map(function(t){return i(this,e),t.values}.bind(this))).forEach(function(t,r){i(this,e);const o=t.map(n).filter(S);s=Math.min.apply(Math,[r?s:1/0].concat(o)),a=Math.max.apply(Math,[r?a:-1/0].concat(o))}.bind(this)),{min:s,max:a}},getMinMaxData:function(){var t=this;const e=this,n=ae;let s=e.cache.get(n);if(!s){const a=e.data.targets.map(function(e){return i(this,t),e.values}.bind(this)),r=e.getMinMaxValue(a);let o=[],c=[];a.forEach(function(n){i(this,t);const s=e.getFilteredDataByValue(n,r.min),a=e.getFilteredDataByValue(n,r.max);s.length&&(o=o.concat(s)),a.length&&(c=c.concat(a))}.bind(this)),e.cache.add(n,s={min:o,max:c})}return s},getTotalPerIndex:function(){var t=this;const e=this,n=oe;let s=e.cache.get(n);return!e.config.data_groups.length&&!e.isStackNormalized()||s||(s=[],e.data.targets.forEach(function(e){var n=this;i(this,t),e.values.forEach(function(t,e){i(this,n),s[e]||(s[e]=0),s[e]+=S(t.value)?t.value:0}.bind(this))}.bind(this))),s},getTotalDataSum:function(t){var e=this;const n=this,s=re;let a=n.cache.get(s);if(!S(a)){const t=it(n.data.targets.map(function(t){return i(this,e),t.values}.bind(this))).map(function(t){return i(this,e),t.value}.bind(this));a=t.length?t.reduce(function(t,n){return i(this,e),t+n}.bind(this)):0,n.cache.add(s,a)}return t&&(a-=n.getHiddenTotalDataSum()),a},getHiddenTotalDataSum:function(){var t=this;const e=this.api,n=this.state.hiddenTargetIds;let s=0;return n.length&&(s=e.data.values.bind(e)(n).reduce(function(e,n){return i(this,t),e+n}.bind(this))),s},getFilteredDataByValue:function(t,e){var n=this;return t.filter(function(t){return i(this,n),this.getBaseValue(t)===e}.bind(this))},getMaxDataCount:function(){var t=this;return Math.max.apply(Math,this.data.targets.map(function(e){return i(this,t),e.values.length}.bind(this)).concat([0]))},getMaxDataCountTarget:function(){var t=this;let e=this.filterTargetsToShow()||[];const n=e.length,s=this.config.axis_x_inverted;return n>1?(e=e.map(function(e){return i(this,t),e.values}.bind(this)).reduce(function(e,n){return i(this,t),e.concat(n)}.bind(this)).map(function(e){return i(this,t),e.x}.bind(this)),e=st(et(e)).map(function(e,n,a){return i(this,t),{x:e,index:s?a.length-n-1:n}}.bind(this))):n&&(e=e[0].values.concat()),e},mapToIds:function(t){var e=this;return t.map(function(t){return i(this,e),t.id}.bind(this))},mapToTargetIds:function(t){return t?z(t)?t.concat():[t]:this.mapToIds(this.data.targets)},hasTarget:function(t,e){const i=this.mapToIds(t);for(let t,n=0;t=i[n];n++)if(t===e)return!0;return!1},isTargetToShow:function(t){return this.state.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function(t){return this.state.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function(t){var e=this;const n=this;return(t||n.data.targets).filter(function(t){return i(this,e),n.isTargetToShow(t.id)}.bind(this))},mapTargetsToUniqueXs:function(t){var e=this;const n=this.axis;let s=[];return null!=t&&t.length&&(s=et(it(t.map(function(t){var n=this;return i(this,e),t.values.map(function(t){return i(this,n),+t.x}.bind(this))}.bind(this)))),s=null!=n&&n.isTimeSeries()?s.map(function(t){return i(this,e),new Date(+t)}.bind(this)):s.map(Number)),st(s)},addTargetIds:function(t,e){var n=this;const s=this.state;(z(e)?e:[e]).forEach(function(e){i(this,n),s[t].indexOf(e)<0&&s[t].push(e)}.bind(this))},removeTargetIds:function(t,e){var n=this;const s=this.state;(z(e)?e:[e]).forEach(function(e){i(this,n);const a=s[t].indexOf(e);a>=0&&s[t].splice(a,1)}.bind(this))},addHiddenTargetIds:function(t){this.addTargetIds("hiddenTargetIds",t)},removeHiddenTargetIds:function(t){this.removeTargetIds("hiddenTargetIds",t)},addHiddenLegendIds:function(t){this.addTargetIds("hiddenLegendIds",t)},removeHiddenLegendIds:function(t){this.removeTargetIds("hiddenLegendIds",t)},getValuesAsIdKeyed:function(t){var e=this;const n=this,s=n.state.hasAxis,a={},r=n.isMultipleX(),o=r?n.mapTargetsToUniqueXs(t).map(function(t){return i(this,e),A(t)?t:+t}.bind(this)):null;return t.forEach(function(t){var c=this;i(this,e);const l=[];t.values.filter(function(t){let e=t.value;return i(this,c),T(e)||null===e}.bind(this)).forEach(function(t){i(this,c);let e=t.value;null!==e&&n.isCandlestickType(t)&&(e=z(e)?e.slice(0,4):[e.open,e.high,e.low,e.close]),z(e)?l.push.apply(l,e):M(e)&&"high"in e?l.push.apply(l,Object.values(e)):n.isBubbleZType(t)?l.push(s&&n.getBubbleZData(e,"y")):r?l[n.getIndexByX(t.x,o)]=e:l.push(e)}.bind(this)),a[t.id]=l}.bind(this)),a},checkValueInTargets:function(t,e){const i=Object.keys(t);let n;for(let s=0;s<i.length;s++){n=t[i[s]].values;for(let t=0;t<n.length;t++)if(e(n[t].value))return!0}return!1},hasMultiTargets:function(){return this.filterTargetsToShow().length>1},hasNegativeValueInTargets:function(t){var e=this;return this.checkValueInTargets(t,function(t){return i(this,e),t<0}.bind(this))},hasPositiveValueInTargets:function(t){var e=this;return this.checkValueInTargets(t,function(t){return i(this,e),t>0}.bind(this))},orderTargets:function(t){const e=[].concat(t),i=this.getSortCompareFn();return i&&e.sort(i),e},getSortCompareFn:function(t){var e=this;void 0===t&&(t=!1);const n=this,s=n.config.data_order,a=/asc/i.test(s),r=/desc/i.test(s);let o;if(a||r){const n=function(t,n){return i(this,e),t+Math.abs(n.value)}.bind(this),s=function(t){return i(this,e),S(t)?t:"values"in t?t.values.reduce(n,0):t.value}.bind(this);o=function(n,r){i(this,e);const o=s(n),c=s(r);return t?a?o-c:c-o:a?c-o:o-c}.bind(this)}else w(s)&&(o=s.bind(n.api));return o||null},filterByX:function(t,e){var n=this;return it(t.map(function(t){return i(this,n),t.values}.bind(this))).filter(function(t){return i(this,n),t.x-e==0}.bind(this))},filterRemoveNull:function(t){var e=this;return t.filter(function(t){return i(this,e),T(this.getBaseValue(t))}.bind(this))},filterByXDomain:function(t,e){var n=this;return t.map(function(t){var s=this;return i(this,n),{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return i(this,s),e[0]<=t.x&&t.x<=e[1]}.bind(this))}}.bind(this))},hasDataLabel:function(){const t=this.config.data_labels;return C(t)&&t||P(t)&&I(t)},getDataIndexFromEvent:function(t){const e=this,i=e.$el,n=e.config,a=e.state,r=a.hasRadar,o=a.inputType,c=a.eventReceiver,l=c.coords,d=c.rect;let u;if(r){let e=t.target;/tspan/i.test(e.tagName)&&(e=e.parentNode);const i=(0,s.select)(e).datum();u=i&&1===Object.keys(i).length?i.index:void 0}else{const e=n.axis_rotated,s=Q(i.chart.node()),a="touch"===o&&t.changedTouches?t.changedTouches[0]:t;u=W(l,e?a.clientY+s.y-d.top:a.clientX+s.x-d.left,0,l.length-1,e)}return u},getDataLabelLength:function(t,e,n){var s=this;const a=this,r=[0,0];return a.$el.chart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return i(this,s),a.dataLabelFormat(t.id)(t)}.bind(this)).each((function(t,e){r[e]=1.3*this.getBoundingClientRect()[n]})).remove(),r},isNoneArc:function(t){return this.hasTarget(this.data.targets,t.id)},isArc:function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function(t,e){const i=t[e].x,n=[];let s;for(s=e-1;s>=0&&i===t[s].x;s--)n.push(t[s]);for(s=e;s<t.length&&i===t[s].x;s++)n.push(t[s]);return n},findClosestFromTargets:function(t,e){var n=this;const s=this,a=t.map(function(t){return i(this,n),s.findClosest(t.values,e)}.bind(this));return s.findClosest(a,e)},findClosest:function(t,e){var n=this;const s=this,a=s.$el.main,r=t.filter(function(t){return i(this,n),t&&T(t.value)}.bind(this));let o,c;return r.filter(function(t){return i(this,n),s.isBarType(t.id)||s.isCandlestickType(t.id)}.bind(this)).forEach(function(t){i(this,n);const e=s.isBarType(t.id)?"."+_t.chartBar+"."+pt.target+s.getTargetSelectorSuffix(t.id)+" ."+_t.bar+"-"+t.index:"."+vt.chartCandlestick+"."+pt.target+s.getTargetSelectorSuffix(t.id)+" ."+vt.candlestick+"-"+t.index+" path";!c&&s.isWithinBar(a.select(e).node())&&(c=t)}.bind(this)),r.filter(function(t){return i(this,n),!s.isBarType(t.id)&&!s.isCandlestickType(t.id)}.bind(this)).forEach(function(t){i(this,n);const a=s.dist(t,e);o=s.getPointSensitivity(t),a<o&&(o=a,c=t)}.bind(this)),c},dist:function(t,e){const i=this,n=i.config.axis_rotated,s=i.scale,a=i.circleY(t,t.index),r=(s.zoom||s.x)(t.x);return Math.sqrt(Math.pow(r-e[+n],2)+Math.pow(a-e[+!n],2))},convertValuesToStep:function(t){const e=this.axis,i=this.config.line_step_type,n=!!e&&e.isCategorized(),s=z(t)?t.concat():[t];if(!n&&!/step\-(after|before)/.test(i))return t;if(s.length){const t=s[0],e=s[s.length-1],a=t.id;let r=t.x;s.unshift({x:--r,value:t.value,id:a}),n&&"step-after"===i&&s.unshift({x:--r,value:t.value,id:a}),r=e.x,s.push({x:++r,value:e.value,id:a}),n&&"step-before"===i&&s.push({x:++r,value:e.value,id:a})}return s},convertValuesToRange:function(t){var e=this;const n=z(t)?t.concat():[t],s=[];return n.forEach(function(t){i(this,e);const n=t.x,a=t.id;s.push({x:n,id:a,value:t.value[0]}),s.push({x:n,id:a,value:t.value[2]})}.bind(this)),s},updateDataAttributes:function(t,e){var n=this;const s=this.config["data_"+t];return k(e)||(Object.keys(e).forEach(function(t){i(this,n),s[t]=e[t]}.bind(this)),this.redraw({withLegend:!0})),s},getRangedData:function(t,e,n){var s=this;void 0===e&&(e=""),void 0===n&&(n="areaRange");const a=null==t?void 0:t.value;if(z(a)){if("bar"===n)return a.reduce(function(t,e){return i(this,s),e-t}.bind(this));{const t={areaRange:["high","mid","low"],candlestick:["open","high","low","close","volume"]}[n].indexOf(e);return t>=0&&a?a[t]:void 0}}return a&&e?a[e]:a},setRatioForGroupedData:function(t){var e=this;const n=this;if(n.config.data_groups.length&&t.some(function(t){return i(this,e),n.isGrouped(t.id)}.bind(this))){const s=function(t){return i(this,e),n.getRatio("index",t,!0)}.bind(this);t.forEach(function(t){i(this,e),"values"in t?t.values.forEach(s):s(t)}.bind(this))}},getRatio:function(t,e,n){var s=this;void 0===n&&(n=!1);const a=this,r=a.config,o=a.state,c=a.api;let l=0;if(e&&c.data.shown().length)if(l=e.ratio||e.value,"arc"===t)if(a.pie.padAngle()())l=e.value/a.getTotalDataSum(!0);else{const t=r.gauge_fullCircle?a.getArcLength():-2*a.getStartingAngle(),i=a.hasType("gauge")?t:2*Math.PI;l=(e.endAngle-e.startAngle)/i}else if("index"===t){const t=c.data.values.bind(c);let n=this.getTotalPerIndex();if(o.hiddenTargetIds.length){let e=t(o.hiddenTargetIds,!1);e.length&&(e=e.reduce(function(t,e){var n=this;return i(this,s),t.map(function(t,s){return i(this,n),(S(t)?t:0)+e[s]}.bind(this))}.bind(this)),n=n.map(function(t,n){return i(this,s),t-e[n]}.bind(this)))}const a=n[e.index];e.ratio=S(e.value)&&n&&a?e.value/a:0,l=e.ratio}else if("radar"===t)l=parseFloat(Math.max(e.value,0)+"")/o.current.dataMax*r.radar_size_ratio;else if("bar"===t){const n=a.getYScaleById.bind(a)(e.id).domain().reduce(function(t,e){return i(this,s),e-t}.bind(this));l=0===n?0:Math.abs(a.getRangedData(e,null,t)/n)}else"treemap"===t&&(l/=a.getTotalDataSum(!0));return n&&l?100*l:l},updateDataIndexByX:function(t){var e=this;const n=t.reduce(function(t,n,s){return i(this,e),t[+n.x]=s,t}.bind(this),{});this.data.targets.forEach(function(t){var s=this;i(this,e),t.values.forEach(function(t,e){i(this,s);let a=n[+t.x];void 0===a&&(a=e),t.index=a}.bind(this))}.bind(this))},isBubbleZType:function(t){return this.isBubbleType(t)&&(M(t.value)&&("z"in t.value||"y"in t.value)||z(t.value)&&t.value.length>=2)},isBarRangeType:function(t){var e=this;const n=t.value;return this.isBarType(t)&&z(n)&&n.length>=2&&n.every(function(t){return i(this,e),S(t)}.bind(this))},getDataById:function(t){var e;const i=this.cache.get(t)||this.api.data(t);return null!=(e=null==i?void 0:i[0])?e:i}};function Oe(t,e){void 0===e&&(e=!1);const i=this.api;e&&this.api.flush(!0),null==t||t.call(i)}var Le={load:function(t,e){var n=this;const s=this,a=s.axis,r=s.data,o=s.org,c=s.scale,l=e.append,d={domain:null,currentDomain:null,x:null};let u=t;u&&(e.filter&&(u=u.filter(e.filter)),(e.type||e.types)&&u.forEach(function(t){var a;i(this,n);const r=(null==(a=e.types)?void 0:a[t.id])||e.type;s.setTargetType(t.id,r)}.bind(this)),r.targets.forEach(function(t){i(this,n);for(let e=0;e<u.length;e++)if(t.id===u[e].id){t.values=l?t.values.concat(u[e].values):u[e].values,u.splice(e,1);break}}.bind(this)),r.targets=r.targets.concat(u)),s.updateTargets(r.targets),c.zoom&&(d.x=a.isCategorized()?c.x.orgScale():(o.xScale||c.x).copy(),d.domain=s.getXDomain(r.targets),d.x.domain(d.domain),d.currentDomain=s.zoom.getDomain(),s.withinRange(d.currentDomain,void 0,d.domain)||(c.x.domain(d.domain),c.zoom=null,s.$el.eventRect.property("__zoom",null))),s.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),c.zoom&&(o.xDomain=d.domain,o.xScale=d.x,a.isCategorized()&&(d.currentDomain=s.getZoomDomainValue(d.currentDomain),o.xDomain=s.getZoomDomainValue(o.xDomain),o.xScale=d.x.domain(o.xDomain)),s.updateCurrentZoomTransform(d.x,d.currentDomain)),s.updateTypesElements(),Oe.call(s,e.done,e.resizeAfter)},loadFromArgs:function(t){var e=this;const n=this;n.config&&(n.cache.reset(),n.convertData(t,function(s){i(this,e);const a=t.data||s;t.append&&(a.__append__=!0),a&&n.load(n.convertDataToTargets(a),t)}.bind(this)))},unload:function(t,e){var n=this;const s=this,a=s.state,r=s.$el,o=s.$T,c=!(null==s.hasLegendDefsPoint||!s.hasLegendDefsPoint());let l=e,d=t;if(s.cache.reset(),l||(l=function(){i(this,n)}.bind(this)),d=d.filter(function(t){return i(this,n),s.hasTarget(s.data.targets,t)}.bind(this)),!d||0===d.length)return void l();o(r.svg.selectAll(d.map(function(t){return i(this,n),s.selectorTarget(t)}.bind(this)))).style("opacity","0").remove().call(F,l),d.forEach(function(t){var e,o=this;i(this,n);const l=s.getTargetSelectorSuffix(t);a.withoutFadeIn[t]=!1,r.legend&&r.legend.selectAll("."+St.legendItem+l).remove(),s.data.targets=s.data.targets.filter(function(e){return i(this,o),e.id!==t}.bind(this)),c&&(null==(e=r.defs)||e.select("#"+s.getDefsPointId(l)).remove())}.bind(this)),a.hasTreemap&&s.updateTargetsForTreemap(s.data.targets),s.updateTypesElements()}},Pe=p(6),De={setExpand:function(t,e,i){const n=this,s=n.config;n.$el.circle&&s.point_focus_expand_enabled&&n.expandCircles(t,e,i),n.expandBarTypeShapes(!0,t,e,i)},expandBarTypeShapes:function(t,e,n,s){var a=this;void 0===t&&(t=!0);const r=this;["bar","candlestick"].filter(function(t){return i(this,a),r.$el[t]}.bind(this)).forEach(function(o){i(this,a),s&&r.$el[o].classed(pt.EXPANDED,!1),r.getShapeByIndex(o,e,n).classed(pt.EXPANDED,t)}.bind(this))},setOverOut:function(t,e){var n=this;const a=this,r=a.config,o=a.state,c=o.hasRadar,l=o.hasTreemap,d=a.$el.main,u=M(e);if(u||-1!==e){const o=r[t?"data_onover":"data_onout"].bind(a.api);if(r.color_onover&&a.setOverColor(t,e,u),u){const t=l?Ft.treemap:xt.arc;o(e,d.select("."+t+a.getTargetSelectorSuffix(e.id)).node())}else if(r.tooltip_grouped)t&&(c&&a.isPointFocusOnly()?a.showCircleFocus(a.getAllValuesOnIndex(e,!0)):a.setExpand(e,null,!0)),a.isMultipleX()||d.selectAll("."+zt.shape+"-"+e).each((function(t){o(t,this)}));else{const c=a.cache.get(ue)||[],l=d.selectAll("."+zt.shape+"-"+e).filter((function(t){return a.isWithinShape(this,t)})),u=l.filter((function(){var t=this;return c.every(function(e){return i(this,t),e!==this}.bind(this))}));if(!t||l.empty()||c.length===u.size()&&u.nodes().every(function(t,e){return i(this,n),t!==c[e]}.bind(this)))for(;c.length;){const t=c.pop();r.data_onout.bind(a.api)((0,s.select)(t).datum(),t)}u.each((function(){t&&(o((0,s.select)(this).datum(),this),c.push(this))})),a.cache.add(ue,c)}}},callOverOutForTouch:function(t){const e=this,i=e.cache.get(he);(M(t)&&i?t.id!==i.id:t!==i)&&((i||S(i))&&e.setOverOut(!1,i),(t||S(t))&&e.setOverOut(!0,t),e.cache.add(he,t))},getDraggableSelection:function(){var t=this;const e=this,n=e.config,s=e.state;return n.interaction_enabled&&n.data_selection_draggable&&e.drag?(0,Pe.drag)().on("drag",(function(t){s.event=t,e.drag(V(t,this))})).on("start",(function(t){s.event=t,e.dragstart(V(t,this))})).on("end",function(n){i(this,t),s.event=n,e.dragend()}.bind(this)):function(){i(this,t)}.bind(this)},dispatchEvent:function(t,e,i){var n;const s=this,a=s.config,r=s.state,o=r.eventReceiver,c=r.hasAxis,l=r.hasRadar,d=r.hasTreemap,u=s.$el,h=u.eventRect,g=u.radar,f=u.treemap,p=null==(n=d&&o.rect||l&&g.axes.select("."+mt.axis+"-"+e+" text")||h||(null==s.getArcElementByIdOrIndex?void 0:s.getArcElementByIdOrIndex(e)))?void 0:n.node();if(p){const n=s.isMultipleX(),r=a.axis_rotated;let u=p.getBoundingClientRect(),h=u.width,g=u.left,x=u.top;if(c&&!l&&!n){const t=o.coords[e];t?(h=t.w,g+=t.x,x+=t.y):(h=0,g=0,x=0)}const b=g+(i?i[0]:0)+(n||r?0:h/2),m=x+(i?i[1]:0)+(r?4:0);ot[/^(mouse|click)/.test(t)?"mouse":"touch"](d?f.node():p,t,{screenX:b,screenY:m,clientX:b,clientY:m,bubbles:l})}},setDragStatus:function(t){this.state.dragging=t},unbindZoomEvent:function(){const t=this.$el,e=t.eventRect,i=t.zoomResetBtn;null==e||e.on(".zoom wheel.zoom .drag",null),null==i||i.on("click",null).style("display","none")},unbindAllEvents:function(){var t=this;const e=this,n=e.$el,s=n.arcs,a=n.eventRect,r=n.legend,o=n.region,c=n.svg,l=n.treemap,d=e.brush;[c,a,null==o?void 0:o.list,null==d?void 0:d.getSelection(),null==s?void 0:s.selectAll("path"),null==r?void 0:r.selectAll("g"),l].forEach(function(e){return i(this,t),null==e?void 0:e.on("wheel click mouseover mousemove mouseout touchstart touchmove touchend touchstart.eventRect touchmove.eventRect touchend.eventRect .brush .drag .zoom wheel.zoom dblclick.zoom",null)}.bind(this)),null==e.unbindZoomEvent||e.unbindZoomEvent()}},Ie={generateClass:function(t,e){return" "+t+" "+(t+this.getTargetSelectorSuffix(e))},getClass:function(t,e){var n=this;const s=/s$/.test(t),a=/^(area|arc|line|treemap)s?$/.test(t),r=s?"id":"index";return function(o){i(this,n);const c=o.data||o;return((e?this.generateClass(Nt[s?"shapes":"shape"],c[r]):"")+this.generateClass(Nt[t],c[a?"id":r])).trim()}.bind(this)},getChartClass:function(t){var e=this;return function(n){return i(this,e),Nt["chart"+t]+this.classTarget((n.data?n.data:n).id)}.bind(this)},generateExtraLineClass:function(){const t=this.config.line_classes||[],e=[];return function(i){var n;const s=i.id||(null==(n=i.data)?void 0:n.id)||i;return e.indexOf(s)<0&&e.push(s),t[e.indexOf(s)%t.length]}},classRegion:function(t,e){return this.generateClass(Nt.region,e)+" "+("class"in t?t.class:"")},classTarget:function(t){const e=this.config.data_classes[t];let i="";return e&&(i=" "+Nt.target+"-"+e),this.generateClass(Nt.target,t)+i},classFocus:function(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function(t){return" "+(this.state.focusedTargetIds.indexOf(t.id)>=0?Nt.focused:"")},classDefocused:function(t){return" "+(this.state.defocusedTargetIds.indexOf(t.id)>=0?Nt.defocused:"")},getTargetSelectorSuffix:function(t){return(t||0===t?"-"+t:"").replace(/([\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\])/g,"-")},selectorTarget:function(t,e,i){void 0===e&&(e=""),void 0===i&&(i="");const n=this.getTargetSelectorSuffix(t);return e+"."+(Nt.target+n)+" "+i+", "+e+"."+(Nt.circles+n)+" "+i},selectorTargets:function(t,e){var n=this;const s=t||[];return s.length?s.map(function(t){return i(this,n),this.selectorTarget(t,e)}.bind(this)):null},selectorLegend:function(t){return"."+(Nt.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function(t){var e=this;return null!=t&&t.length?t.map(function(t){return i(this,e),this.selectorLegend(t)}.bind(this)):null}},ze=p(7);const Me=function(t,e,n){i(this,undefined);const a=(0,s.select)(t.cloneNode(!0));return a.attr("id",n).insert("rect",":first-child").attr("width",a.attr("width")).attr("height",a.attr("height")).style("fill",e),{id:n,node:a.node()}}.bind(void 0);const $e=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];var Xe={generateColor:function(){var t=this;const e=this,n=e.$el,s=e.config,a=s.data_colors,o=s.data_color,c=[];let l=I(s.color_pattern)?s.color_pattern:(0,ze.scaleOrdinal)(function(t){var e=this;const n=se,s=r.body;let a=s[n];if(!a){const r=t.classed(Tt.colorPattern,!0).style("background-image");t.classed(Tt.colorPattern,!1),r.indexOf(";")>-1&&(a=r.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map(function(t){return i(this,e),t.trim().replace(/[\"'\s]/g,"")}.bind(this)).filter(Boolean),s[n]=a)}return a}(n.chart)||$e).range();const d=l;if(w(s.color_tiles)){const n=s.color_tiles.bind(e.api)(),a=l.map(function(s,a){i(this,t);const r=s.replace(/[#\(\)\s,]/g,""),o=e.state.datetimeId+"-pattern-"+r+"-"+a;return Me(n[a%n.length],s,o)}.bind(this));l=a.map(function(e){return i(this,t),"url(#"+e.id+")"}.bind(this)),e.patterns=a}return function(t){var i;const n=t.id||(null==(i=t.data)?void 0:i.id)||t,r=e.isTypeOf(n,["line","spline","step"])||!s.data_types[n];let u;return w(a[n])?u=a[n].bind(e.api)(t):a[n]?u=a[n]:(c.indexOf(n)<0&&c.push(n),u=r?d[c.indexOf(n)%d.length]:l[c.indexOf(n)%l.length],a[n]=u),w(o)?o.bind(e.api)(u,t):u}},generateLevelColor:function(){const t=this.config,e=t.color_pattern,i=t.color_threshold,n="value"===i.unit,s=i.max||100,a=i.values&&i.values.length?i.values:[];return I(i)?function(t){const i=n?t:100*t/s;let r=e[e.length-1];for(let t=0,n=a.length;t<n;t++)if(i<=a[t]){r=e[t];break}return r}:null},generateDataLabelBackgroundColorFilter:function(t){var e=this;const n=this,s=n.$el,a=n.config,r=n.state,o=t||a.data_labels_backgroundColors;if(o){let a=[];A(o)?a.push(""):M(o)&&(a=Object.keys(o)),a.forEach(function(a){i(this,e);const c=r.datetimeId+"-labels-bg"+n.getTargetSelectorSuffix(a)+(t?n.getTargetSelectorSuffix(t):"");s.defs.append("filter").attr("x","0").attr("y","0").attr("width","1").attr("height","1").attr("id",c).html('<feFlood flood-color="'+(""===a?o:o[a])+'" /><feComposite in="SourceGraphic"/>')}.bind(this))}},getGradienColortUrl:function(t){return"url(#"+this.state.datetimeId+"-gradient"+this.getTargetSelectorSuffix(t)+")"},updateLinearGradient:function(){var t=this;const e=this,n=e.config,s=e.data.targets,a=e.state.datetimeId,r=e.$el.defs;s.forEach(function(s){var o=this;i(this,t);const c=a+"-gradient"+e.getTargetSelectorSuffix(s.id),l=e.hasPointType()&&n.point_radialGradient,d=e.isAreaType(s)?"area":e.isBarType(s)&&"bar";if((l||d)&&r.select("#"+c).empty()){const t=e.color(s),a={defs:null,stops:[]};if(l){const e=l,i=e.cx,n=void 0===i?.3:i,s=e.cy,o=void 0===s?.3:s,d=e.r,u=void 0===d?.7:d,h=e.stops,g=void 0===h?[[.1,t,0],[.9,t,1]]:h;a.stops=g,a.defs=r.append("radialGradient").attr("id",""+c).attr("cx",n).attr("cy",o).attr("r",u)}else{const e=n.axis_rotated,i=n[d+"_linearGradient"],s=i.x,o=void 0===s?e?[1,0]:[0,0]:s,l=i.y,u=void 0===l?e?[0,0]:[0,1]:l,h=i.stops,g=void 0===h?[[0,t,1],[1,t,0]]:h;a.stops=g,a.defs=r.append("linearGradient").attr("id",""+c).attr("x1",o[0]).attr("x2",o[1]).attr("y1",u[0]).attr("y2",u[1])}a.stops.forEach(function(n){i(this,o);const r=n[0],c=n[1],l=n[2],d=w(c)?c.bind(e.api)(s.id):c;a.defs&&a.defs.append("stop").attr("offset",r).attr("stop-color",d||t).attr("stop-opacity",l)}.bind(this))}}.bind(this))},setOverColor:function(t,e){var n=this;const s=this,a=s.config,r=s.$el.main,o=a.color_onover;let c=t?o:s.color;M(c)?c=function(t){let e=t.id;return i(this,n),e in o?o[e]:s.color(e)}.bind(this):A(c)?c=function(){return i(this,n),o}.bind(this):w(o)&&(c=c.bind(s.api)),r.selectAll(M(e)?"."+xt.arc+s.getTargetSelectorSuffix(e.id):"."+zt.shape+"-"+e).style("fill",c)}},Fe={getYDomainMinMax:function(t,e){var n=this;const s=this,a=s.axis,r=s.config,o="min"===e,c=r.data_groups,l=s.mapToIds(t),d=s.getValuesAsIdKeyed(t);if(c.length>0){const e=s["has"+(o?"Negative":"Positive")+"ValueInTargets"](t);c.forEach(function(t){var s=this;i(this,n);const r=t.filter(function(t){return i(this,s),l.indexOf(t)>=0}.bind(this));if(r.length){const t=r[0],n=a.getId(t);e&&d[t]&&(d[t]=d[t].map(function(t){return i(this,s),(o?t<0:t>0)?t:0}.bind(this))),r.filter(function(t,e){return i(this,s),e>0}.bind(this)).forEach(function(r){var c=this;if(i(this,s),d[r]){const s=a.getId(r);d[r].forEach(function(a,r){i(this,c);const l=+a;s!==n||e&&(o?l>0:l<0)||(d[t][r]+=l)}.bind(this))}}.bind(this))}}.bind(this))}return at(e,Object.keys(d).map(function(t){return i(this,n),at(e,d[t])}.bind(this)))},isHiddenTargetWithYDomain:function(t){var e=this;const n=this;return n.state.hiddenTargetIds.some(function(s){return i(this,e),n.axis.getId(s)===t}.bind(this))},getYDomain:function(t,e,n){var s=this;const a=this,r=a.axis,o=a.config,c=a.scale,l="axis_"+e;if(a.isStackNormalized())return[0,100];const u=(null==c?void 0:c[e])&&"log"===c[e].type,g=t.filter(function(t){return i(this,s),r.getId(t.id)===e}.bind(this)),f=n?a.filterByXDomain(g,n):g;if(0===f.length)return a.isHiddenTargetWithYDomain(e)?c[e].domain():"y2"===e?c.y.domain():a.getYDomain(t,"y2",n);const p=o[l+"_min"],x=o[l+"_max"],b=o[l+"_center"],m=o[l+"_inverted"],_=a.hasDataLabel()&&o.axis_rotated,v=a.hasDataLabel()&&!o.axis_rotated;let y=a.getYDomainMinMax(f,"min"),w=a.getYDomainMinMax(f,"max"),A=[d.BAR,d.BUBBLE,d.SCATTER].concat(h.Line).some(function(t){i(this,s);const e=t.indexOf("area")>-1?"area":t;return a.hasType(t,f,!0)&&o[e+"_zerobased"]}.bind(this));y=T(p)?p:T(x)?y<=x?y:x-10:y,w=T(x)?x:T(p)?p<=w?w:p+10:w,isNaN(y)&&(y=0),isNaN(w)&&(w=y),y===w&&(y<0?w=0:y=0);const S=y>=0&&w>=0,k=y<=0&&w<=0;(T(p)&&S||T(x)&&k)&&(A=!1),A&&(S&&(y=0),k&&(w=0));const C=Math.abs(w-y);let E={top:.1*C,bottom:.1*C};if(R(b)){const t=Math.max(Math.abs(y),Math.abs(w));w=b+t,y=b-t}if(_){const t=L(c.y.range()),e=a.getDataLabelLength(y,w,"width").map(function(e){return i(this,s),e/t}.bind(this));["bottom","top"].forEach(function(t,n){i(this,s),E[t]+=C*(e[n]/(1-e[0]-e[1]))}.bind(this))}else if(v){const t=a.getDataLabelLength(y,w,"height");["bottom","top"].forEach(function(e,n){i(this,s),E[e]+=a.convertPixelToScale("y",t[n],C)}.bind(this))}E=a.getResettedPadding(E);const O=o[l+"_padding"];I(O)&&["bottom","top"].forEach(function(t){i(this,s),E[t]=r.getPadding(O,t,E[t],C)}.bind(this)),A&&(S&&(E.bottom=y),k&&(E.top=-w));const P=u?[y,w].map(function(t){return i(this,s),t<0?0:t}.bind(this)):[y-E.bottom,w+E.top];return m?P.reverse():P},getXDomainMinMax:function(t,e){var n,s=this;const a=this.config["axis_x_"+e],r=at(e,t.map(function(t){var n=this;return i(this,s),at(e,t.values.map(function(t){return i(this,n),t.x}.bind(this)))}.bind(this)));let o=M(a)?a.value:a;return o=R(o)&&null!=(n=this.axis)&&n.isTimeSeries()?lt.bind(this)(o):o,M(a)&&a.fit&&("min"===e&&o<r||"max"===e&&o>r)&&(o=void 0),R(o)?o:r},getXDomainPadding:function(t,e){const i=this,n=i.axis,s=i.config.axis_x_padding,a=n.isTimeSeries()&&e,r=L(t);let o;if(n.isCategorized()||a)o=0;else if(i.hasType("bar")){const t=i.getMaxDataCount();o=t>1?r/(t-1)/2:.5}else o=i.getResettedPadding(.01*r);let c=S(s)?{left:s,right:s}:s,l=c.left,d=void 0===l?o:l,u=c.right,h=void 0===u?o:u;if("px"===s.unit){const t=Math.abs(r+.2*r);d=n.getPadding(s,"left",o,t),h=n.getPadding(s,"right",o,t)}else{const t=r+d+h;if(a&&t){const i=r/e/t;d=d/t/i,h=h/t/i}}return{left:d,right:h}},getXDomain:function(t){const e=this,i=e.axis,n=e.config,s=e.scale.x,a=n.axis_x_inverted,r=[e.getXDomainMinMax(t,"min"),e.getXDomainMinMax(t,"max")];let o=r[0],c=void 0===o?0:o,l=r[1],d=void 0===l?0:l;if("log"!==s.type){const t=i.isCategorized(),n=i.isTimeSeries(),s=e.getXDomainPadding(r);let a=r[0],o=r[1];a-o!=0||t||(n?(a=new Date(.5*a.getTime()),o=new Date(1.5*o.getTime())):(a=0===a?1:.5*a,o=0===o?-1:1.5*o)),(a||0===a)&&(c=n?new Date(a.getTime()-s.left):a-s.left),(o||0===o)&&(d=n?new Date(o.getTime()+s.right):o+s.right)}return a?[d,c]:[c,d]},updateXDomain:function(t,e,i,n,s){const a=this,r=a.config,o=a.org,c=a.scale,l=c.x,d=c.subX,u=r.zoom_enabled;var h;i&&(l.domain(s||st(a.getXDomain(t),!r.axis_x_inverted)),o.xDomain=l.domain(),d.domain(l.domain()),null==(h=a.brush)||h.scale(d));if(e){const t=s||!a.brush||Z(a)?o.xDomain:Y(a).map(d.invert);l.domain(t)}return(i||e)&&u&&a.zoom.updateScaleExtent(),n&&l.domain(a.trimXDomain(l.orgDomain())),l.domain()},trimXDomain:function(t){const e=this.config.axis_x_inverted,i=this.getZoomDomain(),n=i[0],s=i[1];return(e?t[0]>=n:t[0]<=n)&&(t[1]=+t[1]+(n-t[0]),t[0]=n),(e?t[1]<=s:t[1]>=s)&&(t[0]=+t[0]-(t[1]-s),t[1]=s),t},getZoomDomain:function(t,e){void 0===t&&(t="zoom"),void 0===e&&(e=!1);const i=this,n=i.config,s=i.scale,a=i.org;let r=e&&s[t]?s[t].domain():a.xDomain,o=r[0],c=r[1];return"zoom"===t&&(R(n.zoom_x_min)&&(o=at("min",[o,n.zoom_x_min])),R(n.zoom_x_max)&&(c=at("max",[c,n.zoom_x_max]))),[o,c]},getZoomDomainValue:function(t){var e=this;const n=this.config;if(this.axis.isCategorized()&&Array.isArray(t)){const s=n.axis_x_inverted;return t.map(function(t,n){return i(this,e),+t+(0===n?+s:+!s)}.bind(this))}return t},convertPixelToScale:function(t,e,i){const n=this.config,s=this.state,a=n.axis_rotated;let r;return r="x"===t?a?"height":"width":a?"width":"height",i*(e/s[r])},withinRange:function(t,e,n){var s=this;void 0===e&&(e=[0,0]);const a=this.config.axis_x_inverted,r=n,o=r[0],c=r[1];if(Array.isArray(t)){const n=[].concat(t);if(a&&n.reverse(),n[0]<n[1])return t.every(function(n,r){var l=this;return i(this,s),(0===r?a?+n<=o:+n>=o:a?+n>=c:+n<=c)&&!t.every(function(t,n){return i(this,l),t===e[n]}.bind(this))}.bind(this))}return!1}};function Be(t,e,i){const n=t.config,s="axis_"+e+"_tick_format";return(n[s]?n[s]:t.defaultValueFormat).call(t.api,i)}var Ne={yFormat:function(t){return Be(this,"y",t)},y2Format:function(t){return Be(this,"y2",t)},getDefaultValueFormat:function(){const t=this,e=t.defaultArcValueFormat,i=t.yFormat,n=t.y2Format,s=t.hasArcType(null,["gauge","polar","radar"]);return function(a,r,o){return(s?e:t.axis&&"y2"===t.axis.getId(o)?n:i).call(t,a,r)}},defaultValueFormat:function(t){return z(t)?t.join("~"):T(t)?+t:""},defaultArcValueFormat:function(t,e){return(100*e).toFixed(1)+"%"},defaultPolarValueFormat:function(t){return""+t},dataLabelFormat:function(t){var e=this;const n=this.config.data_labels,s=function(t){i(this,e);let n=t;return z(t)?n=t.join("~"):M(t)&&(n=Object.values(t).join("~")),n}.bind(this);let a=s;return w(n.format)?a=n.format:P(n.format)&&(a=n.format[t]?!0===n.format[t]?s:n.format[t]:function(){return i(this,e),""}.bind(this)),a.bind(this.api)}};function je(t){const e=this,i=e.getDataById(t);return e.levelColor?e.levelColor(i.values[0].value):e.color(i)}function Ge(t,e){var i;void 0===e&&(e=!0);const n=this.config;let s=null!=(i=n.data_names[t])?i:t;return e&&w(n.legend_format)&&(s=n.legend_format(s)),s}var Ve={initLegend:function(){const t=this,e=t.config,i=t.$el;t.legendItemTextBox={},t.state.legendHasRendered=!1,e.legend_show?(e.legend_contents_bindto||(i.legend=t.$el.svg.append("g").classed(St.legend,!0).attr("transform",t.getTranslate("legend"))),t.updateLegend()):t.state.hiddenLegendIds=t.mapToIds(t.data.targets)},updateLegend:function(t,e,i){var n;const s=this,a=s.config,r=s.state,o=s.scale,c=s.$el,l=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};l.withTransition=$(l,"withTransition",!0),l.withTransitionForTransform=$(l,"withTransitionForTransform",!0),a.legend_contents_bindto&&a.legend_contents_template?s.updateLegendTemplate():r.hasTreemap||s.updateLegendElement(t||s.mapToIds(s.data.targets),l,i),null==(n=c.legend)||n.selectAll("."+St.legendItem).classed(St.legendItemHidden,(function(t){const e=!s.isTargetToShow(t);return e&&(this.style.opacity=null),e})),s.updateScales(!1,!o.zoom),s.updateSvgSize(),s.transformAll(l.withTransitionForTransform,i),r.legendHasRendered=!0},updateLegendTemplate:function(){var t=this;const e=this,n=e.config,a=e.$el,r=(0,s.select)(n.legend_contents_bindto),o=n.legend_contents_template;if(!r.empty()){const n=e.mapToIds(e.data.targets),s=[];let c="";n.forEach(function(n){i(this,t);const a=w(o)?o.bind(e.api)(n,e.color(n),e.api.data(n)[0].values):ct(o,{COLOR:e.color(n),TITLE:n});a&&(s.push(n),c+=a)}.bind(this));const l=r.html(c).selectAll((function(){return this.childNodes})).data(s);e.setLegendItem(l),a.legend=r}},updateSizeForLegend:function(t){const e=this,i=e.config,n=e.state,s=n.isLegendTop,a=n.isLegendLeft,r=n.isLegendRight,o=n.isLegendInset,c=n.current,l=t.width,d=t.height,u={top:s?e.getCurrentPaddingByDirection("top")+i.legend_inset_y+5.5:c.height-d-e.getCurrentPaddingByDirection("bottom")-i.legend_inset_y,left:a?e.getCurrentPaddingByDirection("left")+i.legend_inset_x+.5:c.width-l-e.getCurrentPaddingByDirection("right")-i.legend_inset_x+.5};e.state.margin3={top:r?0:o?u.top:c.height-d,right:NaN,bottom:0,left:r?c.width-l:o?u.left:0}},transformLegend:function(t){const e=this,i=e.$el.legend;(0,e.$T)(i,t).attr("transform",e.getTranslate("legend"))},updateLegendStep:function(t){this.state.legendStep=t},updateLegendItemWidth:function(t){this.state.legendItemWidth=t},updateLegendItemHeight:function(t){this.state.legendItemHeight=t},updateLegendItemColor:function(t,e){const i=this.$el.legend;i&&i.select("."+St.legendItem+"-"+t+" line").style("stroke",e)},getLegendWidth:function(){const t=this.state,e=t.current.width,i=t.isLegendRight,n=t.isLegendInset,s=t.legendItemWidth,a=t.legendStep;return this.config.legend_show?i||n?s*(a+1):e:0},getLegendHeight:function(){var t;const e=this,i=e.state,n=i.current,s=i.isLegendRight,a=i.legendItemHeight,r=i.legendStep,o="fit"===(null==(t=e.config.padding)?void 0:t.mode);return e.config.legend_show?s?n.height:(o?10:Math.max(20,a))*(r+1):0},opacityForUnfocusedLegend:function(t){return t.classed(St.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(t,e){var n=this;const a=this,r=a.$el.legend,o=a.$T,c=a.mapToTargetIds(t);r&&o(r.selectAll("."+St.legendItem).filter(function(t){return i(this,n),c.indexOf(t)>=0}.bind(this)).classed(Ct.legendItemFocused,e)).style("opacity",(function(){return e?null:a.opacityForUnfocusedLegend.call(a,(0,s.select)(this))}))},revertLegend:function(){const t=this.$el.legend,e=this.$T;t&&e(t.selectAll("."+St.legendItem).classed(Ct.legendItemFocused,!1)).style("opacity",null)},showLegend:function(t){const e=this,i=e.config,n=e.$el,s=e.$T;i.legend_show||(i.legend_show=!0,n.legend?n.legend.style("visibility",null):e.initLegend(),e.state.legendHasRendered||e.updateLegend()),e.removeHiddenLegendIds(t),s(n.legend.selectAll(e.selectorLegends(t)).style("visibility",null)).style("opacity",null)},hideLegend:function(t){const e=this,i=e.config,n=e.$el.legend;i.legend_show&&D(t)&&(i.legend_show=!1,n.style("visibility","hidden")),e.addHiddenLegendIds(t),n.selectAll(e.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},getLegendItemTextBox:function(t,e){const i=this,n=i.cache,s=i.state;let a;const r=ce;return t&&(a=!s.redrawing&&n.get(r)||{},a[t]||(a[t]=i.getTextRect(e,St.legendItem),n.add(r,a)),a=a[t]),a},setLegendItem:function(t){var e=this;const n=this,a=n.$el,r=n.api,o=n.config,c=n.state,l="touch"===c.inputType,d=n.hasType("gauge"),u=o.boost_useCssRule,h=o.legend_item_interaction;t.attr("class",(function(t){const e=(0,s.select)(this);return(!e.empty()&&e.attr("class")||"")+n.generateClass(St.legendItem,t)})).style("visibility",function(t){return i(this,e),n.isLegendToShow(t)?null:"hidden"}.bind(this)),o.interaction_enabled&&(u&&[["."+St.legendItem,"cursor:pointer"],["."+St.legendItem+" text","pointer-events:none"],["."+St.legendItemPoint+" text","pointer-events:none"],["."+St.legendItemTile,"pointer-events:none"],["."+St.legendItemEvent,"fill-opacity:0"]].forEach(function(t){i(this,e);const s=t[0],r=t[1];n.setCssRule(!1,s,[r])(a.legend)}.bind(this)),t.on(h.dblclick?"dblclick":"click",h||w(o.legend_item_onclick)?function(t,e){if(!X(o.legend_item_onclick,r,e)){const i=t.altKey,n=t.target;"dblclick"===t.type||i?c.hiddenTargetIds.length&&-1===n.parentNode.getAttribute("class").indexOf(St.legendItemHidden)?r.show():(r.hide(),r.show(e)):(r.toggle(e),(0,s.select)(this).classed(Ct.legendItemFocused,!1))}l&&n.hideTooltip()}:null),l||t.on("mouseout",h||w(o.legend_item_onout)?function(t,e){X(o.legend_item_onout,r,e)||((0,s.select)(this).classed(Ct.legendItemFocused,!1),d&&n.undoMarkOverlapped(n,"."+At.gaugeValue),n.api.revert())}:null).on("mouseover",h||w(o.legend_item_onover)?function(t,e){X(o.legend_item_onover,r,e)||((0,s.select)(this).classed(Ct.legendItemFocused,!0),d&&n.markOverlapped(e,n,"."+At.gaugeValue),!c.transiting&&n.isTargetToShow(e)&&r.focus(e))}:null),!t.empty()&&t.on("click mouseout mouseover")&&t.style("cursor",n.getStylePropValue("pointer")))},updateLegendElement:function(t,e){var n=this;const s=this,a=s.config,r=s.state,o=s.$el.legend,c=s.$T,l="circle"!==a.legend_item_tile_type,d=a.legend_item_tile_r,u={width:l?a.legend_item_tile_width:2*d,height:l?a.legend_item_tile_height:2*d},h={padding:{top:4,right:10},max:{width:0,height:0},posMin:10,step:0,tileWidth:u.width+5,totalLength:0},g={offsets:{},widths:{},heights:{},margins:[0],steps:{}};let f,p,x;const b=t.filter(function(t){return i(this,n),!R(a.data_names[t])||null!==a.data_names[t]}.bind(this)),m=e.withTransition,_=s.getUpdateLegendPositions(b,h,g);r.isLegendInset&&(h.step=a.legend_inset_step?a.legend_inset_step:b.length,s.updateLegendStep(h.step)),r.isLegendRight?(f=function(t){return i(this,n),h.max.width*g.steps[t]}.bind(this),p=function(t){return i(this,n),g.margins[g.steps[t]]+g.offsets[t]}.bind(this)):r.isLegendInset?(f=function(t){return i(this,n),h.max.width*g.steps[t]+10}.bind(this),p=function(t){return i(this,n),g.margins[g.steps[t]]+g.offsets[t]}.bind(this)):(f=function(t){return i(this,n),g.margins[g.steps[t]]+g.offsets[t]}.bind(this),p=function(t){return i(this,n),h.max.height*g.steps[t]}.bind(this));const v={xText:function(t,e){return i(this,n),f(t,e)+4+u.width}.bind(this),xRect:function(t,e){return i(this,n),f(t,e)}.bind(this),x1Tile:function(t,e){return i(this,n),f(t,e)-2}.bind(this),x2Tile:function(t,e){return i(this,n),f(t,e)-2+u.width}.bind(this),yText:function(t,e){return i(this,n),p(t,e)+9}.bind(this),yRect:function(t,e){return i(this,n),p(t,e)-5}.bind(this),yTile:function(t,e){return i(this,n),p(t,e)+4}.bind(this)};s.generateLegendItem(b,u,_,v),x=o.select("."+St.legendBackground+" rect"),r.isLegendInset&&h.max.width>0&&0===x.size()&&(x=o.insert("g","."+St.legendItem).attr("class",St.legendBackground).append("rect")),a.legend_tooltip&&o.selectAll("title").data(b).text(function(t){return i(this,n),Ge.bind(s)(t,!1)}.bind(this));c(o.selectAll("text").data(b).text(function(t){return i(this,n),Ge.bind(s)(t)}.bind(this)).each((function(t,e){_(this,t,e)})),m).attr("x",v.xText).attr("y",v.yText);c(o.selectAll("rect."+St.legendItemEvent).data(b),m).attr("width",function(t){return i(this,n),g.widths[t]}.bind(this)).attr("height",function(t){return i(this,n),g.heights[t]}.bind(this)).attr("x",v.xRect).attr("y",v.yRect),s.updateLegendItemPos(b,m,v),x&&c(x,m).attr("height",s.getLegendHeight()-12).attr("width",h.max.width*(h.step+1)+10),s.updateLegendItemWidth(h.max.width),s.updateLegendItemHeight(h.max.height),s.updateLegendStep(h.step)},getUpdateLegendPositions:function(t,e,n){const s=this,a=s.config,r=s.state,o=r.isLegendRight||r.isLegendInset;return function(c,l,d){var u=this;const h=d===t.length-1,g=s.getLegendItemTextBox(l,c),f=g.width+e.tileWidth+(h&&!o?0:e.padding.right)+a.legend_padding,p=g.height+e.padding.top,x=o?p:f,b=o?s.getLegendHeight():s.getLegendWidth();let m;const _=function(t,i){i||(m=(b-e.totalLength-x)/2,m<e.posMin&&(m=(b-x)/2,e.totalLength=0,e.step++)),n.steps[t]=e.step,n.margins[e.step]=r.isLegendInset?10:m,n.offsets[t]=e.totalLength,e.totalLength+=x};if(0===d&&(e.totalLength=0,e.step=0,e.max.width=0,e.max.height=0),a.legend_show&&!s.isLegendToShow(l))return n.widths[l]=0,n.heights[l]=0,n.steps[l]=0,void(n.offsets[l]=0);n.widths[l]=f,n.heights[l]=p,(!e.max.width||f>=e.max.width)&&(e.max.width=f),(!e.max.height||p>=e.max.height)&&(e.max.height=p);const v=o?e.max.height:e.max.width;a.legend_equally?(Object.keys(n.widths).forEach(function(t){return i(this,u),n.widths[t]=e.max.width}.bind(this)),Object.keys(n.heights).forEach(function(t){return i(this,u),n.heights[t]=e.max.height}.bind(this)),m=(b-v*t.length)/2,m<e.posMin?(e.totalLength=0,e.step=0,t.forEach(function(t){return i(this,u),_(t)}.bind(this))):_(l,!0)):_(l)}},generateLegendItem:function(t,e,n,a){var o=this;const c=this,l=c.config,d=c.state,u=c.$el.legend,h=l.legend_usePoint,g=l.legend_item_tile_r,f=l.legend_item_tile_type,p="circle"!==f,x=d.isLegendRight||d.isLegendInset,b=-200,m=u.selectAll("."+St.legendItem).data(t).enter().append("g");if(c.setLegendItem(m),l.legend_tooltip&&m.append("title").text(function(t){return i(this,o),t}.bind(this)),m.append("text").text(function(t){return i(this,o),Ge.bind(c)(t)}.bind(this)).each((function(t,e){n(this,t,e)})).style("pointer-events",c.getStylePropValue("none")).attr("x",x?a.xText:-200).attr("y",x?-200:a.yText),m.append("rect").attr("class",St.legendItemEvent).style("fill-opacity",c.getStylePropValue("0")).attr("x",x?a.xRect:-200).attr("y",x?-200:a.yRect),h){const t=[];m.append(function(e){i(this,o);const n=I(l.point_pattern)?l.point_pattern:[l.point_type];-1===t.indexOf(e)&&t.push(e);let a=n[t.indexOf(e)%n.length];return"rectangle"===a&&(a="rect"),r.createElementNS(s.namespaces.svg,"hasValidPointType"in c&&c.hasValidPointType(a)?a:"use")}.bind(this)).attr("class",St.legendItemPoint).style("fill",je.bind(c)).style("pointer-events",c.getStylePropValue("none")).attr("href",function(t,e,n){i(this,o);const s=n[e].nodeName.toLowerCase(),a=c.getTargetSelectorSuffix(t);return"use"===s?"#"+d.datetimeId+"-point"+a:void 0}.bind(this))}else m.append(p?"line":f).attr("class",St.legendItemTile).style("stroke",je.bind(c)).style("pointer-events",c.getStylePropValue("none")).call(function(t){i(this,o),"circle"===f?t.attr("r",g).style("fill",je.bind(c)).attr("cx",x?a.x2Tile:b).attr("cy",x?b:a.yTile):p&&t.attr("stroke-width",e.height).attr("x1",x?a.x1Tile:b).attr("y1",x?b:a.yTile).attr("x2",x?a.x2Tile:b).attr("y2",x?b:a.yTile)}.bind(this))},updateLegendItemPos:function(t,e,n){var a=this;const r=this,o=r.config,c=r.$el.legend,l=r.$T,d=o.legend_usePoint,u=o.legend_item_tile_type;if(d){l(c.selectAll("."+St.legendItemPoint).data(t),e).each((function(){var t=this;const e=this.nodeName.toLowerCase(),a=o.point_r;let r="x",c="y",l=2,d=2.5,u=null,h=null,g=null;if("circle"===e){const t=.2*a;r="cx",c="cy",u=a+t,l=2*a,d=-t}else if("rect"===e){const t=2.5*a;h=t,g=t,d=3}(0,s.select)(this).attr(r,function(e){return i(this,t),n.x1Tile(e)+l}.bind(this)).attr(c,function(e){return i(this,t),n.yTile(e)-d}.bind(this)).attr("r",u).attr("width",h).attr("height",g)}))}else{l(c.selectAll("."+St.legendItemTile).data(t),e).style("stroke",je.bind(r)).call(function(t){var e=this;i(this,a),"circle"===u?t.attr("cx",function(t){i(this,e);const s=n.x2Tile(t);return s-(s-n.x1Tile(t))/2}.bind(this)).attr("cy",n.yTile):"circle"!==u&&t.attr("x1",n.x1Tile).attr("y1",n.yTile).attr("x2",n.x2Tile).attr("y2",n.yTile)}.bind(this))}}},Ye=p(8),He={redraw:function(t){var e,n=this;void 0===t&&(t={});const s=this,a=s.config,r=s.state,o=s.$el,c=o,l=c.main,d=c.treemap;r.redrawing=!0;const u=s.filterTargetsToShow(s.data.targets),h=t,g=h.flow,f=h.initializing,p=s.getWithOption(t),x=p.Transition?a.transition_duration:0,b=p.TransitionForExit?x:0,m=p.TransitionForAxis?x:0,_=null==(e=s.axis)?void 0:e.generateTransitions(m);s.updateSizes(f),p.Legend&&a.legend_show?(t.withTransition=!!x,d||s.updateLegend(s.mapToIds(s.data.targets),t,_)):p.Dimension&&s.updateDimension(!0),a.data_empty_label_text&&l.select("text."+$t.text+"."+pt.empty).attr("x",r.width/2).attr("y",r.height/2).text(a.data_empty_label_text).style("display",u.length?"none":null),r.hasAxis?(s.axis.redrawAxis(u,p,_,g,f),s.hasGrid()&&s.updateGrid(),a.regions.length&&s.updateRegion(),["bar","candlestick","line","area"].forEach(function(t){i(this,n);const e=K(t);(/^(line|area)$/.test(t)&&s.hasTypeOf(e)||s.hasType(t))&&s["update"+e](p.TransitionForExit)}.bind(this)),o.text&&l.selectAll("."+It.selectedCircles).filter(s.isBarType.bind(s)).selectAll("circle").remove(),a.interaction_enabled&&!g&&p.EventRect&&(s.redrawEventRect(),null==s.bindZoomEvent||s.bindZoomEvent())):(o.arcs&&s.redrawArc(x,b,p.Transform),o.radar&&s.redrawRadar(),o.polar&&s.redrawPolar(),d&&s.updateTreemap(b)),r.resizing||d||!s.hasPointType()&&!r.hasRadar?null!=s.hasLegendDefsPoint&&s.hasLegendDefsPoint()&&s.data.targets.forEach(s.point("create",this)):s.updateCircle(),s.hasDataLabel()&&!s.hasArcType(null,["radar"])&&s.updateText(),null==s.redrawTitle||s.redrawTitle(),f&&s.updateTypesElements(),s.generateRedrawList(u,g,x,p.Subchart),s.updateTooltipOnRedraw(),s.callPluginHook("$redraw",t,x)},generateRedrawList:function(t,e,n,s){var a=this;const r=this,o=r.config,c=r.state,l=r.getDrawShape();c.hasAxis&&o.subchart_show&&r.redrawSubchart(s,n,l);const d=e&&r.generateFlow({targets:t,flow:e,duration:e.duration,shape:l,xv:r.xv.bind(r)}),u=(n||d)&&dt(),h=r.getRedrawList(l,e,d,u),g=function(){i(this,a),d&&d(),c.redrawing=!1,X(o.onrendered,r.api)}.bind(this);if(g)if(u&&h.length){const t=be();(0,Ye.transition)().duration(n).each(function(){var e=this;i(this,a),h.reduce(function(t,n){return i(this,e),t.concat(n)}.bind(this),[]).forEach(function(n){return i(this,e),t.add(n)}.bind(this))}.bind(this)).call(t,g)}else c.transiting||g();r.mapToIds(r.data.targets).forEach(function(t){i(this,a),c.withoutFadeIn[t]=!0}.bind(this))},getRedrawList:function(t,e,n,s){var a=this;const r=this,o=r.config,c=r.state,l=c.hasAxis,d=c.hasRadar,u=c.hasTreemap,h=r.$el.grid,g=t.pos,f=g.cx,p=g.cy,x=g.xForText,b=g.yForText,m=[];return l&&((o.grid_x_lines.length||o.grid_y_lines.length)&&m.push(r.redrawGrid(s)),o.regions.length&&m.push(r.redrawRegion(s)),Object.keys(t.type).forEach(function(e){i(this,a);const n=K(e),o=t.type[e];(/^(area|line)$/.test(e)&&r.hasTypeOf(n)||r.hasType(e))&&m.push(r["redraw"+n](o,s))}.bind(this)),!e&&h.main&&m.push(r.updateGridFocus())),r.hasArcType()&&!d||I(o.data_labels)&&!1!==o.data_labels&&m.push(r.redrawText(x,b,e,s)),!r.hasPointType()&&!d||r.isPointFocusOnly()||r.redrawCircle&&m.push(r.redrawCircle(f,p,s,n)),u&&m.push(r.redrawTreemap(s)),m},updateAndRedraw:function(t){void 0===t&&(t={});const e=this,i=e.config,n=e.state;let s;t.withTransition=$(t,"withTransition",!0),t.withTransform=$(t,"withTransform",!1),t.withLegend=$(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=$(t,"withTransitionForTransform",t.withTransition),t.withLegend&&i.legend_show||(n.hasAxis&&(s=e.axis.generateTransitions(t.withTransitionForAxis?i.transition_duration:0)),e.updateScales(),e.updateSvgSize(),e.transformAll(t.withTransitionForTransform,s)),e.redraw(t,s)}};function Ue(t,e,i){void 0===t&&(t="linear"),void 0===e&&(e=0),void 0===i&&(i=1);const n={linear:ze.scaleLinear,log:ze.scaleSymlog,_log:ze.scaleLog,time:ze.scaleTime,utc:ze.scaleUtc}[t]();return n.type=t,/_?log/.test(t)&&n.clamp(!0),n.range([e,i])}var We={getXScale:function(t,e,i,n){const s=this,a="append"!==s.state.loading&&s.scale.zoom||Ue(s.axis.getAxisType("x"),t,e);return s.getCustomizedXScale(i?a.domain(i):a,n)},getYScale:function(t,e,i,n){const s=Ue(this.axis.getAxisType(t),e,i);return n&&s.domain(n),s},getYScaleById:function(t,e){var i;void 0===e&&(e=!1);const n="y2"===(null==(i=this.axis)?void 0:i.getId(t)),s=e?n?"subY2":"subY":n?"y2":"y";return this.scale[s]},getCustomizedXScale:function(t,e){var n=this;const s=this,a=e||function(){return i(this,n),s.axis.x.tickOffset()}.bind(this),r=s.config.axis_x_inverted,o=function(e,i){const n=t(e)+a();return i?n:Math.ceil(n)};for(const e in t)o[e]=t[e];return o.orgDomain=function(){return i(this,n),t.domain()}.bind(this),o.orgScale=function(){return i(this,n),t}.bind(this),s.axis.isCategorized()&&(o.domain=function(e){let i=e;return arguments.length?(t.domain(i),o):(i=this.orgDomain(),r?[i[0]+1,i[1]]:[i[0],i[1]+1])}),o},updateScales:function(t,e){var n=this;void 0===e&&(e=!0);const s=this,a=s.axis,r=s.config,o=s.format,c=s.org,l=s.scale,d=s.state,u=d.current,h=d.width,g=d.height,f=d.width2,p=d.height2,x=d.hasAxis,b=d.hasTreemap;if(x){var m;const d=r.axis_rotated,u=s.getResettedPadding(1),x={x:d?u:0,y:d?0:g,subX:d?1:0,subY:d?0:p},b={x:d?g:h,y:d?h:u,subX:d?g:h,subY:d?f:1},_=e&&(null==(m=l.x)?void 0:m.orgDomain()),v=e&&c.xDomain;l.x=s.getXScale(x.x,b.x,_,function(){return i(this,n),a.x.tickOffset()}.bind(this)),l.subX=s.getXScale(x.x,b.x,v,function(t){var e;return i(this,n),t%1?0:(null!=(e=a.subX)?e:a.x).tickOffset()}.bind(this)),o.xAxisTick=a.getXAxisTickFormat(),o.subXAxisTick=a.getXAxisTickFormat(!0),a.setAxis("x",l.x,r.axis_x_tick_outer,t),r.subchart_show&&a.setAxis("subX",l.subX,r.axis_x_tick_outer,t),l.y=s.getYScale("y",x.y,b.y,l.y?l.y.domain():r.axis_y_default),l.subY=s.getYScale("y",x.subY,b.subY,l.subY?l.subY.domain():r.axis_y_default),a.setAxis("y",l.y,r.axis_y_tick_outer,t),r.axis_y2_show&&(l.y2=s.getYScale("y2",x.y,b.y,l.y2?l.y2.domain():r.axis_y2_default),l.subY2=s.getYScale("y2",x.subY,b.subY,l.subY2?l.subY2.domain():r.axis_y2_default),a.setAxis("y2",l.y2,r.axis_y2_tick_outer,t))}else if(b){const t=s.getCurrentPadding();l.x=(0,ze.scaleLinear)().rangeRound([t.left,u.width-t.right]),l.y=(0,ze.scaleLinear)().rangeRound([t.top,u.height-t.bottom])}else null==s.updateArc||s.updateArc()},xx:function(t){const e=this.config,i=this.scale,n=i.x,s=i.zoom,a=e.zoom_enabled&&s?s:n;return t?a(T(t.x)?t.x:t):null},xv:function(t){const e=this,i=e.axis,n=e.config,s=e.scale,a=s.x,r=s.zoom,o=n.zoom_enabled&&r?r:a;let c=e.getBaseValue(t);return i.isTimeSeries()?c=lt.call(e,c):i.isCategorized()&&A(c)&&(c=n.axis_x_categories.indexOf(c)),Math.ceil(o(c))},yv:function(t){const e=this.scale,i=e.y,n=e.y2,s=t.axis&&"y2"===t.axis?n:i;return Math.ceil(s(this.getBaseValue(t)))},subxx:function(t){return t?this.scale.subX(t.x):null}},Ze=p(9);function qe(t){const e=this;let i;return e.isLineType(t)?i=e.generateGetLinePoints(e.getShapeIndices(e.isLineType)):e.isBarType(t)&&(i=e.generateGetBarPoints(e.getShapeIndices(e.isBarType))),i}var Ke={getDrawShape:function(){var t=this;const e=this,n=e.config.axis_rotated,s=e.state,a=s.hasRadar,r=s.hasTreemap,o={type:{},indices:{},pos:{}};if(r||["bar","candlestick","line","area"].forEach(function(n){i(this,t);const s=K(/^(bubble|scatter)$/.test(n)?"line":n);if(e.hasType(n)||e.hasTypeOf(s)||"line"===n&&(e.hasType("bubble")||e.hasType("scatter"))){const t=e.getShapeIndices(e["is"+s+"Type"]),i=e["generateDraw"+s];o.indices[n]=t,o.type[n]=i?i.bind(e)(t,!1):void 0}}.bind(this)),!e.hasArcType()||a||r){let t,i;r||(t=a?e.radarCircleX:n?e.circleY:e.circleX,i=a?e.radarCircleY:n?e.circleX:e.circleY),o.pos={xForText:e.generateXYForText(o.indices,!0),yForText:e.generateXYForText(o.indices,!1),cx:(t||function(){}).bind(e),cy:(i||function(){}).bind(e)}}return o},getShapeIndices:function(t){var e=this;const n=this,s=n.config,a=s.data_xs,r=I(a),o={};let c=r?{}:0;return r&&et(Object.keys(a).map(function(t){return i(this,e),a[t]}.bind(this))).forEach(function(t){i(this,e),c[t]=0,o[t]={}}.bind(this)),n.filterTargetsToShow(n.data.targets.filter(t,n)).forEach(function(t){i(this,e);const n=t.id in a?a[t.id]:"",r=n?o[n]:o;for(let e,i=0;e=s.data_groups[i];i++)if(!(e.indexOf(t.id)<0))for(let i,s=0;i=e[s];s++){if(i in r){r[t.id]=r[i];break}var l;if(t.id!==i&&n)r[i]=null!=(l=r[t.id])?l:c[n]}k(r[t.id])&&(r[t.id]=n?c[n]++:c++,r.__max__=(n?c[n]:c)-1)}.bind(this)),o},getIndices:function(t,e){var n=this;const s=this,a=s.config,r=a.data_xs,o=a.bar_indices_removeNull,c=e.id,l=e.index;if(s.isBarType(c)&&o){const t={};return s.getAllValuesOnIndex(l,!0).forEach(function(e,s){i(this,n),t[e.id]=s,t.__max__=s}.bind(this)),t}return I(r)?t[r[c]]:t},getIndicesMax:function(t){var e=this;return I(this.config.data_xs)?Object.keys(t).map(function(n){return i(this,e),t[n].__max__||0}.bind(this)).reduce(function(t,n){return i(this,e),t+n}.bind(this)):t.__max__},getShapeX:function(t,e,n){var s=this;const a=this,r=a.config,o=a.scale,c=n?o.subX:o.zoom||o.x,l=r.bar_overlap,d=r.bar_padding,u=function(t,e){return i(this,s),t+e}.bind(this),h=P(t)&&(t._$total.length?t._$total.reduce(u)/2:0);return function(n){i(this,s);const r=a.getIndices(e,n,"getShapeX"),o=n.id in r?r[n.id]:0,g=(r.__max__||0)+1;let f=0;if(I(n.x)){const e=c(n.x,!0);if(h){const i=t[n.id]||t._$width;f=l?e-i/2:e-i+t._$total.slice(0,o+1).reduce(u)-h}else f=e-(S(t)?t:t._$width)*(g/2-(l?1:o))}return t&&f&&g>1&&d&&(o&&(f+=d*o),g>2?f-=(g-1)*d/2:2===g&&(f-=d/2)),f}.bind(this)},getShapeY:function(t){var e=this;const n=this,s=n.isStackNormalized();return function(a){i(this,e);let r=a.value;return S(a)?r=a:n.isAreaRangeType(a)?r=n.getBaseValue(a,"mid"):s?r=n.getRatio("index",a,!0):n.isBubbleZType(a)?r=n.getBubbleZData(a.value,"y"):n.isBarRangeType(a)&&(r=r[1]),n.getYScaleById(a.id,t)(r)}.bind(this)},getShapeYMin:function(t){const e=this,i=e.axis.getId(t),n=e.scale[i].domain()[0],s=e.config["axis_"+i+"_inverted"];return!e.isGrouped(t)&&!s&&n>0?n:0},getShapeOffsetData:function(t){var e=this;const n=this,s=n.orderTargets(n.filterTargetsToShow(n.data.targets.filter(t,n))),a=n.isStackNormalized(),r=s.map(function(t){var s=this;i(this,e);let r=t.values;const o={};n.isStepType(t)&&(r=n.convertValuesToStep(r));const c=r.reduce(function(t,e){i(this,s);const r=+e.x;return t[r]=e,o[r]=a?n.getRatio("index",e,!0):e.value,t}.bind(this),{});return{id:t.id,rowValues:r,rowValueMapByXValue:c,values:o}}.bind(this));return{indexMapByTargetId:s.reduce(function(t,n,s){let a=n.id;return i(this,e),t[a]=s,t}.bind(this),{}),shapeOffsetTargets:r}},getShapeOffset:function(t,e,n){var s=this;const a=this,r=a.getShapeOffsetData(t),o=r.shapeOffsetTargets,c=r.indexMapByTargetId,l=a.config.data_groupsZeroAs;return function(t,r){var d=this;i(this,s);const u=t.id,h=t.value,g=t.x,f=a.getIndices(e,t),p=a.getYScaleById(u,n);if(a.isBarRangeType(t))return p(h[0]);const x=+g,b=p("zero"===l?0:a.getShapeYMin(u));let m=b;return o.filter(function(t){return i(this,d),t.id!==u&&f[t.id]===f[u]}.bind(this)).forEach(function(t){i(this,d);const e=t.id,n=t.rowValueMapByXValue,s=t.rowValues,a=t.values;if(c[e]<c[u]){var o;const t=a[x];let e=s[r];if(e&&+e.x===x||(e=n[x]),(null==(o=e)?void 0:o.value)*h>=0&&S(t)){(0!==h||("positive"===l&&t>0||"negative"===l&&t<0))&&(m+=p(t)-b)}}}.bind(this)),m}.bind(this)},circleY:function(t,e){const i=this,n=t.id;let s;return i.isGrouped(n)&&(s=qe.bind(i)(t)),s?s(t,e)[0][1]:i.getYScaleById(n)(i.getBaseValue(t))},getBarW:function(t,e,n){var s,a,r,o,c=this;const l=this,d=l.config,u=l.org,h=l.scale,g=l.getMaxDataCount(),f="bar"===t&&(null==(s=d.data_groups)?void 0:s.length),p=t+"_width",x=(null!=(a=null==l.getZoomTransform?void 0:l.getZoomTransform())?a:{k:1}).k,b=[null!=(r=d.axis_x_min)?r:u.xDomain[0],null!=(o=d.axis_x_max)?o:u.xDomain[1]].map(l.axis.isTimeSeries()?lt.bind(l):Number);let m=e.tickInterval(g);if(h.zoom&&!l.axis.isCategorized()&&x>1){const t=b.every(function(t,e){return i(this,c),t===u.xDomain[e]}.bind(this));m=u.xDomain.map(function(e,n){i(this,c);const s=t?e:e-Math.abs(b[n]);return h.zoom(s)}.bind(this)).reduce(function(t,e){return i(this,c),Math.abs(t)+e}.bind(this))/g}const _=function(t){i(this,c);const e=t?d[p][t]:d[p],s=t?e.ratio:d[p+"_ratio"],a=t?e.max:d[p+"_max"],r=S(e)?e:n?m*s/n:0;return a&&r>a?a:r}.bind(this);let v=_();return!f&&P(d[p])&&(v={_$width:v,_$total:[]},l.filterTargetsToShow(l.data.targets).forEach(function(t){i(this,c),d[p][t.id]&&(v[t.id]=_(t.id),v._$total.push(v[t.id]||v._$width))}.bind(this))),v},getShapeByIndex:function(t,e,n){var s=this;const a=this,r=a.$el,o=T(e)?"-"+e:"";let c=r[t];return c=c&&!c.empty()?c.filter(function(t){return i(this,s),!n||t.id===n}.bind(this)).filter(function(t){return i(this,s),!T(e)||t.index===e}.bind(this)):(n?r.main.selectAll("."+Nt[t+"s"]+a.getTargetSelectorSuffix(n)):r.main).selectAll("."+Nt[t]+o),c},isWithinShape:function(t,e){const i=this,n=(0,s.select)(t);let a;return i.isTargetToShow(e.id)?null!=i.hasValidPointType&&i.hasValidPointType(t.nodeName)?a=i.isStepType(e)?i.isWithinStep(t,i.getYScaleById(e.id)(e.value)):i.isWithinCircle(t,i.isBubbleType(e)?1.5*i.pointSelectR(e):0):"path"===t.nodeName&&(a=!n.classed(Nt.bar)||i.isWithinBar(t)):a=!1,a},getInterpolate:function(t){const e=this.getInterpolateType(t);return{basis:Ze.curveBasis,"basis-closed":Ze.curveBasisClosed,"basis-open":Ze.curveBasisOpen,bundle:Ze.curveBundle,cardinal:Ze.curveCardinal,"cardinal-closed":Ze.curveCardinalClosed,"cardinal-open":Ze.curveCardinalOpen,"catmull-rom":Ze.curveCatmullRom,"catmull-rom-closed":Ze.curveCatmullRomClosed,"catmull-rom-open":Ze.curveCatmullRomOpen,"monotone-x":Ze.curveMonotoneX,"monotone-y":Ze.curveMonotoneY,natural:Ze.curveNatural,"linear-closed":Ze.curveLinearClosed,linear:Ze.curveLinear,step:Ze.curveStep,"step-after":Ze.curveStepAfter,"step-before":Ze.curveStepBefore}[e]},getInterpolateType:function(t){const e=this,i=e.config,n=i.spline_interpolation_type,s=e.isInterpolationType(n)?n:"cardinal";return e.isSplineType(t)?s:e.isStepType(t)?i.line_step_type:"linear"},isWithinBar:function(t){const e=V(this.state.event,t),i=j(t),n=i[0],s=i[1],a=Math.min(n.x,s.x),r=Math.min(n.y,s.y),o=this.config.bar_sensitivity,c=t.getBBox(),l=c.width,d=c.height;return a-o<e[0]&&e[0]<a+l+o&&r-o<e[1]&&e[1]<r+d+o}},Je={setContainerSize:function(){const t=this,e=t.state;e.current.width=t.getCurrentWidth(),e.current.height=t.getCurrentHeight()},getCurrentWidth:function(){return this.config.size_width||this.getParentWidth()},getCurrentHeight:function(){const t=this,e=t.config,i=e.size_height||t.getParentHeight();return i>0?i:320/(t.hasType("gauge")&&!e.gauge_fullCircle?2:1)},getParentRectValue:function(t){const e="offset"+K(t);let i=this.$el.chart.node(),n=0;for(;n<30&&i&&"BODY"!==i.tagName;){try{n=i.getBoundingClientRect()[t]}catch(t){e in i&&(n=i[e])}i=i.parentNode}const s=r.body[e];return n>s&&(n=s),n},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){const t=this.$el.chart.style("height");let e=0;return t&&(e=/px$/.test(t)?parseInt(t,10):this.getParentRectValue("height")),e},getSvgLeft:function(t){const e=this,i=e.config,n=e.state.hasAxis,s=e.$el,a=i.axis_rotated,r=a||!a&&!i.axis_y_inner,o=a?mt.axisX:mt.axisY,c=s.main.select("."+o).node(),l=n&&i["axis_"+(a?"x":"y")+"_label"];let d=0;if(n&&(A(l)||A(l.text)||/^inner-/.test(null==l?void 0:l.position))){const t=s.main.select("."+o+"-label");t.empty()||(d=t.node().getBoundingClientRect().left)}const u=c&&r?c.getBoundingClientRect():{right:0},h=s.chart.node().getBoundingClientRect().left+d,g=e.hasArcType(),f=u.right-h-(g?0:e.getCurrentPaddingByDirection("left",t));return f>0?f:0},updateDimension:function(t){const e=this,i=e.config,n=e.state.hasAxis,s=e.$el;var a;n&&!t&&e.axis.x&&i.axis_rotated&&(null==(a=e.axis.subX)||a.create(s.axis.subX));e.updateScales(t),e.updateSvgSize(),e.transformAll(!1)},updateSvgSize:function(){const t=this,e=t.state,i=e.clip,n=e.current,s=e.hasAxis,a=e.width,r=e.height,o=t.$el.svg;if(o.attr("width",n.width).attr("height",n.height),s){const e=o.select("."+Mt.brush+" .overlay"),n={width:0,height:0};e.size()&&(n.width=+e.attr("width"),n.height=+e.attr("height")),o.selectAll(["#"+i.id,"#"+i.idGrid]).select("rect").attr("width",a).attr("height",r),o.select("#"+i.idXAxis).select("rect").call(t.setXAxisClipPath.bind(t)),o.select("#"+i.idYAxis).select("rect").call(t.setYAxisClipPath.bind(t)),i.idSubchart&&o.select("#"+i.idSubchart).select("rect").attr("width",a).attr("height",n.height)}},getCurrentPaddingByDirection:function(t,e,i){var n;void 0===e&&(e=!1),void 0===i&&(i=!1);const s=this,a=s.config,r=s.$el,o=s.state.hasAxis,c=a.axis_rotated,l="fit"===(null==(n=a.padding)?void 0:n.mode),d=S(a["padding_"+t])?a["padding_"+t]:void 0,u=o?{top:c?"y2":null,bottom:c?"y":"x",left:c?"x":"y",right:c?null:"y2"}[t]:null,h=/^(left|right)$/.test(t),g=u&&a["axis_"+u+"_inner"],f=u&&a["axis_"+u+"_show"],p=u?a["axis_"+u+"_axes"].length:0;let x=u?h?s.getAxisWidthByAxisId(u,e):s.getHorizontalAxisHeight(u):0;let b=0;!l&&h&&(x=E(x));let m=o&&h&&(g||k(d)&&!f)?0:l?(f?x:0)+(null!=d?d:0):k(d)?x:d;return h&&o?(u&&(l||g)&&a["axis_"+u+"_label"].text&&(m+=s.axis.getAxisLabelPosition(u).isOuter?20:0),"right"===t?(m+=c?!l&&k(d)?10:2:!f||g?l?2:1:0,m+=i?s.axis.getXAxisTickTextY2Overflow(20):0):"left"===t&&c&&k(d)&&(m=a.axis_x_show?l?x:Math.max(x,40):1)):"top"===t?(r.title&&r.title.node()&&(m+=s.getTitlePadding()),b=c&&!g?p:0):"bottom"===t&&o&&c&&!f&&(m+=1),m+x*p-b},getCurrentPadding:function(t){var e=this;void 0===t&&(t=!1);const n=this,s=["top","bottom","left","right"].map(function(s){return i(this,e),n.getCurrentPaddingByDirection(s,null,t)}.bind(this));return{top:s[0],bottom:s[1],left:s[2],right:s[3]}},getResettedPadding:function(t){var e=this;const n=this.config,s=S(t);let a=s?0:{};return!1===n.padding?s||Object.keys(t).forEach(function(s){i(this,e),a[s]=D(n.data_labels)||!1===n.data_labels||"top"!==s?0:t[s]}.bind(this)):a=t,a},updateSizes:function(t){var e;const i=this,n=i.config,s=i.state,a=i.$el.legend,r=n.axis_rotated,o=i.hasArcType()||s.hasTreemap,c="fit"===(null==(e=n.padding)?void 0:e.mode);t||i.setContainerSize();const l={width:a?i.getLegendWidth():0,height:a?i.getLegendHeight():0};!o&&n.axis_x_show&&n.axis_x_tick_autorotate&&i.updateXAxisTickClip();const d=n.legend_show&&s.isLegendRight?i.getLegendWidth()+(c?0:20):0,u=!n.legend_show||s.isLegendRight||s.isLegendInset?0:l.height,h=r||o?0:i.getHorizontalAxisHeight("x"),g=n.subchart_axis_x_show&&n.subchart_axis_x_tick_text_show?h:30,f=n.subchart_show&&!o?n.subchart_size_height+g:0,p=i.hasType("gauge")&&n.arc_needle_show&&!n.gauge_fullCircle&&!n.gauge_label_show?10:0,x=i.getCurrentPadding(!0);if(s.margin=!o&&r?{top:x.top,right:o?0:x.right+d,bottom:u+x.bottom,left:f+(o?0:x.left)}:{top:(c?0:4)+x.top,right:o?0:x.right+d,bottom:p+f+u+x.bottom,left:o?0:x.left},s.margin=i.getResettedPadding(s.margin),s.margin2=r?{top:s.margin.top,right:NaN,bottom:20+u,left:i.state.rotatedPadding.left}:{top:s.current.height-f-u,right:NaN,bottom:g+u,left:s.margin.left},s.margin3={top:0,right:NaN,bottom:0,left:0},null==i.updateSizeForLegend||i.updateSizeForLegend(l),s.width=s.current.width-s.margin.left-s.margin.right,s.height=s.current.height-s.margin.top-s.margin.bottom,s.width<0&&(s.width=0),s.height<0&&(s.height=0),s.width2=r?s.margin.left-s.rotatedPadding.left-s.rotatedPadding.right:s.width,s.height2=r?s.height:s.current.height-s.margin2.top-s.margin2.bottom,s.width2<0&&(s.width2=0),s.height2<0&&(s.height2=0),i.hasArcType()){var b,m;const t=i.hasType("gauge"),e=n.legend_show&&s.isLegendRight,a=null!=(b=s.hasRadar&&i.cache.get(de))?b:0;s.arcWidth=s.width-(e?l.width+10:0)-a,s.arcHeight=s.height-(e&&!t?0:10),null!=(m=n.arc_rangeText_values)&&m.length&&(t?(s.arcWidth-=25,s.arcHeight-=10,s.margin.left+=10):(s.arcHeight-=20,s.margin.top+=10)),t&&!n.gauge_fullCircle&&(s.arcHeight+=s.height-i.getPaddingBottomForGauge()),null==i.updateRadius||i.updateRadius()}s.isLegendRight&&o&&(s.margin3.left=s.arcWidth/2+1.1*s.radiusExpanded)}},Qe={setCssRule:function(t,e,n,s){var a=this;const r=this,o=r.config,c=r.state,l=c.cssRule,d=c.style;return o.boost_useCssRule?function(o){var c=this;i(this,a),o.each(function(a){var o=this;i(this,c);const u=s&&(null==s?void 0:s.call(r,a)),h=(t?"."+(zt.shapes+r.getTargetSelectorSuffix(a.id)):"")+e;e in l&&d.sheet.deleteRule(l[h]),r.state.cssRule[h]=function(t,e,n){var s=this;const a=t.rootSelector,r=void 0===a?"":a,o=t.sheet,c=r+" "+function(t){return i(this,s),t.replace(/\s?(bb-)/g,".$1").replace(/\.+/g,".")}.bind(this)(e)+" {"+n.join(";")+"}";return o[o.insertRule?"insertRule":"addRule"](c,o.cssRules.length)}(d,h,n.filter(Boolean).map(function(t){return i(this,o),A(u)&&-1===t.indexOf(":")?t+": "+u:t||""}.bind(this)))}.bind(this))}.bind(this):function(){i(this,a)}.bind(this)},getStylePropValue:function(t){return this.config.boost_useCssRule?null:w(t)?t.bind(this):t}};function ti(t,e,i,n,s){var a;const r=t.value,o=this.isCandlestickType(t),c=S(r)&&r<0||o&&!(null!=(a=this.getCandlestickData(t))&&a._isUp);let l=e.x,d=e.y;return n?"start"===i?(l+=c?0:8,d+=4):"middle"===i?(l+=8,d-=8):"end"===i&&(c&&(l-=8),d+=4):("start"===i?(l+=4,c&&(d+=16)):"middle"===i?d-=8:"end"===i&&(l-=4,c&&(d+=16)),s&&(d+=c?-17:o?13:7)),{x:l,y:d}}function ei(t,e){var i;const n=this.config.data_labels_position,s=t.id,a=t.index,r=t.value;return null!=(i=w(n)?n.bind(this.api)(e,r,s,a,this.$el.text):(s in n?n[s]:n)[e])?i:0}var ii={opacityForText:function(t){const e=this;return e.isBarType(t)&&!e.meetsLabelThreshold(Math.abs(e.getRatio("bar",t)),"bar")?"0":e.hasDataLabel?null:"0"},initText:function(){const t=this.$el;t.main.select("."+pt.chart).append("g").attr("class",$t.chartTexts).style("pointer-events",t.treemap?"none":null)},updateTargetsForText:function(t){var e=this;const n=this,s=n.getChartClass("Text"),a=n.getClass("texts","id"),r=n.classFocus.bind(n);n.$el.main.select("."+$t.chartTexts).selectAll("."+$t.chartText).data(t).attr("class",function(t){return i(this,e),(""+s(t)+r(t)).trim()}.bind(this)).enter().append("g").style("opacity","0").attr("class",s).call(n.setCssRule(!0," ."+$t.text,["fill","pointer-events:none"],n.updateTextColor)).append("g").attr("class",a)},updateText:function(){var t=this;const e=this,n=e.$el,a=e.$T,r=e.config,o=e.axis,c=e.getClass("text","index"),l=r.data_labels.centered,d=n.main.selectAll("."+$t.texts).selectAll("."+$t.text).data(e.labelishData.bind(e));a(d.exit()).style("fill-opacity","0").remove(),n.text=d.enter().append("text").merge(d).attr("class",c).attr("text-anchor",function(n){i(this,t);let s=r["axis_"+(null==o?void 0:o.getId(n.id))+"_inverted"]?n.value>0:n.value<0;if(e.isCandlestickType(n)){const t=e.getCandlestickData(n);s=!(null!=t&&t._isUp)}else if(e.isTreemapType(n))return l?"middle":"start";return r.axis_rotated?s?"end":"start":"middle"}.bind(this)).style("fill",e.getStylePropValue(e.updateTextColor)).style("fill-opacity","0").each((function(t,i,n){const a=(0,s.select)(this);let r=t.value;if(e.isBubbleZType(t))r=e.getBubbleZData(r,"z");else if(e.isCandlestickType(t)){const i=e.getCandlestickData(t);i&&(r=i.close)}r=e.isTreemapType(t)?e.treemapDataLabelFormat(t)(a):e.dataLabelFormat(t.id)(r,t.id,t.index,n),S(r)?this.textContent=r:N(a,r)}))},updateTextColor:function(t){const e=this,i=e.config,n=i.data_labels_colors,s=e.isArcType(t)&&!e.isRadarType(t)||e.isTreemapType(t)?null:e.color(t);let a;if(A(n))a=n;else if(M(n)){a=n[(t.data||t).id]}else w(n)&&(a=n.bind(e.api)(s,t));if(e.isCandlestickType(t)&&!w(n)){const n=e.getCandlestickData(t);if(null==n||!n._isUp){const e=i.candlestick_color_down;a=M(e)?e[t.id]:e}}return a||s},updateTextBackgroundColor:function(t){const e=this,i=e.$el,n=e.config.data_labels_backgroundColors;let s="";if(A(n)||M(n)){const a=A(n)?"":e.getTargetSelectorSuffix("id"in t?t.id:t.data.id),r=i.defs.select(["filter[id*='labels-bg","']"].join(a));r.size()&&(s="url(#"+r.attr("id")+")")}return s||null},redrawText:function(t,e,i,n){const s=this,a=s.$T,r=s.axis,o=s.config,c=s.state.hasTreemap,l=U(!0),d=o.axis_rotated,u=o.data_labels.rotate,h=function(t){let e="middle";return t>0&&t<=170?e="end":t>190&&t<=360&&(e="start"),e}(u),g=u?"rotate("+u+")":"";return s.$el.text.style("fill",s.getStylePropValue(s.updateTextColor)).attr("filter",s.updateTextBackgroundColor.bind(s)).style("fill-opacity",i?0:s.opacityForText.bind(s)).each((function(i,f){const p=a(c&&this.childElementCount?this.parentNode:this,!(!n||!this.getAttribute("x")),l),x=o["axis_"+(null==r?void 0:r.getId(i.id))+"_inverted"];let b={x:t.bind(this)(i,f),y:e.bind(this)(i,f)};u&&(b=ti.bind(s)(i,b,h,d,x),p.attr("text-anchor",h)),this.childElementCount||u?p.attr("transform","translate("+b.x+" "+b.y+") "+g):p.attr("x",b.x).attr("y",b.y)})),!0},getTextRect:function(t,e){var n=this;const a=this;let r=t.node?t.node():t;/text/i.test(r.tagName)||(r=r.querySelector("text"));const o=r.textContent,c=ge+"-"+o.replace(/\W/g,"_");let l=a.cache.get(c);return l||(a.$el.svg.append("text").style("visibility","hidden").style("font",(0,s.select)(r).style("font")).classed(e,!0).text(o).call(function(t){i(this,n),l=H(t.node())}.bind(this)).remove(),a.cache.add(c,l)),l},generateXYForText:function(t,e){var n=this;const s=this,a=s.state,r=a.hasRadar,o=a.hasTreemap,c=Object.keys(t),l={},d=e?s.getXForText:s.getYForText;return r&&c.push("radar"),o&&c.push("treemap"),c.forEach(function(e){i(this,n),l[e]=s["generateGet"+K(e)+"Points"](t[e],!1)}.bind(this)),function(t,e){const i=(s.isAreaType(t)?"area":s.isBarType(t)&&"bar")||s.isCandlestickType(t)&&"candlestick"||s.isRadarType(t)&&"radar"||s.isTreemapType(t)&&"treemap"||"line";return d.call(s,l[i](t,e),t,this)}},getCenteredTextPos:function(t,e,i,n){const s=this,a=s.config,r=a.axis_rotated,o=s.isBarType(t),c=s.isTreemapType(t);if(a.data_labels.centered&&(o||c)){const a=H(i);if(o){const i=s.getRangedData(t,null,"bar")>=0;if(r){const t=(i?e[1][1]-e[0][1]:e[0][1]-e[1][1])/2+a.width/2;return i?-t-3:t+2}{const t=(i?e[0][1]-e[1][1]:e[1][1]-e[0][1])/2+a.height/2;return i?t:-t-2}}if(c)return"x"===n?(e[1][0]-e[0][0])/2:(e[1][1]-e[0][1])/2+a.height/2}return 0},getXForText:function(t,e,i){const n=this,s=n.config,a=s.axis_rotated,r=n.isTreemapType(e);let o=t[0][0];var c;if(n.isCandlestickType(e))a?o=null!=(c=n.getCandlestickData(e))&&c._isUp?t[2][2]+4:t[2][1]-4:o+=(t[1][0]-o)/2;else if(r)o+=s.data_labels.centered?0:5;else if(a){const i=s["axis_"+n.axis.getId(e.id)+"_inverted"],a=n.isBarType(e)?4:6,r=e.value;o=t[2][1],i?o-=a*(r>0?1:-1):o+=a*(r<0?-1:1)}else o=n.hasType("bar")?(t[2][0]+t[0][0])/2:o;return(a||r)&&(o+=n.getCenteredTextPos(e,t,i,"x")),o+ei.call(this,e,"x")},getYForText:function(t,e,i){const n=this,s=n.axis,a=n.config,r=n.state,o=a.axis_rotated,c=a["axis_"+(null==s?void 0:s.getId(e.id))+"_inverted"],l=n.isBarType(e),d=n.isTreemapType(e),u=a.point_r,h=H(i);let g,f=e.value,p=3;if(n.isCandlestickType(e))f=n.getCandlestickData(e),o?(g=t[0][0],g+=(t[1][0]-g)/2+p):(g=f&&f._isUp?t[2][2]-p:t[2][1]+4*p,c&&(g+=15*(f._isUp?1:-1)));else if(d)g=t[0][1]+(a.data_labels.centered?0:h.height+5);else if(o)g=(t[0][0]+t[2][0]+.6*h.height)/2;else if(g=t[2][1],S(u)&&u>5&&(n.isLineType(e)||n.isScatterType(e))&&(p+=a.point_r/2.3),f<0||0===f&&!r.hasPositiveValue&&r.hasNegativeValue)g+=c?l?-3:-5:h.height+(l?-p:p);else{let t=2*-p;l?t=-p:n.isBubbleType(e)&&(t=p),c&&(t=l?10:15),g+=t}return o&&!d||(g+=n.getCenteredTextPos(e,t,i,"y")),g+ei.call(this,e,"y")},markOverlapped:function(t,e,n){var a=this;const r=e.$el.arcs.selectAll(n),o=r.filter(function(e){return i(this,a),e.data.id!==t}.bind(this)),c=r.filter(function(e){return i(this,a),e.data.id===t}.bind(this)),l=tt(c.node()),d=function(t,e){return i(this,a),Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}.bind(this);c.node()&&o.each((function(){const t=tt(this),e=(0,s.select)(this),i=d(l.e,l.f)>d(t.e,t.f)?c:e,n=Math.ceil(Math.abs(l.e-t.e))<Math.ceil(i.node().getComputedTextLength()),a=Math.ceil(Math.abs(l.f-t.f))<parseInt(c.style("font-size"),10);e.classed($t.TextOverlapping,n&&a)}))},undoMarkOverlapped:function(t,e){t.$el.arcs.selectAll(e).each((function(){(0,s.selectAll)([this,this.previousSibling]).classed($t.TextOverlapping,!1)}))},meetsLabelThreshold:function(t,e){void 0===t&&(t=0);return t>=(this.config[e+"_label_threshold"]||0)}};function ni(t,e){void 0===t&&(t="left");const i=S(e);let n;return n=t.indexOf("center")>-1?i?e/2:"middle":t.indexOf("right")>-1?i?e:"end":i?0:"start",n}var si={initTitle:function(){const t=this.config,e=this.$el;if(t.title_text){e.title=e.svg.append("g");N(e.title.append("text").style("text-anchor",ni(t.title_position)).attr("class",$t.title),t.title_text,[.3,1.5])}},redrawTitle:function(){const t=this,e=t.config,i=t.state.current,n=t.$el.title;if(n){const s=ni(e.title_position,i.width),a=(e.title_padding.top||0)+t.getTextRect(t.$el.title,$t.title).height;n.attr("transform","translate("+s+", "+a+")")}},getTitlePadding:function(){const t=this,e=t.$el.title,i=t.config;return(i.title_padding.top||0)+(e?t.getTextRect(e,$t.title).height:0)+(i.title_padding.bottom||0)}},ai={initTooltip:function(){const t=this,e=t.config,i=t.$el;i.tooltip=(0,s.select)(e.tooltip_contents.bindto),i.tooltip.empty()&&(i.tooltip=i.chart.append("div").attr("class",Xt.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),t.bindTooltipResizePos()},initShowTooltip:function(){const t=this,e=t.config,i=t.$el,n=t.state,s=n.hasAxis,a=n.hasRadar;if(e.tooltip_init_show){var r,o;null!=(r=t.axis)&&r.isTimeSeries()&&A(e.tooltip_init_x)&&(e.tooltip_init_x=lt.call(t,e.tooltip_init_x)),t.api.tooltip.show({data:(o={},o[s||a?"x":"index"]=e.tooltip_init_x,o)});const n=e.tooltip_init_position;if(!e.tooltip_contents.bindto&&!D(n)){const t=n.top,e=void 0===t?0:t,s=n.left,a=void 0===s?50:s;i.tooltip.style("top",A(e)?e:e+"px").style("left",A(a)?a:a+"px").style("display",null)}}},getTooltipHTML:function(){const t=this,e=t.api,i=t.config;return w(i.tooltip_contents)?i.tooltip_contents.bind(e).apply(void 0,arguments):t.getTooltipContent.apply(t,arguments)},getTooltipContent:function(t,e,n,s){var a=this;const r=this,o=r.api,c=r.config,l=r.state,d=r.$el,u=["title","name","value"].map(function(t){i(this,a);const e=c["tooltip_format_"+t];return w(e)?e.bind(o):e}.bind(this)),h=u[0],g=u[1],f=u[2],p=function(){return i(this,a),B((h||e).apply(void 0,arguments))}.bind(this),x=function(){var t=this;return i(this,a),B((g||function(e){return i(this,t),e}.bind(this)).apply(void 0,arguments))}.bind(this),b=function(){var t=this;i(this,a);return B((f||(l.hasTreemap||r.isStackNormalized()?function(e,n){return i(this,t),(100*n).toFixed(2)+"%"}.bind(this):n)).apply(void 0,arguments))}.bind(this),m=c.tooltip_order,_=function(t){return i(this,a),r.axis&&r.isBubbleZType(t)?r.getBubbleZData(t.value,"z"):r.getBaseValue(t)}.bind(this),v=r.levelColor?function(t){return i(this,a),r.levelColor(t.value)}.bind(this):function(t){return i(this,a),s(t)}.bind(this),y=c.tooltip_contents,A=y.template,S=r.mapToTargetIds();if(null===m&&c.data_groups.length){const e=r.orderTargets(r.data.targets).map(function(t){return i(this,a),t.id}.bind(this)).reverse();t.sort(function(t,n){i(this,a);let s=t?t.value:null,r=n?n.value:null;return s>0&&r>0&&(s=t.id?e.indexOf(t.id):null,r=n.id?e.indexOf(n.id):null),s-r}.bind(this))}else/^(asc|desc)$/.test(m)?t.sort(function(t,e){i(this,a);const n=t?_(t):null,s=e?_(e):null;return"asc"===m?n-s:s-n}.bind(this)):w(m)&&t.sort(m.bind(o));const R=r.getTooltipContentTemplate(A),C=t.length;let E,O,L,P,D;for(D=0;D<C;D++)if(O=t[D],O&&(_(O)||0===_(O))){if(k(E)){const t=(l.hasAxis||l.hasRadar)&&p(O.x);E=ct(R[0],{CLASS_TOOLTIP:Xt.tooltip,TITLE:T(t)?A?t:'<tr><th colspan="2">'+t+"</th></tr>":""})}if(!O.ratio&&d.arcs&&(L=["arc",r.$el.arcs.select("path."+xt.arc+"-"+O.id).data()[0]],O.ratio=r.getRatio.apply(r,L)),L=[O.ratio,O.id,O.index],r.isAreaRangeType(O)){const t=["high","low"].map(function(t){return i(this,a),b.apply(void 0,[r.getRangedData(O,t)].concat(L))}.bind(this)),e=t[0],n=t[1];P="<b>Mid:</b> "+b.apply(void 0,[_(O)].concat(L))+" <b>High:</b> "+e+" <b>Low:</b> "+n}else if(r.isCandlestickType(O)){const t=["open","high","low","close","volume"].map(function(t){i(this,a);return r.getRangedData(O,t,"candlestick")?b.apply(void 0,[r.getRangedData(O,t,"candlestick")].concat(L)):void 0}.bind(this)),e=t[0],n=t[1],s=t[2],o=t[3],c=t[4];P="<b>Open:</b> "+e+" <b>High:</b> "+n+" <b>Low:</b> "+s+" <b>Close:</b> "+o+(c?" <b>Volume:</b> "+c:"")}else if(r.isBarRangeType(O)){const t=O,e=t.value,i=t.id,n=t.index;P=""+b(e,void 0,i,n)}else P=b.apply(void 0,[_(O)].concat(L));if(void 0!==P){if(null===O.name)continue;const t=x.apply(void 0,[O.name].concat(L)),e=v(O),n={CLASS_TOOLTIP_NAME:Xt.tooltipName+r.getTargetSelectorSuffix(O.id),COLOR:A||!r.patterns?e:'<svg><rect style="fill:'+e+'" width="10" height="10"></rect></svg>',NAME:t,VALUE:P};if(A&&M(y.text)){const t=S.indexOf(O.id);Object.keys(y.text).forEach(function(e){i(this,a),n[e]=y.text[e][t]}.bind(this))}E+=ct(R[1],n)}}return E+"</table>"},getTooltipContentTemplate:function(t){return(t||'<table class="{=CLASS_TOOLTIP}"><tbody>\n\t\t\t\t{=TITLE}\n\t\t\t\t{{<tr class="{=CLASS_TOOLTIP_NAME}">\n\t\t\t\t\t<td class="name">'+(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>')+'{=NAME}</td>\n\t\t\t\t\t<td class="value">{=VALUE}</td>\n\t\t\t\t</tr>}}\n\t\t\t</tbody></table>').replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},setTooltipPosition:function(t,e){var n=this;const s=this,a=s.config,r=s.scale,o=s.state,c=s.$el,l=c.eventRect,d=c.tooltip,u=a.tooltip_contents.bindto,h=a.axis_rotated,g=null==d?void 0:d.datum();if(!u&&g){var f,p;const c=null!=t?t:JSON.parse(g.current),u=V(o.event,null!=e?e:null==l?void 0:l.node()),x={x:u[0],y:u[1]};if(o.hasAxis&&r.x&&g&&"x"in g){const t=function(t,e,a){var c;void 0===t&&(t=0),void 0===a&&(a="y"),i(this,n);const l=r[e?null==(c=s.axis)?void 0:c.getId(e):a];return l?l(t)+(h?o.margin.left:o.margin.top):0}.bind(this);x.xAxis=r.x(g.x)+(a.tooltip_position?h?o.margin.top:o.margin.left:0),1===c.length?x.yAxis=t(c[0].value,c[0].id):x.yAxis=t}const b=g.width,m=void 0===b?0:b,_=g.height,v=void 0===_?0:_,y=null!=(f=null==(p=a.tooltip_position)?void 0:p.bind(s.api)(c,m,v,null==l?void 0:l.node(),x))?f:s.getTooltipPosition.bind(s)(m,v,x);["top","left"].forEach(function(t){i(this,n);const e=y[t];d.style(t,e+"px"),"left"!==t||g.xPosInPercent||(g.xPosInPercent=e/o.current.width*100)}.bind(this))}},getTooltipPosition:function(t,e,n){var s=this;const a=this,r=a.config,o=a.scale,c=a.state,l=c.width,d=c.height,u=c.current,h=c.hasRadar,g=c.hasTreemap,f=c.isLegendRight,p=c.inputType,x=a.hasType("gauge")&&!r.gauge_fullCircle,b=r.axis_rotated,m=a.hasArcType(),_=a.getSvgLeft(!0);let v=_+u.width-a.getCurrentPaddingByDirection("right");let y=n.x,T=n.y;if(h)y+=y>=l/2?15:-(t+15),T+=15;else if(m){if("touch"!==p){var w,A;let t=null!=(w=null==a.getTitlePadding?void 0:a.getTitlePadding())?w:0;t&&x&&null!=(A=r.arc_rangeText_values)&&A.length&&(t+=10),y+=(l-(f?a.getLegendWidth():0))/2,T+=(x?d:d/2+e)+t}}else if(g)T+=e;else{const t={top:a.getCurrentPaddingByDirection("top",!0),left:a.getCurrentPaddingByDirection("left",!0)};b?(y+=_+t.left+20,T=t.top+n.xAxis+20,v-=_):(y=_+t.left+20+(o.zoom?y:n.xAxis),T+=t.top-5)}if(y+t+15>v&&(y-=t+(g||m?0:b?40:38)),T+e>u.height){T-=x?1.5*e:e+(g?e+10:30)}const S={top:T,left:y};return Object.keys(S).forEach(function(t){i(this,s),S[t]<0&&(S[t]=0)}.bind(this)),S},showTooltip:function(t,e){var n=this;const s=this,a=s.config,r=s.$el.tooltip,o=t.filter(function(t){return i(this,n),t&&T(s.getBaseValue(t))}.bind(this));if(!r||0===o.length||!a.tooltip_show)return;let c=r.datum();const l=JSON.stringify(t);if(!c||c.current!==l){const e=t.concat().sort()[0],i=e.index,n=e.x;X(a.tooltip_onshow,s.api,t),r.html(s.getTooltipHTML(t,s.axis?s.axis.getXAxisTickFormat():s.categoryName.bind(s),s.getDefaultValueFormat(),s.color)).style("display",null).style("visibility",null).datum(c={index:i,x:n,current:l,width:r.property("offsetWidth"),height:r.property("offsetHeight")}),X(a.tooltip_onshown,s.api,t),s._handleLinkedCharts(!0,i)}s.setTooltipPosition(o,e)},bindTooltipResizePos:function(){var t=this;const e=this,n=e.resizeFunction,s=e.state,a=e.$el.tooltip;n.add(function(){if(i(this,t),"block"===a.style("display")){const t=s.current,e=a.datum(),i=e.width,n=e.xPosInPercent;let r=t.width/100*n;const o=t.width-(r+i);o<0&&(r+=o),a.style("left",r+"px")}}.bind(this))},hideTooltip:function(t){const e=this,i=e.api,n=e.config,s=e.$el.tooltip;if(s&&"none"!==s.style("display")&&(!n.tooltip_doNotHide||t)){var a;const t=JSON.parse(null!=(a=s.datum().current)?a:{});X(n.tooltip_onhide,i,t),s.style("display","none").style("visibility","hidden").datum(null),X(n.tooltip_onhidden,i,t)}},_handleLinkedCharts:function(t,e){var n=this;const s=this,a=s.charts,o=s.config,c=s.state.event;if(null!=c&&c.isTrusted&&o.tooltip_linked&&a.length>1){const c=o.tooltip_linked_name;a.filter(function(t){return i(this,n),t!==s.api}.bind(this)).forEach(function(s){i(this,n);const a=s.internal,o=a.config,l=a.$el,d=o.tooltip_linked,u=o.tooltip_linked_name,h=r.body.contains(l.chart.node());if(d&&c===u&&h){const i=l.tooltip.data()[0],n=e!==(null==i?void 0:i.index);try{s.tooltip[t&&n?"show":"hide"]({index:e})}catch(t){}}}.bind(this))}},updateTooltipOnRedraw:function(t,e){var n=this;const a=this,o=a.config,c=a.$el,l=c.eventRect,d=c.svg,u=c.tooltip,h=a.state,g=h.event,f=h.hasAxis,p=h.hasRadar,x=h.hasTreemap;if("block"===(null==u?void 0:u.style("display"))&&g){var b;const c=null!=t?t:null==(b=p?d:l)?void 0:b.node();if(f||p)if(a.isMultipleX())a.selectRectForMultipleXs(c,!1);else{const t=null!=e?e:a.getDataIndexFromEvent(g);-1===e?a.api.tooltip.hide():(a.selectRectForSingle(c,t),a.setExpand(t,null,!0))}else{const t=g.clientX,e=g.clientY;setTimeout(function(){i(this,n);let o=r.elementFromPoint(t,e);const c=(0,s.select)(o).datum();if(c){const t=a.hasArcType()?a.convertToArcData(a.updateAngle(c)):null==c?void 0:c.data;x&&(o=d.node()),t&&a.showTooltip([t],o)}else a.api.tooltip.hide()}.bind(this),o.transition_duration)}}}},ri={getTranslate:function(t,e){void 0===e&&(e=0);const i=this,n=i.config,s=i.state,a=n.axis_rotated;let r,o,c=0;if(e&&/^(x|y2?)$/.test(t)&&(c=i.getAxisSize(t)*e),"main"===t)r=O(s.margin.left),o=O(s.margin.top);else if("context"===t)r=O(s.margin2.left),o=O(s.margin2.top);else if("legend"===t)r=s.margin3.left,o=s.margin3.top;else if("x"===t)r=a?-c:0,o=a?0:s.height+c;else if("y"===t)r=a?0:-c,o=a?s.height+c:0;else if("y2"===t)r=a?0:s.width+c,o=a?-c-1:0;else if("subX"===t)r=0,o=a?0:s.height2;else if("arc"===t){var l;r=s.arcWidth/2,o=s.arcHeight/2,null!=(l=n.arc_rangeText_values)&&l.length&&(o+=5+(i.hasType("gauge")&&n.title_text?10:0))}else if("polar"===t)r=s.arcWidth/2,o=s.arcHeight/2;else if("radar"===t){const t=i.getRadarSize(),e=t[0],n=t[1];r=s.width/2-e,o=s.height/2-n}return"translate("+r+", "+o+")"},transformMain:function(t,e){const i=this,n=i.$el.main,s=i.$T,a=null!=e&&e.axisX?e.axisX:s(n.select("."+mt.axisX),t),r=null!=e&&e.axisY?e.axisY:s(n.select("."+mt.axisY),t),o=null!=e&&e.axisY2?e.axisY2:s(n.select("."+mt.axisY2),t);s(n,t).attr("transform",i.getTranslate("main")),a.attr("transform",i.getTranslate("x")),r.attr("transform",i.getTranslate("y")),o.attr("transform",i.getTranslate("y2")),n.select("."+xt.chartArcs).attr("transform",i.getTranslate("arc"))},transformAll:function(t,e){const i=this,n=i.config,s=i.state,a=s.hasAxis,r=s.hasTreemap,o=i.$el;r||i.transformMain(t,e),a&&n.subchart_show&&i.transformContext(t,e),o.legend&&i.transformLegend(t)}},oi={isValidChartType:function(t){return!!(t&&Object.values(d).indexOf(t)>-1)},setTargetType:function(t,e){var n=this;const s=this,a=s.config,r=s.state.withoutFadeIn;s.mapToTargetIds(t).forEach(function(t){i(this,n),r[t]=e===a.data_types[t],a.data_types[t]=e}.bind(this)),t||(a.data_type=e)},updateTypesElements:function(){var t=this;const e=this,n=e.state.current;Object.keys(d).forEach(function(s){i(this,t);const a=d[s],r=e.hasType(a,null,!0),o=n.types.indexOf(a);-1===o&&r?n.types.push(a):o>-1&&!r&&n.types.splice(o,1)}.bind(this)),e.setChartElements()},hasType:function(t,e,n){var s,a=this;void 0===n&&(n=!1);const r=this,o=r.config,c=r.state.current,l=o.data_types,d=e||r.data.targets;let u=!1;return!n&&(null==(s=c.types)?void 0:s.indexOf(t))>-1?u=!0:null!=d&&d.length?d.forEach(function(e){i(this,a);const n=l[e.id];(n===t||!n&&"line"===t)&&(u=!0)}.bind(this)):Object.keys(l).length?Object.keys(l).forEach(function(e){i(this,a),l[e]===t&&(u=!0)}.bind(this)):u=o.data_type===t,u},hasTypeOf:function(t,e,n){var s=this;return void 0===n&&(n=[]),t in h&&!h[t].filter(function(t){return i(this,s),-1===n.indexOf(t)}.bind(this)).every(function(t){return i(this,s),!this.hasType(t,e)}.bind(this))},isTypeOf:function(t,e){var i;const n=A(t)?t:t.id,s=this.config&&((null==(i=this.config.data_types)?void 0:i[n])||this.config.data_type);return z(e)?e.indexOf(s)>=0:s===e},hasPointType:function(){const t=this;return t.hasTypeOf("Line")||t.hasType("bubble")||t.hasType("scatter")},hasArcType:function(t,e){return this.hasTypeOf("Arc",t,e)},hasMultiArcGauge:function(){return this.hasType("gauge")&&"multi"===this.config.gauge_type},isLineType:function(t){const e=A(t)?t:t.id;return!this.config.data_types[e]||this.isTypeOf(e,h.Line)},isStepType:function(t){return this.isTypeOf(t,h.Step)},isSplineType:function(t){return this.isTypeOf(t,h.Spline)},isAreaType:function(t){return this.isTypeOf(t,h.Area)},isAreaRangeType:function(t){return this.isTypeOf(t,h.AreaRange)},isBarType:function(t){return this.isTypeOf(t,"bar")},isBubbleType:function(t){return this.isTypeOf(t,"bubble")},isCandlestickType:function(t){return this.isTypeOf(t,"candlestick")},isScatterType:function(t){return this.isTypeOf(t,"scatter")},isTreemapType:function(t){return this.isTypeOf(t,"treemap")},isPieType:function(t){return this.isTypeOf(t,"pie")},isGaugeType:function(t){return this.isTypeOf(t,"gauge")},isDonutType:function(t){return this.isTypeOf(t,"donut")},isPolarType:function(t){return this.isTypeOf(t,"polar")},isRadarType:function(t){return this.isTypeOf(t,"radar")},isArcType:function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isPolarType(t)||this.isRadarType(t)},isCirclePoint:function(t){const e=this.config,i=e.point_pattern;let n=!1;return n="circle"===(null==t?void 0:t.tagName)||"circle"===e.point_type&&(!i||z(i)&&0===i.length),n},lineData:function(t){return this.isLineType(t)?[t]:[]},arcData:function(t){return this.isArcType(t.data)?[t]:[]},labelishData:function(t){var e=this;return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isCandlestickType(t)||this.isRadarType(t)||this.isTreemapType(t)?t.values.filter(function(t){return i(this,e),S(t.value)||!!t.value}.bind(this)):[]},barLineBubbleData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function(t){return["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)>=0}};let ci=function(){function t(t){this.api=void 0,this.config=void 0,this.cache=void 0,this.$el=void 0,this.state=void 0,this.charts=void 0,this.data={xs:{},targets:[]},this.axis=void 0,this.scale={x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null},this.org={xScale:null,xDomain:null},this.color=void 0,this.patterns=void 0,this.levelColor=void 0,this.point=void 0,this.brush=void 0,this.format={extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null};const e=this;e.api=t,e.config=new ie,e.cache=new fe;const i=new Gt;e.$el=i.getStore("element"),e.state=i.getStore("state"),e.$T=e.$T.bind(e)}var e=t.prototype;return e.$T=function(t,e,i){const n=this.config,a=this.state,r=n.transition_duration,o=n.subchart_show;let c=t;if(c){"tagName"in c&&(c=(0,s.select)(c));c=(!1!==e&&r||e)&&(!a.zooming||a.dragging)&&!a.resizing&&a.rendered&&!o?c.transition(i).duration(r):c}return c},e.beforeInit=function(){const t=this;t.callPluginHook("$beforeInit"),X(t.config.onbeforeinit,t.api)},e.afterInit=function(){const t=this;t.callPluginHook("$afterInit"),X(t.config.onafterinit,t.api)},e.init=function(){const t=this,e=t.config,i=t.state,n=t.$el,a=e.boost_useCssRule;if(ht(t),i.hasRadar=!i.hasAxis&&t.hasType("radar"),i.hasTreemap=!i.hasAxis&&t.hasType("treemap"),i.hasAxis=!t.hasArcType()&&!i.hasTreemap,i.datetimeId="bb-"+ +new Date*U(),a){const t=r.createElement("style");t.type="text/css",r.head.appendChild(t),i.style={rootSelctor:"."+i.datetimeId,sheet:t.sheet},n.style=t}const o={element:e.bindto,classname:"bb"};M(e.bindto)&&(o.element=e.bindto.element||"#chart",o.classname=e.bindto.classname||o.classname),n.chart=w(o.element.node)?e.bindto.element:(0,s.select)(o.element||[]),n.chart.empty()&&(n.chart=(0,s.select)(r.body.appendChild(r.createElement("div")))),n.chart.html("").classed(o.classname,!0).classed(i.datetimeId,a).style("position","relative"),t.initParams(),t.initToRender()},e.initToRender=function(t){var e=this;const n=this,s=n.config,r=n.state,o=n.$el.chart,c=function(){return i(this,e),"none"===o.style("display")||"hidden"===o.style("visibility")}.bind(this),l=s.render.lazy||c(),d=a.MutationObserver;l&&d&&!1!==s.render.observe&&!t&&new d(function(t,s){i(this,e),c()||(s.disconnect(),r.rendered||n.initToRender(!0))}.bind(this)).observe(o.node(),{attributes:!0,attributeFilter:["class","style"]}),l&&!t||n.convertData(s,function(t){i(this,e),n.initWithData(t),n.afterInit()}.bind(this))},e.initParams=function(){var t=this;const e=this,s=e.config,o=e.format,c=e.state,l=s.axis_rotated;if(e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),!1===s.padding&&(s.axis_x_show=!1,s.axis_y_show=!1,s.axis_y2_show=!1,s.subchart_show=!1),(e.hasPointType()||null!=e.hasLegendDefsPoint&&e.hasLegendDefsPoint())&&(e.point=e.generatePoint()),c.hasAxis){e.initClip(),o.extraLineClasses=e.generateExtraLineClass(),o.dataTime=s.data_xLocaltime?n.timeParse:n.utcParse,o.axisTime=s.axis_x_localtime?n.timeFormat:n.utcFormat;const a=e.config.zoom_enabled&&"drag"===e.config.zoom_type;o.defaultAxisTime=function(n){i(this,t);const s=e.scale,r=s.x,c=s.zoom,l=a?c:c&&r.orgDomain().toString()!==c.domain().toString(),d=(n.getMilliseconds()?".%L":n.getSeconds()&&".:%S")||n.getMinutes()&&"%I:%M"||n.getHours()&&"%I %p"||1!==n.getDate()&&"%b %d"||l&&1===n.getDate()&&"%b'%y"||n.getMonth()&&"%-m/%-d"||"%Y";return o.axisTime(d)(n)}.bind(this)}c.isLegendRight="right"===s.legend_position,c.isLegendInset="inset"===s.legend_position,c.isLegendTop="top-left"===s.legend_inset_anchor||"top-right"===s.legend_inset_anchor,c.isLegendLeft="top-left"===s.legend_inset_anchor||"bottom-left"===s.legend_inset_anchor,c.rotatedPadding.top=e.getResettedPadding(c.rotatedPadding.top),c.rotatedPadding.right=l&&!s.axis_x_show?0:30,c.inputType=function(t,e){var n=this;const s=a.DocumentTouch,o=a.matchMedia,c=a.navigator;let l=!1;if(e)if(c&&"maxTouchPoints"in c)l=c.maxTouchPoints>0;else if("ontouchmove"in a||s&&r instanceof s)l=!0;else if(null!=o&&o("(pointer:coarse)").matches)l=!0;else{const t=c.userAgent;l=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(t)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(t)}return(t&&["any-hover:hover","any-pointer:fine"].some(function(t){return i(this,n),null==o?void 0:o("("+t+")").matches}.bind(this))?"mouse":l&&"touch")||"mouse"}(s.interaction_inputType_mouse,s.interaction_inputType_touch)},e.initWithData=function(t){var e=this;const n=this,s=n.config,a=n.scale,r=n.state,o=n.$el,c=n.org,l=r,d=l.hasAxis,u=l.hasTreemap,h=s.interaction_enabled,g=n.hasType("polar");if(d&&(n.axis=n.getAxisInstance(),s.zoom_enabled&&n.initZoom()),n.data.xs={},n.data.targets=n.convertDataToTargets(t),s.data_filter&&(n.data.targets=n.data.targets.filter(s.data_filter.bind(n.api))),s.data_hide&&n.addHiddenTargetIds(!0===s.data_hide?n.mapToIds(n.data.targets):s.data_hide),s.legend_hide&&n.addHiddenLegendIds(!0===s.legend_hide?n.mapToIds(n.data.targets):s.legend_hide),n.updateSizes(),n.updateScales(!0),d){const t=a.x,e=a.y,i=a.y2,r=a.subX,o=a.subY,l=a.subY2;t&&(t.domain(st(n.getXDomain(n.data.targets),!s.axis_x_inverted)),r.domain(t.domain()),c.xDomain=t.domain()),e&&(e.domain(n.getYDomain(n.data.targets,"y")),o.domain(e.domain())),i&&(i.domain(n.getYDomain(n.data.targets,"y2")),l&&l.domain(i.domain()))}if(o.svg=o.chart.append("svg").style("overflow","hidden").style("display","block"),h&&r.inputType){const t="touch"===r.inputType,e=s.onclick,i=s.onover,a=s.onout;o.svg.on("click",(null==e?void 0:e.bind(n.api))||null).on(t?"touchstart":"mouseenter",(null==i?void 0:i.bind(n.api))||null).on(t?"touchend":"mouseleave",(null==a?void 0:a.bind(n.api))||null)}s.svg_classname&&o.svg.attr("class",s.svg_classname);const f=w(s.color_tiles)&&n.patterns;(d||f||g||u||s.data_labels_backgroundColors||null!=n.hasLegendDefsPoint&&n.hasLegendDefsPoint())&&(o.defs=o.svg.append("defs"),d&&["id","idXAxis","idYAxis","idGrid"].forEach(function(t){i(this,e),n.appendClip(o.defs,r.clip[t])}.bind(this)),n.generateDataLabelBackgroundColorFilter(),f&&n.patterns.forEach(function(t){var n=this;return i(this,e),o.defs.append(function(){return i(this,n),t.node}.bind(this))}.bind(this))),n.updateSvgSize(),n.bindResize();const p=o.svg.append("g").classed(pt.main,!0).attr("transform",u?null:n.getTranslate("main"));var x;(o.main=p,s.subchart_show&&n.initSubchart(),s.tooltip_show&&n.initTooltip(),s.title_text&&n.initTitle(),!u&&s.legend_show&&n.initLegend(),s.data_empty_label_text&&p.append("text").attr("class",$t.text+" "+pt.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),d&&(s.regions.length&&n.initRegion(),s.clipPath||n.axis.init()),p.append("g").classed(pt.chart,!0).attr("clip-path",d?r.clip.path:null),n.callPluginHook("$init"),n.initChartElements(),d)&&(h&&(null==n.initEventRect||n.initEventRect()),n.initGrid(),s.clipPath&&(null==(x=n.axis)||x.init()));if(n.updateTargets(n.data.targets),n.updateDimension(),X(s.oninit,n.api),n.setBackground(),n.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),s.data_onmin||s.data_onmax){const t=n.getMinMaxData();X(s.data_onmin,n.api,t.min),X(s.data_onmax,n.api,t.max)}s.tooltip_show&&n.initShowTooltip(),r.rendered=!0},e.initChartElements=function(){var t=this;const e=this,n=e.state,s=n.hasAxis,a=n.hasRadar,r=n.hasTreemap,o=[];if(s){const n=["bar","bubble","candlestick","line"];e.config.bar_front&&n.push(n.shift()),n.forEach(function(n){i(this,t);const s=K(n);("line"===n&&e.hasTypeOf(s)||e.hasType(n))&&o.push(s)}.bind(this))}else if(r)o.push("Treemap");else{const t=e.hasType("polar");a||o.push("Arc","Pie"),e.hasType("gauge")?o.push("Gauge"):a?o.push("Radar"):t&&o.push("Polar")}o.forEach(function(n){i(this,t),e["init"+n]()}.bind(this)),I(e.config.data_labels)&&!e.hasArcType(null,["radar"])&&e.initText()},e.setChartElements=function(){const t=this.$el,e=t.chart,i=t.svg,n=t.defs,s=t.main,a=t.tooltip,r=t.legend,o=t.title,c=t.grid,l=t.needle,d=t.arcs,u=t.circle,h=t.bar,g=t.candlestick,f=t.line,p=t.area,x=t.text;this.api.$={chart:e,svg:i,defs:n,main:s,tooltip:a,legend:r,title:o,grid:c,arc:d,circles:u,bar:{bars:h},candlestick:g,line:{lines:f,areas:p},needle:l,text:{texts:x}}},e.setBackground=function(){const t=this,e=t.config.background,i=t.state,n=t.$el.svg;if(I(e)){const t=n.select("g").insert(e.imgUrl?"image":"rect",":first-child");e.imgUrl?t.attr("href",e.imgUrl):e.color&&t.style("fill",e.color).attr("clip-path",i.clip.path),t.attr("class",e.class||null).attr("width","100%").attr("height","100%")}},e.updateTargets=function(t){var e=this;const n=this,s=n.state,a=s.hasAxis,r=s.hasRadar,o=s.hasTreemap,c=function(s){return i(this,e),n["updateTargetsFor"+s](t.filter(n["is"+s+"Type"].bind(n)))}.bind(this);if(n.updateTargetsForText(t),a)["bar","candlestick","line"].forEach(function(t){i(this,e);const s=K(t);("line"===t&&n.hasTypeOf(s)||n.hasType(t))&&c(s)}.bind(this)),n.updateTargetsForSubchart&&n.updateTargetsForSubchart(t);else if(n.hasArcType(t)){let t="Arc";r?t="Radar":n.hasType("polar")&&(t="Polar"),c(t)}else o&&c("Treemap");const l=n.hasType("bubble")||n.hasType("scatter");l&&(null==n.updateTargetForCircle||n.updateTargetForCircle()),n.filterTargetsToShowAtInit(l)},e.filterTargetsToShowAtInit=function(t){var e=this;void 0===t&&(t=!1);const n=this,s=n.$el.svg,a=n.$T;let r="."+pt.target;t&&(r+=", ."+yt.chartCircles+" > ."+yt.circles),a(s.selectAll(r).filter(function(t){return i(this,e),n.isTargetToShow(t.id)}.bind(this))).style("opacity",null)},e.getWithOption=function(t){var e=this;const n={Dimension:!0,EventRect:!0,Legend:!1,Subchart:!0,Transform:!1,Transition:!0,TrimXDomain:!0,UpdateXAxis:"UpdateXDomain",UpdateXDomain:!1,UpdateOrgXDomain:!1,TransitionForExit:"Transition",TransitionForAxis:"Transition",Y:!0};return Object.keys(n).forEach(function(s){i(this,e);let a=n[s];A(a)&&(a=n[a]),n[s]=$(t,"with"+s,a)}.bind(this)),n},e.initialOpacity=function(t){const e=this.state.withoutFadeIn;return null!==this.getBaseValue(t)&&e[t.id]?null:"0"},e.bindResize=function(){var t=this;const e=this,n=e.config,s=e.state,r=function(t){var e=this;const n=[];let s;const a=function(){var e=this;a.clear(),!1===t?l(function(){var t=this;i(this,e),n.forEach(function(e){return i(this,t),e()}.bind(this))}.bind(this),{timeout:200}):s=pe(function(){var t=this;i(this,e),n.forEach(function(e){return i(this,t),e()}.bind(this))}.bind(this),S(t)?t:200)};return a.clear=function(){i(this,e),s&&(xe(s),s=null)}.bind(this),a.add=function(t){return i(this,e),n.push(t)}.bind(this),a.remove=function(t){return i(this,e),n.splice(n.indexOf(t),1)}.bind(this),a}(n.resize_timer),o=[];o.push(function(){return i(this,t),X(n.onresize,e.api)}.bind(this)),n.resize_auto&&o.push(function(){i(this,t),s.resizing=!0,n.legend_show&&(e.updateSizes(),e.updateLegend()),e.api.flush(!1)}.bind(this)),o.push(function(){i(this,t),X(n.onresized,e.api),s.resizing=!1}.bind(this)),o.forEach(function(e){return i(this,t),r.add(e)}.bind(this)),e.resizeFunction=r,a.addEventListener("resize",e.resizeFunction=r)},e.callPluginHook=function(t){for(var e=this,n=arguments.length,s=Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];this.config.plugins.forEach(function(n){i(this,e),"$beforeInit"===t&&(n.$$=this,this.api.plugins.push(n)),n[t].apply(n,s)}.bind(this))},t}();function li(t){var e=this;const n=this.config;let s,a,r;const o=function(){i(this,e);const t=a.shift();return t&&s&&P(s)&&t in s?(s=s[t],o()):t?void 0:s}.bind(this);Object.keys(n).forEach(function(c){i(this,e),s=t,a=c.split("_"),r=o(),R(r)&&(n[c]=r)}.bind(this)),this.api&&(this.state.orgConfig=t)}q(ci.prototype,[Ce,Ee,Le,{categoryName:function(t){var e;const i=this.config.axis_x_categories;return null!=(e=null==i?void 0:i[t])?e:t}},Ie,Xe,Fe,De,Ne,Ve,He,We,Ke,Je,Qe,ii,si,ai,ri,oi]);var di={resize:function(t){const e=this.internal,i=e.config,n=e.state;n.rendered&&(i.size_width=t?t.width:null,i.size_height=t?t.height:null,n.resizing=!0,this.flush(!1),e.resizeFunction())},flush:function(t){const e=this.internal,i=e.state,n=e.$el.zoomResetBtn;if(i.rendered){var s,a;if(i.resizing)null==(s=e.brush)||s.updateResize();else null==(a=e.axis)||a.setOrient();null==n||n.style("display","none"),e.scale.zoom=null,t?e.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):e.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1}),!i.resizing&&e.brush&&(e.brush.getSelection().call(e.brush.move),e.unselectRect())}else e.initToRender(!0)},destroy:function(){var t=this;const e=this.internal,n=e.$el,s=n.chart,r=n.style,o=n.svg;if(I(e)){e.callPluginHook("$willDestroy"),e.charts.splice(e.charts.indexOf(this),1),e.unbindAllEvents(),o.select("*").interrupt(),e.resizeFunction.clear(),a.removeEventListener("resize",e.resizeFunction),s.classed("bb",!1).style("position",null).selectChildren().remove(),r&&r.parentNode.removeChild(r),Object.keys(this).forEach(function(n){var s=this;i(this,t),"internal"===n&&Object.keys(e).forEach(function(t){i(this,s),e[t]=null}.bind(this)),this[n]=null,delete this[n]}.bind(this));for(const e in this)this[e]=function(){i(this,t)}.bind(this)}return null},config:function(t,e,i){const n=this.internal,s=n.config,a=n.state,r=null==t?void 0:t.replace(/\./g,"_");let o;return t&&r in s?R(e)?(s[r]=e,o=e,i&&this.flush()):o=s[r]:(0===arguments.length||D(t))&&(o=a.orgConfig),o}};const ui=function(t){var e=this;const n=this.internal.data.targets;if(!k(t)){const s=z(t)?t:[t];return n.filter(function(t){var n=this;return i(this,e),s.some(function(e){return i(this,n),e===t.id}.bind(this))}.bind(this))}return n};q(ui,{shown:function(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t,e){var n=this;void 0===e&&(e=!0);let s=null;if(t){const a=this.data(t);z(a)&&(s=[],a.forEach(function(t){var a=this;i(this,n);const r=t.values.map(function(t){return i(this,a),t.value}.bind(this));e?s=s.concat(r):s.push(r)}.bind(this)))}return s},names:function(t){return this.internal.updateDataAttributes("names",t)},colors:function(t){return this.internal.updateDataAttributes("colors",t)},axes:function(t){return this.internal.updateDataAttributes("axes",t)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}});var hi={data:ui};const gi=function(t){var e=this;return i(this,undefined),null==a.btoa?void 0:a.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,n){return i(this,e),String.fromCharCode(+("0x"+n))}.bind(this)))}.bind(void 0);function fi(t,e,n){var o=this;const c=e||n,l=c.width,d=c.height,u=new XMLSerializer,h=t.cloneNode(!0),g=function(t){var e=this;let n=[];return t.forEach(function(t){i(this,e);try{t.cssRules&&t.cssRules.length&&(n=n.concat(J(t.cssRules)))}catch(e){var s;null==(s=a.console)||s.warn("Error while reading rules from "+t.href+": "+e.toString())}}.bind(this)),n}(J(r.styleSheets)).filter(function(t){return i(this,o),t.cssText}.bind(this)).map(function(t){return i(this,o),t.cssText}.bind(this));h.setAttribute("xmlns",s.namespaces.xhtml),h.style.margin="0",h.style.padding="0",e.preserveFontStyle&&h.querySelectorAll("text").forEach(function(t){i(this,o),t.innerHTML=""}.bind(this));const f=u.serializeToString(h),p=r.createElement("style");p.appendChild(r.createTextNode(g.join("\n")));const x=u.serializeToString(p),b='<svg xmlns="'+s.namespaces.svg+'" width="'+l+'" height="'+d+'" \n\t\tviewBox="0 0 '+n.width+" "+n.height+'" \n\t\tpreserveAspectRatio="'+(!1===(null==e?void 0:e.preserveAspectRatio)?"none":"xMinYMid meet")+'">\n\t\t\t<foreignObject width="100%" height="100%">\n\t\t\t\t'+x+"\n\t\t\t\t"+f.replace(/(url\()[^#]+/g,"$1")+"\n\t\t\t</foreignObject></svg>";return"data:image/svg+xml;base64,"+gi(b)}function pi(t){var e=this;const n=t.getBoundingClientRect(),s=n.left,r=n.top,o=function(t){return i(this,e),t.textContent||t.childElementCount}.bind(this),c=[];return J(t.querySelectorAll("text")).filter(o).forEach(function(t){var n=this;i(this,e);const l=function(t){var e;i(this,n);const o=a.getComputedStyle(t),c=o.fill,l=o.fontFamily,d=o.fontSize,u=o.textAnchor,h=o.transform,g=function(t,e){const i=e.top,n=e.left,s=t.getBBox(),a=s.x,r=s.y,o=t.getScreenCTM(),c=o.a,l=o.b,d=o.c,u=o.d,h=o.e,g=o.f,f=t.getBoundingClientRect(),p=f.width,x=f.height;return{x:c*a+d*r+h-n,y:l*a+u*r+g-i+(x-Math.round(x/4)),width:p,height:x}}(t,{left:s,top:r}),f=g.x,p=g.y,x=g.width,b=g.height;return(e={})[t.textContent]={x:f,y:p,width:x,height:b,fill:c,fontFamily:l,fontSize:d,textAnchor:u,transform:h},e}.bind(this);if(t.childElementCount>1)return J(t.querySelectorAll("tspan")).filter(o).forEach(function(t){i(this,n),c.push(l(t))}.bind(this)),[];c.push(l(t))}.bind(this)),c}var xi={export:function(t,e){var n=this;const s=this.internal,a=s.state,o=s.$el,c=o.chart,l=o.svg,d=a.current,u=d.width,h=d.height,g=nt({width:u,height:h,preserveAspectRatio:!0,preserveFontStyle:!1,mimeType:"image/png"},t),f=fi(c.node(),g,{width:u,height:h}),p=g.preserveFontStyle?pi(l.node()):[];if(e&&w(e)){const t=new Image;t.crossOrigin="Anonymous",t.onload=function(){i(this,n);const s=r.createElement("canvas"),a=s.getContext("2d");s.width=g.width||u,s.height=g.height||h,a.drawImage(t,0,0),p.length&&(!function(t,e){var n=this;e.forEach(function(e){var s=this;i(this,n),Object.keys(e).forEach(function(n){var a=this;i(this,s);const r=e[n],o=r.x,c=r.y,l=r.width,d=r.height,u=r.fill,h=r.fontFamily,g=r.fontSize,f=r.transform;if(t.save(),t.font=g+" "+h,t.fillStyle=u,"none"===f)t.fillText(n,o,c);else{const e=f.replace(/(matrix|\(|\))/g,"").split(",");e.splice(4).every(function(t){return i(this,a),0==+t}.bind(this))?(e.push(o+l-l/4),e.push(c-d+d/3)):(e.push(o),e.push(c)),t.transform.apply(t,e),t.fillText(n,0,0)}t.restore()}.bind(this))}.bind(this))}(a,p),p.length=0),e.bind(this)(s.toDataURL(g.mimeType))}.bind(this),t.src=f}return f}},bi={focus:function(t){var e=this;const n=this.internal,s=n.state,a=n.mapToTargetIds(t),r=n.$el.svg.selectAll(n.selectorTargets(a.filter(n.isTargetToShow,n)));this.revert(),this.defocus(),r.classed(Ct.focused,!0).classed(Ct.defocused,!1),n.hasArcType()&&!s.hasRadar&&(n.expandArc(a),n.hasType("gauge")&&n.markOverlapped(t,n,"."+At.gaugeValue)),n.toggleFocusLegend(a,!0),s.focusedTargetIds=a,s.defocusedTargetIds=s.defocusedTargetIds.filter(function(t){return i(this,e),a.indexOf(t)<0}.bind(this))},defocus:function(t){var e=this;const n=this.internal,s=n.state,a=n.mapToTargetIds(t);n.$el.svg.selectAll(n.selectorTargets(a.filter(n.isTargetToShow,n))).classed(Ct.focused,!1).classed(Ct.defocused,!0),n.hasArcType(null,["polar"])&&(n.unexpandArc(a),n.hasType("gauge")&&n.undoMarkOverlapped(n,"."+At.gaugeValue)),n.toggleFocusLegend(a,!1),s.focusedTargetIds=s.focusedTargetIds.filter(function(t){return i(this,e),a.indexOf(t)<0}.bind(this)),s.defocusedTargetIds=a},revert:function(t){const e=this.internal,i=e.config,n=e.state,a=e.$el,r=e.mapToTargetIds(t);a.svg.selectAll(e.selectorTargets(r)).classed(Ct.focused,!1).classed(Ct.defocused,!1),e.hasArcType(null,["polar"])&&e.unexpandArc(r),i.legend_show&&(e.showLegend(r.filter(e.isLegendToShow.bind(e))),a.legend.selectAll(e.selectorLegends(r)).filter((function(){return(0,s.select)(this).classed(Ct.legendItemFocused)})).classed(Ct.legendItemFocused,!1)),n.focusedTargetIds=[],n.defocusedTargetIds=[]}};var mi={legend:{show:function(t){const e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function(t){const e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}}},_i={load:function(t){var e=this;const n=this.internal,s=n.config;t.xs&&n.addXs(t.xs),"names"in t&&this.data.names(t.names),"classes"in t&&Object.keys(t.classes).forEach(function(n){i(this,e),s.data_classes[n]=t.classes[n]}.bind(this)),"categories"in t&&n.axis.isCategorized()&&(s.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach(function(n){i(this,e),s.data_axes[n]=t.axes[n]}.bind(this)),"colors"in t&&Object.keys(t.colors).forEach(function(n){i(this,e),s.data_colors[n]=t.colors[n]}.bind(this)),"unload"in t&&!1!==t.unload?n.unload(n.mapToTargetIds(!0===t.unload?null:t.unload),function(){var s=this;i(this,e),l(function(){return i(this,s),n.loadFromArgs(t)}.bind(this))}.bind(this)):n.loadFromArgs(t)},unload:function(t){var e=this;const n=this.internal;let s=t||{};D(s)&&this.tooltip.hide(),z(s)?s={ids:s}:A(s)&&(s={ids:[s]});const a=n.mapToTargetIds(s.ids);n.unload(a,function(){i(this,e),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),n.cache.remove(a),Oe.call(n,s.done,s.resizeAfter)}.bind(this))}};function vi(t,e,n){var s=this;const a=this.internal,r=a.mapToTargetIds(e),o=a.state.hiddenTargetIds.map(function(t){return i(this,s),r.indexOf(t)>-1&&t}.bind(this)).filter(Boolean);a.state.toggling=!0,a[(t?"remove":"add")+"HiddenTargetIds"](r);const c=a.$el.svg.selectAll(a.selectorTargets(r)),l=t?null:"0";t&&o.length&&(c.style("display",null),X(a.config.data_onshown,this,o)),a.$T(c).style("opacity",l,"important").call(F,function(){i(this,s),t||0!==o.length||(c.style("display","none"),X(a.config.data_onhidden,this,r)),c.style("opacity",l)}.bind(this)),n.withLegend&&a[(t?"show":"hide")+"Legend"](r),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.state.toggling=!1}var yi={show:function(t,e){void 0===e&&(e={}),vi.call(this,!0,t,e)},hide:function(t,e){void 0===e&&(e={}),vi.call(this,!1,t,e)},toggle:function(t,e){var n=this;void 0===e&&(e={});const s=this.internal,a={show:[],hide:[]};s.mapToTargetIds(t).forEach(function(t){return i(this,n),a[s.isTargetToShow(t)?"hide":"show"].push(t)}.bind(this)),a.show.length&&this.show(a.show,e),a.hide.length&&setTimeout(function(){return i(this,n),this.hide(a.hide,e)}.bind(this),0)}};const Ti={show:function(t){var e=this;const n=this.internal,s=n.$el,a=n.config,r=n.state,o=r.eventReceiver,c=r.hasTreemap,l=r.inputType;let d,u;if(t.mouse&&(u=t.mouse),t.data){var h;const e=t.data,i=null==(h=n.getYScaleById(e.id))?void 0:h(e.value);if(c&&e.id)o.rect=s.main.select(""+n.selectorTarget(e.id,void 0,"rect"));else if(n.isMultipleX())u=[n.xx(e),i];else{var g,f;a.tooltip_grouped||(u=[0,i]),d=null!=(g=e.index)?g:n.hasArcType()&&e.id?null==(f=n.getArcElementByIdOrIndex(e.id))?void 0:f.datum().index:n.getIndexByX(e.x)}}else R(t.x)?d=n.getIndexByX(t.x):R(t.index)&&(d=t.index);("mouse"===l?["mouseover","mousemove"]:["touchstart"]).forEach(function(t){i(this,e),n.dispatchEvent(t,d,u)}.bind(this))},hide:function(){var t=this;const e=this.internal,n=e.state.inputType,s=e.$el.tooltip,a=null==s?void 0:s.datum();if(a){const s=JSON.parse(a.current)[0].index;("mouse"===n?["mouseout"]:["touchend"]).forEach(function(n){i(this,t),e.dispatchEvent(n,s)}.bind(this))}"touch"===n&&e.callOverOutForTouch(),e.hideTooltip(!0),null==e.hideGridFocus||e.hideGridFocus(),null==e.unexpandCircles||e.unexpandCircles(),null==e.expandBarTypeShapes||e.expandBarTypeShapes(!1)}};var wi={tooltip:Ti};let Ai=function t(e){this.plugins=[],this.internal=void 0;const n=new ci(this);this.internal=n,function t(e,n,s){var a=this;Object.keys(e).forEach(function(r){i(this,a);const o=w(e[r]),c=n!==s,l=I(e[r]),d=l&&Object.keys(e[r]).length>0;n[r]=o&&(!c&&d||c)?e[r].bind(s):l&&!o?{}:e[r],d&&t(e[r],n[r],s)}.bind(this))}(t.prototype,this,this),li.call(n,e),n.beforeInit(),n.init()};function Si(t,e,n){var s=this;const a=t.config,r=function(t,n){i(this,s);const r=S(n)?n:!1===n?void 0:null;null!==r&&(a["axis_"+t+"_"+e]=r)}.bind(this);R(n)&&(P(n)?Object.keys(n).forEach(function(t){i(this,s),r(t,n[t])}.bind(this)):(S(n)||!1===n)&&["y","y2"].forEach(function(t){i(this,s),r(t,n)}.bind(this)),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function ki(t,e){const i=t.config;return{x:i["axis_x_"+e],y:i["axis_y_"+e],y2:i["axis_y2_"+e]}}q(Ai.prototype,[di,{color:function(t){return this.internal.color(t)}},hi,xi,bi,mi,_i,yi,wi]);const Ri={labels:function(t){var e=this;const n=this.internal;let s;return t&&(Object.keys(t).forEach(function(s){i(this,e),n.axis.setLabelText(s,t[s])}.bind(this)),n.axis.updateLabels()),["x","y","y2"].forEach(function(t){i(this,e);const a=n.axis.getLabelText(t);a&&(s||(s={}),s[t]=a)}.bind(this)),s},min:function(t){const e=this.internal;return T(t)||!1===t?Si(e,"min",t):ki(e,"min")},max:function(t){const e=this.internal;return T(t)||!1===t?Si(e,"max",t):ki(e,"max")},range:function(t){const e=this.axis;if(!arguments.length)return{max:e.max(),min:e.min()};{const i=t.min,n=t.max;R(n)&&e.max(n),R(i)&&e.min(i)}}};var Ci={axis:Ri},Ei={category:function(t,e){const i=this.internal,n=i.config;return arguments.length>1&&(n.axis_x_categories[t]=e,i.redraw()),n.axis_x_categories[t]},categories:function(t){const e=this.internal,i=e.config;if(!t||!Array.isArray(t)){const t=i.axis_x_categories;return D(t)?Object.values(e.data.xs)[0]:t}return i.axis_x_categories=t,e.redraw(),i.axis_x_categories}};function Oi(t,e){const i=this.internal,n=i.config,s=n.transition_duration&&dt(),a="grid_"+e+"_lines";return t?(n[a]=t,i.updateGrid(),i.redrawGrid(s),n[a]):n[a]}function Li(t,e){return Oi.bind(this)(this.internal.config["grid_"+e+"_lines"].concat(t||[]),e)}function Pi(t,e){this.internal.removeGridLines(t,e)}const Di=function(t){return Oi.bind(this)(t,"x")};q(Di,{add:function(t){return Li.bind(this)(t,"x")},remove:function(t){return Pi.bind(this)(t,!0)}});const Ii=function(t){return Oi.bind(this)(t,"y")};q(Ii,{add:function(t){return Li.bind(this)(t,"y")},remove:function(t){return Pi.bind(this)(t,!1)}});var zi={xgrids:Di,ygrids:Ii},Mi={groups:function(t){const e=this.internal,i=e.config;return k(t)||(i.data_groups=t,e.redraw()),i.data_groups}};function $i(t,e){void 0===e&&(e=!1);const i=this.internal,n=i.config,s=n.transition_duration&&dt();return t?(n.regions=e?n.regions.concat(t):t,i.updateRegion(),i.redrawRegion(s),e?n.regions:t):n.regions}const Xi=function(t){return $i.bind(this)(t)};q(Xi,{add:function(t){return $i.bind(this)(t,!0)},remove:function(t){var e=this;const n=this.internal,s=n.config,a=n.$T,r=t||{},o=$(r,"classes",[Dt.region]);let c=n.$el.main.select("."+Dt.regions).selectAll(o.map(function(t){return i(this,e),"."+t}.bind(this)));return a(c).style("opacity","0").remove(),c=s.regions,Object.keys(r).length?(c=c.filter(function(t){var n=this;i(this,e);let s=!1;return!t.class||(t.class.split(" ").forEach(function(t){i(this,n),o.indexOf(t)>=0&&(s=!0)}.bind(this)),!s)}.bind(this)),s.regions=c):s.regions=[],c}});var Fi={regions:Xi},Bi={x:function(t){const e=this.internal,i=e.axis,n=e.data,s=i.isCustomX()&&i.isCategorized();return z(t)&&(s?this.categories(t):(e.updateTargetX(n.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),s?this.categories():n.xs},xs:function(t){const e=this.internal;return M(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}},Ni={flow:function(t){var e=this;const n=this.internal;let s;(t.json||t.rows||t.columns)&&n.convertData(t,function(a){i(this,e),s=a,function(){var e=this;let a,r,o,c=0,l=0;if(n.state.redrawing||!s||!dt())return;const d=[],u=n.getMaxDataCount(),h=n.convertDataToTargets(s,!0),g=n.axis.isTimeSeries();n.data.targets.forEach(function(t){i(this,e);let n=!1;for(let e=0;e<h.length;e++)if(t.id===h[e].id){n=!0,t.values[t.values.length-1]&&(l=t.values[t.values.length-1].index+1),c=h[e].values.length;for(let t=0;t<c;t++)h[e].values[t].index=l+t,g||(h[e].values[t].x=l+t);t.values=t.values.concat(h[e].values),h.splice(e,1);break}n||d.push(t.id)}.bind(this)),n.data.targets.forEach(function(t){i(this,e);for(let e=0;e<d.length;e++)if(t.id===d[e]){l=t.values[t.values.length-1].index+1;for(let e=0;e<c;e++)t.values.push({id:t.id,index:l+e,x:g?n.getOtherTargetX(l+e):l+e,value:null})}}.bind(this)),n.data.targets.length&&h.forEach(function(t){var s=this;i(this,e);const a=[];for(let e=n.data.targets[0].values[0].index;e<l;e++)a.push({id:t.id,index:e,x:g?n.getOtherTargetX(e):e,value:null});t.values.forEach(function(t){i(this,s),t.index+=l,g||(t.x+=l)}.bind(this)),t.values=a.concat(t.values)}.bind(this));n.data.targets=n.data.targets.concat(h);const f=n.data.targets[0],p=f.values[0];R(t.to)?(c=0,o=g?lt.call(n,t.to):t.to,f.values.forEach(function(t){i(this,e),t.x<o&&c++}.bind(this))):R(t.length)&&(c=t.length);u?1===u&&g&&(r=(f.values[f.values.length-1].x-p.x)/2,a=[new Date(+p.x-r),new Date(+p.x+r)]):(r=g?f.values.length>1?f.values[f.values.length-1].x-p.x:p.x-n.getXDomain(n.data.targets)[0]:1,a=[p.x-r,p.x]);a&&n.updateXDomain(null,!0,!0,!1,a),n.updateTargets(n.data.targets),n.redraw({flow:{index:p.index,length:c,duration:T(t.duration)?t.duration:n.config.transition_duration,done:t.done,orgDataCount:u},withLegend:!0,withTransition:u>1,withTrimXDomain:!1,withUpdateXAxis:!0})}()}.bind(this))}},ji=p(10);let Gi=function(){function t(t){this.owner=void 0,this.config=void 0,this.scale=void 0;const e=Ue(),i=t.config,n=t.params;this.owner=t,this.config=i,this.scale=e,!i.noTransition&&n.config.transition_duration||(i.withoutTransition=!0),i.range=this.scaleExtent((n.orgXScale||e).range())}t.getSizeFor1Char=function(t){var e=this;const n={w:5.5,h:11.5};return t.empty()||t.select("text").text("0").call(function(t){i(this,e);try{const e=t.node().getBBox(),i=e.width,s=e.height;i&&s&&(n.w=i,n.h=s)}catch(t){}finally{t.text("")}}.bind(this)),this.getSizeFor1Char=function(){return i(this,e),n}.bind(this),n};var e=t.prototype;return e.getTickTransformSetter=function(t){var e=this;const n=this.config,s="x"===t?function(t){return i(this,e),"translate("+(t+n.tickOffset)+",0)"}.bind(this):function(t){return i(this,e),"translate(0,"+t+")"}.bind(this);return function(t,n){var a=this;i(this,e),t.attr("transform",function(t){return i(this,a),T(t)?s(Math.ceil(n(t))):null}.bind(this))}.bind(this)},e.scaleExtent=function(t){const e=t[0],i=t[t.length-1];return e<i?[e,i]:[i,e]},e.generateTicks=function(t,e){var n=this;const s=this.owner.params.tickStepSize,a=t.domain(),r=a[0],o=a[1];let c=[];if(e&&s){let t=Math.round(r);for(;t<=o;)c.push(t),t+=s}else if(t.ticks){const e=this.config.tickArguments;if("log"!==t.type||e)c=t.ticks.apply(t,this.config.tickArguments||[]);else{const e=Ue("_log").domain([r>0?r:1,o]).range(t.range());c=e.ticks();for(let t=o.toFixed().length;c.length>15;t--)c=e.ticks(t);c.splice(0,1,r),c.splice(c.length-1,1,o)}c=c.map(function(t){i(this,n);return A(t)&&S(t)&&!isNaN(t)&&Math.round(10*t)/10||t}.bind(this))}return c},e.copyScale=function(){const t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t.type=this.scale.type,t},e.textFormatted=function(t){const e=this.config.tickFormat,i=/\d+\.\d+0{5,}\d$/.test(t)?+(t+"").replace(/0+\d$/,""):t,n=e?e(i):i;return R(n)?n:""},e.transitionise=function(t){const e=this.config;let i=t;if(e.withoutTransition)i=t.interrupt();else if(e.transition||!this.owner.params.noTransition)try{i=t.transition(e.transition)}catch(t){}return i},t}(),Vi=function(){function t(t){void 0===t&&(t={}),this.helper=void 0,this.config=void 0,this.params=void 0,this.g=void 0,this.generatedTicks=void 0;const e={innerTickSize:6,outerTickSize:t.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:t.noTransition};e.tickLength=Math.max(e.innerTickSize,0)+e.tickPadding,this.config=e,this.params=t,this.helper=new Gi(this)}var e=t.prototype;return e.create=function(t){const e=this,n=e.config,a=e.helper,r=e.params,o=a.scale,c=n.orient,l=this.splitTickText.bind(e),d=/^(left|right)$/.test(c),u=/^(top|bottom)$/.test(c),h=a.getTickTransformSetter(u?"x":"y"),g=h===a.axisX?"y":"x",f=/^(top|left)$/.test(c)?-1:1,p=r.tickTextRotate;this.config.range=o.rangeExtent?o.rangeExtent():a.scaleExtent((r.orgXScale||o).range());const x=n.innerTickSize,b=n.tickLength,m=n.range,_=r.id,v=_&&/^(x|y|y2)$/.test(_)?r.config["axis_"+_+"_tick_text_position"]:{x:0,y:0},y="subX"===_?"subchart_axis_x":"axis_"+_,T=r.config[y+"_show"],w=!!T&&r.config[y+"_tick_show"],A=!!T&&r.config[y+"_tick_text_show"];let k;t.each((function(){var t=this;const _=(0,s.select)(this);let y=this.__chart__||o,T=a.copyScale();k=_,this.__chart__=T,n.tickOffset=r.isCategory?Math.ceil((T(1)-T(0))/2):0;const R=_.selectAll(".domain").data([0]);if(R.enter().append("path").attr("class","domain").merge(R).attr("d",function(){i(this,t);const e=n.outerTickSize*f;return u?"M"+m[0]+","+e+"V0H"+m[1]+"V"+e:"M"+e+","+m[0]+"H0V"+m[1]+"H"+e}.bind(this)),w||A){const s=n.tickValues||a.generateTicks(T,d);e.generatedTicks=s;let o=_.selectAll(".tick").data(s,T);const m=o.enter().insert("g",".domain").attr("class","tick"),k=o.exit().remove();o=m.merge(o),w&&m.append("line"),A&&m.append("text");const R=Gi.getSizeFor1Char(o),C=[];let E=o.select("text").selectAll("tspan").data(function(e,n){var o=this;i(this,t);const c=r.tickMultiline?l(e,T,s,d,R.w):z(a.textFormatted(e))?a.textFormatted(e).concat():[a.textFormatted(e)];return C[n]=c.length,c.map(function(t){return i(this,o),{index:n,splitted:t}}.bind(this))}.bind(this));E.exit().remove(),E=E.enter().append("tspan").merge(E).text(function(e){return i(this,t),e.splitted}.bind(this)),E.attr("x",u?0:b*f).attr("dx",function(){i(this,t);let e=0;return/(top|bottom)/.test(c)&&p&&(e=8*Math.sin(Math.PI*(p/180))*("top"===c?-1:1)),e+(v.x||0)}.bind(this)()).attr("dy",function(e,n){i(this,t);let s=0;return"top"!==c&&(s=R.h,0===n&&(s=d?-((C[e.index]-1)*(R.h/2)-3):0===v.y?".71em":0)),S(s)&&v.y?s+v.y:s||".71em"}.bind(this));const O=o.select("line"),L=o.select("text");if(m.select("line").attr(g+"2",x*f),m.select("text").attr(g,b*f),e.setTickLineTextPosition(O,L),r.tickTitle){const e=L.select("title");(e.empty()?L.append("title"):e).text(function(e){return i(this,t),r.tickTitle[e]}.bind(this))}if(T.bandwidth){const e=T,n=e.bandwidth()/2;y=function(s){return i(this,t),e(s)+n}.bind(this),T=y}else y.bandwidth?y=T:h(k,T);o=r.owner.state.flowing?a.transitionise(o):r.owner.$T(o),h(m,y),h(o.style("opacity",null),T)}})),this.g=k},e.getGeneratedTicks=function(t){var e,n=this;const s=(null==(e=this.generatedTicks)?void 0:e.length)-1;let a=this.generatedTicks;if(s>t){const e=Math.round(s/t+.1);a=this.generatedTicks.map(function(t,s){return i(this,n),s%e==0?t:null}.bind(this)).filter(function(t){return i(this,n),null!==t}.bind(this)).splice(0,t)}return a},e.getTickXY=function(){const t=this.config,e={x:0,y:0};return this.params.isCategory&&(e.x=t.tickCentered?0:t.tickOffset,e.y=t.tickCentered?t.tickOffset:0),e},e.getTickSize=function(t){const e=this.helper.scale,i=this.config,n=i,s=n.innerTickSize,a=n.range,r=e(t)+(i.tickCentered?0:i.tickOffset);return a[0]<r&&r<a[1]?s:0},e.setTickLineTextPosition=function(t,e){var n=this;const s=this.getTickXY(),a=this.config,r=a.innerTickSize,o=a.orient,c=a.tickLength,l=a.tickOffset,d=this.params.tickTextRotate,u=function(t){i(this,n);const e=["start","end"];return"top"===o&&e.reverse(),t?e[t>0?0:1]:"middle"}.bind(this),h=function(t){return i(this,n),t?"rotate("+t+")":null}.bind(this),g=function(t){i(this,n);return t?11.5-2.5*(t/("bottom"===o?15:23))*(t>0?1:-1):c}.bind(this),f=this.params.owner.config,p=f.axis_rotated,x=f.axis_x_tick_text_inner;switch(o){case"bottom":t.attr("x1",s.x).attr("x2",s.x).attr("y2",this.getTickSize.bind(this)),e.attr("x",0).attr("y",g(d)).style("text-anchor",u(d)).style("text-anchor",function(t,e,s){let a=s.length;return i(this,n),p||0!==e||!0!==x&&!x.first?p||e!==a-1||!0!==x&&!x.last?u(d):"end":"start"}.bind(this)).attr("transform",h(d));break;case"top":t.attr("x2",0).attr("y2",-r),e.attr("x",0).attr("y",2*-g(d)).style("text-anchor",u(d)).attr("transform",h(d));break;case"left":t.attr("x2",-r).attr("y1",s.y).attr("y2",s.y),e.attr("x",-c).attr("y",l).style("text-anchor","end");break;case"right":t.attr("x2",r).attr("y2",0),e.attr("x",c).attr("y",0).style("text-anchor","start")}},e.splitTickText=function(t,e,i,n,s){const a=this.params,r=this.helper.textFormatted(t),o=A(r)&&r.indexOf("\n")>-1?r.split("\n"):[];if(o.length)return o;if(z(r))return r;let c=a.tickWidth;return(!c||c<=0)&&(c=n?95:a.isCategory?Math.ceil(a.isInverted?e(i[0])-e(i[1]):e(i[1])-e(i[0]))-12:110),function t(e,i){let n,a,r;for(let o=1;o<i.length;o++)if(" "===i.charAt(o)&&(a=o),n=i.substr(0,o+1),r=s*n.length,c<r)return t(e.concat(i.substr(0,a||o)),i.slice(a?a+1:o));return e.concat(i)}(o,r+"")},e.scale=function(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale},e.orient=function(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",this):this.config.orient},e.tickFormat=function(t){const e=this.config;return arguments.length?(e.tickFormat=t,this):e.tickFormat},e.tickCentered=function(t){const e=this.config;return arguments.length?(e.tickCentered=t,this):e.tickCentered},e.tickOffset=function(){return this.config.tickOffset},e.tickInterval=function(t){var e=this;const n=this.config,s=n.outerTickSize,a=n.tickOffset,r=n.tickValues;let o;if(this.params.isCategory)o=2*a;else{var c;const n=null!=(c=this.params.owner.scale.zoom)?c:this.helper.scale;o=(this.g.select("path.domain").node().getTotalLength()-2*s)/(t||this.g.selectAll("line").size());const a=r?r.map(function(t,s,a){i(this,e);const r=s+1;return r<a.length?n(a[r])-n(t):null}.bind(this)).filter(Boolean):[];o=Math.min.apply(Math,a.concat([o]))}return o===1/0?0:o},e.ticks=function(){const t=this.config;for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.length?(t.tickArguments=J(i),this):t.tickArguments},e.tickCulling=function(t){const e=this.config;return arguments.length?(e.tickCulling=t,this):e.tickCulling},e.tickValues=function(t){var e=this;const n=this.config;if(w(t))n.tickValues=function(){return i(this,e),t(this.helper.scale.domain())}.bind(this);else{if(!arguments.length)return n.tickValues;n.tickValues=t}return this},e.setTransition=function(t){return this.config.transition=t,this},t}();var Yi={getAxisInstance:function(){return this.axis||new Hi(this)}};let Hi=function(){function t(t){this.owner=void 0,this.x=void 0,this.subX=void 0,this.y=void 0,this.y2=void 0,this.axesList={},this.tick={x:null,y:null,y2:null},this.xs=[],this.orient={x:"bottom",y:"left",y2:"right",subX:"bottom"},this.owner=t,this.setOrient()}var e=t.prototype;return e.getAxisClassName=function(t){return mt.axis+" "+mt["axis"+K(t)]},e.isHorizontal=function(t,e){const i=t.config.axis_rotated;return e?i:!i},e.isCategorized=function(){const t=this.owner,e=t.config,i=t.state;return e.axis_x_type.indexOf("category")>=0||i.hasRadar},e.isCustomX=function(){const t=this.owner.config;return!this.isTimeSeries()&&(t.data_x||I(t.data_xs))},e.isTimeSeries=function(t){return void 0===t&&(t="x"),"timeseries"===this.owner.config["axis_"+t+"_type"]},e.isLog=function(t){return void 0===t&&(t="x"),"log"===this.owner.config["axis_"+t+"_type"]},e.isTimeSeriesY=function(){return this.isTimeSeries("y")},e.getAxisType=function(t){void 0===t&&(t="x");let e="linear";return this.isTimeSeries(t)?e=this.owner.config.axis_x_localtime?"time":"utc":this.isLog(t)&&(e="log"),e},e.init=function(){var t=this;const e=this.owner,n=e.config,s=e.$el,a=s.main,r=s.axis,o=e.state.clip,c=n.axis_rotated,l=["x","y"];n.axis_y2_show&&l.push("y2"),l.forEach(function(s){var l=this;i(this,t);const d=this.getAxisClassName(s),u=mt["axis"+s.toUpperCase()+"Label"];r[s]=a.append("g").attr("class",d).attr("clip-path",function(){i(this,l);let t=null;return"x"===s?t=o.pathXAxis:"y"===s&&(t=o.pathYAxis),t}.bind(this)).attr("transform",e.getTranslate(s)).style("visibility",n["axis_"+s+"_show"]?null:"hidden"),r[s].append("text").attr("class",u).attr("transform",["rotate(-90)",null]["x"===s?+!c:+c]).style("text-anchor",function(){return i(this,l),this.textAnchorForAxisLabel(s)}.bind(this)),this.generateAxes(s)}.bind(this))},e.setOrient=function(){const t=this.owner.config,e=t.axis_rotated,i=t.axis_y_inner,n=t.axis_y2_inner;this.orient={x:e?"left":"bottom",y:e?i?"top":"bottom":i?"right":"left",y2:e?n?"bottom":"top":n?"left":"right",subX:e?"left":"bottom"}},e.generateAxes=function(t){var e=this;const n=this.owner,s=n.config,a=[],r=s["axis_"+t+"_axes"],o=s.axis_rotated;let c;"x"===t?c=o?ji.axisLeft:ji.axisBottom:"y"===t?c=o?ji.axisBottom:ji.axisLeft:"y2"===t&&(c=o?ji.axisTop:ji.axisRight),r.length&&r.forEach(function(s){var r=this;i(this,e);const o=s.tick||{},l=n.scale[t].copy();s.domain&&l.domain(s.domain),a.push(c(l).ticks(o.count).tickFormat(w(o.format)?o.format.bind(n.api):function(t){return i(this,r),t}.bind(this)).tickValues(o.values).tickSizeOuter(!1===o.outer?0:6))}.bind(this)),this.axesList[t]=a},e.updateAxes=function(){var t=this;const e=this.owner,n=e.config,s=e.$el.main,a=e.$T;Object.keys(this.axesList).forEach(function(r){var o=this;i(this,t);const c=n["axis_"+r+"_axes"],l=e.scale[r].copy(),d=l.range();this.axesList[r].forEach(function(t,u){var h=this;i(this,o);const g=t.scale().range();d.every(function(t,e){return i(this,h),t===g[e]}.bind(this))||t.scale().range(d);const f=this.getAxisClassName(r)+"-"+(u+1);let p=s.select("."+f.replace(/\s/,"."));p.empty()?p=s.append("g").attr("class",f).style("visibility",n["axis_"+r+"_show"]?null:"hidden").call(t):(c[u].domain&&l.domain(c[u].domain),a(p).call(t.scale(l))),p.attr("transform",e.getTranslate(r,u+1))}.bind(this))}.bind(this))},e.setAxis=function(t,e,i,n){const s=this.owner;"subX"!==t&&(this.tick[t]=this.getTickValues(t)),this[t]=this.getAxis(t,e,i,!("x"!==t||!(s.scale.zoom||s.config.subchart_show||s.state.resizing))||n)},e.getAxis=function(t,e,n,s,a){var r=this;const o=this.owner,c=o.config,l=/^(x|subX)$/.test(t),d=l?"x":t,u=l&&this.isCategorized(),h=this.orient[t],g=a?0:o.getAxisTickRotate(d);let f;if(l)f="subX"===t?o.format.subXAxisTick:o.format.xAxisTick;else{const e=c["axis_"+t+"_tick_format"];w(e)&&(f=e.bind(o.api))}let p=this.tick[d];const x=nt({outerTick:n,noTransition:s,config:c,id:t,tickTextRotate:g,owner:o},l&&{isCategory:u,isInverted:c.axis_x_inverted,tickMultiline:c.axis_x_tick_multiline,tickWidth:c.axis_x_tick_width,tickTitle:u&&c.axis_x_tick_tooltip&&o.api.categories(),orgXScale:o.scale.x});l||(x.tickStepSize=c["axis_"+d+"_tick_stepSize"]);const b=new Vi(x).scale(l&&o.scale.zoom||e).orient(h);if(l&&this.isTimeSeries()&&p&&!w(p)){const t=lt.bind(o);p=p.map(function(e){return i(this,r),t(e)}.bind(this))}else!l&&this.isTimeSeriesY()&&(b.ticks(c.axis_y_tick_time_value),p=null);p&&b.tickValues(p),b.tickFormat(f||!l&&o.isStackNormalized()&&function(t){return i(this,r),t+"%"}.bind(this)),u&&(b.tickCentered(c.axis_x_tick_centered),D(c.axis_x_tick_culling)&&(c.axis_x_tick_culling=!1));const m=c["axis_"+d+"_tick_count"];return m&&b.ticks(m),b},e.updateXAxisTickValues=function(t,e){const i=this.owner,n=i.config,s=n.axis_x_tick_fit;let a,r=n.axis_x_tick_count;if((s||r&&s)&&(a=i.mapTargetsToUniqueXs(t),this.isCategorized()&&r>a.length&&(r=a.length),a=this.generateTickValues(a,r,this.isTimeSeries())),e)e.tickValues(a);else if(this.x){var o;this.x.tickValues(a),null==(o=this.subX)||o.tickValues(a)}return a},e.getId=function(t){const e=this.owner,i=e.config,n=e.scale;let s=i.data_axes[t];return s&&n[s]||(s="y"),s},e.getXAxisTickFormat=function(t){var e=this;const n=this.owner,s=n.config,a=n.format,r=t&&s.subchart_axis_x_tick_format||s.axis_x_tick_format,o=this.isTimeSeries(),c=this.isCategorized();let l;return r?w(r)?l=r.bind(n.api):o&&(l=function(t){return i(this,e),t?a.axisTime(r)(t):""}.bind(this)):l=o?a.defaultAxisTime:c?n.categoryName:function(t){return i(this,e),t<0?t.toFixed(0):t}.bind(this),w(l)?function(t){return i(this,e),l.apply(n,c?[t,n.categoryName(t)]:[t])}.bind(this):l},e.getTickValues=function(t){const e=this.owner,i=e.config["axis_"+t+"_tick_values"],n=e[t+"Axis"];return(w(i)?i.call(e.api):i)||(n?n.tickValues():void 0)},e.getLabelOptionByAxisId=function(t){return this.owner.config["axis_"+t+"_label"]},e.getLabelText=function(t){const e=this.getLabelOptionByAxisId(t);return A(e)?e:e?e.text:null},e.setLabelText=function(t,e){const i=this.owner.config,n=this.getLabelOptionByAxisId(t);A(n)?i["axis_"+t+"_label"]=e:n&&(n.text=e)},e.getLabelPosition=function(t,e){var n=this;const s=this.owner.config.axis_rotated,a=this.getLabelOptionByAxisId(t),r=P(a)&&a.position?a.position:e[+!s],o=function(t){return i(this,n),!!~r.indexOf(t)}.bind(this);return{isInner:o("inner"),isOuter:o("outer"),isLeft:o("left"),isCenter:o("center"),isRight:o("right"),isTop:o("top"),isMiddle:o("middle"),isBottom:o("bottom")}},e.getAxisLabelPosition=function(t){return this.getLabelPosition(t,"x"===t?["inner-top","inner-right"]:["inner-right","inner-top"])},e.getLabelPositionById=function(t){return this.getAxisLabelPosition(t)},e.xForAxisLabel=function(t){const e=this.owner,i=e.state,n=i.width,s=i.height,a=this.getAxisLabelPosition(t);let r=a.isMiddle?-s/2:0;return this.isHorizontal(e,"x"!==t)?r=a.isLeft?0:a.isCenter?n/2:n:a.isBottom&&(r=-s),r},e.dxForAxisLabel=function(t){const e=this.owner,i=this.getAxisLabelPosition(t);let n=i.isBottom?"0.5em":"0";return this.isHorizontal(e,"x"!==t)?n=i.isLeft?"0.5em":i.isRight?"-0.5em":"0":i.isTop&&(n="-0.5em"),n},e.textAnchorForAxisLabel=function(t){const e=this.owner,i=this.getAxisLabelPosition(t);let n=i.isMiddle?"middle":"end";return this.isHorizontal(e,"x"!==t)?n=i.isLeft?"start":i.isCenter?"middle":"end":i.isBottom&&(n="start"),n},e.dyForAxisLabel=function(t){const e=this.owner,i=e.config,n=i.axis_rotated,s=this.getAxisLabelPosition(t).isInner,a=i["axis_"+t+"_tick_rotate"]?e.getHorizontalAxisHeight(t):0,r=this.getMaxTickSize(t).width;let o;if("x"===t){const t=i.axis_x_height;o=n?s?"1.2em":-25-r:s?"-0.5em":t?t-10:a?a-10:"3em"}else o={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[t],o=n?s?o[0]:a?a*("y2"===t?-1:1)-o[1]:o[2]:s?o[3]:(o[4]+(i["axis_"+t+"_inner"]?0:r+o[4]))*("y"===t?-1:1);return o},e.getMaxTickSize=function(t,e){var n=this;const s=this.owner,a=s.config,r=s.state.current,o=s.$el,c=o.svg,l=o.chart,d=r.maxTickSize[t],u="axis_"+t,h={width:0,height:0};if(e||!a[u+"_show"]||d.width>0&&0===s.filterTargetsToShow().length)return d;if(c){const e=/^y2?$/.test(t),r=s.filterTargetsToShow(s.data.targets),o=s.scale[t].copy().domain(s["get"+(e?"Y":"X")+"Domain"](r,t)),c=o.domain(),g=c[0]===c[1]&&c.every(function(t){return i(this,n),t>0}.bind(this)),f=z(d.domain)&&d.domain[0]===d.domain[1]&&d.domain.every(function(t){return i(this,n),t>0}.bind(this));if(g||f)return d.size;d.domain=c,e||d.ticks.splice(0);const p=this.getAxis(t,o,!1,!1,!0),x=a[u+"_tick_rotate"],b=a[u+"_tick_count"];!a[u+"_tick_values"]&&b&&p.tickValues(this.generateTickValues(c,b,e?this.isTimeSeriesY():this.isTimeSeries())),e||this.updateXAxisTickValues(r,p);const m=l.append("svg").style("visibility","hidden").style("position","fixed").style("top","0").style("left","0");p.create(m),m.selectAll("text").attr("transform",S(x)?"rotate("+x+")":null).each((function(t,i){const n=this.getBoundingClientRect(),s=n.width,a=n.height;h.width=Math.max(h.width,s),h.height=Math.max(h.height,a),e||(d.ticks[i]=s)})),m.remove()}return Object.keys(h).forEach(function(t){i(this,n),h[t]>0&&(d[t]=h[t])}.bind(this)),d},e.getXAxisTickTextY2Overflow=function(t){const e=this.owner,i=e.axis,n=e.config,s=e.state,a=s.current,r=s.isLegendRight,o=s.legendItemWidth,c=e.getAxisTickRotate("x");if((i.isCategorized()||i.isTimeSeries())&&n.axis_x_tick_fit&&(!n.axis_x_tick_culling||D(n.axis_x_tick_culling))&&!n.axis_x_tick_multiline&&c>0&&c<90){const i=n.axis_y2_show&&a.maxTickSize.y2.width||0,s=a.width-e.getCurrentPaddingByDirection("left"),l=this.getXAxisTickMaxOverflow(c,s-t)-i-(r&&o||0),d=Math.max(0,l)+t;return Math.min(d,s/2)}return 0},e.getXAxisTickMaxOverflow=function(t,e){const i=this.owner,n=i.axis,s=i.config,a=i.state,r=n.isTimeSeries(),o=a.current.maxTickSize.x.ticks,c=o.length,l=a.axis.x.padding,d=l.left,u=l.right;let h=0;const g=c-(r&&s.axis_x_tick_fit?.5:0);for(let i=0;i<c;i++){const n=i+1,s=Math.cos(Math.PI*t/180)*o[i],a=n-(r?1:.5)+d;if(a<=0)continue;const c=(e-s)/a;h=Math.max(h,s-c/2-((g-n)*c+u*c))}const f=i.filterTargetsToShow(i.data.targets);let p=0;if(!r&&s.axis_x_tick_count<=f.length&&f[0].values.length){const t=Ue(i.axis.getAxisType("x"),0,e-h).domain([-1*d,i.getXDomainMax(i.data.targets)+1+u]);p=Math.ceil((t(1)-t(0))/2)}return h+p},e.updateLabels=function(t){var e=this;const n=this.owner,s=n.$el.main,a=n.$T,r={x:s.select("."+mt.axisX+" ."+mt.axisXLabel),y:s.select("."+mt.axisY+" ."+mt.axisYLabel),y2:s.select("."+mt.axisY2+" ."+mt.axisY2Label)};Object.keys(r).filter(function(t){return i(this,e),!r[t].empty()}.bind(this)).forEach(function(n){var s=this;i(this,e);const o=r[n];a(o,t).attr("x",function(){return i(this,s),this.xForAxisLabel(n)}.bind(this)).attr("dx",function(){return i(this,s),this.dxForAxisLabel(n)}.bind(this)).attr("dy",function(){return i(this,s),this.dyForAxisLabel(n)}.bind(this)).text(function(){return i(this,s),this.getLabelText(n)}.bind(this))}.bind(this))},e.getPadding=function(t,e,i,n){const s=S(t)?t:t[e];return T(s)?this.owner.convertPixelToScale(/(bottom|top)/.test(e)?"y":"x",s,n):i},e.generateTickValues=function(t,e,n){var s=this;let a=t;if(e){const i=w(e)?e():e;if(1===i)a=[t[0]];else if(2===i)a=[t[0],t[t.length-1]];else if(i>2){const e=this.isCategorized(),s=i-2,r=t[0],o=t[t.length-1];let c;a=[r];for(let t=0;t<s;t++)c=+r+(o-r)/(s+1)*(t+1),a.push(n?new Date(c):e?Math.round(c):c);a.push(o)}}return n||(a=a.sort(function(t,e){return i(this,s),t-e}.bind(this))),a},e.generateTransitions=function(t){var e=this;const n=this.owner,s=n.$el.axis,a=n.$T,r=["x","y","y2","subX"].map(function(n){return i(this,e),a(s[n],t)}.bind(this));return{axisX:r[0],axisY:r[1],axisY2:r[2],axisSubX:r[3]}},e.redraw=function(t,e,n){var s=this;const a=this.owner,r=a.config,o=a.$el,c=e?"0":null;["x","y","y2","subX"].forEach(function(e){i(this,s);const a=this[e],l=o.axis[e];a&&l&&(n||r.transition_duration||(a.config.withoutTransition=!0),l.style("opacity",c),a.create(t["axis"+K(e)]))}.bind(this)),this.updateAxes()},e.redrawAxis=function(t,e,n,s,a){var r=this;const o=this.owner,c=o.config,l=o.scale,d=o.$el,u=!!l.zoom;let h;if(!u&&this.isCategorized()&&0===t.length&&l.x.domain([0,d.axis.x.selectAll(".tick").size()]),l.x&&t.length)u||o.updateXDomain(t,e.UpdateXDomain,e.UpdateOrgXDomain,e.TrimXDomain),c.axis_x_tick_values||this.updateXAxisTickValues(t);else if(this.x){var g;this.x.tickValues([]),null==(g=this.subX)||g.tickValues([])}var f,p;(c.zoom_rescale&&!s&&(h=l.x.orgDomain()),["y","y2"].forEach(function(e){var n=this;i(this,r);const s="axis_"+e+"_",a=l[e];if(a){const r=c[s+"tick_values"],l=c[s+"tick_count"];if(a.domain(o.getYDomain(t,e,h)),!r&&l){const t=o.axis[e],s=a.domain();t.tickValues(this.generateTickValues(s,s.every(function(t){return i(this,n),0===t}.bind(this))?1:l,this.isTimeSeriesY()))}}}.bind(this)),this.redraw(n,o.hasArcType(),a),this.updateLabels(e.Transition),(e.UpdateXDomain||e.UpdateXAxis||e.Y)&&t.length&&this.setCulling(),e.Y)&&(null==(f=l.subY)||f.domain(o.getYDomain(t,"y")),null==(p=l.subY2)||p.domain(o.getYDomain(t,"y2")))},e.setCulling=function(){var t=this;const e=this.owner,n=e.config,s=e.state,a=s.clip,r=s.current,o=e.$el;["subX","x","y","y2"].forEach(function(e){i(this,t);const s=o.axis[e],c="axis_"+("subX"===e?"x":e)+"_tick_culling",l=n[c];if(s&&l){const t=s.selectAll(".tick"),i=st(t.data()),l=i.length,d=n[c+"_max"],u=n[c+"_lines"];let h;if(l){for(let t=1;t<l;t++)if(l/t<d){h=t;break}t.each((function(t){const e=u?this.querySelector("text"):this;e&&(e.style.display=i.indexOf(t)%h?"none":null)}))}else t.style("display",null);if("x"===e){const t=r.maxTickSize.x.clipPath?a.pathXAxisTickTexts:null;o.svg.selectAll("."+mt.axisX+" .tick text").attr("clip-path",t)}}}.bind(this))},t}();var Ui={initEventRect:function(){this.$el.main.select("."+pt.chart).append("g").attr("class",Rt.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var t=this;const e=this,n=e.config,s=e.state,a=e.$el,r=e.isMultipleX(),o=n.axis_x_inverted;if(a.eventRect)e.updateEventRect(a.eventRect,!0);else if(e.data.targets.length){const t=e.$el.main.select("."+Rt.eventRects).style("cursor",n.zoom_enabled&&"drag"!==n.zoom_type?n.axis_rotated?"ns-resize":"ew-resize":null).classed(Rt.eventRectsMultiple,r).classed(Rt.eventRectsSingle,!r).selectAll("."+Rt.eventRect).data([0]).enter().append("rect");e.updateEventRect(t),r?e.generateEventRectsForMultipleXs(t):e.generateEventRectsForSingleX(t),t.call(e.getDraggableSelection()),a.eventRect=t,"touch"!==e.state.inputType||a.svg.on("touchstart.eventRect")||e.hasArcType()||e.bindTouchOnEventRect(),s.rendered&&e.updateEventRect(a.eventRect,!0)}if(!r){const a=e.getMaxDataCountTarget();n.data_xSort&&!o||a.sort(function(e,n){return i(this,t),o?n.x-e.x:e.x-n.x}.bind(this)),e.updateDataIndexByX(a),e.updateXs(a),null==e.updatePointClass||e.updatePointClass(!0),s.eventReceiver.data=a}e.updateEventRectData()},bindTouchOnEventRect:function(){var t=this;const e=this,n=e.config,s=e.state,a=e.$el,r=a.eventRect,o=a.svg,c=function(n){if(i(this,t),e.isMultipleX())e.selectRectForMultipleXs(n);else{const t=e.getDataIndexFromEvent(s.event);e.callOverOutForTouch(t),-1===t?e.unselectRect():e.selectRectForSingle(n,t)}}.bind(this),l=function(){i(this,t),e.unselectRect(),e.callOverOutForTouch()}.bind(this),d=n.interaction_inputType_touch.preventDefault,u=C(d)&&d||!1,h=!isNaN(d)&&d||null;let g;const f=function(e){i(this,t);const s=e.type,a=e.changedTouches[0]["client"+(n.axis_rotated?"Y":"X")];"touchstart"===s?u?e.preventDefault():null!==h&&(g=a):"touchmove"===s&&(u||!0===g||null!==h&&Math.abs(g-a)>=h)&&(g=!0,e.preventDefault())}.bind(this);r.on("touchstart",function(n){i(this,t),s.event=n,e.updateEventRect()}.bind(this)).on("touchstart.eventRect touchmove.eventRect",function(n){if(i(this,t),s.event=n,!r.empty()&&r.classed(Rt.eventRect)){if(s.dragging||s.flowing||e.hasArcType()||n.touches.length>1)return;f(n),c(r.node())}else l()}.bind(this),!0).on("touchend.eventRect",function(n){i(this,t),s.event=n,!r.empty()&&r.classed(Rt.eventRect)&&(e.hasArcType()||!e.toggleShape||s.cancelClick)&&s.cancelClick&&(s.cancelClick=!1)}.bind(this),!0),o.on("touchstart",function(e){i(this,t),s.event=e;const n=e.target;n&&n!==r.node()&&l()}.bind(this))},updateEventRect:function(t,e){var n=this;void 0===e&&(e=!1);const s=this.state,a=this.$el,r=s,o=r.eventReceiver,c=r.width,l=r.height,d=r.rendered,u=r.resizing,h=t||a.eventRect,g=function(){if(i(this,n),o){const t=Q(a.chart.node());o.rect=h.node().getBoundingClientRect().toJSON(),o.rect.top+=t.y,o.rect.left+=t.x}}.bind(this);(!d||u||e)&&(h.attr("x",0).attr("y",0).attr("width",c).attr("height",l),d&&!e||h.classed(Rt.eventRect,!0)),g()},updateEventRectData:function(){var t=this;const e=this,n=e.config,s=e.scale,a=e.state,r=s.zoom||s.x,o=n.axis_rotated;let c,l,d,u;if(e.isMultipleX())c=0,l=0,d=a.width,u=a.height;else{let n,s;if(e.axis.isCategorized())n=e.getEventRectWidth(),s=function(e){return i(this,t),r(e.x)-n/2}.bind(this);else{const c=function(n){let s=n.index;return i(this,t),{prev:e.getPrevX(s),next:e.getNextX(s)}}.bind(this);n=function(e){var n=this;i(this,t);const s=c(e),l=r.domain();let d;return null===s.prev&&null===s.next?d=o?a.height:a.width:null===s.prev?d=(r(s.next)+r(e.x))/2:null===s.next?d=r(l[1])-(r(s.prev)+r(e.x))/2:(Object.keys(s).forEach(function(t,e){var a;i(this,n),s[t]=null!=(a=s[t])?a:l[e]}.bind(this)),d=Math.max(0,(r(s.next)-r(s.prev))/2)),d}.bind(this),s=function(e){i(this,t);const n=c(e);let s;return s=null===n.prev&&null===n.next?0:null===n.prev?r(r.domain()[0]):(r(e.x)+r(n.prev))/2,s}.bind(this)}c=o?0:s,l=o?s:0,d=o?a.width:n,u=o?n:a.height}const h=a.eventReceiver,g=function(e,n){return i(this,t),w(e)?e(n):e}.bind(this);h.coords.splice(h.data.length),h.data.forEach(function(e,n){i(this,t),h.coords[n]={x:g(c,e),y:g(l,e),w:g(d,e),h:g(u,e)}}.bind(this))},selectRectForSingle:function(t,e){var n=this;const s=this,a=s.config,r=s.$el,o=r.main,c=r.circle,l=a.data_selection_enabled,d=a.data_selection_grouped,u=a.data_selection_isselectable,h=a.tooltip_grouped,g=s.getAllValuesOnIndex(e);if(h&&(s.showTooltip(g,t),null==s.showGridFocus||s.showGridFocus(g),!l||d))return;c||o.selectAll("."+pt.EXPANDED+":not(."+zt.shape+"-"+e+")").classed(pt.EXPANDED,!1);const f=o.selectAll("."+zt.shape+"-"+e).classed(pt.EXPANDED,!0).style("cursor",u?"pointer":null).filter((function(t){return s.isWithinShape(this,t)}));f.empty()&&!h&&(null==s.hideGridFocus||s.hideGridFocus(),s.hideTooltip(),d||s.setExpand(e)),f.call(function(a){var r=this;i(this,n);const o=a.data();l&&(d||null!=u&&u.bind(s.api)(o))&&(t.style.cursor="pointer"),h||(s.showTooltip(o,t),null==s.showGridFocus||s.showGridFocus(o),null==s.unexpandCircles||s.unexpandCircles(),a.each(function(t){return i(this,r),s.setExpand(e,t.id)}.bind(this)))}.bind(this))},selectRectForMultipleXs:function(t,e){var n=this;void 0===e&&(e=!0);const s=this,a=s.config,r=s.state,o=s.filterTargetsToShow(s.data.targets);if(r.dragging||s.hasArcType(o))return;const c=V(r.event,t),l=s.findClosestFromTargets(o,c);if(!e||!r.mouseover||l&&l.id===r.mouseover.id||(a.data_onout.call(s.api,r.mouseover),r.mouseover=void 0),!l)return void s.unselectRect();const d=(s.isBubbleType(l)||s.isScatterType(l)||!a.tooltip_grouped?[l]:s.filterByX(o,l.x)).map(function(t){return i(this,n),s.addName(t)}.bind(this));s.showTooltip(d,t),s.setExpand(l.index,l.id,!0),s.showGridFocus(d);const u=s.dist(l,c);(s.isBarType(l.id)||u<s.getPointSensitivity(l))&&(s.$el.svg.select("."+Rt.eventRect).style("cursor","pointer"),e&&!r.mouseover&&(a.data_onover.call(s.api,l),r.mouseover=l))},unselectRect:function(){const t=this,e=t.$el,i=e.circle,n=e.tooltip;t.$el.svg.select("."+Rt.eventRect).style("cursor",null),t.hideGridFocus(),n&&(t.hideTooltip(),t._handleLinkedCharts(!1)),i&&!t.isPointFocusOnly()&&t.unexpandCircles(),t.expandBarTypeShapes(!1)},generateEventRectsForSingleX:function(t){var e=this;const n=this,s=n.config,a=n.state,r=a.eventReceiver,o=t.style("cursor",s.data_selection_enabled&&s.data_selection_grouped?"pointer":null).on("click",(function(t){a.event=t;const e=r.currentIdx,i=r.data[-1===e?n.getDataIndexFromEvent(t):e];n.clickHandlerForSingleX.bind(this)(i,n)}));if("mouse"===a.inputType){const t=function(t){i(this,e);const s=t?n.getDataIndexFromEvent(t):r.currentIdx;return s>-1?r.data[s]:null}.bind(this);o.on("mouseover",function(t){i(this,e),a.event=t,n.updateEventRect()}.bind(this)).on("mousemove",(function(e){const i=t(e);if(a.event=e,!i)return;let o=i.index;const c=s.line_step_type;if(s.line_step_tooltipMatch&&n.hasType("step")&&/^step\-(before|after)$/.test(c)){const t=n.scale.zoom||n.scale.x,i=n.axis.xs[o],s=t.invert(V(e,this)[0]);"step-after"===c&&s<i?o-=1:"step-before"===c&&s>i&&(o+=1)}const l=s.tooltip_grouped&&o===r.currentIdx;a.dragging||a.flowing||n.hasArcType()||l?s.tooltip_show&&l&&n.setTooltipPosition():(o!==r.currentIdx&&(n.setOverOut(!1,r.currentIdx),r.currentIdx=o),-1===o?n.unselectRect():n.selectRectForSingle(this,o),n.setOverOut(-1!==o,o))})).on("mouseout",function(t){i(this,e),a.event=t,s&&!n.hasArcType()&&-1!==r.currentIdx&&(n.unselectRect(),n.setOverOut(!1,r.currentIdx),r.currentIdx=-1)}.bind(this))}return o},clickHandlerForSingleX:function(t,e){const i=e,n=i.config,s=i.state,a=i.$el.main;if(!t||i.hasArcType()||s.cancelClick)return void(s.cancelClick&&(s.cancelClick=!1));const r=t.index;a.selectAll("."+zt.shape+"-"+r).each((function(t){(n.data_selection_grouped||i.isWithinShape(this,t))&&(null==i.toggleShape||i.toggleShape(this,t,r),n.data_onclick.bind(i.api)(t,this))}))},generateEventRectsForMultipleXs:function(t){var e=this;const n=this,s=n.state;t.on("click",(function(t){s.event=t,n.clickHandlerForMultipleXS.bind(this)(n)})),"mouse"===s.inputType&&t.on("mouseover mousemove",(function(t){s.event=t,n.selectRectForMultipleXs(this)})).on("mouseout",function(t){i(this,e),s.event=t,n.config&&!n.hasArcType()&&n.unselectRect()}.bind(this))},clickHandlerForMultipleXS:function(t){const e=t,i=e.config,n=e.state,s=e.filterTargetsToShow(e.data.targets);if(e.hasArcType(s))return;const a=V(n.event,this),r=e.findClosestFromTargets(s,a),o="radius"===i.point_sensitivity?r.r:i.point_sensitivity;r&&(e.isBarType(r.id)||e.dist(r,a)<o)&&e.$el.main.selectAll("."+zt.shapes+e.getTargetSelectorSuffix(r.id)).selectAll("."+zt.shape+"-"+r.index).each((function(){(i.data_selection_grouped||e.isWithinShape(this,r))&&(null==e.toggleShape||e.toggleShape(this,r,r.index),i.data_onclick.bind(e.api)(r,this))}))}},Wi=p(11),Zi={generateFlow:function(t){const e=this,n=e.data,s=e.state,a=e.$el;return function(){var r=this;const o=t.flow.length;s.flowing=!0,n.targets.forEach(function(t){i(this,r),t.values.splice(0,o)}.bind(this)),e.updateXGrid&&e.updateXGrid(!0);const c={};["axis.x","grid.x","gridLines.x","region.list","text","bar","line","area","circle"].forEach(function(t){var e;i(this,r);const n=t.split(".");let s=a[n[0]];s&&n.length>1&&(s=s[n[1]]),null!=(e=s)&&e.size()&&(c[t]=s)}.bind(this)),e.hideGridFocus(),e.setFlowList(c,t)}},setFlowList:function(t,e){var n=this;const s=this,a=e.flow,r=e.targets,o=a,c=o.duration,l=void 0===c?e.duration:c,d=o.index,u=o.length,h=o.orgDataCount,g=s.getFlowTransform(r,h,d,u),f=be();let p;f.add(Object.keys(t).map(function(e){var a=this;return i(this,n),p=t[e].transition().ease(Wi.easeLinear).duration(l),p="axis.x"===e?p.call(function(t){i(this,a),s.axis.x.setTransition(t).create(t)}.bind(this)):"region.list"===e?p.filter(s.isRegionOnX).attr("transform",g):p.attr("transform",g),p}.bind(this))),p.call(f,function(){i(this,n),s.cleanUpFlow(t,e)}.bind(this))},cleanUpFlow:function(t,e){var n=this;const s=this,a=s.config,r=s.state,o=s.$el.svg,c=a.axis_rotated,l=e.flow,d=e.shape,u=e.xv,h=d.pos,g=h.cx,f=h.cy,p=h.xForText,x=h.yForText,b=l,m=b.done,_=void 0===m?function(){i(this,n)}.bind(this):m,v=b.length;v&&(["circle","text","shape","eventRect"].forEach(function(t){i(this,n);const e=[];for(let i=0;i<v;i++)e.push("."+Nt[t]+"-"+i);o.selectAll("."+Nt[t+"s"]).selectAll(e).remove()}.bind(this)),o.select("."+Nt.xgrid).remove()),Object.keys(t).forEach(function(e){var o=this;i(this,n);const l=t[e];if("axis.x"!==e&&l.attr("transform",null),"grid.x"===e)l.attr(r.xgridAttr);else if("gridLines.x"===e)l.attr("x1",c?0:u).attr("x2",c?r.width:u),l.select("text").attr("x",c?r.width:0).attr("y",u);else if(/^(area|bar|line)$/.test(e))l.attr("d",d.type[e]);else if("text"===e)l.attr("x",p).attr("y",x).style("fill-opacity",s.opacityForText.bind(s));else if("circle"===e)if(s.isCirclePoint())l.attr("cx",g).attr("cy",f);else{const t=function(t){return i(this,o),g(t)-a.point_r}.bind(this),e=function(t){return i(this,o),f(t)-a.point_r}.bind(this);l.attr("x",t).attr("y",e)}else"region.list"===e&&l.select("rect").filter(s.isRegionOnX).attr("x",s.regionX.bind(s)).attr("width",s.regionWidth.bind(s))}.bind(this)),a.interaction_enabled&&s.redrawEventRect(),_.call(s.api),r.flowing=!1},getFlowTransform:function(t,e,i,n){var s,a;const r=this,o=r.data,c=r.scale.x,l=o.targets[0].values;let d,u=r.getValueOnIndex(l,i),h=r.getValueOnIndex(l,i+n);const g=c.domain(),f=r.updateXDomain(t,!0,!0);if(e)if(1===e||(null==(s=u)?void 0:s.x)===(null==(a=h)?void 0:a.x))d=c(g[0])-c(f[0]);else{var p;d=r.axis.isTimeSeries()?c(g[0])-c(f[0]):c((null==(p=u)?void 0:p.x)||0)-c(h.x)}else 1!==l.length?d=c(g[0])-c(f[0]):r.axis.isTimeSeries()?(u=r.getValueOnIndex(l,0),h=r.getValueOnIndex(l,l.length-1),d=c(u.x)-c(h.x)):d=L(f)/2;return"translate("+d+",0) scale("+L(g)/L(f)+",1)"}},qi={initClip:function(){const t=this,e=t.state,i=e.clip,n=e.datetimeId;i.id=n+"-clip",i.idXAxis=i.id+"-xaxis",i.idYAxis=i.id+"-yaxis",i.idGrid=i.id+"-grid",i.path=t.getClipPath(i.id),i.pathXAxis=t.getClipPath(i.idXAxis),i.pathYAxis=t.getClipPath(i.idYAxis),i.pathGrid=t.getClipPath(i.idGrid)},getClipPath:function(t){const e=this.config;return!e.clipPath&&/-clip$/.test(t)||!e.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!e.axis_y_clipPath&&/-clip-yaxis$/.test(t)?null:"url(#"+t+")"},appendClip:function(t,e){e&&t.append("clipPath").attr("id",e).append("rect")},setXAxisClipPath:function(t){const e=this.config,i=this.state,n=i.margin,s=i.width,a=i.height,r=e.axis_rotated,o=Math.max(30,n.left)-(r?0:20),c=(r?n.top+a+10:n.bottom)+20,l=r?-(1+o):-(o-1),d=r?n.left+20:s+10+o;t.attr("x",l).attr("y",-15).attr("width",d).attr("height",c)},setYAxisClipPath:function(t){const e=this.config,i=this.state,n=i.margin,s=i.width,a=i.height,r=e.axis_rotated,o=Math.max(30,n.left)-(r?20:0),c=e.axis_y_inner,l=c&&!r?e.axis_y_label.text?-20:-1:r?-(1+o):-(o-1),d=-(r?20:n.top),u=(r?s+15+o:n.left+20)+(c?20:0),h=(r?n.bottom+10:n.top+a)+10;t.attr("x",l).attr("y",d).attr("width",u).attr("height",h)},updateXAxisTickClip:function(){const t=this,e=t.config,i=t.state,n=i.clip,s=i.xAxisHeight,a=t.$el.defs,r=t.getHorizontalAxisHeight("x");if(a&&!n.idXAxisTickTexts){const e=n.id+"-xaxisticktexts";t.appendClip(a,e),n.pathXAxisTickTexts=t.getClipPath(n.idXAxisTickTexts),n.idXAxisTickTexts=e}!e.axis_x_tick_multiline&&t.getAxisTickRotate("x")&&r!==s&&(t.setXAxisTickClipWidth(),t.setXAxisTickTextClipPathWidth()),t.state.xAxisHeight=r},setXAxisTickClipWidth:function(){const t=this,e=t.config,i=t.state.current.maxTickSize,n=t.getAxisTickRotate("x");if(!e.axis_x_tick_multiline&&n){const e=Math.sin(Math.PI/180*Math.abs(n));i.x.clipPath=(t.getHorizontalAxisHeight("x")-20)/e}else i.x.clipPath=null},setXAxisTickTextClipPathWidth:function(){const t=this.state,e=t.clip,i=t.current,n=this.$el.svg;n&&n.select("#"+e.idXAxisTickTexts+" rect").attr("width",i.maxTickSize.x.clipPath).attr("height",30)}},Ki=void 0;const Ji=function(t){return i(this,Ki),T(t.position)||"end"}.bind(void 0),Qi=function(t){return i(this,Ki),"start"===t.position?4:"middle"===t.position?0:-4}.bind(void 0);function tn(t,e,n){var s=this;return function(a){i(this,s);let r=t?0:e;return"start"===a.position?r=t?-n:0:"middle"===a.position&&(r=(t?-n:e)/2),r}.bind(this)}function en(t,e){"grid"===e&&t.each((function(){var t=this;const e=(0,s.select)(this);["x1","x2","y1","y2"].forEach(function(n){return i(this,t),e.attr(n,Math.ceil(+e.attr(n)))}.bind(this))}))}var nn={hasGrid:function(){var t=this;const e=this.config;return["x","y"].some(function(n){return i(this,t),e["grid_"+n+"_show"]||e["grid_"+n+"_lines"].length}.bind(this))},initGrid:function(){const t=this;t.hasGrid()&&t.initGridLines(),t.initFocusGrid()},initGridLines:function(){const t=this,e=t.config,i=t.state.clip,n=t.$el;(e.grid_x_lines.length||e.grid_y_lines.length)&&(n.gridLines.main=n.main.insert("g","."+pt.chart+(e.grid_lines_front?" + *":"")).attr("clip-path",i.pathGrid).attr("class",Et.grid+" "+Et.gridLines),n.gridLines.main.append("g").attr("class",Et.xgridLines),n.gridLines.main.append("g").attr("class",Et.ygridLines),n.gridLines.x=(0,s.selectAll)([]))},updateXGrid:function(t){var e=this;const n=this,a=n.config,r=n.scale,o=n.state,c=n.$el,l=c.main,d=c.grid,u=a.axis_rotated,h=n.generateGridData(a.grid_x_type,r.x),g=n.axis.isCategorized()?n.axis.x.tickOffset():0,f=function(t){return i(this,e),(r.zoom||r.x)(t)+g*(u?-1:1)}.bind(this);o.xgridAttr=u?{x1:0,x2:o.width,y1:f,y2:f}:{x1:f,x2:f,y1:0,y2:o.height},d.x=l.select("."+Et.xgrids).selectAll("."+Et.xgrid).data(h),d.x.exit().remove(),d.x=d.x.enter().append("line").attr("class",Et.xgrid).merge(d.x),t||d.x.each((function(){var t=this;const e=(0,s.select)(this);Object.keys(o.xgridAttr).forEach(function(n){var s=this;i(this,t),e.attr(n,o.xgridAttr[n]).style("opacity",function(){return i(this,s),e.attr(u?"y1":"x1")===(u?o.height:0)?"0":null}.bind(this))}.bind(this))}))},updateYGrid:function(){var t=this;const e=this,n=e.axis,s=e.config,a=e.scale,r=e.state,o=e.$el,c=o.grid,l=o.main,d=s.axis_rotated,u=function(e){return i(this,t),Math.ceil(a.y(e))}.bind(this),h=n.y.getGeneratedTicks(s.grid_y_ticks)||e.scale.y.ticks(s.grid_y_ticks);c.y=l.select("."+Et.ygrids).selectAll("."+Et.ygrid).data(h),c.y.exit().remove(),c.y=c.y.enter().append("line").attr("class",Et.ygrid).merge(c.y),c.y.attr("x1",d?u:0).attr("x2",d?u:r.width).attr("y1",d?0:u).attr("y2",d?r.height:u),en(c.y,"grid")},updateGrid:function(){const t=this,e=t.$el,i=e.grid;e.gridLines.main||t.initGridLines(),i.main.style("visibility",t.hasArcType()?"hidden":null),t.hideGridFocus(),t.updateGridLines("x"),t.updateGridLines("y")},updateGridLines:function(t){var e=this;const n=this,a=n.config,r=n.$el,o=r.gridLines,c=r.main,l=n.$T,d=a.axis_rotated;a["grid_"+t+"_show"]&&n["update"+t.toUpperCase()+"Grid"]();let u=c.select("."+Et[t+"gridLines"]).selectAll("."+Et[t+"gridLine"]).data(a["grid_"+t+"_lines"]);l(u.exit()).style("opacity","0").remove();const h=u.enter().append("g");h.append("line").style("opacity","0"),u=h.merge(u),u.each((function(t){const e=(0,s.select)(this);e.select("text").empty()&&t.text&&e.append("text").style("opacity","0")})),l(u.attr("class",function(n){return i(this,e),(Et[t+"gridLine"]+" "+(n.class||"")).trim()}.bind(this)).select("text").attr("text-anchor",Ji).attr("transform",function(){return i(this,e),"x"===t?d?null:"rotate(-90)":d?"rotate(-90)":null}.bind(this)).attr("dx",Qi).attr("dy",-5)).text((function(t){var e;return null!=(e=t.text)?e:this.remove()})),o[t]=u},redrawGrid:function(t){const e=this,i=e.config.axis_rotated,n=e.state,s=n.width,a=n.height,r=e.$el.gridLines,o=e.$T,c=e.xv.bind(e),l=e.yv.bind(e);let d=r.x.select("line"),u=r.x.select("text"),h=r.y.select("line"),g=r.y.select("text");return d=o(d,t).attr("x1",i?0:c).attr("x2",i?s:c).attr("y1",i?c:0).attr("y2",i?c:a),u=o(u,t).attr("x",tn(!i,s,a)).attr("y",c),h=o(h,t).attr("x1",i?l:0).attr("x2",i?l:s).attr("y1",i?0:l).attr("y2",i?a:l),g=o(g,t).attr("x",tn(i,s,a)).attr("y",l),[d.style("opacity",null),u.style("opacity",null),h.style("opacity",null),g.style("opacity",null)]},initFocusGrid:function(){const t=this,e=t.config,i=t.state.clip,n=t.$el,s=e.grid_front,a="."+(s&&n.gridLines.main?Et.gridLines:pt.chart)+(s?" + *":""),r=n.main.insert("g",a).attr("clip-path",i.pathGrid).attr("class",Et.grid);n.grid.main=r,e.grid_x_show&&r.append("g").attr("class",Et.xgrids),e.grid_y_show&&r.append("g").attr("class",Et.ygrids),e.interaction_enabled&&e.grid_focus_show&&(r.append("g").attr("class",Ct.xgridFocus).append("line").attr("class",Ct.xgridFocus),e.grid_focus_y&&!e.tooltip_grouped&&r.append("g").attr("class",Ct.ygridFocus).append("line").attr("class",Ct.ygridFocus))},showGridFocus:function(t){var e=this;const n=this,a=n.config,r=n.state,o=r.width,c=r.height,l=a.axis_rotated,d=n.$el.main.selectAll("line."+Ct.xgridFocus+", line."+Ct.ygridFocus),u=(t||[d.datum()]).filter(function(t){return i(this,e),t&&T(n.getBaseValue(t))}.bind(this));if(!a.tooltip_show||0===u.length||n.hasType("bubble")||n.hasArcType())return;const h=a.grid_focus_edge&&!a.tooltip_grouped,g=n.xx.bind(n);d.style("visibility",null).data(u.concat(u)).each((function(t){var e=this;const a=(0,s.select)(this),r={x:g(t),y:n.getYScaleById(t.id)(t.value)};let d;if(a.classed(Ct.xgridFocus))d=l?[null,r.x,h?r.y:o,r.x]:[r.x,h?r.y:null,r.x,c];else{const e="y2"===n.axis.getId(t.id);d=l?[r.y,h&&!e?r.x:null,r.y,h&&e?r.x:c]:[h&&e?r.x:null,r.y,h&&!e?r.x:o,r.y]}["x1","y1","x2","y2"].forEach(function(t,n){return i(this,e),a.attr(t,d[n])}.bind(this))})),en(d,"grid"),null==n.showCircleFocus||n.showCircleFocus(t)},hideGridFocus:function(){const t=this,e=t.state,i=e.inputType,n=e.resizing,s=t.$el.main;"mouse"!==i&&n||(s.selectAll("line."+Ct.xgridFocus+", line."+Ct.ygridFocus).style("visibility","hidden"),null==t.hideCircleFocus||t.hideCircleFocus())},updateGridFocus:function(){const t=this,e=t.state,i=e.inputType,n=e.width,s=e.height,a=e.resizing,r=t.$el.grid.main.select("line."+Ct.xgridFocus);if("touch"===i)r.empty()?a&&(null==t.showCircleFocus||t.showCircleFocus()):t.showGridFocus();else{const e=t.config.axis_rotated;r.attr("x1",e?0:-10).attr("x2",e?n:-10).attr("y1",e?-10:0).attr("y2",e?-10:s)}return!0},generateGridData:function(t,e){var n=this;const s=this,a=s.$el.main.select("."+mt.axisX).selectAll(".tick").size();let r=[];if("year"===t){const t=s.getXDomain().map(function(t){return i(this,n),t.getFullYear()}.bind(this)),e=t[0],a=t[1];for(let t=e;t<=a;t++)r.push(new Date(t+"-01-01 00:00:00"))}else r=e.ticks(10),r.length>a&&(r=r.filter(function(t){return i(this,n),(t+"").indexOf(".")<0}.bind(this)));return r},getGridFilterToRemove:function(t){var e=this;return t?function(n){var s=this;i(this,e);let a=!1;return(z(t)?t.concat():[t]).forEach(function(t){i(this,s),("value"in t&&n.value===t.value||"class"in t&&n.class===t.class)&&(a=!0)}.bind(this)),a}.bind(this):function(){return i(this,e),!0}.bind(this)},removeGridLines:function(t,e){var n=this;const s=this,a=s.config,r=s.$T,o=s.getGridFilterToRemove(t),c=function(t){return i(this,n),!o(t)}.bind(this),l=e?Et.xgridLines:Et.ygridLines,d=e?Et.xgridLine:Et.ygridLine;r(s.$el.main.select("."+l).selectAll("."+d).filter(o)).style("opacity","0").remove();const u="grid_"+(e?"x":"y")+"_lines";a[u]=a[u].filter(c)}},sn={initRegion:function(){const t=this.$el;t.region.main=t.main.insert("g",":first-child").attr("clip-path",this.state.clip.path).attr("class",Dt.regions)},updateRegion:function(){const t=this,e=t.config,i=t.$el.region,n=t.$T;i.main||t.initRegion(),i.main.style("visibility",t.hasArcType()?"hidden":null);const a=i.main.selectAll("."+Dt.region).data(e.regions);n(a.exit()).style("opacity","0").remove();const r=a.enter().append("g");r.append("rect").style("fill-opacity","0"),i.list=r.merge(a).attr("class",t.classRegion.bind(t)),i.list.each((function(t){var e;(0,s.select)(this).select("text").empty()&&null!=(e=t.label)&&e.text&&(0,s.select)(this).append("text").style("opacity","0")}))},redrawRegion:function(t){var e=this;const n=this,a=n.$el.region,r=n.$T;let o=a.list.select("rect"),c=a.list.selectAll("text");return o=r(o,t).attr("x",n.regionX.bind(n)).attr("y",n.regionY.bind(n)).attr("width",n.regionWidth.bind(n)).attr("height",n.regionHeight.bind(n)),c=r(c,t).attr("transform",function(t){var s;i(this,e);const a=null!=(s=t.label)?s:{},r=a.x,o=void 0===r?0:r,c=a.y,l=void 0===c?0:c,d=a.rotated,u=void 0!==d&&d;return"translate("+(n.regionX.bind(n)(t)+o)+", "+(n.regionY.bind(n)(t)+l)+")"+(u?" rotate(-90)":"")}.bind(this)).attr("text-anchor",function(t){var n;return i(this,e),null!=(n=t.label)&&n.rotated?"end":null}.bind(this)).attr("dy","1em").style("fill",function(t){var n,s;return i(this,e),null!=(n=null==(s=t.label)?void 0:s.color)?n:null}.bind(this)).text(function(t){var n;return i(this,e),null==(n=t.label)?void 0:n.text}.bind(this)),[o.style("fill-opacity",function(t){return i(this,e),T(t.opacity)?t.opacity:null}.bind(this)).on("end",(function(){(0,s.select)(this.parentNode).selectAll("rect:not([x])").remove()})),c.style("opacity",null)]},getRegionXY:function(t,e){const i=this,n=i.config,s=i.scale,a=n.axis_rotated,r="x"===t;let o,c="start",l=0;return"y"===e.axis||"y2"===e.axis?(r||(c="end"),(r?a:!a)&&c in e&&(o=s[e.axis],l=o(e[c]))):(r?!a:a)&&c in e&&(o=s.zoom||s.x,l=o(i.axis.isTimeSeries()?lt.call(i,e[c]):e[c])),l},regionX:function(t){return this.getRegionXY("x",t)},regionY:function(t){return this.getRegionXY("y",t)},getRegionSize:function(t,e){const i=this,n=i.config,s=i.scale,a=i.state,r=n.axis_rotated,o="width"===t,c=i[o?"regionX":"regionY"](e);let l,d="end",u=a[t];return"y"===e.axis||"y2"===e.axis?(o||(d="start"),(o?r:!r)&&d in e&&(l=s[e.axis],u=l(e[d]))):(o?!r:r)&&d in e&&(l=s.zoom||s.x,u=l(i.axis.isTimeSeries()?lt.call(i,e[d]):e[d])),u<c?0:u-c},regionWidth:function(t){return this.getRegionSize("width",t)},regionHeight:function(t){return this.getRegionSize("height",t)},isRegionOnX:function(t){return!t.axis||"x"===t.axis}},an={getAxisSize:function(t){const e=this,i=e.config.axis_rotated;return i&&"x"===t||!i&&/y2?/.test(t)?e.getAxisWidthByAxisId(t,!0):e.getHorizontalAxisHeight(t)},getAxisWidthByAxisId:function(t,e){const i=this;if(i.axis){var n,s;const a=null==(n=i.axis)?void 0:n.getLabelPositionById(t),r=i.axis.getMaxTickSize(t,e).width,o=0===r?.5:0;return r+("fit"===(null==(s=i.config.padding)?void 0:s.mode)?a.isInner?10+o:10:a.isInner?20+o:40)}return 40},getHorizontalAxisHeight:function(t){var e,i;const n=this,s=n.config,a=n.state,r=a.rotatedPadding,o=a.isLegendRight,c=a.isLegendInset,l=s.axis_rotated,d="fit"===(null==(e=s.padding)?void 0:e.mode),u=s["axis_"+t+"_inner"],h=s["axis_"+t+"_label"].text;let g="fit"===(null==(i=s.padding)?void 0:i.mode)?u&&!h?"y"===t?1:0:20:30;if("x"===t&&!s.axis_x_show)return 8;if("x"===t&&S(s.axis_x_height))return s.axis_x_height;if("y"===t&&!s.axis_y_show)return!s.legend_show||o||c?1:10;if("y2"===t&&!s.axis_y2_show)return d?0:r.top;const f=n.axis.getMaxTickSize(t),p=Math.abs(s.axis_x_tick_rotate)>0&&(!s.axis_x_tick_autorotate||n.needToRotateXAxisTickTexts());return(s.axis_x_tick_multiline||p)&&f.height>13&&(g+=f.height-13),g+(n.axis.getLabelPositionById(t).isInner?0:10)+("y2"!==t||l?0:-10)},getEventRectWidth:function(){const t=this.config,e=this.axis,i=t.axis_x_inverted,n=e.x.tickInterval();return Math.max(0,i?Math.abs(n):n)},getAxisTickRotate:function(t){const e=this,i=e.axis,n=e.config,s=e.state,a=e.$el;let r=n["axis_"+t+"_tick_rotate"];if("x"===t){const t=i.isCategorized()||i.isTimeSeries();if(n.axis_x_tick_fit&&t){const t=n.axis_x_tick_count,i=s.current.maxTickSize.x.ticks.length;let a=0;if(t?a=t>i?i:t:i&&(a=i),a!==s.axis.x.tickCount){const t=e.data.targets;s.axis.x.padding=e.getXDomainPadding([e.getXDomainMinMax(t,"min"),e.getXDomainMinMax(t,"max")],a)}s.axis.x.tickCount=a}a.svg&&n.axis_x_tick_autorotate&&n.axis_x_tick_fit&&!n.axis_x_tick_multiline&&!n.axis_x_tick_culling&&t&&(r=e.needToRotateXAxisTickTexts()?n.axis_x_tick_rotate:0)}return r},needToRotateXAxisTickTexts:function(){const t=this,e=t.state,i=e.axis,n=e.current,s=e.isLegendRight,a=e.legendItemWidth,r=n.width-(s&&a)-t.getCurrentPaddingByDirection("left")-t.getCurrentPaddingByDirection("right"),o=i.x.tickCount+i.x.padding.left+i.x.padding.right;return t.axis.getMaxTickSize("x").width>(o?r/o:0)}},rn={axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:"indexed",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_culling_lines:!0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[]},on={axis_y2_show:!1,axis_y2_type:"indexed",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_culling_lines:!0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[]};function cn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function ln(t){for(var e,i=1;i<arguments.length;i++)e=null!=arguments[i]?arguments[i]:{},i%2?cn(Object(e),!0).forEach((function(i){b(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):cn(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}));return t}var dn=ln(ln(ln({axis_rotated:!1},{axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_culling_lines:!0,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_inner:!1,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_inverted:!1,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[]}),rn),on);const un=[Ci,Ei,Ni,zi,Mi,Fi,Bi],hn={axis:Yi,clip:qi,eventrect:Ui,flow:Zi,grid:nn,region:sn,sizeAxis:an},gn={optDataAxis:{data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_axes:{},data_regions:{},data_stack_normalize:!1},optAxis:dn,optGrid:{grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:void 0,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0}};var fn=p(12);function pn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function xn(t){for(var e,i=1;i<arguments.length;i++)e=null!=arguments[i]?arguments[i]:{},i%2?pn(Object(e),!0).forEach((function(i){b(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):pn(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}));return t}function bn(t){void 0===t&&(t=0);const e=this,i=e.config,n=e.state,s=e.hasMultiArcGauge(),a=n.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length,r=t?Math.min(n.radiusExpanded*t-n.radius,.8*a-100*(1-t)):0;return{inner:function(t){const i=e.getRadius(t).innerRadius;return s?n.radius-a*(t.index+1):S(i)?i:0},outer:function(i){const o=e.getRadius(i).outerRadius;let c;if(s)c=n.radius-a*i.index+r;else if(e.hasType("polar")&&!t)c=e.getPolarOuterRadius(i,o);else if(c=o,t){let e=n.radiusExpanded;n.radius!==o&&(e-=Math.abs(n.radius-o)),c=e*t}return c},corner:function(t,n){const s=i.arc_cornerRadius_ratio,a=void 0===s?0:s,r=i.arc_cornerRadius,o=void 0===r?0:r,c=t.data.id,l=t.value;let d=0;return d=a?a*n:S(o)?o:o.call(e.api,c,l,n),d}}}function mn(t){return function(e){var n=this;const s=function(t){let e=t.startAngle,s=void 0===e?0:e,a=t.endAngle,r=void 0===a?0:a,o=t.padAngle,c=void 0===o?0:o;return i(this,n),{startAngle:s,endAngle:r,padAngle:c}}.bind(this),a=(0,fn.interpolate)(s(this._current),s(e));return this._current=e,function(i){const n=a(i),s=e.data,r=e.index,o=e.value;return t(xn(xn({},n),{},{data:s,index:r,value:o}))}}}var _n={initPie:function(){var t=this;const e=this,n=e.config,s=n.data_type,a=n[s+"_padding"],r=n[s+"_startingAngle"]||0,o=(a?.01*a:n[s+"_padAngle"])||0;e.pie=(0,Ze.pie)().startAngle(r).endAngle(r+2*Math.PI).padAngle(o).value(function(e){var n,s,a=this;return i(this,t),null!=(n=null==(s=e.values)?void 0:s.reduce(function(t,e){return i(this,a),t+e.value}.bind(this),0))?n:e}.bind(this)).sort(e.getSortCompareFn.bind(e)(!0))},updateRadius:function(){const t=this,e=t.config,i=t.state,n=e[e.data_type+"_padding"],s=e.gauge_width||e.donut_width,a=t.filterTargetsToShow(t.data.targets).length*e.gauge_arcs_minWidth;i.radiusExpanded=Math.min(i.arcWidth,i.arcHeight)/2*(t.hasMultiArcGauge()&&e.gauge_label_show?.85:1),i.radius=.95*i.radiusExpanded,i.innerRadiusRatio=s?(i.radius-s)/i.radius:.6,i.gaugeArcWidth=s||(a<=i.radius-i.innerRadius?i.radius-i.innerRadius:a<=i.radius?a:i.radius);const r=e.pie_innerRadius||(n?n*(i.innerRadiusRatio+.1):0);i.outerRadius=e.pie_outerRadius,i.innerRadius=t.hasType("donut")||t.hasType("gauge")?i.radius*i.innerRadiusRatio:r},getRadius:function(t){const e=this,i=null==t?void 0:t.data;let n=e.state,s=n.innerRadius,a=n.outerRadius;return!S(s)&&i&&(s=s[i.id]||0),M(a)&&i&&i.id in a?a=a[i.id]:S(a)||(a=e.state.radius),{innerRadius:s,outerRadius:a}},updateArc:function(){const t=this;t.updateRadius(),t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded()},getArcLength:function(){const t=3.6*this.config.gauge_arcLength;let e=t/360*2;return t<-360?e=-2:t>360&&(e=2),e*Math.PI},getStartingAngle:function(){const t=this.config,e=t.data_type,i=!!this.hasType("gauge")&&t.gauge_fullCircle,n=-1*Math.PI/2,s=Math.PI/2;let a=t[e+"_startingAngle"]||0;return!i&&a<=n?a=n:!i&&a>=s?a=s:(a>Math.PI||a<-1*Math.PI)&&(a=Math.PI),a},updateAngle:function(t,e){var n=this;void 0===e&&(e=!1);const s=this,a=s.config,r=s.state,o=e&&s.hasType("gauge");let c=s.pie,l=t,d=!1;if(!a)return null;const u=s.getStartingAngle(),h=a.gauge_fullCircle||e&&!o?s.getArcLength():-2*u;if(l.data&&s.isGaugeType(l.data)&&!s.hasMultiArcGauge()){const t=a.gauge_min,e=a.gauge_max,i=s.getTotalDataSum(r.rendered);c=c.startAngle(u).endAngle(h*((i-t)/(e-t))+u)}if(!1===e&&c(s.filterTargetsToShow()).forEach(function(t,e){var s;i(this,n),d||t.data.id!==(null==(s=l.data)?void 0:s.id)||(d=!0,l=t,l.index=e)}.bind(this)),isNaN(l.startAngle)&&(l.startAngle=0),isNaN(l.endAngle)&&(l.endAngle=l.startAngle),e||l.data&&(a.gauge_enforceMinMax||s.hasMultiArcGauge())){var g;const t=a.gauge_min,i=a.gauge_max,n=e&&!o?s.getTotalDataSum(r.rendered):i,c=null!=(g=l.value)?g:0,d=c<t?0:c<n?c-t:n-t;l.startAngle=u,l.endAngle=u+h/(n-t)*d}return d||e?l:null},getSvgArc:function(){const t=this,e=bn.call(t),i=e.inner,n=e.outer,s=e.corner,a=(0,Ze.arc)().innerRadius(i).outerRadius(n),r=function(e,i){let r="M 0 0";if(e.value||e.data){var o;const c=i?e:null!=(o=t.updateAngle(e))?o:null;c&&(r=a.cornerRadius(s(c,n(c)))(c))}return r};return r.centroid=a.centroid,r},getSvgArcExpanded:function(t){var e=this;void 0===t&&(t=1);const n=this,s=bn.call(n,t),a=s.inner,r=s.outer,o=s.corner,c=(0,Ze.arc)().innerRadius(a).outerRadius(r);return function(t){i(this,e);const s=n.updateAngle(t),a=r(s);let l=0;return s&&(l=o(s,a)),s?c.cornerRadius(l)(s):"M 0 0"}.bind(this)},getArc:function(t,e,i){return i||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},redrawArcRangeText:function(){var t,e=this;const n=this,s=n.config,a=n.$el.arcs,r=n.state,o=n.$T,c=s.arc_rangeText_format,l=n.hasType("gauge")&&s.arc_rangeText_fixed;let d=s.arc_rangeText_values;if(null!=(t=d)&&t.length){const t="%"===s.arc_rangeText_unit,u=n.getTotalDataSum(r.rendered);t&&(d=d.map(function(t){return i(this,e),u/100*t}.bind(this)));const h=n.pie(d).map(function(t,n){return i(this,e),t.index=n,t}.bind(this));let g=a.selectAll("."+xt.arcRange).data(d);g.exit(),g=o(g.enter().append("text").attr("class",xt.arcRange).style("text-anchor","middle").style("pointer-events","none").style("opacity","0").text(function(n){i(this,e);const s=t?n/u*100:n;return w(c)?c(s):s+(t?"%":"")}.bind(this)).merge(g)),(!r.rendered||r.rendered&&!l)&&u>0&&g.attr("transform",function(t,s){return i(this,e),n.transformForArcLabel(h[s],!0)}.bind(this)),g.style("opacity",function(t){return i(this,e),!l&&(t>u||0===u)?"0":null}.bind(this))}},transformForArcLabel:function(t,e){var n=this;void 0===e&&(e=!1);const s=this,a=s.config,r=s.state.radiusExpanded,o=s.updateAngle(t,e);let c="";if(o)if(e||s.hasMultiArcGauge()){const i=Math.sin(o.endAngle-Math.PI/2),n=a.arc_rangeText_position;let s=Math.cos(o.endAngle-Math.PI/2)*(r+(e?5:25)),g=i*(r+15-Math.abs(10*i))+3;if(e&&n){var l,d,u,h;const e=a.arc_rangeText_values,i=w(n)?n(e[t.index]):n;s+=null!=(l=null==(d=i)?void 0:d.x)?l:0,g+=null!=(u=null==(h=i)?void 0:h.y)?u:0}c="translate("+s+","+g+")"}else if(!s.hasType("gauge")||s.data.targets.length>1){var g;let e=s.getRadius(t).outerRadius;s.hasType("polar")&&(e=s.getPolarOuterRadius(t,e));const r=this.svgArc.centroid(o).map(function(t){return i(this,n),isNaN(t)?0:t}.bind(this)),l=r[0],d=r[1],u=Math.sqrt(l*l+d*d);let h=null==(g=["donut","gauge","pie","polar"].filter(s.hasType.bind(s)).map(function(t){return i(this,n),a[t+"_label_ratio"]}.bind(this)))?void 0:g[0];h=h?w(h)?h.bind(s.api)(t,e,u):h:e&&(u?(36/e>.375?1.175-36/e:.8)*e/u:0),c="translate("+l*h+","+d*h+")"}return c},convertToArcData:function(t){return this.addName({id:"data"in t?t.data.id:t.id,value:t.value,ratio:this.getRatio("arc",t),index:t.index})},textForArcLabel:function(t){const e=this,i=e.hasType("gauge");e.shouldShowArcLabel()&&t.style("fill",e.updateTextColor.bind(e)).attr("filter",e.updateTextBackgroundColor.bind(e)).each((function(t){var n;const a=(0,s.select)(this),r=e.updateAngle(t),o=e.getRatio("arc",r);if(e.meetsLabelThreshold(o,null==(n=["donut","gauge","pie","polar"].filter(e.hasType.bind(e)))?void 0:n[0])){const n=(r||t).value;N(a,(e.getArcLabelFormat()||e.defaultArcValueFormat)(n,o,t.data.id).toString(),[-1,1],i)}else a.text("")}))},expandArc:function(t){var e=this;const n=this,a=n.state.transiting,r=n.$el;if(a){const s=setInterval(function(){i(this,e),a||(clearInterval(s),r.legend.selectAll("."+Ct.legendItemFocused).size()>0&&n.expandArc(t))}.bind(this),10);return}const o=n.mapToTargetIds(t);r.svg.selectAll(n.selectorTargets(o,"."+xt.chartArc)).each((function(t){if(!n.shouldExpand(t.data.id))return;const e=n.getExpandConfig(t.data.id,"duration"),i=n.getSvgArcExpanded(n.getExpandConfig(t.data.id,"rate"));(0,s.select)(this).selectAll("path").transition().duration(e).attrTween("d",mn(n.svgArcExpanded.bind(n))).transition().duration(2*e).attrTween("d",mn(i.bind(n)))}))},unexpandArc:function(t){var e=this;const n=this,s=n.state.transiting,a=n.$el.svg;if(s)return;const r=n.mapToTargetIds(t);a.selectAll(n.selectorTargets(r,"."+xt.chartArc)).selectAll("path").transition().duration(function(t){return i(this,e),n.getExpandConfig(t.data.id,"duration")}.bind(this)).attrTween("d",mn(n.svgArc.bind(n))),a.selectAll(""+xt.arc).style("opacity",null)},getExpandConfig:function(t,e){const i=this,n=i.config;let s;return i.isDonutType(t)?s="donut":i.isGaugeType(t)?s="gauge":i.isPieType(t)&&(s="pie"),s?n[s+"_expand_"+e]:{duration:50,rate:.98}[e]},shouldExpand:function(t){const e=this,i=e.config;return e.isDonutType(t)&&i.donut_expand||e.isGaugeType(t)&&i.gauge_expand||e.isPieType(t)&&i.pie_expand},shouldShowArcLabel:function(){var t=this;const e=this,n=e.config;return["donut","gauge","pie","polar"].some(function(s){return i(this,t),e.hasType(s)&&n[s+"_label_show"]}.bind(this))},getArcLabelFormat:function(){var t=this;const e=this,n=e.config;let s=function(e){return i(this,t),e}.bind(this);return["donut","gauge","pie","polar"].filter(e.hasType.bind(e)).forEach(function(e){i(this,t),s=n[e+"_label_format"]}.bind(this)),w(s)?s.bind(e.api):s},updateTargetsForArc:function(t){var e=this;const n=this,s=n.$el,a=n.hasType("gauge"),r=n.getChartClass("Arc"),o=n.getClass("arcs",!0),c=n.classFocus.bind(n),l=s.main.select("."+xt.chartArcs),d=l.selectAll("."+xt.chartArc).data(n.pie(t)).attr("class",function(t){return i(this,e),r(t)+c(t.data)}.bind(this)),u=d.enter().append("g").attr("class",r).call(this.setCssRule(!1,"."+xt.chartArcs+" text",["pointer-events:none","text-anchor:middle"]));u.append("g").attr("class",o).merge(d),u.append("text").attr("dy",a&&!n.hasMultiTargets()?"-.1em":".35em").style("opacity","0").style("text-anchor",n.getStylePropValue("middle")).style("pointer-events",n.getStylePropValue("none")),s.text=l.selectAll("."+pt.target+" text")},initArc:function(){const t=this,e=t.$el;e.arcs=e.main.select("."+pt.chart).append("g").attr("class",xt.chartArcs).attr("transform",t.getTranslate("arc")),t.setArcTitle()},setArcTitle:function(t){const e=this,i=t||e.getArcTitle(),n=e.hasType("gauge");if(i){const t=n?At.chartArcsGaugeTitle:xt.chartArcsTitle;let s=e.$el.arcs.select("."+t);s.empty()&&(s=e.$el.arcs.append("text").attr("class",t).style("text-anchor","middle")),n&&s.attr("dy","-0.3em"),N(s,i,n?void 0:[-.6,1.35],!0)}},getArcTitle:function(){const t=this,e=t.hasType("donut")?"donut":t.hasType("gauge")&&"gauge";return e?t.config[e+"_title"]:""},getArcTitleWithNeedleValue:function(){const t=this,e=t.config,i=t.state,n=t.getArcTitle();if(n&&t.config.arc_needle_show&&/{=[A-Z_]+}/.test(n)){let t=i.current.needle;return S(t)||(t=e.arc_needle_value),ct(n,{NEEDLE_VALUE:S(t)?t:0})}return!1},redrawArc:function(t,e,n){var a=this;const r=this,o=r.config,c=r.state,l=r.$el.main,d=o.interaction_enabled,u=d&&o.data_selection_isselectable;let h=l.selectAll("."+xt.arcs).selectAll("."+xt.arc).data(r.arcData.bind(r));h.exit().transition().duration(e).style("opacity","0").remove(),h=h.enter().append("path").attr("class",r.getClass("arc",!0)).style("fill",function(t){return i(this,a),r.color(t.data)}.bind(this)).style("cursor",function(t){return i(this,a),null!=u&&null!=u.bind&&u.bind(r.api)(t)?"pointer":null}.bind(this)).style("opacity","0").each((function(t){r.isGaugeType(t.data)&&(t.startAngle=o.gauge_startingAngle,t.endAngle=o.gauge_startingAngle),this._current=t})).merge(h),r.hasType("gauge")&&(r.updateGaugeMax(),r.hasMultiArcGauge()&&r.redrawArcGaugeLine()),h.attr("transform",function(t){return i(this,a),!r.isGaugeType(t.data)&&n?"scale(0)":""}.bind(this)).style("opacity",(function(t){return t===this._current?"0":null})).each(function(){i(this,a),c.transiting=!0}.bind(this)).transition().duration(t).attrTween("d",(function(t){var e=this;const n=r.updateAngle(t);if(!n)return function(){return i(this,e),"M 0 0"}.bind(this);isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);const s=(0,fn.interpolate)(this._current,n);return this._current=s(0),function(e){const i=s(e);return i.data=t.data,r.getArc(i,!0)}})).attr("transform",n?"scale(1)":"").style("fill",function(t){let e;return i(this,a),r.levelColor?(e=r.levelColor(t.data.values[0].value),o.data_colors[t.data.id]=e):e=r.color(t.data),e}.bind(this)).style("opacity",null).call(F,(function(){if(r.levelColor){const t=(0,s.select)(this),e=t.datum(this._current);r.updateLegendItemColor(e.data.id,t.style("fill"))}c.transiting=!1,X(o.onrendered,r.api)})),d&&r.bindArcEvent(h),r.hasType("polar")&&r.redrawPolar(),r.hasType("gauge")&&r.redrawBackgroundArcs(),o.arc_needle_show&&r.redrawNeedle(),r.redrawArcText(t),r.redrawArcRangeText()},redrawNeedle:function(){var t=this;const e=this,n=e.$el,s=e.config,a=e.state,r=a.hiddenTargetIds,o=(a.radius-1)/100*s.arc_needle_length,c=r.length!==e.data.targets.length;let l=e.$el.arcs.select("."+xt.needle);const d=s.arc_needle_path,u=s.arc_needle_bottom_width/2,h=s.arc_needle_top_width/2,g=s.arc_needle_top_rx,f=s.arc_needle_top_ry,p=s.arc_needle_bottom_len,x=s.arc_needle_bottom_rx,b=s.arc_needle_bottom_ry,m=e.getNeedleAngle(),_=function(){i(this,t);const n=e.getArcTitleWithNeedleValue();n&&e.setArcTitle(n)}.bind(this);if(_(),l.empty()&&(l=n.arcs.append("path").classed(xt.needle,!0),n.needle=l,n.needle.updateHelper=function(a,r){var o=this;void 0===r&&(r=!1),i(this,t),"none"!==n.needle.style("display")&&e.$T(n.needle).style("transform","rotate("+e.getNeedleAngle(a)+"deg)").call(F,function(){i(this,o),r&&(s.arc_needle_value=a),_()}.bind(this))}.bind(this)),c){const t=w(d)?d.call(e,o):"M-"+u+" "+p+" A"+x+" "+b+" 0 0 0 "+u+" "+p+" L"+h+" -"+o+" A"+g+" "+f+" 0 0 0 -"+h+" -"+o+" L-"+u+" "+p+" Z";e.$T(l).attr("d",t).style("fill",s.arc_needle_color).style("display",null).style("transform","rotate("+m+"deg)")}else l.style("display","none")},getNeedleAngle:function(t){const e=this,i=e.config,n=e.state,s=e.getArcLength(),a=e.hasType("gauge"),r=e.getTotalDataSum(!0);let o=R(t)?t:i.arc_needle_value,c=i[i.data_type+"_startingAngle"]||0,l=0;if(S(o)||(o=a&&1===e.data.targets.length?r:0),n.current.needle=o,a){c=e.getStartingAngle();const t=i.gauge_fullCircle?s:-2*c,n=i.gauge_min;l=t*((o-n)/(i.gauge_max-n))}else l=s*(o/r);return(c+l)*(180/Math.PI)},redrawBackgroundArcs:function(){var t=this;const e=this,n=e.config,s=e.state,a=e.hasMultiArcGauge(),r=n.gauge_fullCircle,o=0===e.filterTargetsToShow(e.data.targets).length&&!!n.data_empty_label_text,c=e.getStartingAngle(),l=r?c+e.getArcLength():-1*c;let d=e.$el.arcs.select((a?"g":"")+"."+xt.chartArcsBackground);if(a){let a=0;d=d.selectAll("path."+xt.chartArcsBackground).data(e.data.targets),d.enter().append("path").attr("class",function(e,n){return i(this,t),xt.chartArcsBackground+" "+xt.chartArcsBackground+"-"+n}.bind(this)).merge(d).style("fill",n.gauge_background||null).attr("d",function(r){let d=r.id;if(i(this,t),o||s.hiddenTargetIds.indexOf(d)>=0)return"M 0 0";const u={data:[{value:n.gauge_max}],startAngle:c,endAngle:l,index:a++};return e.getArc(u,!0,!0)}.bind(this)),d.exit().remove()}else d.attr("d",o?"M 0 0":function(){i(this,t);const s={data:[{value:n.gauge_max}],startAngle:c,endAngle:l};return e.getArc(s,!0,!0)}.bind(this))},bindArcEvent:function(t){var e=this;const n=this,a=n.config,o=n.state,c="touch"===o.inputType,l="mouse"===o.inputType;function d(t,e,i){n.expandArc(i),n.api.focus(i),n.toggleFocusLegend(i,!0),n.showTooltip([e],t)}function u(t){const e=(null==t?void 0:t.id)||void 0;n.unexpandArc(e),n.api.revert(),n.revertLegend(),n.hideTooltip()}if(t.on("click",(function(t,e,i){const s=n.updateAngle(e);let r;s&&(r=n.convertToArcData(s),null==n.toggleShape||n.toggleShape(this,r,i),a.data_onclick.bind(n.api)(r,this))})),l&&t.on("mouseover",(function(t,e){var i;if(o.transiting)return;o.event=t;const s=n.updateAngle(e),a=s?n.convertToArcData(s):null;d(this,a,(null==(i=a)?void 0:i.id)||void 0),n.setOverOut(!0,a)})).on("mouseout",function(t,s){if(i(this,e),o.transiting)return;o.event=t;const a=n.updateAngle(s),r=a?n.convertToArcData(a):null;u(),n.setOverOut(!1,r)}.bind(this)).on("mousemove",(function(t,e){const i=n.updateAngle(e),s=i?n.convertToArcData(i):null;o.event=t,n.showTooltip([s],this)})),c&&n.hasArcType()&&!n.radars){const t=function(t){var n,a;i(this,e);const o=null!=(n=null==(a=t.changedTouches)?void 0:a[0])?n:{clientX:0,clientY:0},c=o.clientX,l=o.clientY;return(0,s.select)(r.elementFromPoint(c,l))}.bind(this);n.$el.svg.on("touchstart touchmove",(function(e){var i,s;if(o.transiting)return;o.event=e;const a=t(e).datum(),r=null!=(i=a)&&i.data&&a.data.id?n.updateAngle(a):null,c=r?n.convertToArcData(r):null,l=(null==(s=c)?void 0:s.id)||void 0;n.callOverOutForTouch(c),k(l)?u():d(this,c,l)}))}},redrawArcText:function(t){var e=this;const n=this,s=n.config,a=n.state,r=n.$el,o=r.main,c=r.arcs,l=n.hasType("gauge"),d=n.hasMultiArcGauge();let u;if(l&&1===n.data.targets.length&&s.gauge_title||(u=o.selectAll("."+xt.chartArc).select("text").style("opacity","0").attr("class",function(t){return i(this,e),n.isGaugeType(t.data)?At.gaugeValue:null}.bind(this)).call(n.textForArcLabel.bind(n)).attr("transform",function(t){return i(this,e),n.transformForArcLabel.bind(n)(t)}.bind(this)).style("font-size",function(t){return i(this,e),n.isGaugeType(t.data)&&1===n.data.targets.length&&!d?Math.round(a.radius/5)+"px":null}.bind(this)).transition().duration(t).style("opacity",function(t){return i(this,e),n.isTargetToShow(t.data.id)&&n.isArcType(t.data)?null:"0"}.bind(this)),d&&u.attr("dy","-.1em")),o.select("."+xt.chartArcsTitle).style("opacity",n.hasType("donut")||l?null:"0"),l){var h;const t=s.gauge_fullCircle;t&&(null==(h=u)||h.attr("dy",""+(d?0:Math.round(a.radius/14)))),s.gauge_label_show&&(c.select("."+At.chartArcsGaugeUnit).attr("dy",(t?1.5:.75)+"em").text(s.gauge_units),c.select("."+At.chartArcsGaugeMin).attr("dx",-1*(a.innerRadius+(a.radius-a.innerRadius)/(t?1:2))+"px").attr("dy","1.2em").text(n.textForGaugeMinMax(s.gauge_min,!1)),t||c.select("."+At.chartArcsGaugeMax).attr("dx",a.innerRadius+(a.radius-a.innerRadius)/2+"px").attr("dy","1.2em").text(n.textForGaugeMinMax(s.gauge_max,!0)))}},getArcElementByIdOrIndex:function(t){var e=this;const n=this.$el.arcs,s=S(t)?function(n){return i(this,e),n.index===t}.bind(this):function(n){return i(this,e),n.data.id===t}.bind(this);return null==n?void 0:n.selectAll("."+pt.target+" path").filter(s)}},vn={initArea:function(t){const e=this.config;t.insert("g","."+(e.area_front?yt.circles:kt.lines)).attr("class",this.getClass("areas",!0))},updateAreaColor:function(t){const e=this;return e.config.area_linearGradient?e.getGradienColortUrl(t.id):e.color(t)},updateArea:function(t,e){void 0===e&&(e=!1);const i=this,n=i.config,a=i.state,r=i.$el,o=i.$T,c=e?r.subchart:r;n.area_linearGradient&&i.updateLinearGradient();const l=c.main.selectAll("."+bt.areas).selectAll("."+bt.area).data(i.lineData.bind(i));o(l.exit(),t).style("opacity","0").remove(),c.area=l.enter().append("path").attr("class",i.getClass("area",!0)).style("fill",i.updateAreaColor.bind(i)).style("opacity",(function(){return a.orgAreaOpacity=(0,s.select)(this).style("opacity"),"0"})).merge(l),l.style("opacity",a.orgAreaOpacity),i.setRatioForGroupedData(c.area.data())},redrawArea:function(t,e,n){var s=this;void 0===n&&(n=!1);const a=this,r=(n?this.$el.subchart:this.$el).area,o=a.state.orgAreaOpacity;return[a.$T(r,e,U()).attr("d",t).style("fill",a.updateAreaColor.bind(a)).style("opacity",function(t){return i(this,s),(a.isAreaRangeType(t)?o/1.75:o)+""}.bind(this))]},generateDrawArea:function(t,e){var n=this;const s=this,a=s.config,r=a.line_connectNull,o=a.axis_rotated,c=s.generateGetAreaPoints(t,e),l=s.getYScaleById.bind(s),d=function(t){return i(this,n),(e?s.subxx:s.xx).call(s,t)}.bind(this),u=function(t,a){return i(this,n),s.isGrouped(t.id)?c(t,a)[0][1]:l(t.id,e)(s.isAreaRangeType(t)?s.getRangedData(t,"high"):s.getShapeYMin(t.id))}.bind(this),h=function(t,a){return i(this,n),s.isGrouped(t.id)?c(t,a)[1][1]:l(t.id,e)(s.isAreaRangeType(t)?s.getRangedData(t,"low"):t.value)}.bind(this);return function(t){var e=this;i(this,n);let c,l=r?s.filterRemoveNull(t.values):t.values,g=0,f=0;if(s.isAreaType(t)){let n=(0,Ze.area)();n=o?n.y(d).x0(u).x1(h):n.x(d).y0(a.area_above?0:a.area_below?s.state.height:u).y1(h),r||(n=n.defined(function(t){return i(this,e),null!==s.getBaseValue(t)}.bind(this))),s.isStepType(t)&&(l=s.convertValuesToStep(l)),c=n.curve(s.getCurve(t))(l)}else l[0]&&(g=s.scale.x(l[0].x),f=s.getYScaleById(t.id)(l[0].value)),c=o?"M "+f+" "+g:"M "+g+" "+f;return c||"M 0 0"}.bind(this)},generateGetAreaPoints:function(t,e){const i=this,n=i.config,s=i.getShapeX(0,t,e),a=i.getShapeY(!!e),r=i.getShapeOffset(i.isAreaType,t,e),o=i.getYScaleById.bind(i);return function(t,c){const l=o.call(i,t.id,e)(i.getShapeYMin(t.id)),d=r(t,c)||l,u=s(t),h=t.value;let g=a(t);return n.axis_rotated&&(h>0&&g<l||h<0&&l<g)&&(g=l),[[u,d],[u,g-(l-d)],[u,g-(l-d)],[u,d]]}}},yn={initBar:function(){const t=this.$el,e=this.config,i=this.state.clip;t.bar=t.main.select("."+pt.chart),t.bar=e.bar_front?t.bar.append("g"):t.bar.insert("g",":first-child"),t.bar.attr("class",_t.chartBars).call(this.setCssRule(!1,"."+_t.chartBars,["pointer-events:none"])),!1===e.clipPath&&(e.bar_radius||e.bar_radius_ratio)&&t.bar.attr("clip-path",i.pathXAxis.replace(/#[^)]*/,"#"+i.id))},updateTargetsForBar:function(t){var e=this;const n=this,s=n.config,a=n.$el,r=n.getChartClass("Bar"),o=n.getClass("bars",!0),c=n.classFocus.bind(n),l=s.interaction_enabled&&s.data_selection_isselectable;a.bar||n.initBar();a.main.select("."+_t.chartBars).selectAll("."+_t.chartBar).data(t.filter(function(t){var s=this;return i(this,e),t.values.some(function(t){return i(this,s),S(t.value)||n.isBarRangeType(t)}.bind(this))}.bind(this))).attr("class",function(t){return i(this,e),r(t)+c(t)}.bind(this)).enter().append("g").attr("class",r).style("opacity","0").style("pointer-events",n.getStylePropValue("none")).append("g").attr("class",o).style("cursor",function(t){return i(this,e),null!=l&&null!=l.bind&&l.bind(n.api)(t)?"pointer":null}.bind(this)).call(n.setCssRule(!0," ."+_t.bar,["fill"],n.color))},updateBar:function(t,e){void 0===e&&(e=!1);const i=this,n=i.config,s=i.$el,a=i.$T,r=e?s.subchart:s,o=i.getClass("bar",!0),c=i.initialOpacity.bind(i);n.bar_linearGradient&&i.updateLinearGradient();const l=r.main.selectAll("."+_t.bars).selectAll("."+_t.bar).data(i.labelishData.bind(i));a(l.exit(),t).style("opacity","0").remove(),r.bar=l.enter().append("path").attr("class",o).style("fill",i.updateBarColor.bind(i)).merge(l).style("opacity",c),i.setRatioForGroupedData(r.bar.data())},updateBarColor:function(t){const e=this,i=e.getStylePropValue(e.color);return e.config.bar_linearGradient?e.getGradienColortUrl(t.id):i?i(t):null},redrawBar:function(t,e,n){var s=this;void 0===n&&(n=!1);const a=this,r=(n?a.$el.subchart:a.$el).bar;return[a.$T(r,e,U()).attr("d",function(e){return i(this,s),(S(e.value)||a.isBarRangeType(e))&&t(e)}.bind(this)).style("fill",a.updateBarColor.bind(a)).style("opacity",null)]},generateDrawBar:function(t,e){var n=this;const s=this,a=s.config,r=s.generateGetBarPoints(t,e),o=a.axis_rotated,c=a.bar_radius,l=a.bar_radius_ratio,d=S(c)&&c>0?function(){return i(this,n),c}.bind(this):S(l)?function(t){return i(this,n),t*l}.bind(this):null;return function(t,e){i(this,n);const c=r(t,e),l=+o,u=+!l,h=t.value<0,g=a["axis_"+s.axis.getId(t.id)+"_inverted"],f=!g&&h||g&&!h,p=["",""];let x=0;const b=s.isGrouped(t.id),m=!(!d||!b)&&s.isStackingRadiusData(t);if(d){const t=o?u:l,e=c[2][t]-c[0][t];x=!b||m?d(e):0;const i="a"+x+","+x+" "+(f?"1 0 0":"0 0 1")+" ";p[+!o]=""+i+x+","+x,p[+o]=""+i+[-x,x][o?"sort":"reverse"](),f&&p.reverse()}const _=o?"H"+(c[1][l]+(f?x:-x))+" "+p[0]+"V"+(c[2][u]-x)+" "+p[1]+"H"+c[3][l]:"V"+(c[1][u]+(f?-x:x))+" "+p[0]+"H"+(c[2][l]-x)+" "+p[1]+"V"+c[3][u];return"M"+c[0][l]+","+c[0][u]+_+"z"}.bind(this)},isStackingRadiusData:function(t){var e=this;const n=this,s=n.$el,a=n.config,r=n.data,o=n.state,c=t.id,l=t.index,d=t.value;if(o.hiddenTargetIds.indexOf(c)>-1){const t=s.bar.filter(function(t){return i(this,e),t.id===c&&t.value===d}.bind(this));return!t.empty()&&/a\d+/i.test(t.attr("d"))}const u=a.data_groups.find(function(t){return i(this,e),t.indexOf(c)>-1}.bind(this)),h=n.orderTargets(n.filterTargetsToShow(r.targets.filter(n.isBarType,n))).filter(function(t){return i(this,e),u.indexOf(t.id)>-1}.bind(this)).map(function(t){var n=this;return i(this,e),t.values.filter(function(t){return i(this,n),t.index===l&&(S(d)&&d>0?t.value>0:t.value<0)}.bind(this))[0]}.bind(this)).filter(Boolean).map(function(t){return i(this,e),t.id}.bind(this));return 0!==d&&h.indexOf(c)===h.length-1},generateGetBarPoints:function(t,e){var n=this;const s=this,a=s.config,r=e?s.axis.subX:s.axis.x,o=s.getIndicesMax(t)+1,c=s.getBarW("bar",r,o),l=s.getShapeX(c,t,!!e),d=s.getShapeY(!!e),u=s.getShapeOffset(s.isBarType,t,!!e),h=s.getYScaleById.bind(s);return function(t,r){i(this,n);const o=t.id,g=h.call(s,o,e)(s.getShapeYMin(o)),f=u(t,r)||g,p=S(c)?c:c[t.id]||c._$width,x=a["axis_"+s.axis.getId(o)+"_inverted"],b=t.value,m=l(t);let _=d(t);a.axis_rotated&&!x&&(b>0&&_<g||b<0&&g<_)&&(_=g),s.isBarRangeType(t)||(_-=g-f);const v=m+p;return[[m,f],[m,_],[v,_],[v,f]]}.bind(this)}};function Tn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var wn={initCandlestick:function(){const t=this.$el;t.candlestick=t.main.select("."+pt.chart).append("g").attr("class",vt.chartCandlesticks)},updateTargetsForCandlestick:function(t){const e=this,i=e.$el,n=e.getChartClass("Candlestick");i.candlestick||e.initCandlestick();e.$el.main.select("."+vt.chartCandlesticks).selectAll("."+vt.chartCandlestick).data(t).enter().append("g").attr("class",n).style("pointer-events","none")},updateCandlestick:function(t,e){var n=this;void 0===e&&(e=!1);const s=this,a=s.$el,r=s.$T,o=e?a.subchart:a,c=s.getClass("candlestick",!0),l=s.initialOpacity.bind(s),d=o.main.selectAll("."+vt.chartCandlestick).selectAll("."+vt.candlestick).data(s.labelishData.bind(s));r(d.exit(),t).style("opacity","0").remove();const u=d.enter().filter(function(t){return i(this,n),t.value}.bind(this)).append("g").attr("class",c);u.append("line"),u.append("path"),o.candlestick=d.merge(u).style("opacity",l)},generateDrawCandlestick:function(t,e){var n=this;const s=this,a=s.config,r=s.generateGetCandlestickPoints(t,e),o=a.axis_rotated,c=a.candlestick_color_down;return function(t,e,a){var l,d=this;i(this,n);const u=r(t,e),h=null==(l=s.getCandlestickData(t))?void 0:l._isUp,g=+o;a.classed&&a.classed(vt[h?"valueUp":"valueDown"],!0);const f=o?"H"+u[1][1]+" V"+u[1][0]+" H"+u[0][1]:"V"+u[1][1]+" H"+u[1][0]+" V"+u[0][1];a.select("path").attr("d","M"+u[0][g]+","+u[0][+!g]+f+"z").style("fill",function(t){i(this,d);return(h?s.color(t):M(c)?c[t.id]:c)||s.color(t)}.bind(this));const p=a.select("line"),x=o?{x1:u[2][1],x2:u[2][2],y1:u[2][0],y2:u[2][0]}:{x1:u[2][0],x2:u[2][0],y1:u[2][1],y2:u[2][2]};for(const t in x)p.attr(t,x[t])}.bind(this)},generateGetCandlestickPoints:function(t,e){var n=this;void 0===e&&(e=!1);const s=this,a=e?s.axis.subX:s.axis.x,r=s.getIndicesMax(t)+1,o=s.getBarW("candlestick",a,r),c=s.getShapeX(o,t,!!e),l=s.getShapeY(!!e),d=s.getShapeOffset(s.isBarType,t,!!e),u=s.getYScaleById.bind(s);return function(t,a){i(this,n);const r=u.call(s,t.id,e)(s.getShapeYMin(t.id)),h=d(t,a)||r,g=S(o)?o:o[t.id]||o._$width,f=s.getCandlestickData(t);let p;if(f&&S(f.open)&&S(f.close)){const e={start:c(t),end:0};e.end=e.start+g;const i={start:l(f.open),end:l(f.close)},n={x:e.start+g/2,high:l(f.high),low:l(f.low)};i.start-=r-h,p=[[e.start,i.start],[e.end,i.end],[n.x,n.low,n.high]]}else p=[[0,0],[0,0],[0,0,0]];return p}.bind(this)},redrawCandlestick:function(t,e,i){void 0===i&&(i=!1);const n=this.$el,a=this.$T,r=(i?n.subchart:n).candlestick,o=U(!0);return[r.each((function(i,n){const r=a((0,s.select)(this),e,o);t(i,n,r)})).style("opacity",null)]},getCandlestickData:function(t){let e,i=t.value;if(z(i)){const t=i[0],n=i[1],s=i[2],a=i[3],r=i[4],o=void 0!==r&&r;e={open:t,high:n,low:s,close:a},!1!==o&&(e.volume=o)}else M(i)&&(e=function(t){for(var e,i=1;i<arguments.length;i++)e=null!=arguments[i]?arguments[i]:{},i%2?Tn(Object(e),!0).forEach((function(i){b(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Tn(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}));return t}({},i));return e&&(e._isUp=e.close>=e.open),e||null}},An={initGauge:function(){var t=this;const e=this,n=e.config,s=e.$el.arcs,a=function(e,n){void 0===e&&(e=null),void 0===n&&(n=""),i(this,t),s.append("text").attr("class",e).style("text-anchor","middle").style("pointer-events","none").text(n)}.bind(this);if(e.hasType("gauge")){const t=e.hasMultiArcGauge();s.append(t?"g":"path").attr("class",xt.chartArcsBackground).style("fill",!t&&n.gauge_background||null),n.gauge_units&&a(At.chartArcsGaugeUnit),n.gauge_label_show&&(a(At.chartArcsGaugeMin),n.gauge_fullCircle||a(At.chartArcsGaugeMax))}},updateGaugeMax:function(){const t=this,e=t.config,i=t.state,n=t.hasMultiArcGauge()?t.getMinMaxData().max[0].value:t.getTotalDataSum(i.rendered);!e.gauge_enforceMinMax&&n+e.gauge_min*(e.gauge_min>0?-1:1)>e.gauge_max&&(e.gauge_max=n-e.gauge_min)},redrawArcGaugeLine:function(){var t=this;const e=this,n=e.config,a=e.state,r=e.$el,o=e.state.hiddenTargetIds,c=r.main.selectAll("."+xt.arcs).selectAll("."+xt.arcLabelLine).data(e.arcData.bind(e));c.enter().append("rect").attr("class",function(e){return i(this,t),xt.arcLabelLine+" "+pt.target+" "+pt.target+"-"+e.data.id}.bind(this)).merge(c).style("fill",function(n){return i(this,t),e.levelColor?e.levelColor(n.data.values[0].value):e.color(n.data)}.bind(this)).style("display",n.gauge_label_show?null:"none").each((function(t){let i=0,n=0,r=0,c="";if(o.indexOf(t.data.id)<0){const s=e.updateAngle(t),o=a.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length*(s.index+1),l=s.endAngle-Math.PI/2,d=a.radius-o,u=l-(0===d?0:1/d);i=a.radiusExpanded-a.radius+o,n=Math.cos(u)*d,r=Math.sin(u)*d,c="rotate("+180*l/Math.PI+", "+n+", "+r+")"}(0,s.select)(this).attr("x",n).attr("y",r).attr("width",i).attr("height",2).attr("transform",c).style("stroke-dasharray","0, "+(i+2)+", 0")}))},textForGaugeMinMax:function(t,e){const i=this.config.gauge_label_extents;return w(i)?i.bind(this.api)(t,e):t},getGaugeLabelHeight:function(){const t=this.config;return this.config.gauge_label_show&&!t.gauge_fullCircle?20:0},getPaddingBottomForGauge:function(){return this.getGaugeLabelHeight()*(this.config.gauge_label_show?2:2.5)}},Sn={initBubble:function(){const t=this.config;this.hasType("bubble")&&(t.point_show=!0,t.point_type="circle")},getBaseLength:function(){const t=this,e=t.state,i=e.width,n=e.height,s=ne;let a=t.cache.get(s);return a||t.cache.add(s,a=at("min",[i,n])),a},getBubbleR:function(t){var e=this;const n=this;let s=n.config.bubble_maxR;w(s)?s=s.bind(n.api)(t):S(s)||(s=n.getBaseLength()/(2*n.getMaxDataCount())+12);const a=at("max",n.getMinMaxData().max.map(function(t){return i(this,e),n.isBubbleZType(t)?n.getBubbleZData(t.value,"y"):M(t.value)?t.value.mid:t.value}.bind(this))),r=s*s*Math.PI,o=(n.isBubbleZType(t)?n.getBubbleZData(t.value,"z"):t.value)*(r/a);return Math.sqrt(o/Math.PI)},getBubbleZData:function(t,e){return M(t)?t[e]:t["y"===e?0:1]}},kn={initLine:function(){const t=this.$el;t.line=t.main.select("."+pt.chart).append("g").attr("class",kt.chartLines).call(this.setCssRule(!1,"."+kt.chartLines,["pointer-events:none"]))},updateTargetsForLine:function(t){var e=this;const n=this,s=n.$el,a=s.area,r=s.line,o=s.main,c=n.getChartClass("Line"),l=n.getClass("lines",!0),d=n.classFocus.bind(n);r||n.initLine();const u=t.filter(function(t){return i(this,e),!(n.isScatterType(t)||n.isBubbleType(t))}.bind(this)),h=o.select("."+kt.chartLines).selectAll("."+kt.chartLine).data(u).attr("class",function(t){return i(this,e),c(t)+d(t)}.bind(this)),g=h.enter().append("g").attr("class",c).style("opacity","0").style("pointer-events",n.getStylePropValue("none"));if(g.append("g").attr("class",l),n.hasTypeOf("Area")){const t=(!a&&g.empty()?h:g).filter(n.isAreaType.bind(n));n.initArea(t)}n.updateTargetForCircle(u,g)},updateLine:function(t,e){var n=this;void 0===e&&(e=!1);const s=this,a=s.format.extraLineClasses,r=s.$el,o=s.$T,c=e?r.subchart:r,l=c.main.selectAll("."+kt.lines).selectAll("."+kt.line).data(s.lineData.bind(s));o(l.exit(),t).style("opacity","0").remove(),c.line=l.enter().append("path").attr("class",function(t){return i(this,n),s.getClass("line",!0)(t)+" "+(a(t)||"")}.bind(this)).style("stroke",s.color).merge(l).style("opacity",s.initialOpacity.bind(s)).attr("transform",null)},redrawLine:function(t,e,i){void 0===i&&(i=!1);const n=this.$el;return[(0,this.$T)((i?n.subchart:n).line,e,U()).attr("d",t).style("stroke",this.color).style("opacity",null)]},getCurve:function(t){var e=this;const n=this;return n.config.axis_rotated&&n.isStepType(t)?function(s){i(this,e);const a=n.getInterpolate(t)(s);return a.orgPoint=a.point,a.pointRotated=function(t,e){1===this._point&&(this._point=2);const i=this._y*(1-this._t)+e*this._t;this._context.lineTo(this._x,i),this._context.lineTo(t,i),this._x=t,this._y=e},a.point=function(t,e){0===this._point?this.orgPoint(t,e):this.pointRotated(t,e)},a}.bind(this):n.getInterpolate(t)},generateDrawLine:function(t,e){var n=this;const s=this,a=s.config,r=s.scale,o=a.line_connectNull,c=a.axis_rotated,l=s.generateGetLinePoints(t,e),d=s.getYScaleById.bind(s),u=function(t){return i(this,n),(e?s.subxx:s.xx).call(s,t)}.bind(this),h=function(t,a){return i(this,n),s.isGrouped(t.id)?l(t,a)[0][1]:d(t.id,e)(s.getBaseValue(t))}.bind(this);let g=(0,Ze.line)();g=c?g.x(h).y(u):g.x(u).y(h),o||(g=g.defined(function(t){return i(this,n),null!==s.getBaseValue(t)}.bind(this)));const f=e?r.subX:r.x;return function(t){i(this,n);const l=d(t.id,e);let u,h=o?s.filterRemoveNull(t.values):t.values,p=0,x=0;if(s.isLineType(t)){const e=a.data_regions[t.id];e?u=s.lineWithRegions(h,r.zoom||f,l,e):(s.isStepType(t)&&(h=s.convertValuesToStep(h)),u=g.curve(s.getCurve(t))(h))}else h[0]&&(p=f(h[0].x),x=l(h[0].value)),u=c?"M "+x+" "+p:"M "+p+" "+x;return u||"M 0 0"}.bind(this)},lineWithRegions:function(t,e,n,s){var a=this;const r=this,o=r.config.axis_rotated,c=r.axis.isTimeSeries(),l=[];let d,u,h,g;if(R(s)){const e=function(t,e){return i(this,a),k(t)?e:c?lt.call(r,t):t}.bind(this);for(let i,n=0;i=s[n];n++){const s=e(i.start,t[0].x),a=e(i.end,t[t.length-1].x),r=i.style||{dasharray:"2 2"};l[n]={start:s,end:a,style:r}}}const f=o?function(t){return i(this,a),n(t.value)}.bind(this):function(t){return i(this,a),e(t.x)}.bind(this),p=o?function(t){return i(this,a),e(t.x)}.bind(this):function(t){return i(this,a),n(t.value)}.bind(this),x=function(t){return i(this,a),"M"+t[0][0]+","+t[0][1]+"L"+t[1][0]+","+t[1][1]}.bind(this),b=c?function(t,s,r,c){i(this,a);const l=t.x.getTime(),d=s.x-t.x,g=new Date(l+d*r),f=new Date(l+d*(r+c)),p=o?[[n(u(r)),e(g)],[n(u(r+h)),e(f)]]:[[e(g),n(u(r))],[e(f),n(u(r+h))]];return x(p)}.bind(this):function(t,s,r,c){i(this,a);const l=o?[[n(u(r),!0),e(d(r))],[n(u(r+c),!0),e(d(r+c))]]:[[e(d(r),!0),n(u(r))],[e(d(r+c),!0),n(u(r+c))]];return x(l)}.bind(this),m={x:r.axis.getAxisType("x"),y:r.axis.getAxisType("y")};let _="";for(let i,s=0;i=t[s];s++){const a=t[s-1],o=a&&T(a.value);let c=r.isWithinRegions(i.x,l);if(T(i.value))if(!k(l)&&c&&o){if(o){try{c=c.dasharray.split(" ")}catch(t){c="2 2".split(" ")}d=Ue(m.x,a.x,i.x),u=Ue(m.y,a.value,i.value);const t=e(i.x)-e(a.x),s=n(i.value)-n(a.value),r=Math.sqrt(Math.pow(t,2)+Math.pow(s,2));h=c[0]/r,g=h*c[1];for(let t=h;t<=1;t+=g)_+=b(a,i,t,h),t+g>=1&&(_+=b(a,i,1,0))}}else _+=(s&&o?"L":"M")+f(i)+","+p(i)}return _},isWithinRegions:function(t,e){for(let i,n=0;i=e[n];n++)if(i.start<t&&t<=i.end)return i.style;return!1},isWithinStep:function(t,e){return Math.abs(e-V(this.state.event,t)[1])<30},shouldDrawPointsForLine:function(t){const e=this.config.line_point;return!0===e||z(e)&&-1!==e.indexOf(t.id)}};function Rn(t,e){var n,a=this;const o=function(t,e){i(this,a);const n=t.attributes;for(let i,s=0;i=n[s];s++)i=i.name,e.setAttribute(i,t.getAttribute(i))}.bind(this),c=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement,l=r.createElementNS(s.namespaces.svg,c.nodeName.toLowerCase());if(l.id=e,l.style.fill="inherit",l.style.stroke="inherit",o(c,l),null!=(n=c.childNodes)&&n.length){const t=(0,s.select)(l);"innerHTML"in l?t.html(c.innerHTML):J(c.childNodes).forEach(function(e){i(this,a),o(e,t.append(e.tagName).node())}.bind(this))}this.$el.defs.node().appendChild(l)}var Cn={hasValidPointType:function(t){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(t||this.config.point_type)},hasLegendDefsPoint:function(){var t;const e=this.config;return e.legend_show&&(null==(t=e.point_pattern)?void 0:t.length)&&e.legend_usePoint},getDefsPointId:function(t){return this.state.datetimeId+"-point"+t},generatePoint:function(){const t=this,e=t.$el,i=t.config,n=[],a=I(i.point_pattern)?i.point_pattern:[i.point_type];return function(r,o){for(var c=arguments.length,l=Array(c>2?c-2:0),d=2;d<c;d++)l[d-2]=arguments[d];return function(c){var d,u;const h=t.getTargetSelectorSuffix(c.id||(null==(d=c.data)?void 0:d.id)||c),g=(0,s.select)(this);n.indexOf(h)<0&&n.push(h);let f=a[n.indexOf(h)%a.length];if(t.hasValidPointType(f))f=t[f];else if(!function(t){return P(t)&&w(t.create)&&w(t.update)}(f||i.point_type)){const i=t.getDefsPointId(h);var p,x;if(e.defs.select("#"+i).size()<1&&Rn.bind(t)(f,i),"create"===r)return null==(p=t.custom)?void 0:p.create.bind(o).apply(void 0,[g,i].concat(l));if("update"===r)return null==(x=t.custom)?void 0:x.update.bind(o).apply(void 0,[g].concat(l))}return null==(u=f[r])?void 0:u.bind(o).apply(void 0,[g].concat(l))}}}};const En=function(){return i(this,undefined),U()}.bind(void 0);var On={initialOpacityForCircle:function(t){const e=this.config,i=this.state.withoutFadeIn;let n=e.point_opacity;return k(n)&&(n=null!==this.getBaseValue(t)&&i[t.id]?this.opacityForCircle(t):"0"),n},opacityForCircle:function(t){const e=this.config;let i=e.point_opacity;var n;k(i)&&(i=!e.point_show||null!=(n=this.isPointFocusOnly)&&n.call(this)?"0":null,i=T(this.getBaseValue(t))?this.isBubbleType(t)||this.isScatterType(t)?"0.5":i:"0");return i},initCircle:function(){const t=this,e=t.$el.main;t.point=t.generatePoint(),(t.hasType("bubble")||t.hasType("scatter"))&&e.select("."+yt.chartCircles).empty()&&e.select("."+pt.chart).append("g").attr("class",yt.chartCircles)},updateTargetForCircle:function(t,e){var n=this;const a=this,r=a.config,o=a.data,c=a.$el,l=r.interaction_enabled&&r.data_selection_enabled,d=l&&r.data_selection_isselectable,u=a.getClass("circles",!0);if(!r.point_show)return;c.circle||a.initCircle();let h=t,g=e;if(!h){h=o.targets.filter(function(t){return i(this,n),this.isScatterType(t)||this.isBubbleType(t)}.bind(this));const t=c.main.select("."+yt.chartCircles).style("pointer-events","none").selectAll("."+yt.circles).data(h);t.exit().remove(),g=t.enter()}l&&g.append("g").attr("class",function(t){return i(this,n),a.generateClass(It.selectedCircles,t.id)}.bind(this)),g.append("g").attr("class",u).call(function(t){i(this,n),a.setCssRule(!0,"."+yt.circles,["cursor:pointer"],d)(t),a.setCssRule(!0," ."+yt.circle,["fill","stroke"],a.color)(t)}.bind(this)).style("opacity",(function(){return(0,s.select)(this.parentNode).attr("class").indexOf(yt.chartCircles)>-1?"0":null})),l&&h.forEach(function(t){var e=this;i(this,n),c.main.selectAll("."+It.selectedCircles+a.getTargetSelectorSuffix(t.id)).selectAll(""+It.selectedCircle).each(function(n){i(this,e),n.value=t.values[n.index].value}.bind(this))}.bind(this))},updateCircle:function(t){var e=this;void 0===t&&(t=!1);const n=this,s=n.config,a=n.state,r=n.$el,o=n.isPointFocusOnly(),c=t?r.subchart:r;if(s.point_show&&!a.toggling){s.point_radialGradient&&n.updateLinearGradient();const t=c.main.selectAll("."+yt.circles).selectAll("."+yt.circle).data(function(t){return i(this,e),n.isLineType(t)&&n.shouldDrawPointsForLine(t)||n.isBubbleType(t)||n.isRadarType(t)||n.isScatterType(t)?o?[t.values[0]]:t.values:[]}.bind(this));t.exit().remove(),t.enter().filter(Boolean).append(n.point("create",this,n.pointR.bind(n),n.updateCircleColor.bind(n))),c.circle=c.main.selectAll("."+yt.circles+" ."+yt.circle).style("stroke",n.getStylePropValue(n.color)).style("opacity",n.initialOpacityForCircle.bind(n))}},updateCircleColor:function(t){const e=this,i=e.getStylePropValue(e.color);return e.config.point_radialGradient?e.getGradienColortUrl(t.id):i?i(t):null},redrawCircle:function(t,e,i,n,s){void 0===s&&(s=!1);const a=this,r=a.state.rendered,o=a.$el,c=a.$T,l=s?o.subchart:o,d=l.main.selectAll("."+It.selectedCircle);if(!a.config.point_show)return[];const u=a.point("update",a,t,e,a.updateCircleColor.bind(a),i,n,d),h=a.isCirclePoint()?"c":"",g=U(),f=a.opacityForCircle.bind(a),p=[];return l.circle.each((function(t){let e=u.bind(this)(t);e=c(e,i||!r,g).style("opacity",f),p.push(e)})),[p,c(d,i).attr(h+"x",t).attr(h+"y",e)]},showCircleFocus:function(t){const e=this,n=e.state,a=n.hasRadar,r=n.resizing,o=n.toggling,c=n.transiting;let l=e.$el.circle;if(!1===c&&l&&e.isPointFocusOnly()){const n=(a?e.radarCircleX:e.circleX).bind(e),c=(a?e.radarCircleY:e.circleY).bind(e),d=o||k(t),u=e.point("update",e,n,c,e.getStylePropValue(e.color),!r&&d);t&&(l=l.filter((function(e){var n=this;const a=null==t.filter?void 0:t.filter(function(t){return i(this,n),t.id===e.id}.bind(this));return!!a.length&&(0,s.select)(this).datum(a[0])}))),l.attr("class",this.updatePointClass.bind(this)).style("opacity",null).each((function(t){const i=t.id,n=t.index,s=t.value;let a="hidden";T(s)&&(u.bind(this)(t),e.expandCircles(n,i),a=""),this.style.visibility=a}))}},hideCircleFocus:function(){const t=this,e=t.$el.circle;t.isPointFocusOnly()&&e&&(t.unexpandCircles(),e.style("visibility","hidden"))},circleX:function(t){return this.xx(t)},updateCircleY:function(t){var e=this;void 0===t&&(t=!1);const n=this,s=n.generateGetLinePoints(n.getShapeIndices(n.isLineType),t);return function(a,r){i(this,e);const o=a.id;return n.isGrouped(o)?s(a,r)[0][1]:n.getYScaleById(o,t)(n.getBaseValue(a))}.bind(this)},expandCircles:function(t,e,i){const n=this,a=n.pointExpandedR.bind(n);i&&n.unexpandCircles();const r=n.getShapeByIndex("circle",t,e).classed(pt.EXPANDED,!0),o=a(r)/n.config.point_r,c=1-o;n.isCirclePoint()?r.attr("r",a):r.each((function(){const t=(0,s.select)(this);if("circle"===this.tagName)t.attr("r",a);else{const e=this.getBBox(),i=e.width,n=e.height,s=c*(+t.attr("x")+i/2),a=c*(+t.attr("y")+n/2);t.attr("transform","translate("+s+" "+a+") scale("+o+")")}}))},unexpandCircles:function(t){const e=this,i=e.pointR.bind(e),n=e.getShapeByIndex("circle",t).filter((function(){return(0,s.select)(this).classed(pt.EXPANDED)})).classed(pt.EXPANDED,!1);if(n.attr("r",i),!e.isCirclePoint()){const t=i(n)/e.config.point_r;n.attr("transform",1!==t?"scale("+t+")":null)}},pointR:function(t){const e=this,i=e.config.point_r;let n=i;return e.isBubbleType(t)?n=e.getBubbleR(t):w(i)&&(n=i.bind(e.api)(t)),t.r=n,n},pointExpandedR:function(t){const e=this,i=e.config,n=e.isBubbleType(t)?1.15:1.75;return i.point_focus_expand_enabled?i.point_focus_expand_r||e.pointR(t)*n:e.pointR(t)},pointSelectR:function(t){const e=this.config.point_select_r;return w(e)?e(t):e||4*this.pointR(t)},isPointFocusOnly:function(){const t=this;return t.config.point_focus_only&&!t.hasType("bubble")&&!t.hasType("scatter")&&!t.hasArcType(null,["radar"])},isWithinCircle:function(t,e){const i=this.config,n=V(this.state.event,t),a=(0,s.select)(t),r=this.isCirclePoint(t)?"c":"",o="radius"===i.point_sensitivity?t.getAttribute("r"):i.point_sensitivity;let c=+a.attr(r+"x"),l=+a.attr(r+"y");if(!c&&!l&&1===t.nodeType){const e=H(t);c=e.x,l=e.y}return Math.sqrt(Math.pow(c-n[0],2)+Math.pow(l-n[1],2))<(e||o)},getPointSensitivity:function(t){const e=this;let i=e.config.point_sensitivity;return w(i)?i=i.call(e.api,t):"radius"===i&&(i=t.r),i},updatePointClass:function(t){const e=this,i=e.$el.circle;let n=!1;return(M(t)||i)&&(n=!0===t?i.each((function(t){let i=e.getClass("circle",!0)(t);this.getAttribute("class").indexOf(pt.EXPANDED)>-1&&(i+=" "+pt.EXPANDED),this.setAttribute("class",i)})):e.getClass("circle",!0)(t)),n},generateGetLinePoints:function(t,e){var n=this;const s=this,a=s.config,r=s.getShapeX(0,t,e),o=s.getShapeY(e),c=s.getShapeOffset(s.isLineType,t,e),l=s.getYScaleById.bind(s);return function(t,d){i(this,n);const u=l.call(s,t.id,e)(s.getShapeYMin(t.id)),h=c(t,d)||u,g=r(t);let f=o(t);a.axis_rotated&&(t.value>0&&f<u||t.value<0&&u<f)&&(f=u);const p=[g,f-(u-h)];return[p,p,p,p]}.bind(this)},custom:{create:function(t,e,i){return t.append("use").attr("xlink:href","#"+e).attr("class",this.updatePointClass.bind(this)).style("fill",i).node()},update:function(t,e,n,s,a,r,o){var c=this;const l=this,d=t.node().getBBox(),u=d.width,h=d.height,g=function(t){return i(this,c),T(t.value)?e(t)-u/2:0}.bind(this),f=function(t){return i(this,c),T(t.value)?n(t)-h/2:0}.bind(this);let p=t;return a&&(r&&p.attr("x",g),p=l.$T(p,a,En()),o&&l.$T(o,a,En())),p.attr("x",g).attr("y",f).style("fill",s)}},circle:{create:function(t,e,i){return t.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",e).style("fill",i).node()},update:function(t,e,i,n,s,a,r){const o=this;let c=t;return o.hasType("bubble")&&c.attr("r",o.pointR.bind(o)),s&&(a&&c.attr("cx",e),c.attr("cx")&&(c=o.$T(c,s,En())),r&&o.$T(c,s,En())),c.attr("cx",e).attr("cy",i).style("fill",n)}},rectangle:{create:function(t,e,n){var s=this;const a=function(t){return i(this,s),2*e(t)}.bind(this);return t.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",a).attr("height",a).style("fill",n).node()},update:function(t,e,n,s,a,r,o){var c=this;const l=this,d=l.config.point_r,u=function(t){return i(this,c),e(t)-d}.bind(this),h=function(t){return i(this,c),n(t)-d}.bind(this);let g=t;return a&&(r&&g.attr("x",u),g=l.$T(g,a,En()),o&&l.$T(o,a,En())),g.attr("x",u).attr("y",h).style("fill",s)}}};function Ln(t){const e=t.config.polar_level_max;let i=t.getMinMaxData().max[0].value;return e&&e>i&&(i=e),i}var Pn={initPolar:function(){const t=this,e=t.$el.arcs,i=t.config,n=i.polar_level_text_show,s=i.polar_level_text_backgroundColor;e.levels=e.append("g").attr("class",Lt),n&&s&&t.generateDataLabelBackgroundColorFilter(s)},getPolarOuterRadius:function(t,e){var i;const n=Ln(this);return(null!=(i=null==t?void 0:t.data.values[0].value)?i:0)/n*e},updateTargetsForPolar:function(t){this.updateTargetsForArc(t)},redrawPolar:function(){this.config.polar_level_show&&this.updatePolarLevel()},updatePolarLevel:function(){var t=this;const e=this,n=e.config,s=e.state,a=e.$el.arcs.levels,r=n.polar_level_depth,o=Ln(e),c=rt(0,r),l=s.radius,d=c.map(function(e){return i(this,t),l*((e+1)/r)}.bind(this)),u=(n.polar_level_text_format||function(){}).bind(e.api),h=a.selectAll("."+Ot).data(c);h.exit().remove();const g=h.enter().append("g").attr("class",function(e,n){return i(this,t),Ot+" "+Ot+"-"+n}.bind(this));if(g.append("circle"),g.merge(h).selectAll("circle").style("visibility",n.polar_level_show?null:"hidden").attr("cx",0).attr("cy",0).attr("r",function(e){return i(this,t),d[e]}.bind(this)),n.polar_level_text_show){const a=n.polar_level_text_backgroundColor,r="#"+s.datetimeId+"-labels-bg"+e.getTargetSelectorSuffix(a);g.append("text").style("text-anchor","middle"),g.merge(h).selectAll("text").attr("dy",function(e){return i(this,t),5-d[e]}.bind(this)).attr("filter",a?"url("+r+")":null).text(function(e){return i(this,t),u(o/c.length*(e+1))}.bind(this))}}};const Dn=le,In=de;var zn={initRadar:function(){const t=this,e=t.config,i=t.state.current,n=t.$el;t.hasType("radar")&&(n.radar=n.main.select("."+pt.chart).append("g").attr("class",Pt.chartRadars),n.radar.levels=n.radar.append("g").attr("class",Lt),n.radar.axes=n.radar.append("g").attr("class",mt.axis),n.radar.shapes=n.radar.append("g").attr("class",zt.shapes),i.dataMax=e.radar_axis_max||t.getMinMaxData().max[0].value,e.radar_axis_text_show&&(e.interaction_enabled&&t.bindRadarEvent(),t.updateRadarLevel(),t.updateRadarAxes()))},getRadarSize:function(){const t=this.config,e=this.state,i=e.arcWidth,n=e.arcHeight,s=t.axis_x_categories.length<4?-20:10,a=(Math.min(i,n)-s)/2;return[a,a]},updateTargetsForRadar:function(t){var e=this;const n=this.config;D(n.axis_x_categories)&&(n.axis_x_categories=rt(0,at("max",t.map(function(t){return i(this,e),t.values.length}.bind(this))))),this.generateRadarPoints()},getRadarPosition:function(t,e,n,s){var a=this;const r=this.config,o=this.getRadarSize(),c=o[0],l=o[1],d=r.axis_x_categories.length,u=r.radar_direction_clockwise,h=J(t).map(function(o){return i(this,a),function(t,e,i,n,s,a){const r=t&&n>0?i-n:n,o=2*Math.PI;return s*(1-a*("x"===e?Math.sin:Math.cos)(r*o/i))}(u,o,d,e,R(n)?n:"x"===t?c:l,S(s)?s:r.radar_size_ratio)}.bind(this));return 1===h.length?h[0]:h},generateRadarPoints:function(){var t=this;const e=this,n=e.data.targets,s=e.getRadarSize(),a=s[0],r=s[1],o=e.cache.get(Dn)||{},c=o._size;(!c||c.width!==a&&c.height!==r)&&(n.forEach(function(n){var s=this;i(this,t),o[n.id]=n.values.map(function(t,n){return i(this,s),e.getRadarPosition(["x","y"],n,void 0,e.getRatio("radar",t))}.bind(this))}.bind(this)),o._size={width:a,height:r},e.cache.add(Dn,o))},redrawRadar:function(){const t=this,e=t.$el,i=e.radar,n=e.main,s=t.getTranslate("radar");s&&(i.attr("transform",s),n.select("."+$t.chartTexts).attr("transform",s),t.generateRadarPoints(),t.updateRadarLevel(),t.updateRadarAxes(),t.updateRadarShape())},generateGetRadarPoints:function(){var t=this;const e=this.cache.get(Dn);return function(n,s){i(this,t);const a=e[n.id][s];return[a,a,a,a]}.bind(this)},updateRadarLevel:function(){var t=this;const e=this,n=e.config,s=e.state,a=e.$el.radar,r=e.getRadarSize(),o=r[0],c=r[1],l=n.radar_level_depth,d=n.axis_x_categories.length,u=n.radar_level_text_show,h=a.levels,g=rt(0,l),f=n.radar_size_ratio*Math.min(o,c),p=g.map(function(e){return i(this,t),f*((e+1)/l)}.bind(this)),x=(n.radar_level_text_format||function(){}).bind(e.api),b=g.map(function(n){var s=this;i(this,t);const a=p[n];return rt(0,d).map(function(t){return i(this,s),e.getRadarPosition(["x","y"],t,a,1).join(",")}.bind(this)).join(" ")}.bind(this)),m=h.selectAll("."+Ot).data(g);m.exit().remove();const _=m.enter().append("g").attr("class",function(e,n){return i(this,t),Ot+" "+Ot+"-"+n}.bind(this));_.append("polygon").style("visibility",n.radar_level_show?null:"hidden"),u&&(h.select("text").empty()&&h.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(function(){return i(this,t),x(0)}.bind(this)),_.append("text").attr("dx","-.5em").style("text-anchor","end").text(function(e){return i(this,t),x(s.current.dataMax/g.length*(e+1))}.bind(this))),_.merge(m).attr("transform",function(e){return i(this,t),"translate("+(o-p[e])+", "+(c-p[e])+")"}.bind(this)).selectAll("polygon").attr("points",function(e){return i(this,t),b[e]}.bind(this)),u&&h.selectAll("text").attr("x",function(e){return i(this,t),k(e)?o:b[e].split(",")[0]}.bind(this)).attr("y",function(e){return i(this,t),k(e)?c:0}.bind(this))},updateRadarAxes:function(){var t=this;const e=this,n=e.config,a=e.$el.radar,r=e.getRadarSize(),o=r[0],c=r[1],l=n.axis_x_categories;let d=a.axes.selectAll("g").data(l);d.exit().remove();const u=d.enter().append("g").attr("class",function(e,n){return i(this,t),mt.axis+"-"+n}.bind(this));if(n.radar_axis_line_show&&u.append("line"),n.radar_axis_text_show&&u.append("text"),d=u.merge(d),n.radar_axis_line_show&&d.select("line").attr("x1",o).attr("y1",c).attr("x2",function(n,s){return i(this,t),e.getRadarPosition("x",s)}.bind(this)).attr("y2",function(n,s){return i(this,t),e.getRadarPosition("y",s)}.bind(this)),n.radar_axis_text_show){const r=n.radar_axis_text_position,l=r.x,u=void 0===l?0:l,h=r.y,g=void 0===h?0:h,f=e.cache.get(In)||0;if(d.select("text").style("text-anchor","middle").attr("dy",".5em").call(function(e){i(this,t),e.each((function(t){N((0,s.select)(this),t+"",[-.6,1.2])}))}.bind(this)).datum(function(e,n){return i(this,t),{index:n}}.bind(this)).attr("transform",(function(t){k(this.width)&&(this.width=this.getBoundingClientRect().width/2);let i=e.getRadarPosition("x",t.index,void 0,1),n=Math.round(e.getRadarPosition("y",t.index,void 0,1));return i>o?i+=this.width+u:Math.round(i)<o&&(i-=this.width+u),n>c?(n/2===c&&"tspan"===this.firstChild.tagName&&this.firstChild.setAttribute("dy","0em"),n+=g):n<c&&(n-=g),"translate("+i+" "+n+")"})),!f){const n=[a.axes,a.levels].map(function(e){return i(this,t),G(e.node()).width}.bind(this));n.every(function(e){return i(this,t),e>0}.bind(this))&&e.cache.add(In,n[0]-n[1])}}},bindRadarEvent:function(){var t=this;const e=this,n=e.state,s=e.$el,a=s.radar,r=s.svg,o=e.isPointFocusOnly(),c=n,l=c.inputType,d=c.transiting,u="mouse"===l,h=function(s){i(this,t),n.event=s;const a=e.getDataIndexFromEvent(s),r=k(a);(u||r)&&(e.hideTooltip(),o?e.hideCircleFocus():e.unexpandCircles(),u?e.setOverOut(!1,a):r&&e.callOverOutForTouch())}.bind(this);a.axes.on(u?"mouseover ":"touchstart",function(s){if(i(this,t),d)return;n.event=s;const a=e.getDataIndexFromEvent(s);e.selectRectForSingle(r.node(),a),u?e.setOverOut(!0,a):e.callOverOutForTouch(a)}.bind(this)).on("mouseout",u?h:null),u||r.on("touchstart",h)},updateRadarShape:function(){var t=this;const e=this,n=e.data.targets.filter(function(n){return i(this,t),e.isRadarType(n)}.bind(this)),s=e.cache.get(Dn),a=e.$el.radar.shapes.selectAll("polygon").data(n),r=a.enter().append("g").attr("class",e.getChartClass("Radar"));e.$T(a.exit()).remove(),r.append("polygon").merge(a).style("fill",e.color).style("stroke",e.color).attr("points",function(e){return i(this,t),s[e.id].join(" ")}.bind(this)),e.updateTargetForCircle(n,r)},radarCircleX:function(t){return this.cache.get(Dn)[t.id][t.index][0]},radarCircleY:function(t){return this.cache.get(Dn)[t.id][t.index][1]}},Mn=p(13);function $n(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return Xn(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Xn(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xn(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}function Fn(t,e){var n=this;const s=this.scale,a=s.x,r=s.y,o=this.state.width;t.selectAll("g").attr("transform",function(t){return i(this,n),"translate("+(t===e?"0,0":a(t.x0)+","+r(t.y0))+")"}.bind(this)).select("rect").attr("width",function(t){return i(this,n),t===e?o:a(t.x1)-a(t.x0)}.bind(this)).attr("height",function(t){return i(this,n),t===e?0:r(t.y1)-r(t.y0)}.bind(this))}function Bn(t){var e=this;const n=this;return t.map(function(t){i(this,e);const s=t.id,a=t.values;return{name:s,id:s,value:a[0].value,ratio:n.getRatio("treemap",a[0])}}.bind(this))}var Nn={initTreemap:function(){var t=this;const e=this,n=e.$el,s=e.state,a=s.current,r=a.width,o=a.height,c=s.clip,l=s.datetimeId;c.id=l+"-clip",e.treemap=(0,Mn.treemap)().tile(e.getTreemapTile()),e.treemapFn=function(n){var s=this;i(this,t);const a=(0,Mn.hierarchy)(n).sum(function(t){return i(this,s),t.value}.bind(this)),r=e.getSortCompareFn(!0);return e.treemap(r?a.sort(r):a)}.bind(this),n.defs.append("clipPath").attr("id",c.id).append("rect").attr("width",r).attr("height",o),n.treemap=n.main.select("."+pt.chart).attr("clip-path","url(#"+c.id+")").append("g").classed(Ft.chartTreemaps,!0),e.bindTreemapEvent()},bindTreemapEvent:function(){var t=this;const e=this,n=e.$el,a=e.config,r=e.state,o=function(e){var n,a;i(this,t);const o=e.isTrusted?e.target:null==(n=r.eventReceiver.rect)?void 0:n.node();let c;return/^rect$/i.test(o.tagName)&&(r.event=e,c=(0,s.select)(o).datum()),null==(a=c)?void 0:a.data}.bind(this);if(a.interaction_enabled){const s="touch"===r.inputType;n.treemap.on(s?"touchstart":"mouseover mousemove",function(n){i(this,t);const s=o(n);s&&(e.showTooltip([s],n.currentTarget),/^(touchstart|mouseover)$/.test(n.type)&&e.setOverOut(!0,s))}.bind(this)).on(s?"touchend":"mouseout",function(n){i(this,t);const s=o(n);e.hideTooltip(),e.setOverOut(!1,s)}.bind(this))}},getTreemapTile:function(){var t,e,n=this;const s=this.config,a=this.state.current,r=a.width,o=a.height,c=null!=(t={binary:Mn.treemapBinary,dice:Mn.treemapDice,slice:Mn.treemapSlice,sliceDice:Mn.treemapSliceDice,squarify:Mn.treemapSquarify,resquarify:Mn.treemapResquarify}[null!=(e=s.treemap_tile)?e:"binary"])?t:Mn.treemapBinary;return function(t,e,s,a,l){i(this,n),c(t,0,0,r,o);for(var d,u=$n(t.children);!(d=u()).done;){const t=d.value;t.x0=e+t.x0/r*(a-e),t.x1=e+t.x1/r*(a-e),t.y0=s+t.y0/o*(l-s),t.y1=s+t.y1/o*(l-s)}}.bind(this)},getTreemapData:function(t){const e=this;return{name:"root",children:Bn.bind(e)(e.filterTargetsToShow(t.filter(e.isTreemapType,e)))}},updateTargetsForTreemap:function(t){const e=this,i=e.$el.treemap,n=e.treemapFn(e.getTreemapData(null!=t?t:e.data.targets));i.data(n)},updateTreemap:function(t){var e=this;const n=this,s=n.$el,a=n.$T,r=s.treemap.datum(),o=n.getChartClass("Treemap"),c=s.treemap.selectAll("g").data(r.children);a(c.exit(),t).style("opacity","0").remove(),c.enter().append("g").append("rect"),s.treemap.selectAll("g").attr("class",o).select("rect").attr("fill",function(t){return i(this,e),n.color(t.data.name)}.bind(this))},generateGetTreemapPoints:function(){var t=this;const e=this.$el,n=this.scale,s=n.x,a=n.y,r={};return e.treemap.selectAll("g").each(function(e){i(this,t),r[e.data.name]=[[s(e.x0),a(e.y0)],[s(e.x1),a(e.y1)]]}.bind(this)),function(e){return i(this,t),r[e.id]}.bind(this)},redrawTreemap:function(t){const e=this,i=e.$el,n=e.state.current,s=n.width,a=n.height;return i.defs.select("rect").attr("width",s).attr("height",a),[e.$T(i.treemap,t,U()).call(Fn.bind(e),i.treemap.datum())]},treemapDataLabelFormat:function(t){const e=this,i=e.config,n=t.id,s=t.value,a=i.treemap_label_format,r=e.getRatio("treemap",t),o=(100*r).toFixed(2),c=i.treemap_label_show&&e.meetsLabelThreshold(r,"treemap")?null:"0";return function(t){return t.style("opacity",c),w(a)?a.bind(e.api)(s,r,n):n+"\n"+o+"%"}}},jn={point_show:!0,point_r:2.5,point_radialGradient:!1,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_focus_only:!1,point_opacity:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle"},Gn={area_above:!1,area_below:!1,area_front:!0,area_linearGradient:!1,area_zerobased:!0},Vn={bar_front:!1,bar_indices_removeNull:!1,bar_label_threshold:0,bar_linearGradient:!1,bar_overlap:!1,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0},Yn={bubble_maxR:35,bubble_zerobased:!1},Hn={candlestick_width:void 0,candlestick_width_ratio:.6,candlestick_width_max:void 0,candlestick_color_down:"red"},Un={line_connectNull:!1,line_step_type:"step",line_step_tooltipMatch:!1,line_zerobased:!1,line_classes:void 0,line_point:!0},Wn={scatter_zerobased:!1},Zn={spline_interpolation_type:"cardinal"},qn={arc_cornerRadius:0,arc_cornerRadius_ratio:0,arc_needle_show:!1,arc_needle_color:void 0,arc_needle_value:void 0,arc_needle_path:void 0,arc_needle_length:100,arc_needle_top_rx:0,arc_needle_top_ry:0,arc_needle_top_width:0,arc_needle_bottom_rx:1,arc_needle_bottom_ry:1,arc_needle_bottom_width:15,arc_needle_bottom_len:0,arc_rangeText_values:void 0,arc_rangeText_unit:"absolute",arc_rangeText_fixed:!1,arc_rangeText_format:void 0,arc_rangeText_position:void 0},Kn={donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_rate:.98,donut_expand_duration:50,donut_padAngle:0,donut_startingAngle:0},Jn={gauge_background:"",gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_extents:void 0,gauge_label_format:void 0,gauge_label_ratio:void 0,gauge_label_threshold:0,gauge_enforceMinMax:!1,gauge_min:0,gauge_max:100,gauge_type:"single",gauge_startingAngle:-1*Math.PI/2,gauge_arcLength:100,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_rate:.98,gauge_expand_duration:50},Qn={pie_label_show:!0,pie_label_format:void 0,pie_label_ratio:void 0,pie_label_threshold:.05,pie_expand:{},pie_expand_rate:.98,pie_expand_duration:50,pie_innerRadius:0,pie_outerRadius:void 0,pie_padAngle:0,pie_padding:0,pie_startingAngle:0},ts={polar_label_show:!0,polar_label_format:void 0,polar_label_threshold:.05,polar_label_ratio:void 0,polar_level_depth:3,polar_level_max:void 0,polar_level_show:!0,polar_level_text_backgroundColor:"#fff",polar_level_text_format:function(t){return i(this,undefined),t%1==0?t:t.toFixed(2)}.bind(void 0),polar_level_text_show:!0,polar_padAngle:0,polar_padding:0,polar_startingAngle:0},es={radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function(t){return i(this,undefined),t%1==0?t:t.toFixed(2)}.bind(void 0),radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1},is={treemap_tile:"binary",treemap_label_format:void 0,treemap_label_threshold:.05,treemap_label_show:!0},ns=void 0;function ss(t,e){q(ci.prototype,Object.values(hn).concat(t)),q(Ai.prototype,un),ie.setOptions(Object.values(gn).concat(e||[]))}function as(t,e){ss([Cn,On,kn].concat(t||[])),ie.setOptions([jn,Un].concat(e||[]))}function rs(t,e){q(ci.prototype,[_n,Cn].concat(t||[])),ie.setOptions([jn].concat(e||[]))}let os=function(){var t=this;return i(this,ns),as(vn,[Gn]),(os=function(){return i(this,t),d.AREA}.bind(this))()}.bind(void 0),cs=function(){var t=this;return i(this,ns),as(vn,[Gn]),(cs=function(){return i(this,t),d.AREA_LINE_RANGE}.bind(this))()}.bind(void 0),ls=function(){var t=this;return i(this,ns),as(vn,[Gn,Zn]),(ls=function(){return i(this,t),d.AREA_SPLINE}.bind(this))()}.bind(void 0),ds=function(){var t=this;return i(this,ns),as(vn,[Gn,Zn]),(ds=function(){return i(this,t),d.AREA_SPLINE_RANGE}.bind(this))()}.bind(void 0),us=function(){var t=this;return i(this,ns),as(vn,[Gn]),(us=function(){return i(this,t),d.AREA_STEP}.bind(this))()}.bind(void 0),hs=function(){var t=this;return i(this,ns),as(),(hs=function(){return i(this,t),d.LINE}.bind(this))()}.bind(void 0),gs=function(){var t=this;return i(this,ns),as(void 0,[Zn]),(gs=function(){return i(this,t),d.SPLINE}.bind(this))()}.bind(void 0),fs=function(){var t=this;return i(this,ns),as(),(fs=function(){return i(this,t),d.STEP}.bind(this))()}.bind(void 0),ps=function(){var t=this;return i(this,ns),rs(void 0,[qn,Kn]),(ps=function(){return i(this,t),d.DONUT}.bind(this))()}.bind(void 0),xs=function(){var t=this;return i(this,ns),rs([An],[qn,Jn]),(xs=function(){return i(this,t),d.GAUGE}.bind(this))()}.bind(void 0),bs=function(){var t=this;return i(this,ns),rs(void 0,[qn,Qn]),(bs=function(){return i(this,t),d.PIE}.bind(this))()}.bind(void 0),ms=function(){var t=this;return i(this,ns),rs([Pn],[qn,ts]),(ms=function(){return i(this,t),d.POLAR}.bind(this))()}.bind(void 0),_s=function(){var t=this;return i(this,ns),rs([hn.eventrect,On,zn],[jn,es,{axis_x_categories:gn.optAxis.axis_x_categories}]),(_s=function(){return i(this,t),d.RADAR}.bind(this))()}.bind(void 0),vs=function(){var t=this;return i(this,ns),ss([yn,Cn],[Vn,jn]),(vs=function(){return i(this,t),d.BAR}.bind(this))()}.bind(void 0),ys=function(){var t=this;return i(this,ns),ss([Cn,On,Sn],[Yn,jn]),(ys=function(){return i(this,t),d.BUBBLE}.bind(this))()}.bind(void 0),Ts=function(){var t=this;return i(this,ns),ss([wn,Cn],[Hn,jn]),(Ts=function(){return i(this,t),d.CANDLESTICK}.bind(this))()}.bind(void 0),ws=function(){var t=this;return i(this,ns),ss([Cn,On],[jn,Wn]),(ws=function(){return i(this,t),d.SCATTER}.bind(this))()}.bind(void 0),As=function(){var t=this;return i(this,ns),ss([Nn],[is]),(As=function(){return i(this,t),d.TREEMAP}.bind(this))()}.bind(void 0);function Ss(t,e,i,n){void 0===t&&(t=!1);const a=this,r=a.config,o=a.$el.main,c=r.data_selection_grouped,l=r.data_selection_isselectable.bind(a.api);r.data_selection_enabled&&o.selectAll("."+zt.shapes).selectAll("."+zt.shape).each((function(r){const o=(0,s.select)(this),d=r.data?r.data:r,u=d.id,h=d.index,g=a.getToggle(this,r).bind(a),f=c||!e||e.indexOf(u)>=0,p=!i||i.indexOf(h)>=0,x=o.classed(It.SELECTED);o.classed(kt.line)||o.classed(bt.area)||(t?f&&p&&l(r)&&!x?g(!0,o.classed(It.SELECTED,!0),r,h):R(n)&&n&&x&&g(!1,o.classed(It.SELECTED,!1),r,h):f&&p&&l(r)&&x&&g(!1,o.classed(It.SELECTED,!1),r,h))}))}var ks={selected:function(t){var e=this;const n=this.internal,a=[];return n.$el.main.selectAll("."+(zt.shapes+n.getTargetSelectorSuffix(t))).selectAll("."+zt.shape).filter((function(){return(0,s.select)(this).classed(It.SELECTED)})).each(function(t){return i(this,e),a.push(t)}.bind(this)),a},select:function(t,e,i){const n=this.internal;Ss.bind(n)(!0,t,e,i)},unselect:function(t,e){const i=this.internal;Ss.bind(i)(!1,t,e)}};const Rs=function(t){var e=this;const n=this.internal,s=n.axis,a=n.brush,r=n.config,o=n.scale,c=o.x,l=o.subX,d=n.state;let u;if(r.subchart_show)if(u=t,Array.isArray(u)){s.isTimeSeries()&&(u=u.map(function(t){return i(this,e),lt.bind(n)(t)}.bind(this)));n.withinRange(u,n.getZoomDomain("subX",!0),n.getZoomDomain("subX"))&&(d.domain=u,a.move(a.getSelection(),u.map(l)))}else{var h;u=null!=(h=d.domain)?h:c.orgDomain()}return u};q(Rs,{show:function(){const t=this.internal,e=t.$el.subchart,i=t.config,n=i.subchart_show;if(!n){var s,a;t.unbindZoomEvent(),i.subchart_show=!n,e.main||t.initSubchart();let o=e.main.selectAll("."+pt.target);var r;if(t.data.targets.length!==o.size())t.updateSizes(),t.updateTargetsForSubchart(t.data.targets),o=null==(r=e.main)?void 0:r.selectAll("."+pt.target);null==(s=o)||s.style("opacity",null),null==(a=e.main)||a.style("display",null),this.resize()}},hide:function(){const t=this.internal,e=t.$el.subchart.main,i=t.config;i.subchart_show&&"none"!==(null==e?void 0:e.style("display"))&&(i.subchart_show=!1,e.style("display","none"),this.resize())},toggle:function(){const t=this.internal.config;this.subchart[t.subchart_show?"hide":"show"]()},reset:function(){const t=this.internal.brush;t.clear(t.getSelection())}});var Cs={subchart:Rs},Es=p(14);const Os=function(t){var e,n=this;const s=this.internal,a=s.axis,r=s.config,o=s.org,c=s.scale,l=s.state,d=a.isCategorized();let u;if(r.zoom_enabled)if(u=t,Array.isArray(u)){a.isTimeSeries()&&(u=u.map(function(t){return i(this,n),lt.bind(s)(t)}.bind(this)));if(s.withinRange(u,s.getZoomDomain("zoom",!0),s.getZoomDomain("zoom"))){if(l.domain=u,u=s.getZoomDomainValue(u),s.api.tooltip.hide(),r.subchart_show){const t=c.zoom||c.x;s.brush.getSelection().call(s.brush.move,u.map(t))}else{const t=d?c.x.orgScale():o.xScale||c.x;s.updateCurrentZoomTransform(t,u)}s.setZoomResetButton()}}else u=s.zoom.getDomain();return null!=(e=l.domain)?e:u};q(Os,{enable:function(t){const e=this.internal,i=e.config;/^(drag|wheel)$/.test(t)&&(i.zoom_type=t),i.zoom_enabled=!!t,e.zoom?!1===t&&e.bindZoomEvent(!1):(e.initZoom(),e.bindZoomEvent()),e.updateAndRedraw()},max:function(t){const e=this.internal,i=e.config,n=e.org.xDomain;return(0===t||t)&&(i.zoom_x_max=at("max",[n[1],t])),i.zoom_x_max},min:function(t){const e=this.internal,i=e.config,n=e.org.xDomain;return(0===t||t)&&(i.zoom_x_min=at("min",[n[0],t])),i.zoom_x_min},range:function(t){const e=this.zoom;if(M(t)){const i=t.min,n=t.max;R(i)&&e.min(i),R(n)&&e.max(n)}return{min:e.min(),max:e.max()}}});var Ls={zoom:Os,unzoom:function(){const t=this.internal,e=t.config,i=t.$el,n=i.eventRect,s=i.zoomResetBtn,a=t.scale.zoom,r=t.state;a&&(e.subchart_show?t.brush.getSelection().call(t.brush.move,null):t.zoom.updateTransformScale(Es.zoomIdentity),t.updateZoom(!0),null==s||s.style("display","none"),(0,Es.zoomTransform)(n.node())!==Es.zoomIdentity&&t.zoom.transform(n,Es.zoomIdentity),r.domain=void 0)}},Ps={drag:function(t){var e=this;const n=this,a=n.config,r=n.state,o=n.$el.main,c=a.data_selection_grouped,l=a.interaction_enabled&&a.data_selection_isselectable;if(n.hasArcType()||!a.data_selection_enabled||a.zoom_enabled&&!n.zoom.altDomain||!a.data_selection_multiple)return;const d=r.dragStart||[0,0],u=d[0],h=d[1],g=t[0],f=t[1],p=Math.min(u,g),x=Math.max(u,g),b=c?r.margin.top:Math.min(h,f),m=c?r.height:Math.max(h,f);o.select("."+wt.dragarea).attr("x",p).attr("y",b).attr("width",x-p).attr("height",m-b),o.selectAll("."+zt.shapes).selectAll("."+zt.shape).filter(function(t){return i(this,e),null==l?void 0:l.bind(n.api)(t)}.bind(this)).each((function(t,e){const i=(0,s.select)(this),a=i.classed(It.SELECTED),r=i.classed(wt.INCLUDED);let o,c=!1;if(i.classed(yt.circle)){const t=1*+i.attr("cx"),e=1*+i.attr("cy");o=n.togglePoint,c=p<t&&t<x&&b<e&&e<m}else{if(!i.classed(_t.bar))return;{const t=G(this),e=t.x,i=t.y,s=t.width,a=t.height;o=n.togglePath,c=!(x<e||e+s<p||m<i||i+a<b)}}c^r&&(i.classed(wt.INCLUDED,!r),i.classed(It.SELECTED,!a),o.call(n,!a,i,t,e))}))},dragstart:function(t){const e=this,i=e.config,n=e.state,s=e.$el.main;!e.hasArcType()&&i.data_selection_enabled&&(n.dragStart=t,s.select("."+pt.chart).append("rect").attr("class",wt.dragarea).style("opacity","0.1"),e.setDragStatus(!0))},dragend:function(){const t=this,e=t.config,i=t.$el.main,n=t.$T;!t.hasArcType()&&e.data_selection_enabled&&(n(i.select("."+wt.dragarea)).style("opacity","0").remove(),i.selectAll("."+zt.shape).classed(wt.INCLUDED,!1),t.setDragStatus(!1))}};function Ds(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Is(t){for(var e,i=1;i<arguments.length;i++)e=null!=arguments[i]?arguments[i]:{},i%2?Ds(Object(e),!0).forEach((function(i){b(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Ds(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}));return t}var zs=Is(Is({},Ps),{},{selectPoint:function(t,e,n){var s=this;const a=this,r=a.config,o=a.$el.main,c=a.$T,l=r.axis_rotated,d=(l?a.circleY:a.circleX).bind(a),u=(l?a.circleX:a.circleY).bind(a),h=a.pointSelectR.bind(a);X(r.data_onselected,a.api,e,t.node()),c(o.select("."+It.selectedCircles+a.getTargetSelectorSuffix(e.id)).selectAll("."+It.selectedCircle+"-"+n).data([e]).enter().append("circle").attr("class",function(){return i(this,s),a.generateClass(It.selectedCircle,n)}.bind(this)).attr("cx",d).attr("cy",u).attr("stroke",a.color).attr("r",function(t){return i(this,s),1.4*a.pointSelectR(t)}.bind(this))).attr("r",h)},unselectPoint:function(t,e,i){const n=this,s=n.config,a=n.$el.main,r=n.$T;X(s.data_onunselected,n.api,e,null==t?void 0:t.node()),r(a.select("."+It.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+It.selectedCircle+"-"+i)).attr("r",0).remove()},togglePoint:function(t,e,i,n){this[(t?"":"un")+"selectPoint"](e,i,n)},selectPath:function(t,e){const i=this.config;X(i.data_onselected,this.api,e,t.node()),i.interaction_brighten&&t.style("filter","brightness(1.25)")},unselectPath:function(t,e){const i=this.config;X(i.data_onunselected,this.api,e,t.node()),i.interaction_brighten&&t.style("filter",null)},togglePath:function(t,e,i,n){this[(t?"":"un")+"selectPath"](e,i,n)},getToggle:function(t,e){var n=this;const s=this;return"path"===t.nodeName?s.togglePath:s.isStepType(e)?function(){i(this,n)}.bind(this):s.togglePoint},toggleShape:function(t,e,i){const n=this,a=n.config,r=n.$el.main;if(a.data_selection_enabled&&a.data_selection_isselectable.bind(n.api)(e)){const o=(0,s.select)(t),c=o.classed(It.SELECTED),l=n.getToggle(t,e).bind(n);let d;if(!a.data_selection_multiple){const t=null==n.isPointFocusOnly?void 0:n.isPointFocusOnly();let i="."+(t?It.selectedCircles:zt.shapes);a.data_selection_grouped&&(i+=n.getTargetSelectorSuffix(e.id)),r.selectAll(i).selectAll(t?"."+It.selectedCircle:"."+zt.shape+"."+It.SELECTED).classed(It.SELECTED,!1).each((function(t){const e=(0,s.select)(this);d=e,l(!1,e,t,t.index)}))}d&&d.node()===o.node()||(o.classed(It.SELECTED,!c),l(!c,o,e,i))}}}),Ms={initBrush:function(){var t=this;const e=this,n=e.config,a=e.scale,r=e.$el.subchart,o=e.state,c=n.axis_rotated,l=n.subchart_size_height;let d,u,h;e.brush=(c?(0,m.brushY)():(0,m.brushX)()).handleSize(5),e.brush.on("start brush end",function(n){var s=this;i(this,t);const r=n.selection,h=n.sourceEvent,g=n.target,f=n.type;var p;("start"===f&&("touch"===e.state.inputType&&e.hideTooltip(),u=h?r:null),/(start|brush)/.test(f))&&("brush"===f&&h&&o.domain&&(null==(p=u)||p.forEach(function(t,e){i(this,s),t!==r[e]&&(o.domain[e]=a.x.orgDomain()[e])}.bind(this))),e.redrawForBrush("start"!==f));"end"===f&&(d=a.x.orgDomain()),null!=g&&g.handle&&(null===r?e.brush.handle.attr("display","none"):e.brush.handle.attr("display",null).attr("transform",function(t,e){i(this,s);const n=[r[e],l/2];return"translate("+(c?n.reverse():n)+")"}.bind(this)))}.bind(this)),e.brush.updateResize=function(){var t=this;h&&clearTimeout(h),h=setTimeout(function(){i(this,t);const e=this.getSelection();d&&(0,m.brushSelection)(e.node())&&this.move(e,d.map(a.subX.orgScale()))}.bind(this),0)},e.brush.update=function(){var t=this;var e;0===this.extent()()[1].filter(function(e){return i(this,t),isNaN(e)}.bind(this)).length&&(null==(e=r.main)||e.select("."+Nt.brush).call(this));return this},e.brush.scale=function(t){var s=this;const a=n.subchart_size_height;let r=e.getExtent();!r&&t.range?r=[[0,0],[t.range()[1],a]]:z(r)&&(r=r.map(function(t,e){return i(this,s),[t,e>0?a:e]}.bind(this))),c&&r[1].reverse(),this.extent(r),this.update()},e.brush.getSelection=function(){return i(this,t),r.main?r.main.select("."+Nt.brush):(0,s.select)([])}.bind(this)},initSubchart:function(){var t=this;const e=this,n=e.config,s=e.state,a=s.clip,r=s.hasAxis,o=e.$el,c=o.defs,l=o.svg,d=o.subchart,u=o.axis;if(!r)return;const h=n.subchart_show?null:"hidden",g=a.id+"-subchart",f=e.getClipPath(g);a.idSubchart=g,e.appendClip(c,g),e.initBrush(),d.main=l.append("g").classed(Nt.subchart,!0).attr("transform",e.getTranslate("context"));const p=d.main;p.style("visibility",h),p.append("g").attr("clip-path",f).attr("class",Nt.chart),["bar","line","bubble","candlestick","scatter"].forEach(function(n){i(this,t);const s=K(/^(bubble|scatter)$/.test(n)?"circle":n);if(e.hasType(n)||e.hasTypeOf(s)){const t=p.select("."+Nt.chart),e=Nt["chart"+s+"s"];t.select("."+e).empty()&&t.append("g").attr("class",e)}}.bind(this));const x=p.append("g").attr("clip-path",f).attr("class",Nt.brush).call(e.brush);n.subchart_showHandle&&e.addBrushHandle(x),u.subX=p.append("g").attr("class",Nt.axisX).attr("transform",e.getTranslate("subX")).attr("clip-path",n.axis_rotated?"":a.pathXAxis).style("visibility",n.subchart_axis_x_show?h:"hidden")},addBrushHandle:function(t){var e=this;const n=this.config,s=n.axis_rotated,a=n.subchart_init_range,r=s?["M8.5 0 a6 6 0 0 0 -6 -6.5 H-2.5 a 6 6 0 0 0 -6 6.5 z m-5 -2 H-3.5 m7 -2 H-3.5z","M8.5 0 a6 -6 0 0 1 -6 6.5 H-2.5 a 6 -6 0 0 1 -6 -6.5z m-5 2 H-3.5 m7 2 H-3.5z"]:["M0 -8.5 A6 6 0 0 0 -6.5 -3.5 V2.5 A6 6 0 0 0 0 8.5 Z M-2 -3.5 V3.5 M-4 -3.5 V3.5z","M0 -8.5 A6 6 0 0 1 6.5 -3.5 V2.5 A6 6 0 0 1 0 8.5 Z M2 -3.5 V3.5 M4 -3.5 V3.5z"];this.brush.handle=t.selectAll(".handle--custom").data(s?[{type:"n"},{type:"s"}]:[{type:"w"},{type:"e"}]).enter().append("path").attr("class","handle--custom").attr("cursor",(s?"ns":"ew")+"-resize").attr("d",function(t){return i(this,e),r[+/[se]/.test(t.type)]}.bind(this)).attr("display",a?null:"none")},updateTargetsForSubchart:function(t){var e=this;const n=this,s=n.config,a=n.state,r=n.$el.subchart.main;s.subchart_show&&(["bar","line","bubble","candlestick","scatter"].filter(function(t){return i(this,e),n.hasType(t)||n.hasTypeOf(K(t))}.bind(this)).forEach(function(s){i(this,e);const a=/^(bubble|scatter)$/.test(s),o=K(a?"circle":s),c=n.getChartClass(o,!0),l=n.getClass(a?"circles":s+"s",!0),d=r.select("."+Nt["chart"+o+"s"]);if(a){const e=d.selectAll("."+Nt.circles).data(t.filter(n["is"+K(s)+"Type"].bind(n))).attr("class",l);e.exit().remove(),e.enter().append("g").attr("class",l)}else{const e=d.selectAll("."+Nt["chart"+o]).attr("class",c).data(t.filter(n["is"+o+"Type"].bind(n))),i=e.enter().append("g").style("opacity","0").attr("class",c).append("g").attr("class",l);e.exit().remove(),"line"===s&&n.hasTypeOf("Area")&&i.append("g").attr("class",n.getClass("areas",!0))}}.bind(this)),r.selectAll("."+Nt.brush+" rect").attr(s.axis_rotated?"width":"height",s.axis_rotated?a.width2:a.height2))},redrawSubchart:function(t,e,n){var s=this;const a=this,r=a.config,o=a.$el.subchart.main,c=a.state,l=!!e;var d;if((o.style("visibility",r.subchart_show?null:"hidden"),r.subchart_show)&&("zoom"===(null==(d=c.event)?void 0:d.type)&&a.brush.update(),t)){const t=r.subchart_init_range;if(Z(a)||a.brush.update(),Object.keys(n.type).forEach(function(t){i(this,s);const e=K(t),r=a["generateDraw"+e](n.indices[t],!0);a["update"+e](l,!0),a["redraw"+e](r,l,!0)}.bind(this)),a.hasType("bubble")||a.hasType("scatter")){const t=n.pos.cx,e=a.updateCircleY(!0);a.updateCircle(!0),a.redrawCircle(t,e,l,void 0,!0)}!c.rendered&&t&&(c.domain=t,a.brush.move(a.brush.getSelection(),t.map(a.scale.x)))}},redrawForBrush:function(t){var e;void 0===t&&(t=!0);const i=this,n=i.config,s=n.subchart_onbrush,a=n.zoom_rescale,r=i.scale,o=i.state;i.redraw({withTransition:!1,withY:a,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),t&&o.rendered&&s.bind(i.api)(null!=(e=o.domain)?e:r.x.orgDomain())},transformContext:function(t,e){const i=this,n=i.$el.subchart,s=i.$T,a=null!=e&&e.axisSubX?e.axisSubX:s(n.main.select("."+Nt.axisX),t);n.main.attr("transform",i.getTranslate("context")),a.attr("transform",i.getTranslate("subX"))},getExtent:function(){var t=this;const e=this,n=e.config,s=e.scale;let a=n.axis_x_extent;if(a)if(w(a))a=a.bind(e.api)(e.getXDomain(e.data.targets),s.subX);else if(e.axis.isTimeSeries()&&a.every(isNaN)){const n=lt.bind(e);a=a.map(function(e){return i(this,t),s.subX(n(e))}.bind(this))}return a}},$s={initZoom:function(){const t=this;t.scale.zoom=null,t.generateZoom(),t.initZoomBehaviour()},bindZoomEvent:function(t){void 0===t&&(t=!0);const e=this,i=e.config;i.zoom_enabled&&t?i.subchart_show||e.bindZoomOnEventRect():!1===t&&(e.api.unzoom(),e.unbindZoomEvent())},generateZoom:function(){var t=this;const e=this,n=e.config,s=e.org,a=e.scale,r=(0,Es.zoom)().duration(0).on("start",e.onZoomStart.bind(e)).on("zoom",e.onZoom.bind(e)).on("end",e.onZoomEnd.bind(e));r.orgScaleExtent=function(){i(this,t);const s=n.zoom_extent||[1,10];return[s[0],Math.max(e.getMaxDataCount()/s[1],s[1])]}.bind(this),r.updateScaleExtent=function(){const t=L(e.scale.x.orgDomain())/L(e.getZoomDomain()),i=this.orgScaleExtent();return this.scaleExtent([i[0]*t,i[1]*t]),this},r.updateTransformScale=function(r,o){var c;i(this,t);const l=n.axis_rotated;null==(c=s.xScale)||c.range(a.x.range());const d=r[l?"rescaleY":"rescaleX"](s.xScale||a.x),u=e.trimXDomain(d.domain()),h=n.zoom_rescale;if(d.domain(u,s.xDomain),o){const t=d(a.x.domain()[0]),i=l?r.x:t,n=l?t:r.y;e.$el.eventRect.property("__zoom",Es.zoomIdentity.translate(i,n).scale(r.k))}e.state.xTickOffset||(e.state.xTickOffset=e.axis.x.tickOffset()),a.zoom=e.getCustomizedXScale(d),e.axis.x.scale(a.zoom),h?(s.xScale||(s.xScale=a.x.copy()),a.x.domain(u)):s.xScale&&(a.x.domain(s.xScale.domain()),s.xScale=null)}.bind(this),r.getDomain=function(){i(this,t);const n=a[a.zoom?"zoom":"subX"].domain();return e.axis.isCategorized()&&(n[1]-=2),n}.bind(this),e.zoom=r},onZoomStart:function(t){const e=this,i=t.sourceEvent;i&&(e.zoom.startEvent=i,e.state.zooming=!0,X(e.config.zoom_onzoomstart,e.api,t))},onZoom:function(t){var e,n=this;const s=this,a=s.config,r=s.scale,o=s.state,c=s.org,l=t.sourceEvent,d=(null==t?void 0:t.transform)===Es.zoomIdentity;if(!a.zoom_enabled||0===s.filterTargetsToShow(s.data.targets).length||!r.zoom&&(null==l?void 0:l.type.indexOf("touch"))>-1&&1===(null==l?void 0:l.touches.length))return;t.sourceEvent&&(o.zooming=!0,o.domain=void 0);const u="mousemove"===(null==l?void 0:l.type),h=(null==l?void 0:l.wheelDelta)<0,g=t.transform;!u&&h&&r.x.domain().every(function(t,e){return i(this,n),t!==c.xDomain[e]}.bind(this))&&r.x.domain(c.xDomain),s.zoom.updateTransformScale(g,"wheel"===a.zoom_type&&l);const f=a.transition_duration>0&&!a.subchart_show&&(o.dragging||d||!t.sourceEvent);s.redraw({withTransition:f,withY:a.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),s.state.cancelClick=u,d||X(a.zoom_onzoom,s.api,null!=(e=s.state.domain)?e:s.zoom.getDomain())},onZoomEnd:function(t){var e,i;const n=this,s=n.config,a=n.state;let r=n.zoom.startEvent,o=null==t?void 0:t.sourceEvent;const c=(null==t?void 0:t.transform)===Es.zoomIdentity;var l;(null==(e=r)?void 0:e.type.indexOf("touch"))>-1&&(r=r.changedTouches[0],o=null==(l=o)||null==(l=l.changedTouches)?void 0:l[0]);"drag"===s.zoom_type&&o&&r.clientX===o.clientX&&r.clientY===o.clientY||(a.zooming=!1,n.redrawEventRect(),n.updateZoom(),!c&&(o||a.dragging)&&X(s.zoom_onzoomend,n.api,null!=(i=n.state.domain)?i:n.zoom.getDomain()))},updateZoom:function(t){const e=this,i=e.scale,n=i.subX,s=i.x,a=i.zoom;if(a){const i=a.domain(),r=n.domain(),o=.015,c=e.config.axis_x_inverted?(i[0]>=r[0]||i[0]+o>=r[0])&&(r[1]>=i[1]||r[1]>=i[1]+o):(i[0]<=r[0]||i[0]-o<=r[0])&&(r[1]<=i[1]||r[1]<=i[1]-o);(t||c)&&(e.axis.x.scale(n),s.domain(n.orgDomain()),e.scale.zoom=null)}},updateCurrentZoomTransform:function(t,e){var i;const n=this,s=n.$el.eventRect,a=n.config.axis_rotated,r=[-t(e[0]),0],o=(i=Es.zoomIdentity.scale(t.range()[1]/(t(e[1])-t(e[0])))).translate.apply(i,a?r.reverse():r);s.call(n.zoom.transform,o)},bindZoomOnEventRect:function(){var t=this;const e=this,n=e.config,s=e.$el.eventRect,a="drag"===n.zoom_type?e.zoomBehaviour:e.zoom;e.$el.svg.on("wheel",function(){i(this,t)}.bind(this)),null==s||s.call(a).on("dblclick.zoom",null)},initZoomBehaviour:function(){var t=this;const e=this,n=e.config,s=e.state,a=n.axis_rotated;let r,o=0,c=0;const l={axis:a?"y":"x",attr:a?"height":"width",index:a?1:0};e.zoomBehaviour=(0,Pe.drag)().clickDistance(4).on("start",(function(t){s.event=t,e.setDragStatus(!0),e.unselectRect(),r||(r=e.$el.main.append("rect").attr("clip-path",s.clip.path).attr("class",Bt.zoomBrush).attr("width",a?s.width:0).attr("height",a?0:s.height)),o=V(t,this)[l.index],c=o,r.attr(l.axis,o).attr(l.attr,0),e.onZoomStart(t)})).on("drag",(function(t){c=V(t,this)[l.index],r.attr(l.axis,Math.min(o,c)).attr(l.attr,Math.abs(c-o))})).on("end",function(n){var a=this;i(this,t);const d=e.scale.zoom||e.scale.x;if(s.event=n,r.attr(l.axis,0).attr(l.attr,0),o>c){var u=[c,o];o=u[0],c=u[1]}o<0&&(c+=Math.abs(o),o=0),o!==c&&e.api.zoom([o,c].map(function(t){return i(this,a),d.invert(t)}.bind(this))),e.setDragStatus(!1)}.bind(this))},setZoomResetButton:function(){const t=this,e=t.config,i=t.$el,n=e.zoom_resetButton;n&&"drag"===e.zoom_type&&(i.zoomResetBtn?i.zoomResetBtn.style("display",null):i.zoomResetBtn=t.$el.chart.append("div").classed(pt.button,!0).append("span").on("click",(function(){w(n.onclick)&&n.onclick.bind(t.api)(this),t.api.unzoom()})).classed(Bt.buttonZoomReset,!0).text(n.text||"Reset Zoom"))},getZoomTransform:function(){const t=this.$el.eventRect;return null!=t&&t.node()?(0,Es.zoomTransform)(t.node()):{k:1}}},Xs=void 0,Fs={data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return i(this,Xs),!0}.bind(void 0),data_selection_multiple:!0,data_selection_draggable:!1,data_onselected:function(){i(this,Xs)}.bind(void 0),data_onunselected:function(){i(this,Xs)}.bind(void 0)},Bs={subchart_show:!1,subchart_showHandle:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_format:void 0,subchart_axis_x_tick_text_show:!0,subchart_init_range:void 0,subchart_onbrush:function(){i(this,undefined)}.bind(void 0)},Ns={zoom_enabled:!1,zoom_type:"wheel",zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0},js=void 0;let Gs=function(){var t=this;return i(this,js),q(ci.prototype,zs),q(Ai.prototype,ks),ie.setOptions([Fs]),(Gs=function(){return i(this,t),!0}.bind(this))()}.bind(void 0),Vs=function(){var t=this;return i(this,js),q(ci.prototype,Ms),q(Ai.prototype,Cs),ie.setOptions([Bs]),(Vs=function(){return i(this,t),!0}.bind(this))()}.bind(void 0),Ys=function(){var t=this;return i(this,js),q(ci.prototype,$s),q(Ai.prototype,Ls),ie.setOptions([Ns]),(Ys=function(){return i(this,t),!0}.bind(this))()}.bind(void 0),Hs={};const Us={version:"3.11.3",generate:function(t){const e=nt({},Hs,t),i=new Ai(e);return i.internal.charts=this.instance,this.instance.push(i),i},defaults:function(t){return M(t)&&(Hs=t),Hs},instance:[],plugin:{}};var Ws=void 0;Object.keys(t).forEach(function(e){return i(this,Ws),t[e]()}.bind(void 0)),Object.keys(e).forEach(function(t){return i(this,Ws),e[t]()}.bind(void 0))}(),x}()}));