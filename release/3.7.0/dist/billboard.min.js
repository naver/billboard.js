/*!
 * Copyright (c) 2017 ~ present NAVER Corp.
 * billboard.js project is licensed under the MIT license
 *
 * billboard.js, JavaScript chart library
 * https://naver.github.io/billboard.js/
 *
 * @version 3.7.0
 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3-axis"),require("d3-brush"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-hierarchy"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom"));else if("function"==typeof define&&define.amd)define(["d3-axis","d3-brush","d3-drag","d3-dsv","d3-ease","d3-hierarchy","d3-interpolate","d3-scale","d3-selection","d3-shape","d3-time-format","d3-transition","d3-zoom"],e);else{var i="object"==typeof exports?e(require("d3-axis"),require("d3-brush"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-hierarchy"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom")):e(t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3);for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(this,(function(t,e,i,n,a,r,s,o,l,c,d,h,u){return function(){"use strict";var g=[,,function(t){t.exports=l},function(t){t.exports=e},function(t){t.exports=d},function(t){t.exports=n},function(t){t.exports=o},function(t){t.exports=i},function(t){t.exports=h},function(t){t.exports=c},function(e){e.exports=t},function(t){t.exports=a},function(t){t.exports=s},function(t){t.exports=r},function(t){t.exports=u}],f={};function p(t){var e=f[t];if(void 0!==e)return e.exports;var i=f[t]={exports:{}};return g[t](i,i.exports,p),i.exports}p.d=function(t,e){for(var i in e)p.o(e,i)&&!p.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},p.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},p.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var v={};return function(){p.r(v),p.d(v,{bb:function(){return ka},default:function(){return ka}});var t={};p.r(t),p.d(t,{area:function(){return Nn},areaLineRange:function(){return Gn},areaSpline:function(){return jn},areaSplineRange:function(){return Yn},areaStep:function(){return Vn},bar:function(){return ta},bubble:function(){return ea},candlestick:function(){return ia},donut:function(){return Zn},gauge:function(){return qn},line:function(){return Hn},pie:function(){return Kn},polar:function(){return Jn},radar:function(){return Qn},scatter:function(){return na},spline:function(){return Wn},step:function(){return Un},treemap:function(){return aa}});var e={};function i(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}p.r(e),p.d(e,{selection:function(){return Ta},subchart:function(){return wa},zoom:function(){return Aa}});var n=p(4),a=p(2),r=void 0,s=function(){return i(this,r),"object"==typeof globalThis&&null!==globalThis&&globalThis.Object===Object&&globalThis||"object"==typeof global&&null!==global&&global.Object===Object&&global||"object"==typeof self&&null!==self&&self.Object===Object&&self||Function("return this")()}.bind(void 0)();s.requestIdleCallback=s.requestIdleCallback||function(t){return i(this,r),setTimeout(t,1)}.bind(void 0),s.requestAnimationFrame=s.requestAnimationFrame||function(t){return i(this,r),setTimeout(t,1)}.bind(void 0);var o=null==s?void 0:s.document,l={AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",BAR:"bar",BUBBLE:"bubble",CANDLESTICK:"candlestick",DONUT:"donut",GAUGE:"gauge",LINE:"line",PIE:"pie",POLAR:"polar",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step",TREEMAP:"treemap"},c={AREA:"initArea",AREA_LINE_RANGE:"initArea",AREA_SPLINE:"initArea",AREA_SPLINE_RANGE:"initArea",AREA_STEP:"initArea",BAR:"initBar",BUBBLE:"initCircle",CANDLESTICK:"initCandlestick",DONUT:"initArc",GAUGE:"initArc",LINE:"initLine",PIE:"initArc",POLAR:"initPolar",RADAR:"initCircle",SCATTER:"initCircle",SPLINE:"initLine",STEP:"initLine",TREEMAP:"initTreemap"},d={Area:[l.AREA,l.AREA_SPLINE,l.AREA_SPLINE_RANGE,l.AREA_LINE_RANGE,l.AREA_STEP],AreaRange:[l.AREA_SPLINE_RANGE,l.AREA_LINE_RANGE],Arc:[l.PIE,l.DONUT,l.GAUGE,l.POLAR,l.RADAR],Line:[l.LINE,l.SPLINE,l.AREA,l.AREA_SPLINE,l.AREA_SPLINE_RANGE,l.AREA_LINE_RANGE,l.STEP,l.AREA_STEP],Step:[l.STEP,l.AREA_STEP],Spline:[l.SPLINE,l.AREA_SPLINE,l.AREA_SPLINE_RANGE]};function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function u(t){var e=function(t,e){if("object"!==h(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===h(e)?e:String(e)}function g(t,e,i){return(e=u(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var f=p(3),x=void 0;function b(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function m(t){for(var e,i=1;i<arguments.length;i++)e=null!=arguments[i]?arguments[i]:{},i%2?b(Object(e),!0).forEach((function(i){g(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):b(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}));return t}var _=function(t){return i(this,x),t||0===t}.bind(void 0),y=function(t){return i(this,x),"function"==typeof t}.bind(void 0),T=function(t){return i(this,x),"string"==typeof t}.bind(void 0),w=function(t){return i(this,x),"number"==typeof t}.bind(void 0),A=function(t){return i(this,x),void 0===t}.bind(void 0),S=function(t){return i(this,x),void 0!==t}.bind(void 0),k=function(t){return i(this,x),"boolean"==typeof t}.bind(void 0),C=function(t){return i(this,x),10*Math.ceil(t/10)}.bind(void 0),R=function(t){return i(this,x),Math.ceil(t)+.5}.bind(void 0),E=function(t){return i(this,x),t[1]-t[0]}.bind(void 0),L=function(t){return i(this,x),"object"==typeof t}.bind(void 0),O=function(t){return i(this,x),A(t)||null===t||T(t)&&0===t.length||L(t)&&!(t instanceof Date)&&0===Object.keys(t).length||w(t)&&isNaN(t)}.bind(void 0),P=function(t){return i(this,x),!O(t)}.bind(void 0),I=function(t){return i(this,x),Array.isArray(t)}.bind(void 0),D=function(t){return i(this,x),t&&!(null!=t&&t.nodeType)&&L(t)&&!I(t)}.bind(void 0);function z(t,e,i){return S(t[e])?t[e]:i}function M(t,e){for(var i=y(t),n=arguments.length,a=Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];return i&&t.call.apply(t,[e].concat(a)),i}function X(t,e){var n=this,a=0,r=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];--a||e.apply.apply(e,[this].concat(i))};"duration"in t?t.each(function(){return i(this,n),++a}.bind(this)).on("end",r):(++a,t.call(r))}function $(t){return T(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function F(t,e,n,a){var r=this;if(void 0===n&&(n=[-1,1]),void 0===a&&(a=!1),t&&T(e))if(-1===e.indexOf("\n"))t.text(e);else{var s=[t.text(),e].map(function(t){return i(this,r),t.replace(/[\s\n]/g,"")}.bind(this));if(s[0]!==s[1]){var o=e.split("\n"),l=a?o.length-1:1;t.html(""),o.forEach(function(e,a){i(this,r),t.append("tspan").attr("x",0).attr("dy",(0===a?n[0]*l:n[1])+"em").text(e)}.bind(this))}}}function B(t){var e=t.getBBox(),i=e.x,n=e.y,a=e.width,r=e.height;return[{x:i,y:n+r},{x:i,y:n},{x:i+a,y:n},{x:i+a,y:n+r}]}function N(t,e){var n,r=t&&(null==(n=t.touches||t.sourceEvent&&t.sourceEvent.touches)?void 0:n[0]),s=(0,a.pointer)(r||t,e),o=this;return s.map(function(t){return i(this,o),isNaN(t)?0:t}.bind(this))}function G(t){var e,i=t.event,n=t.$el,a=n.subchart.main||n.main;return i&&"brush"===i.type?e=i.selection:a&&(e=a.select(".bb-brush").node())&&(e=(0,f.brushSelection)(e)),e}function j(t){return!("rect"in t)||"rect"in t&&t.hasAttribute("width")&&t.rect.width!==+t.getAttribute("width")?t.rect=t.getBoundingClientRect():t.rect}function Y(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=0),void 0===i&&(i=1e4);var n=Math.floor(Math.random()*(i-e)+e);return t?n+"":n}function V(t,e,i,n,a){if(i>n)return-1;var r=Math.floor((i+n)/2),s=t[r],o=s.x,l=s.w,c=void 0===l?0:l;return a&&(o=t[r].y,c=t[r].h),e>=o&&e<=o+c?r:e<o?V(t,e,i,r-1,a):V(t,e,r+1,n,a)}function H(t){var e=G(t);return!e||e[0]===e[1]}function W(t,e){var n=this;for(var a in void 0===t&&(t={}),I(e)&&e.forEach(function(e){return i(this,n),W(t,e)}.bind(this)),e)/^\d+$/.test(a)||a in t||(t[a]=e[a]);return t}var U=function(t){return i(this,x),t.charAt(0).toUpperCase()+t.slice(1)}.bind(void 0);var Z=function(t){return i(this,x),[].slice.call(t)}.bind(void 0);function q(t){var e=t?t.transform:null,i=e&&e.baseVal;return i&&i.numberOfItems?i.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}}function K(t){var e=this,n=t[0]instanceof Date,a=(n?t.map(Number):t).filter(function(t,n,a){return i(this,e),a.indexOf(t)===n}.bind(this));return n?a.map(function(t){return i(this,e),new Date(t)}.bind(this)):a}function J(t){var e=this;return t&&t.length?t.reduce(function(t,n){return i(this,e),t.concat(n)}.bind(this)):[]}function Q(t){for(var e=this,n=arguments.length,a=Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];if(!a.length||1===a.length&&!a[0])return t;var s=a.shift();return D(t)&&D(s)&&Object.keys(s).forEach(function(n){i(this,e);var a=s[n];D(a)?(t[n]||(t[n]={}),t[n]=Q(t[n],a)):t[n]=I(a)?a.concat():a}.bind(this)),Q.apply(void 0,[t].concat(a))}function tt(t,e){var n,a=this;return void 0===e&&(e=!0),t[0]instanceof Date?n=e?function(t,e){return i(this,a),t-e}.bind(this):function(t,e){return i(this,a),e-t}.bind(this):e&&!t.every(isNaN)?n=function(t,e){return i(this,a),t-e}.bind(this):e||(n=function(t,e){return i(this,a),(t>e?-1:t<e&&1)||t===e&&0}.bind(this)),t.concat().sort(n)}function et(t,e){var n=this,a=e.filter(function(t){return i(this,n),P(t)}.bind(this));return a.length?w(a[0])?a=Math[t].apply(Math,a):a[0]instanceof Date&&(a=tt(a,"min"===t)[0]):a=void 0,a}var it=function(t,e,n){void 0===n&&(n=1),i(this,x);for(var a=[],r=0|Math.max(0,Math.ceil((e-t)/n)),s=t;s<r;s++)a.push(t+s*n);return a}.bind(void 0),nt={mouse:function(){var t=this;i(this,x);var e=function(){return i(this,t),{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0}}.bind(this);try{return new MouseEvent("t"),function(n,a,r){void 0===r&&(r=e()),i(this,t),n.dispatchEvent(new MouseEvent(a,r))}.bind(this)}catch(n){return function(n,a,r){void 0===r&&(r=e()),i(this,t);var l=o.createEvent("MouseEvent");l.initMouseEvent(a,r.bubbles,r.cancelable,s,0,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.dispatchEvent(l)}.bind(this)}}.bind(void 0)(),touch:function(t,e,n){i(this,x);var a=new Touch(Q({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},n));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[a],targetTouches:[],changedTouches:[a]}))}.bind(void 0)};function at(t,e){var i=t;for(var n in e)i=i.replace(new RegExp("{="+n+"}","g"),e[n]);return i}function rt(t){var e;if(t instanceof Date)e=t;else if(T(t)){var i,n=this.config;e=null!=(i=this.format.dataTime(n.data_xFormat)(t))?i:new Date(t)}else w(t)&&!isNaN(t)&&(e=new Date(+t));return e&&!isNaN(+e)||console&&console.error&&console.error("Failed to parse x '"+t+"' to Date object"),e}function st(){return!1===(null==o?void 0:o.hidden)||"visible"===(null==o?void 0:o.visibilityState)}function ot(t,e){var n=this;!1===e()?s.requestAnimationFrame(function(){return i(this,n),ot(t,e)}.bind(this)):t()}function lt(t){var e=t,n=e.config,a="";if(O(n.data_type||n.data_types)&&!e[c.LINE])a="line";else for(var r in c){var o=l[r];if(e.hasType(o)&&!e[c[r]]){a=o;break}}a&&function(t,e){var i,n="[billboard.js]";(null==(i=s.console)?void 0:i.error)&&(console.error("❌ "+n+" "+t,"background:red;color:white;display:block;font-size:15px",e),console.info("%cℹ️","font-size:15px","https://github.com/naver/billboard.js/wiki/CHANGELOG-v2#modularization-by-its-functionality"));throw Error(n+" "+t.replace(/\%c([a-z-]+)/i,"'$1' ")+" "+e)}("Please, make sure if %c"+function(t,e){var n=this;return void 0===e&&(e="-"),t.split(e).map(function(t,e){return i(this,n),e?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()}.bind(this)).join("")}(a),"module has been imported and specified correctly.")}function ct(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function dt(t){for(var e,i=1;i<arguments.length;i++)e=null!=arguments[i]?arguments[i]:{},i%2?ct(Object(e),!0).forEach((function(i){g(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ct(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}));return t}var ht={button:"bb-button",chart:"bb-chart",empty:"bb-empty",main:"bb-main",target:"bb-target",EXPANDED:"_expanded_"},ut={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcs:"bb-arcs",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsTitle:"bb-chart-arcs-title"},gt={area:"bb-area",areas:"bb-areas"},ft={axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label"},pt={bar:"bb-bar",bars:"bb-bars",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars"},vt={candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",valueDown:"bb-value-down",valueUp:"bb-value-up"},xt={chartCircles:"bb-chart-circles",circle:"bb-circle",circles:"bb-circles"},bt={colorPattern:"bb-color-pattern",colorScale:"bb-colorscale"},mt={dragarea:"bb-dragarea",INCLUDED:"_included_"},_t={chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",gaugeValue:"bb-gauge-value"},yt={legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile"},Tt={chartLine:"bb-chart-line",chartLines:"bb-chart-lines",line:"bb-line",lines:"bb-lines"},wt={eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single"},At={focused:"bb-focused",defocused:"bb-defocused",legendItemFocused:"bb-legend-item-focused",xgridFocus:"bb-xgrid-focus",ygridFocus:"bb-ygrid-focus"},St={grid:"bb-grid",gridLines:"bb-grid-lines",xgrid:"bb-xgrid",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids"},kt="bb-level",Ct="bb-levels",Rt={chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars"},Et={region:"bb-region",regions:"bb-regions"},Lt={selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",SELECTED:"_selected_"},Ot={shape:"bb-shape",shapes:"bb-shapes"},Pt={brush:"bb-brush",subchart:"bb-subchart"},It={chartText:"bb-chart-text",chartTexts:"bb-chart-texts",text:"bb-text",texts:"bb-texts",title:"bb-title",TextOverlapping:"text-overlapping"},Dt={tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name"},zt={treemap:"bb-treemap",chartTreemap:"bb-chart-treemap",chartTreemaps:"bb-chart-treemaps"},Mt={buttonZoomReset:"bb-zoom-reset",zoomBrush:"bb-zoom-brush"},Xt=dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt({},ht),ut),gt),ft),pt),vt),xt),bt),mt),_t),yt),Tt),wt),At),St),Rt),Et),Lt),Ot),Pt),It),Dt),zt),Mt),$t={element:function(){return{chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,candlestick:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null,zoomResetBtn:null}},state:function(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasRadar:!1,hasTreemap:!1,cssRule:{},current:{width:0,height:0,dataMax:0,maxTickWidths:{x:{size:0,ticks:[],clipPath:0,domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},types:[]},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,eventReceiver:{currentIdx:-1,rect:{},data:[],coords:[]},axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},event:null,dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,redrawing:!1,resizing:!1,toggling:!1,zooming:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",orgConfig:{},hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,outerRadius:void 0,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null}}}},Ft=function(){function t(){var t=this;Object.keys($t).forEach(function(e){i(this,t),this[e]=new $t[e]}.bind(this))}return t.prototype.getStore=function(t){return this[t]},t}(),Bt={bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding:!0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,resize_timer:!0,onclick:void 0,onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:250,plugins:[],render:{},regions:[]},Nt={boost_useCssRule:!1,boost_useWorker:!1},Gt=void 0,jt={data_x:void 0,data_idConverter:function(t){return i(this,Gt),t}.bind(void 0),data_names:{},data_classes:{},data_type:void 0,data_types:{},data_order:"desc",data_groups:[],data_groupsZeroAs:"positive",data_color:void 0,data_colors:{},data_labels:{},data_labels_backgroundColors:void 0,data_labels_colors:void 0,data_labels_position:{},data_hide:!1,data_filter:void 0,data_onclick:function(){i(this,Gt)}.bind(void 0),data_onover:function(){i(this,Gt)}.bind(void 0),data_onout:function(){i(this,Gt)}.bind(void 0),data_onshown:void 0,data_onhidden:void 0,data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:""},Yt={color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0},Vt={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{}},Ht={legend_show:!0,legend_hide:!1,legend_contents_bindto:void 0,legend_contents_template:"<span style='color:#fff;padding:5px;background-color:{=COLOR}'>{=TITLE}</span>",legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,legend_item_tile_r:5,legend_item_tile_type:"rectangle",legend_usePoint:!1},Wt={title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"},Ut=void 0,Zt={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){i(this,Ut)}.bind(void 0),tooltip_onhide:function(){i(this,Ut)}.bind(void 0),tooltip_onshown:function(){i(this,Ut)}.bind(void 0),tooltip_onhidden:function(){i(this,Ut)}.bind(void 0),tooltip_order:null};function qt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Kt(t){for(var e,i=1;i<arguments.length;i++)e=null!=arguments[i]?arguments[i]:{},i%2?qt(Object(e),!0).forEach((function(i){g(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):qt(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}));return t}var Jt=function(){function t(){return function(){for(var t=this,e=function(n){if(i(this,t),D(n)&&n.constructor){var a=new n.constructor;for(var r in n)a[r]=e(n[r]);return a}return n}.bind(this),n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];return a.map(function(n){return i(this,t),e(n)}.bind(this)).reduce(function(e,n){return i(this,t),m(m({},e),n)}.bind(this))}(Bt,Nt,jt,Yt,Vt,Ht,Wt,Zt,t.data)}return t.setOptions=function(t){var e=this;this.data=t.reduce(function(t,n){return i(this,e),Kt(Kt({},t),n)}.bind(this),this.data)},t}();Jt.data={};var Qt="$baseLength",te="__colorPattern__",ee="$dataMinMax",ie="$dataTotalSum",ne="$totalPerIndex",ae="legendItemTextBox",re="$radarPoints",se="setOverOut",oe="callOverOutForTouch",le="textRect",ce=function(){function t(){this.cache={}}var e=t.prototype;return e.add=function(t,e,i){return void 0===i&&(i=!1),this.cache[t]=i?this.cloneTarget(e):e,this.cache[t]},e.remove=function(t){var e=this;Z(t).forEach(function(t){return i(this,e),delete this.cache[t]}.bind(this))},e.get=function(t,e){if(void 0===e&&(e=!1),e){for(var i,n=[],a=0;i=t[a];a++)i in this.cache&&n.push(this.cloneTarget(this.cache[i]));return n}var r=this.cache[t];return _(r)?r:null},e.reset=function(t){for(var e in this.cache)(t||/^\$/.test(e))&&(this.cache[e]=null)},e.cloneTarget=function(t){var e=this;return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return i(this,e),{x:t.x,value:t.value,id:t.id}}.bind(this))}},t}(),de=s.setTimeout,he=s.clearTimeout;function ue(){var t=[],e=function(e,n){var a=this;ot(function(){i(this,a),null==n||n()}.bind(this),(function(){for(var e,i=0,n=0;e=t[n];n++)if(!0===e||null!=e.empty&&e.empty())i++;else{if(!1===st()){i=t.length;break}try{e.transition()}catch(t){i++}}return i===t.length}))};return e.add=function(e){I(e)?t=t.concat(e):t.push(e)},e}var ge={};function fe(t,e,i,n){var a;if(void 0===t&&(t=!0),s.Worker&&t){var r=function(t,e){var i,n=t.toString(),a=n.replace(/(function|[\s\W\n])/g,"").substring(0,15);return a in ge||(ge[a]=new s.Blob([(null!=(i=null==e?void 0:e.map(String).join(";"))?i:"")+"\n\n\t\t\tself.onmessage=function({data}) {\n\t\t\t\tconst result = ("+n+").apply(null, data);\n\t\t\t\tself.postMessage(result);\n\t\t\t};"],{type:"text/javascript"})),s.URL.createObjectURL(ge[a])}(e,n),o=new s.Worker(r);a=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];o.postMessage(e),o.onmessage=function(t){return s.URL.revokeObjectURL(r),i(t.data)},o.onerror=function(t){console.error(t)}}}else a=function(){var t=e.apply(void 0,arguments);i(t)};return a}var pe=p(5);function ve(t){var e=[];return t.forEach((function(t,i){var n=t[0];t.forEach((function(t,a){if(a>0){if(void 0===e[a-1]&&(e[a-1]={}),void 0===t)throw new Error("Source data is missing a component at ("+i+", "+a+")!");e[a-1][n]=t}}))})),e}function xe(t){var e=t[0],i=[];return t.forEach((function(t,n){if(n>0){var a={};t.forEach((function(t,i){if(void 0===t)throw new Error("Source data is missing a component at ("+n+", "+i+")!");a[e[i]]=t})),i.push(a)}})),i}function be(t,e){var i,n,a=[];if(Array.isArray(t)){i=e.x?e.value.concat(e.x):e.value,a.push(i),t.forEach((function(t){var e=i.map((function(e){var i=function(t,e){if(void 0!==t[e])return t[e];var i=e.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split("."),n=t;return i.some((function(t){return!(n=n&&t in n?n[t]:void 0)})),n}(t,e);return void 0===i&&(i=null),i}));a.push(e)})),n=xe(a)}else Object.keys(t).forEach((function(e){var i=t[e].concat();null==i.unshift||i.unshift(e),a.push(i)})),n=ve(a);return n}function me(t,e){var n,a=this,r=t.rows(e);return 1===r.length?(n=[{}],r[0].forEach(function(t){i(this,a),n[0][t]=null}.bind(this))):n=t.parse(e),n}function _e(t){return me({rows:pe.csvParseRows,parse:pe.csvParse},t)}function ye(t){return me({rows:pe.tsvParseRows,parse:pe.tsvParse},t)}function Te(t,e){var i=t||(null==e?void 0:e.data_keys);return null!=i&&i.x&&(e.data_x=i.x),i}var we={convertData:function(t,e){var n=this,a=this.config,r=a.boost_useWorker,s=t;if(t.bindto&&(s={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(e){i(this,n);var a="data_"+e;a in t&&(s[e]=t[a])}.bind(this))),s.url&&e)!function(t,e,i,n,a){void 0===e&&(e="csv");var r=new XMLHttpRequest,s={csv:_e,tsv:ye,json:be};r.open("GET",t),i&&Object.keys(i).forEach((function(t){r.setRequestHeader(t,i[t])})),r.onreadystatechange=function(){if(4===r.readyState){if(200!==r.status)throw new Error(t+": Something went wrong loading!");var i=r.responseText;i&&a.call(this,s[e]("json"===e?JSON.parse(i):i,n))}},r.send()}(s.url,s.mimeType,s.headers,Te(s.keys,a),e);else if(s.json)fe(r,be,e,[ve,xe])(s.json,Te(s.keys,a));else if(s.rows)fe(r,xe,e)(s.rows);else if(s.columns)fe(r,ve,e)(s.columns);else if(t.bindto)throw Error("url or json or rows or columns is required.")},convertDataToTargets:function(t,e){var n=this,a=this,r=a.axis,s=a.config,o=a.state,l=!1,c=!1,d=!1;r&&(l=r.isCategorized(),c=r.isTimeSeries(),d=r.isCustomX());var h,u=Object.keys(t[0]||{}),g=u.length?u.filter(a.isNotX,a):[],f=u.length?u.filter(a.isX,a):[];g.forEach(function(r){var o=this;i(this,n);var l=this.getXKey(r);d||c?f.indexOf(l)>=0?h=(e&&a.data.xs[r]||[]).concat(t.map(function(t){return i(this,o),t[l]}.bind(this)).filter(_).map(function(t,e){return i(this,o),a.generateTargetX(t,r,e)}.bind(this))):s.data_x?h=this.getOtherTargetXs():P(s.data_xs)&&(h=a.getXValuesOfXKey(l,a.data.targets)):h=t.map(function(t,e){return i(this,o),e}.bind(this)),h&&(this.data.xs[r]=h)}.bind(this)),g.forEach(function(t){if(i(this,n),!this.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}.bind(this));var p=g.map(function(e,r){var c=this;i(this,n);var h=s.data_idConverter.bind(a.api)(e),u=a.getXKey(e),g=d&&l,f=g&&t.map(function(t){return i(this,c),t.x}.bind(this)).every(function(t){return i(this,c),s.axis_x_categories.indexOf(t)>-1}.bind(this)),p=t.__append__,v=null===u&&p?a.api.data.values(e).length:0;return{id:h,id_org:e,values:t.map(function(t,n){i(this,c);var l,d=t[u],x=t[e];return x=null===x||isNaN(x)||D(x)?I(x)||D(x)?x:null:+x,!g&&!o.hasRadar||0!==r||A(d)?l=a.generateTargetX(d,e,v+n):(f||0!==r||0!==n||p||(s.axis_x_categories=[]),-1===(l=s.axis_x_categories.indexOf(d))&&(l=s.axis_x_categories.length,s.axis_x_categories.push(d))),(A(x)||a.data.xs[e].length<=n)&&(l=void 0),{x:l,value:x,id:h,index:-1}}.bind(this)).filter(function(t){return i(this,c),S(t.x)}.bind(this))}}.bind(this));return p.forEach(function(t){var e,r=this;i(this,n),s.data_xSort&&(t.values=t.values.sort(function(t,e){return i(this,r),(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)}.bind(this))),t.values.forEach(function(t,e){return i(this,r),t.index=e}.bind(this)),null==(e=a.data.xs[t.id])||e.sort(function(t,e){return i(this,r),t-e}.bind(this))}.bind(this)),o.hasNegativeValue=a.hasNegativeValueInTargets(p),o.hasPositiveValue=a.hasPositiveValueInTargets(p),s.data_type&&a.setTargetType(a.mapToIds(p).filter(function(t){return i(this,n),!(t in s.data_types)}.bind(this)),s.data_type),p.forEach(function(t){return i(this,n),a.cache.add(t.id_org,t,!0)}.bind(this)),p}},Ae={isX:function(t){var e=this.config,n=e.data_x&&t===e.data_x,a=P(e.data_xs)&&function(t,e){var n=this,a=!1;return Object.keys(t).forEach(function(r){return i(this,n),t[r]===e&&(a=!0)}.bind(this)),a}(e.data_xs,t);return n||a},isNotX:function(t){return!this.isX(t)},isStackNormalized:function(){var t=this.config;return!(!t.data_stack_normalize||!t.data_groups.length)},isGrouped:function(t){var e=this,n=this.config.data_groups;return t?n.some(function(n){return i(this,e),n.indexOf(t)>=0&&n.length>1}.bind(this)):n.length>0},getXKey:function(t){var e=this.config;return e.data_x?e.data_x:P(e.data_xs)?e.data_xs[t]:null},getXValuesOfXKey:function(t,e){var n,a=this,r=this;return(e&&P(e)?r.mapToIds(e):[]).forEach(function(e){i(this,a),r.getXKey(e)===t&&(n=r.data.xs[e])}.bind(this)),n},getIndexByX:function(t,e){return e?e.indexOf(T(t)?t:+t):(this.filterByX(this.data.targets,t)[0]||{index:null}).index},getXValue:function(t,e){var i=this;return t in i.data.xs&&i.data.xs[t]&&_(i.data.xs[t][e])?i.data.xs[t][e]:e},getOtherTargetXs:function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},getOtherTargetX:function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function(t){var e=this,n=this.config;Object.keys(t).forEach(function(a){i(this,e),n.data_xs[a]=t[a]}.bind(this))},isMultipleX:function(){return P(this.config.data_xs)||!this.config.data_xSort||this.hasType("bubble")||this.hasType("scatter")},addName:function(t){var e,i=this.config;return t&&(e=i.data_names[t.id],t.name=void 0!==e?e:t.id),t},getAllValuesOnIndex:function(t,e){var n=this;void 0===e&&(e=!1);var a=this,r=a.filterTargetsToShow(a.data.targets).map(function(e){return i(this,n),a.addName(a.getValueOnIndex(e.values,t))}.bind(this));return e&&(r=r.filter(function(t){return i(this,n),t&&"value"in t&&_(t.value)}.bind(this))),r},getValueOnIndex:function(t,e){var n=this,a=t.filter(function(t){return i(this,n),t.index===e}.bind(this));return a.length?a[0]:null},updateTargetX:function(t,e){var n=this,a=this;t.forEach(function(t){var r=this;i(this,n),t.values.forEach(function(n,s){i(this,r),n.x=a.generateTargetX(e[s],t.id,s)}.bind(this)),a.data.xs[t.id]=e}.bind(this))},updateTargetXs:function(t,e){var n=this,a=this;t.forEach(function(t){i(this,n),e[t.id]&&a.updateTargetX([t],e[t.id])}.bind(this))},generateTargetX:function(t,e,i){var n=this,a=n.axis,r=null!=a&&a.isCategorized()?i:t||i;if(null!=a&&a.isTimeSeries()){var s=rt.bind(n);r=s(t||n.getXValue(e,i))}else null==a||!a.isCustomX()||null!=a&&a.isCategorized()||(r=_(t)?+t:n.getXValue(e,i));return r},updateXs:function(t){var e=this;t.length&&(this.axis.xs=t.map(function(t){return i(this,e),t.x}.bind(this)))},getPrevX:function(t){var e=this.axis.xs[t-1];return S(e)?e:null},getNextX:function(t){var e=this.axis.xs[t+1];return S(e)?e:null},getBaseValue:function(t){var e=this,i=e.state.hasAxis,n=t.value;return n&&i&&(e.isAreaRangeType(t)?n=e.getRangedData(t,"mid"):e.isBubbleZType(t)&&(n=e.getBubbleZData(n,"y"))),n},getMinMaxValue:function(t){var e,n,a=this,r=this.getBaseValue.bind(this);return(t||this.data.targets.map(function(t){return i(this,a),t.values}.bind(this))).forEach(function(t,s){i(this,a);var o=t.map(r).filter(w);e=Math.min.apply(Math,[s?e:1/0].concat(o)),n=Math.max.apply(Math,[s?n:-1/0].concat(o))}.bind(this)),{min:e,max:n}},getMinMaxData:function(){var t=this,e=this,n=ee,a=e.cache.get(n);if(!a){var r=e.data.targets.map(function(e){return i(this,t),e.values}.bind(this)),s=e.getMinMaxValue(r),o=[],l=[];r.forEach(function(n){i(this,t);var a=e.getFilteredDataByValue(n,s.min),r=e.getFilteredDataByValue(n,s.max);a.length&&(o=o.concat(a)),r.length&&(l=l.concat(r))}.bind(this)),e.cache.add(n,a={min:o,max:l})}return a},getTotalPerIndex:function(){var t=this,e=this,n=ne,a=e.cache.get(n);return!e.config.data_groups.length&&!e.isStackNormalized()||a||(a=[],e.data.targets.forEach(function(e){var n=this;i(this,t),e.values.forEach(function(t,e){i(this,n),a[e]||(a[e]=0),a[e]+=w(t.value)?t.value:0}.bind(this))}.bind(this))),a},getTotalDataSum:function(t){var e=this,n=this,a=ie,r=n.cache.get(a);if(!w(r)){var s=J(n.data.targets.map(function(t){return i(this,e),t.values}.bind(this))).map(function(t){return i(this,e),t.value}.bind(this)).reduce(function(t,n){return i(this,e),t+n}.bind(this));n.cache.add(a,r=s)}return t&&(r-=n.getHiddenTotalDataSum()),r},getHiddenTotalDataSum:function(){var t=this,e=this.api,n=this.state.hiddenTargetIds,a=0;return n.length&&(a=e.data.values.bind(e)(n).reduce(function(e,n){return i(this,t),e+n}.bind(this))),a},getFilteredDataByValue:function(t,e){var n=this;return t.filter(function(t){return i(this,n),this.getBaseValue(t)===e}.bind(this))},getMaxDataCount:function(){var t=this;return Math.max.apply(Math,this.data.targets.map(function(e){return i(this,t),e.values.length}.bind(this)))},getMaxDataCountTarget:function(){var t=this,e=this.filterTargetsToShow()||[],n=e.length;return n>1?e=tt(K(e=e.map(function(e){return i(this,t),e.values}.bind(this)).reduce(function(e,n){return i(this,t),e.concat(n)}.bind(this)).map(function(e){return i(this,t),e.x}.bind(this)))).map(function(e,n){return i(this,t),{x:e,index:n}}.bind(this)):n&&(e=e[0].values),e},mapToIds:function(t){var e=this;return t.map(function(t){return i(this,e),t.id}.bind(this))},mapToTargetIds:function(t){return t?I(t)?t.concat():[t]:this.mapToIds(this.data.targets)},hasTarget:function(t,e){for(var i,n=this.mapToIds(t),a=0;i=n[a];a++)if(i===e)return!0;return!1},isTargetToShow:function(t){return this.state.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function(t){return this.state.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function(t){var e=this,n=this;return(t||n.data.targets).filter(function(t){return i(this,e),n.isTargetToShow(t.id)}.bind(this))},mapTargetsToUniqueXs:function(t){var e=this,n=this.axis,a=[];return null!=t&&t.length&&(a=K(J(t.map(function(t){var n=this;return i(this,e),t.values.map(function(t){return i(this,n),+t.x}.bind(this))}.bind(this)))),a=null!=n&&n.isTimeSeries()?a.map(function(t){return i(this,e),new Date(+t)}.bind(this)):a.map(Number)),tt(a)},addTargetIds:function(t,e){var n=this,a=this.state;(I(e)?e:[e]).forEach(function(e){i(this,n),a[t].indexOf(e)<0&&a[t].push(e)}.bind(this))},removeTargetIds:function(t,e){var n=this,a=this.state;(I(e)?e:[e]).forEach(function(e){i(this,n);var r=a[t].indexOf(e);r>=0&&a[t].splice(r,1)}.bind(this))},addHiddenTargetIds:function(t){this.addTargetIds("hiddenTargetIds",t)},removeHiddenTargetIds:function(t){this.removeTargetIds("hiddenTargetIds",t)},addHiddenLegendIds:function(t){this.addTargetIds("hiddenLegendIds",t)},removeHiddenLegendIds:function(t){this.removeTargetIds("hiddenLegendIds",t)},getValuesAsIdKeyed:function(t){var e=this,n=this,a=n.state.hasAxis,r={},s=n.isMultipleX(),o=s?n.mapTargetsToUniqueXs(t).map(function(t){return i(this,e),T(t)?t:+t}.bind(this)):null;return t.forEach(function(t){var l=this;i(this,e);var c=[];t.values.filter(function(t){var e=t.value;return i(this,l),_(e)||null===e}.bind(this)).forEach(function(t){i(this,l);var e=t.value;null!==e&&n.isCandlestickType(t)&&(e=I(e)?e.slice(0,4):[e.open,e.high,e.low,e.close]),I(e)?c.push.apply(c,e):D(e)&&"high"in e?c.push.apply(c,Object.values(e)):n.isBubbleZType(t)?c.push(a&&n.getBubbleZData(e,"y")):s?c[n.getIndexByX(t.x,o)]=e:c.push(e)}.bind(this)),r[t.id]=c}.bind(this)),r},checkValueInTargets:function(t,e){for(var i,n=Object.keys(t),a=0;a<n.length;a++){i=t[n[a]].values;for(var r=0;r<i.length;r++)if(e(i[r].value))return!0}return!1},hasMultiTargets:function(){return this.filterTargetsToShow().length>1},hasNegativeValueInTargets:function(t){var e=this;return this.checkValueInTargets(t,function(t){return i(this,e),t<0}.bind(this))},hasPositiveValueInTargets:function(t){var e=this;return this.checkValueInTargets(t,function(t){return i(this,e),t>0}.bind(this))},orderTargets:function(t){var e=[].concat(t),i=this.getSortCompareFn();return i&&e.sort(i),e},getSortCompareFn:function(t){var e=this;void 0===t&&(t=!1);var n,a=this.config.data_order,r=/asc/i.test(a),s=/desc/i.test(a);if(r||s){var o=function(t,n){return i(this,e),t+Math.abs(n.value)}.bind(this);n=function(n,a){i(this,e);var s="values"in n?n.values.reduce(o,0):n.value,l="values"in a?a.values.reduce(o,0):a.value;return t?r?s-l:l-s:r?l-s:s-l}.bind(this)}else y(a)&&(n=a.bind(this.api));return n||null},filterByX:function(t,e){var n=this;return J(t.map(function(t){return i(this,n),t.values}.bind(this))).filter(function(t){return i(this,n),t.x-e==0}.bind(this))},filterRemoveNull:function(t){var e=this;return t.filter(function(t){return i(this,e),_(this.getBaseValue(t))}.bind(this))},filterByXDomain:function(t,e){var n=this;return t.map(function(t){var a=this;return i(this,n),{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return i(this,a),e[0]<=t.x&&t.x<=e[1]}.bind(this))}}.bind(this))},hasDataLabel:function(){var t=this.config.data_labels;return k(t)&&t||L(t)&&P(t)},getDataIndexFromEvent:function(t){var e=this.config,i=this.state,n=i.inputType,a=i.eventReceiver,r=a.coords,s=a.rect,o=e.axis_rotated,l="touch"===n&&t.changedTouches?t.changedTouches[0]:t;return V(r,o?l.clientY-s.top:l.clientX-s.left,0,r.length-1,o)},getDataLabelLength:function(t,e,n){var a=this,r=this,s=[0,0];return r.$el.chart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return i(this,a),r.dataLabelFormat(t.id)(t)}.bind(this)).each((function(t,e){s[e]=1.3*this.getBoundingClientRect()[n]})).remove(),s},isNoneArc:function(t){return this.hasTarget(this.data.targets,t.id)},isArc:function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function(t,e){var i,n=t[e].x,a=[];for(i=e-1;i>=0&&n===t[i].x;i--)a.push(t[i]);for(i=e;i<t.length&&n===t[i].x;i++)a.push(t[i]);return a},findClosestFromTargets:function(t,e){var n=this,a=this,r=t.map(function(t){return i(this,n),a.findClosest(t.values,e)}.bind(this));return a.findClosest(r,e)},findClosest:function(t,e){var n,a=this,r=this,s=r.config,o=r.$el.main,l=t.filter(function(t){return i(this,a),t&&_(t.value)}.bind(this)),c=s.point_sensitivity;return l.filter(function(t){return i(this,a),r.isBarType(t.id)||r.isCandlestickType(t.id)}.bind(this)).forEach(function(t){i(this,a);var e=r.isBarType(t.id)?"."+pt.chartBar+"."+ht.target+r.getTargetSelectorSuffix(t.id)+" ."+pt.bar+"-"+t.index:"."+vt.chartCandlestick+"."+ht.target+r.getTargetSelectorSuffix(t.id)+" ."+vt.candlestick+"-"+t.index+" path";!n&&r.isWithinBar(o.select(e).node())&&(n=t)}.bind(this)),l.filter(function(t){return i(this,a),!r.isBarType(t.id)&&!r.isCandlestickType(t.id)}.bind(this)).forEach(function(t){i(this,a);var s=r.dist(t,e);s<c&&(c=s,n=t)}.bind(this)),n},dist:function(t,e){var i=this,n=i.config.axis_rotated,a=i.scale,r=n?1:0,s=n?0:1,o=i.circleY(t,t.index),l=(a.zoom||a.x)(t.x);return Math.sqrt(Math.pow(l-e[r],2)+Math.pow(o-e[s],2))},convertValuesToStep:function(t){var e=this.axis,i=this.config.line_step_type,n=!!e&&e.isCategorized(),a=I(t)?t.concat():[t];if(!n&&!/step\-(after|before)/.test(i))return t;var r=a[0],s=a[a.length-1],o=r.id,l=r.x;return a.unshift({x:--l,value:r.value,id:o}),n&&"step-after"===i&&a.unshift({x:--l,value:r.value,id:o}),l=s.x,a.push({x:++l,value:s.value,id:o}),n&&"step-before"===i&&a.push({x:++l,value:s.value,id:o}),a},convertValuesToRange:function(t){var e=this,n=I(t)?t.concat():[t],a=[];return n.forEach(function(t){i(this,e);var n=t.x,r=t.id;a.push({x:n,id:r,value:t.value[0]}),a.push({x:n,id:r,value:t.value[2]})}.bind(this)),a},updateDataAttributes:function(t,e){var n=this,a=this.config["data_"+t];return A(e)||(Object.keys(e).forEach(function(t){i(this,n),a[t]=e[t]}.bind(this)),this.redraw({withLegend:!0})),a},getRangedData:function(t,e,i){void 0===e&&(e=""),void 0===i&&(i="areaRange");var n=null==t?void 0:t.value;if(I(n)){var a={areaRange:["high","mid","low"],candlestick:["open","high","low","close","volume"]}[i].indexOf(e);return a>=0&&n?n[a]:void 0}return n?n[e]:n},setRatioForGroupedData:function(t){var e=this,n=this;if(n.config.data_groups.length&&t.some(function(t){return i(this,e),n.isGrouped(t.id)}.bind(this))){var a=function(t){return i(this,e),n.getRatio("index",t,!0)}.bind(this);t.forEach(function(t){i(this,e),"values"in t?t.values.forEach(a):a(t)}.bind(this))}},getRatio:function(t,e,n){var a=this;void 0===n&&(n=!1);var r=this,s=r.config,o=r.state,l=r.api,c=0;if(e&&l.data.shown().length)if(c=e.ratio||e.value,"arc"===t)if(r.pie.padAngle()())c=e.value/r.getTotalDataSum(!0);else{var d=s.gauge_fullCircle?r.getArcLength():-2*r.getStartAngle(),h=r.hasType("gauge")?d:2*Math.PI;c=(e.endAngle-e.startAngle)/h}else if("index"===t){var u=l.data.values.bind(l),g=this.getTotalPerIndex();if(o.hiddenTargetIds.length){var f=u(o.hiddenTargetIds,!1);f.length&&(f=f.reduce(function(t,e){var n=this;return i(this,a),t.map(function(t,a){return i(this,n),(w(t)?t:0)+e[a]}.bind(this))}.bind(this)),g=g.map(function(t,e){return i(this,a),t-f[e]}.bind(this)))}e.ratio=w(e.value)&&g?e.value/g[e.index]:0,c=e.ratio}else if("radar"===t)c=parseFloat(Math.max(e.value,0)+"")/o.current.dataMax*s.radar_size_ratio;else if("bar"===t){var p=r.getYScaleById.bind(r)(e.id).domain().reduce(function(t,e){return i(this,a),e-t}.bind(this));c=0===p?0:Math.abs(e.value)/p}else"treemap"===t&&(c/=r.getTotalDataSum(!0));return n&&c?100*c:c},updateDataIndexByX:function(t){var e=this,n=t.reduce(function(t,n,a){return i(this,e),t[+n.x]=a,t}.bind(this),{});this.data.targets.forEach(function(t){var a=this;i(this,e),t.values.forEach(function(t,e){i(this,a);var r=n[+t.x];void 0===r&&(r=e),t.index=r}.bind(this))}.bind(this))},isBubbleZType:function(t){return this.isBubbleType(t)&&(D(t.value)&&("z"in t.value||"y"in t.value)||I(t.value)&&2===t.value.length)},isBarRangeType:function(t){var e=this,n=t.value;return this.isBarType(t)&&I(n)&&2===n.length&&n.every(function(t){return i(this,e),w(t)}.bind(this))},getDataById:function(t){var e,i=this.cache.get(t)||this.api.data(t);return null!=(e=null==i?void 0:i[0])?e:i}},Se={load:function(t,e){var n,a=this,r=this,s=e.append,o=t;o&&(e.filter&&(o=o.filter(e.filter)),(e.type||e.types)&&o.forEach(function(t){var n;i(this,a);var s=(null==(n=e.types)?void 0:n[t.id])||e.type;r.setTargetType(t.id,s)}.bind(this)),r.data.targets.forEach(function(t){i(this,a);for(var e=0;e<o.length;e++)if(t.id===o[e].id){t.values=s?t.values.concat(o[e].values):o[e].values,o.splice(e,1);break}}.bind(this)),r.data.targets=r.data.targets.concat(o)),r.updateTargets(r.data.targets),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),r.updateTypesElements(),null==(n=e.done)||n.call(r.api)},loadFromArgs:function(t){var e=this,n=this;n.config&&(n.cache.reset(),n.convertData(t,function(a){i(this,e);var r=t.data||a;t.append&&(r.__append__=!0),r&&n.load(n.convertDataToTargets(r),t)}.bind(this)))},unload:function(t,e){var n=this,a=this,r=a.state,s=a.$el,o=a.$T,l=e,c=t;(a.cache.reset(),l||(l=function(){i(this,n)}.bind(this)),(c=c.filter(function(t){return i(this,n),a.hasTarget(a.data.targets,t)}.bind(this)))&&0!==c.length)?(o(s.svg.selectAll(c.map(function(t){return i(this,n),a.selectorTarget(t)}.bind(this)))).style("opacity","0").remove().call(X,l),c.forEach(function(t){var e=this;i(this,n),r.withoutFadeIn[t]=!1,s.legend&&s.legend.selectAll("."+yt.legendItem+a.getTargetSelectorSuffix(t)).remove(),a.data.targets=a.data.targets.filter(function(n){return i(this,e),n.id!==t}.bind(this))}.bind(this)),r.hasTreemap&&a.updateTargetsForTreemap(a.data.targets),a.updateTypesElements()):l()}},ke=p(7),Ce={selectRectForSingle:function(t,e,n){var a=this,r=this,s=r.config,o=r.$el,l=o.main,c=o.circle,d=s.data_selection_enabled,h=s.data_selection_grouped,u=s.data_selection_isselectable,g=s.tooltip_grouped,f=r.getAllValuesOnIndex(n);if(!g||(r.showTooltip(f,t),null==r.showGridFocus||r.showGridFocus(f),d&&!h)){c||l.selectAll("."+ht.EXPANDED+":not(."+Ot.shape+"-"+n+")").classed(ht.EXPANDED,!1);var p=l.selectAll("."+Ot.shape+"-"+n).classed(ht.EXPANDED,!0).style("cursor",u?"pointer":null).filter((function(t){return r.isWithinShape(this,t)}));p.empty()&&!g&&(null==r.hideGridFocus||r.hideGridFocus(),r.hideTooltip(),h||r.setExpand(n)),p.call(function(s){var o=this;i(this,a);var l=s.data();d&&(h||null!=u&&u.bind(r.api)(l))&&e.style("cursor","pointer"),g||(r.showTooltip(l,t),null==r.showGridFocus||r.showGridFocus(l),null==r.unexpandCircles||r.unexpandCircles(),s.each(function(t){return i(this,o),r.setExpand(n,t.id)}.bind(this)))}.bind(this))}},setExpand:function(t,e,i){var n=this,a=n.config;n.$el.circle&&a.point_focus_expand_enabled&&n.expandCircles(t,e,i),n.expandBarTypeShapes(!0,t,e,i)},expandBarTypeShapes:function(t,e,n,a){var r=this;void 0===t&&(t=!0);var s=this;["bar","candlestick"].filter(function(t){return i(this,r),s.$el[t]}.bind(this)).forEach(function(o){i(this,r),a&&s.$el[o].classed(ht.EXPANDED,!1),s.getShapeByIndex(o,e,n).classed(ht.EXPANDED,t)}.bind(this))},setOverOut:function(t,e){var n=this,r=this,s=r.config,o=r.state,l=o.hasRadar,c=o.hasTreemap,d=r.$el.main,h=D(e);if(h||-1!==e){var u=s[t?"data_onover":"data_onout"].bind(r.api);if(s.color_onover&&r.setOverColor(t,e,h),h){var g=c?zt.treemap:ut.arc;u(e,d.select("."+g+r.getTargetSelectorSuffix(e.id)).node())}else if(s.tooltip_grouped)t&&(s.point_focus_only&&l?r.showCircleFocus(r.getAllValuesOnIndex(e,!0)):r.setExpand(e,null,!0)),r.isMultipleX()||d.selectAll("."+Ot.shape+"-"+e).each((function(t){u(t,this)}));else{var f=r.cache.get(se)||[],p=d.selectAll("."+Ot.shape+"-"+e).filter((function(t){return r.isWithinShape(this,t)})),v=p.filter((function(){var t=this;return f.every(function(e){return i(this,t),e!==this}.bind(this))}));if(!t||p.empty()||f.length===v.size()&&v.nodes().every(function(t,e){return i(this,n),t!==f[e]}.bind(this)))for(;f.length;){var x=f.pop();s.data_onout.bind(r.api)((0,a.select)(x).datum(),x)}v.each((function(){t&&(u((0,a.select)(this).datum(),this),f.push(this))})),r.cache.add(se,f)}}},callOverOutForTouch:function(t){var e=this,i=e.cache.get(oe);(D(t)&&i?t.id!==i.id:t!==i)&&((i||w(i))&&e.setOverOut(!1,i),(t||w(t))&&e.setOverOut(!0,t),e.cache.add(oe,t))},getDraggableSelection:function(){var t=this,e=this,n=e.config,a=e.state;return n.interaction_enabled&&n.data_selection_draggable&&e.drag?(0,ke.drag)().on("drag",(function(t){a.event=t,e.drag(N(t,this))})).on("start",(function(t){a.event=t,e.dragstart(N(t,this))})).on("end",function(n){i(this,t),a.event=n,e.dragend()}.bind(this)):function(){i(this,t)}.bind(this)},dispatchEvent:function(t,e,n){var a,r=this,s=this,o=s.config,l=s.state,c=l.eventReceiver,d=l.hasAxis,h=l.hasRadar,u=l.hasTreemap,g=s.$el,f=g.eventRect,p=g.arcs,v=g.radar,x=g.treemap,b=null==(a=u&&c.rect||h&&v.axes.select("."+ft.axis+"-"+e+" text")||f||(null==p?void 0:p.selectAll("."+ht.target+" path").filter(function(t,n){return i(this,r),n===e}.bind(this))))?void 0:a.node();if(b){var m=s.isMultipleX(),_=b.getBoundingClientRect(),y=_.width,T=_.left,w=_.top;if(d&&!h&&!m){var A=c.coords[e];y=A.w,T+=A.x,w+=A.y}var S=T+(n?n[0]:0)+(m||o.axis_rotated?0:y/2),k=w+(n?n[1]:0);nt[/^(mouse|click)/.test(t)?"mouse":"touch"](u?x.node():b,t,{screenX:S,screenY:k,clientX:S,clientY:k})}},setDragStatus:function(t){this.state.dragging=t},unbindZoomEvent:function(){var t=this.$el,e=t.eventRect,i=t.zoomResetBtn;null==e||e.on(".zoom wheel.zoom .drag",null),null==i||i.on("click",null).style("display","none")},unbindAllEvents:function(){var t=this,e=this,n=e.$el,a=n.arcs,r=n.eventRect,s=n.legend,o=n.region,l=n.svg,c=n.treemap,d=e.brush;[l,r,null==o?void 0:o.list,null==d?void 0:d.getSelection(),null==a?void 0:a.selectAll("path"),null==s?void 0:s.selectAll("g"),c].forEach(function(e){return i(this,t),null==e?void 0:e.on("wheel click mouseover mousemove mouseout touchstart touchmove touchend touchstart.eventRect touchmove.eventRect touchend.eventRect .brush .drag .zoom wheel.zoom dblclick.zoom",null)}.bind(this)),null==e.unbindZoomEvent||e.unbindZoomEvent()}},Re={generateClass:function(t,e){return" "+t+" "+(t+this.getTargetSelectorSuffix(e))},getClass:function(t,e){var n=this,a=/s$/.test(t),r=/^(area|arc|line|treemap)s?$/.test(t),s=a?"id":"index";return function(o){i(this,n);var l=o.data||o;return((e?this.generateClass(Xt[a?"shapes":"shape"],l[s]):"")+this.generateClass(Xt[t],l[r?"id":s])).trim()}.bind(this)},getChartClass:function(t){var e=this;return function(n){return i(this,e),Xt["chart"+t]+this.classTarget((n.data?n.data:n).id)}.bind(this)},generateExtraLineClass:function(){var t=this.config.line_classes||[],e=[];return function(i){var n,a=i.id||(null==(n=i.data)?void 0:n.id)||i;return e.indexOf(a)<0&&e.push(a),t[e.indexOf(a)%t.length]}},classRegion:function(t,e){return this.generateClass(Xt.region,e)+" "+("class"in t?t.class:"")},classTarget:function(t){var e=this.config.data_classes[t],i="";return e&&(i=" "+Xt.target+"-"+e),this.generateClass(Xt.target,t)+i},classFocus:function(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function(t){return" "+(this.state.focusedTargetIds.indexOf(t.id)>=0?Xt.focused:"")},classDefocused:function(t){return" "+(this.state.defocusedTargetIds.indexOf(t.id)>=0?Xt.defocused:"")},getTargetSelectorSuffix:function(t){return(t||0===t?"-"+t:"").replace(/([\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\])/g,"-")},selectorTarget:function(t,e,i){void 0===e&&(e=""),void 0===i&&(i="");var n=this.getTargetSelectorSuffix(t);return e+"."+(Xt.target+n)+" "+i+", "+e+"."+(Xt.circles+n)+" "+i},selectorTargets:function(t,e){var n=this,a=t||[];return a.length?a.map(function(t){return i(this,n),this.selectorTarget(t,e)}.bind(this)):null},selectorLegend:function(t){return"."+(Xt.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function(t){var e=this;return null!=t&&t.length?t.map(function(t){return i(this,e),this.selectorLegend(t)}.bind(this)):null}},Ee=p(6),Le=function(t,e,n){i(this,undefined);var r=(0,a.select)(t.cloneNode(!0));return r.attr("id",n).insert("rect",":first-child").attr("width",r.attr("width")).attr("height",r.attr("height")).style("fill",e),{id:n,node:r.node()}}.bind(void 0);var Oe=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Pe={generateColor:function(){var t=this,e=this,n=e.$el,a=e.config,r=a.data_colors,s=a.data_color,l=[],c=P(a.color_pattern)?a.color_pattern:(0,Ee.scaleOrdinal)(function(t){var e=this,n=te,a=o.body,r=a[n];if(!r){var s=t.classed(bt.colorPattern,!0).style("background-image");t.classed(bt.colorPattern,!1),s.indexOf(";")>-1&&(r=s.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map(function(t){return i(this,e),t.trim().replace(/[\"'\s]/g,"")}.bind(this)).filter(Boolean),a[n]=r)}return r}(n.chart)||Oe).range(),d=c;if(y(a.color_tiles)){var h=a.color_tiles.bind(e.api)(),u=c.map(function(n,a){i(this,t);var r=n.replace(/[#\(\)\s,]/g,""),s=e.state.datetimeId+"-pattern-"+r+"-"+a;return Le(h[a%h.length],n,s)}.bind(this));c=u.map(function(e){return i(this,t),"url(#"+e.id+")"}.bind(this)),e.patterns=u}return function(t){var i,n,o=t.id||(null==(i=t.data)?void 0:i.id)||t,h=e.isTypeOf(o,["line","spline","step"])||!a.data_types[o];return y(r[o])?n=r[o].bind(e.api)(t):r[o]?n=r[o]:(l.indexOf(o)<0&&l.push(o),n=h?d[l.indexOf(o)%d.length]:c[l.indexOf(o)%c.length],r[o]=n),y(s)?s.bind(e.api)(n,t):n}},generateLevelColor:function(){var t=this.config,e=t.color_pattern,i=t.color_threshold,n="value"===i.unit,a=i.max||100,r=i.values&&i.values.length?i.values:[];return P(i)?function(t){for(var i=n?t:100*t/a,s=e[e.length-1],o=0,l=r.length;o<l;o++)if(i<=r[o]){s=e[o];break}return s}:null},generateDataLabelBackgroundColorFilter:function(t){var e=this,n=this,a=n.$el,r=n.config,s=n.state,o=t||r.data_labels_backgroundColors;if(o){var l=[];T(o)?l.push(""):D(o)&&(l=Object.keys(o)),l.forEach(function(r){i(this,e);var l=s.datetimeId+"-labels-bg"+n.getTargetSelectorSuffix(r)+(t?n.getTargetSelectorSuffix(t):"");a.defs.append("filter").attr("x","0").attr("y","0").attr("width","1").attr("height","1").attr("id",l).html('<feFlood flood-color="'+(""===r?o:o[r])+'" /><feComposite in="SourceGraphic"/>')}.bind(this))}},getGradienColortUrl:function(t){return"url(#"+this.state.datetimeId+"-gradient"+this.getTargetSelectorSuffix(t)+")"},updateLinearGradient:function(){var t=this,e=this,n=e.config,a=e.data.targets,r=e.state.datetimeId,s=e.$el.defs;a.forEach(function(a){var o=this;i(this,t);var l=r+"-gradient"+e.getTargetSelectorSuffix(a.id),c=e.isAreaType(a)?"area":e.isBarType(a)&&"bar",d=n.axis_rotated;if(c&&s.select("#"+l).empty()){var h=e.color(a),u=n[c+"_linearGradient"],g=u.x,f=void 0===g?d?[1,0]:[0,0]:g,p=u.y,v=void 0===p?d?[0,0]:[0,1]:p,x=u.stops,b=void 0===x?[[0,h,1],[1,h,0]]:x,m=s.append("linearGradient").attr("id",""+l).attr("x1",f[0]).attr("x2",f[1]).attr("y1",v[0]).attr("y2",v[1]);b.forEach(function(t){i(this,o);var n=y(t[1])?t[1].bind(e.api)(a.id):t[1];m.append("stop").attr("offset",t[0]).attr("stop-color",n||h).attr("stop-opacity",t[2])}.bind(this))}}.bind(this))},setOverColor:function(t,e){var n=this,a=this,r=a.config,s=a.$el.main,o=r.color_onover,l=t?o:a.color;D(l)?l=function(t){var e=t.id;return i(this,n),e in o?o[e]:a.color(e)}.bind(this):T(l)?l=function(){return i(this,n),o}.bind(this):y(o)&&(l=l.bind(a.api)),s.selectAll(D(e)?"."+ut.arc+a.getTargetSelectorSuffix(e.id):"."+Ot.shape+"-"+e).style("fill",l)}},Ie={getYDomainMinMax:function(t,e){var n=this,a=this,r=a.axis,s=a.config,o="min"===e,l=s.data_groups,c=a.mapToIds(t),d=a.getValuesAsIdKeyed(t);if(l.length>0){var h=a["has"+(o?"Negative":"Positive")+"ValueInTargets"](t);l.forEach(function(t){var e=this;i(this,n);var a=t.filter(function(t){return i(this,e),c.indexOf(t)>=0}.bind(this));if(a.length){var s=a[0],l=r.getId(s);h&&d[s]&&(d[s]=d[s].map(function(t){return i(this,e),(o?t<0:t>0)?t:0}.bind(this))),a.filter(function(t,n){return i(this,e),n>0}.bind(this)).forEach(function(t){var n=this;if(i(this,e),d[t]){var a=r.getId(t);d[t].forEach(function(t,e){i(this,n);var r=+t;a!==l||h&&(o?r>0:r<0)||(d[s][e]+=r)}.bind(this))}}.bind(this))}}.bind(this))}return et(e,Object.keys(d).map(function(t){return i(this,n),et(e,d[t])}.bind(this)))},isHiddenTargetWithYDomain:function(t){var e=this,n=this;return n.state.hiddenTargetIds.some(function(a){return i(this,e),n.axis.getId(a)===t}.bind(this))},getYDomain:function(t,e,n){var a=this,r=this,s=r.axis,o=r.config,c=r.scale,h="axis_"+e;if(r.isStackNormalized())return[0,100];var u=(null==c?void 0:c[e])&&"log"===c[e].type,g=t.filter(function(t){return i(this,a),s.getId(t.id)===e}.bind(this)),f=n?r.filterByXDomain(g,n):g;if(0===f.length)return r.isHiddenTargetWithYDomain(e)?c[e].domain():"y2"===e?c.y.domain():r.getYDomain(t,"y2",n);var p=o[h+"_min"],v=o[h+"_max"],x=o[h+"_center"],b=o[h+"_inverted"],m=r.hasDataLabel()&&o.axis_rotated,y=r.hasDataLabel()&&!o.axis_rotated,T=r.getYDomainMinMax(f,"min"),w=r.getYDomainMinMax(f,"max"),A=[l.BAR,l.BUBBLE,l.SCATTER].concat(d.Line).some(function(t){i(this,a);var e=t.indexOf("area")>-1?"area":t;return r.hasType(t,f,!0)&&o[e+"_zerobased"]}.bind(this));T=_(p)?p:_(v)?T<=v?T:v-10:T,w=_(v)?v:_(p)?p<=w?w:p+10:w,isNaN(T)&&(T=0),isNaN(w)&&(w=T),T===w&&(T<0?w=0:T=0);var k=T>=0&&w>=0,C=T<=0&&w<=0;(_(p)&&k||_(v)&&C)&&(A=!1),A&&(k&&(T=0),C&&(w=0));var R=Math.abs(w-T),L={top:.1*R,bottom:.1*R};if(S(x)){var O=Math.max(Math.abs(T),Math.abs(w));w=x+O,T=x-O}if(m){var I=E(c.y.range()),D=r.getDataLabelLength(T,w,"width").map(function(t){return i(this,a),t/I}.bind(this));["bottom","top"].forEach(function(t,e){i(this,a),L[t]+=R*(D[e]/(1-D[0]-D[1]))}.bind(this))}else if(y){var z=r.getDataLabelLength(T,w,"height");["bottom","top"].forEach(function(t,e){i(this,a),L[t]+=r.convertPixelToScale("y",z[e],R)}.bind(this))}L=r.getResettedPadding(L);var M=o[h+"_padding"];P(M)&&["bottom","top"].forEach(function(t){i(this,a),L[t]=s.getPadding(M,t,L[t],R)}.bind(this)),A&&(k&&(L.bottom=T),C&&(L.top=-w));var X=u?[T,w].map(function(t){return i(this,a),t<0?0:t}.bind(this)):[T-L.bottom,w+L.top];return b?X.reverse():X},getXDomainMinMax:function(t,e){var n,a=this,r=this.config["axis_x_"+e],s=et(e,t.map(function(t){var n=this;return i(this,a),et(e,t.values.map(function(t){return i(this,n),t.x}.bind(this)))}.bind(this))),o=D(r)?r.value:r;return o=S(o)&&null!=(n=this.axis)&&n.isTimeSeries()?rt.bind(this)(o):o,D(r)&&r.fit&&("min"===e&&o<s||"max"===e&&o>s)&&(o=void 0),S(o)?o:s},getXDomainPadding:function(t,e){var i,n=this,a=n.axis,r=n.config.axis_x_padding,s=a.isTimeSeries()&&e,o=E(t);if(a.isCategorized()||s)i=0;else if(n.hasType("bar")){var l=n.getMaxDataCount();i=l>1?o/(l-1)/2:.5}else i=n.getResettedPadding(.01*o);var c=w(r)?{left:r,right:r}:r,d=c.left,h=void 0===d?i:d,u=c.right,g=void 0===u?i:u;if("px"===r.unit){var f=Math.abs(o+.2*o);h=a.getPadding(r,"left",i,f),g=a.getPadding(r,"right",i,f)}else{var p=o+h+g;if(s&&p){var v=o/e/p;h=h/p/v,g=g/p/v}}return{left:h,right:g}},getXDomain:function(t){var e=this,i=e.axis,n=e.scale.x,a=[e.getXDomainMinMax(t,"min"),e.getXDomainMinMax(t,"max")],r=a[0],s=void 0===r?0:r,o=a[1],l=void 0===o?0:o;if("log"!==n.type){var c=i.isCategorized(),d=i.isTimeSeries(),h=e.getXDomainPadding(a),u=a[0],g=a[1];u-g!=0||c||(d?(u=new Date(.5*u.getTime()),g=new Date(1.5*g.getTime())):(u=0===u?1:.5*u,g=0===g?-1:1.5*g)),(u||0===u)&&(s=d?new Date(u.getTime()-h.left):u-h.left),(g||0===g)&&(l=d?new Date(g.getTime()+h.right):g+h.right)}return[s,l]},updateXDomain:function(t,e,i,n,a){var r,s=this,o=s.config,l=s.org,c=s.scale,d=c.x,h=c.subX,u=o.zoom_enabled;i&&(d.domain(a||tt(s.getXDomain(t))),l.xDomain=d.domain(),u&&s.zoom.updateScaleExtent(),h.domain(d.domain()),null==(r=s.brush)||r.scale(h));if(e){var g=a||!s.brush||H(s)?l.xDomain:G(s).map(h.invert);d.domain(g),u&&s.zoom.updateScaleExtent()}return n&&d.domain(s.trimXDomain(d.orgDomain())),d.domain()},trimXDomain:function(t){var e=this.getZoomDomain(),i=e[0],n=e[1];return t[0]<=i&&(t[1]=+t[1]+(i-t[0]),t[0]=i),n<=t[1]&&(t[0]=+t[0]-(t[1]-n),t[1]=n),t},getZoomDomain:function(){var t=this.config,e=this.org.xDomain,i=e[0],n=e[1];return S(t.zoom_x_min)&&(i=et("min",[i,t.zoom_x_min])),S(t.zoom_x_max)&&(n=et("max",[n,t.zoom_x_max])),[i,n]},convertPixelToScale:function(t,e,i){var n=this.config,a=this.state,r=n.axis_rotated;return i*(e/a["x"===t?r?"height":"width":r?"width":"height"])}};function De(t,e,i){var n=t.config,a="axis_"+e+"_tick_format";return(n[a]?n[a]:t.defaultValueFormat).call(t.api,i)}var ze={yFormat:function(t){return De(this,"y",t)},y2Format:function(t){return De(this,"y2",t)},getDefaultValueFormat:function(){var t=this,e=t.defaultArcValueFormat,i=t.yFormat,n=t.y2Format,a=t.hasArcType(null,["gauge","polar","radar"]);return function(r,s,o){return(a?e:t.axis&&"y2"===t.axis.getId(o)?n:i).call(t,r,s)}},defaultValueFormat:function(t){return _(t)?+t:""},defaultArcValueFormat:function(t,e){return(100*e).toFixed(1)+"%"},defaultPolarValueFormat:function(t){return""+t},dataLabelFormat:function(t){var e=this,n=this.config.data_labels,a=function(t){return i(this,e),_(t)?+t:""}.bind(this),r=a;return y(n.format)?r=n.format:L(n.format)&&(r=n.format[t]?!0===n.format[t]?a:n.format[t]:function(){return i(this,e),""}.bind(this)),r.bind(this.api)}};function Me(t){var e=this,i=e.getDataById(t);return e.levelColor?e.levelColor(i.values[0].value):e.color(i)}var Xe={initLegend:function(){var t=this,e=t.config,i=t.$el;t.legendItemTextBox={},t.state.legendHasRendered=!1,e.legend_show?(e.legend_contents_bindto||(i.legend=t.$el.svg.append("g").classed(yt.legend,!0).attr("transform",t.getTranslate("legend"))),t.updateLegend()):t.state.hiddenLegendIds=t.mapToIds(t.data.targets)},updateLegend:function(t,e,i){var n,a=this,r=a.config,s=a.state,o=a.scale,l=a.$el,c=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};c.withTransition=z(c,"withTransition",!0),c.withTransitionForTransform=z(c,"withTransitionForTransform",!0),r.legend_contents_bindto&&r.legend_contents_template?a.updateLegendTemplate():s.hasTreemap||a.updateLegendElement(t||a.mapToIds(a.data.targets),c,i),null==(n=l.legend)||n.selectAll("."+yt.legendItem).classed(yt.legendItemHidden,(function(t){var e=!a.isTargetToShow(t);return e&&(this.style.opacity=null),e})),a.updateScales(!1,!o.zoom),a.updateSvgSize(),a.transformAll(c.withTransitionForTransform,i),s.legendHasRendered=!0},updateLegendTemplate:function(){var t=this,e=this,n=e.config,r=e.$el,s=(0,a.select)(n.legend_contents_bindto),o=n.legend_contents_template;if(!s.empty()){var l=e.mapToIds(e.data.targets),c=[],d="";l.forEach(function(n){i(this,t);var a=y(o)?o.bind(e.api)(n,e.color(n),e.api.data(n)[0].values):at(o,{COLOR:e.color(n),TITLE:n});a&&(c.push(n),d+=a)}.bind(this));var h=s.html(d).selectAll((function(){return this.childNodes})).data(c);e.setLegendItem(h),r.legend=s}},updateSizeForLegend:function(t){var e=this,i=e.config,n=e.state,a=n.isLegendTop,r=n.isLegendLeft,s=n.isLegendRight,o=n.isLegendInset,l=n.current,c=t.width,d=t.height,h={top:a?e.getCurrentPaddingTop()+i.legend_inset_y+5.5:l.height-d-e.getCurrentPaddingBottom()-i.legend_inset_y,left:r?e.getCurrentPaddingLeft()+i.legend_inset_x+.5:l.width-c-e.getCurrentPaddingRight()-i.legend_inset_x+.5};e.state.margin3={top:s?0:o?h.top:l.height-d,right:NaN,bottom:0,left:s?l.width-c:o?h.left:0}},transformLegend:function(t){var e=this,i=e.$el.legend;(0,e.$T)(i,t).attr("transform",e.getTranslate("legend"))},updateLegendStep:function(t){this.state.legendStep=t},updateLegendItemWidth:function(t){this.state.legendItemWidth=t},updateLegendItemHeight:function(t){this.state.legendItemHeight=t},updateLegendItemColor:function(t,e){var i=this.$el.legend;i&&i.select("."+yt.legendItem+"-"+t+" line").style("stroke",e)},getLegendWidth:function(){var t=this.state,e=t.current.width,i=t.isLegendRight,n=t.isLegendInset,a=t.legendItemWidth,r=t.legendStep;return this.config.legend_show?i||n?a*(r+1):e:0},getLegendHeight:function(){var t=this.state,e=t.current,i=t.isLegendRight,n=t.legendItemHeight,a=t.legendStep;return this.config.legend_show?i?e.height:Math.max(20,n)*(a+1):0},opacityForUnfocusedLegend:function(t){return t.classed(yt.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(t,e){var n=this,r=this,s=r.$el.legend,o=r.$T,l=r.mapToTargetIds(t);s&&o(s.selectAll("."+yt.legendItem).filter(function(t){return i(this,n),l.indexOf(t)>=0}.bind(this)).classed(At.legendItemFocused,e)).style("opacity",(function(){return e?null:r.opacityForUnfocusedLegend.call(r,(0,a.select)(this))}))},revertLegend:function(){var t=this.$el.legend,e=this.$T;t&&e(t.selectAll("."+yt.legendItem).classed(At.legendItemFocused,!1)).style("opacity",null)},showLegend:function(t){var e=this,i=e.config,n=e.$el,a=e.$T;i.legend_show||(i.legend_show=!0,n.legend?n.legend.style("visibility",null):e.initLegend(),e.state.legendHasRendered||e.updateLegend()),e.removeHiddenLegendIds(t),a(n.legend.selectAll(e.selectorLegends(t)).style("visibility",null)).style("opacity",null)},hideLegend:function(t){var e=this,i=e.config,n=e.$el.legend;i.legend_show&&O(t)&&(i.legend_show=!1,n.style("visibility","hidden")),e.addHiddenLegendIds(t),n.selectAll(e.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},getLegendItemTextBox:function(t,e){var i,n=this,a=n.cache,r=n.state,s=ae;return t&&((i=!r.redrawing&&a.get(s)||{})[t]||(i[t]=n.getTextRect(e,yt.legendItem),a.add(s,i)),i=i[t]),i},setLegendItem:function(t){var e=this,n=this,r=n.$el,s=n.api,o=n.config,l=n.state,c="touch"===l.inputType,d=n.hasType("gauge"),h=o.boost_useCssRule;t.attr("class",(function(t){var e=(0,a.select)(this);return(!e.empty()&&e.attr("class")||"")+n.generateClass(yt.legendItem,t)})).style("visibility",function(t){return i(this,e),n.isLegendToShow(t)?null:"hidden"}.bind(this)),o.interaction_enabled&&(h&&[["."+yt.legendItem,"cursor:pointer"],["."+yt.legendItem+" text","pointer-events:none"],["."+yt.legendItemPoint+" text","pointer-events:none"],["."+yt.legendItemTile,"pointer-events:none"],["."+yt.legendItemEvent,"fill-opacity:0"]].forEach(function(t){i(this,e);var a=t[0],s=t[1];n.setCssRule(!1,a,[s])(r.legend)}.bind(this)),t.style("cursor",n.getStylePropValue("pointer")).on("click",(function(t,e){M(o.legend_item_onclick,s,e)||(t.altKey?(s.hide(),s.show(e)):(s.toggle(e),(0,a.select)(this).classed(At.legendItemFocused,!1))),c&&n.hideTooltip()})),c||t.on("mouseout",(function(t,e){M(o.legend_item_onout,s,e)||((0,a.select)(this).classed(At.legendItemFocused,!1),d&&n.undoMarkOverlapped(n,"."+_t.gaugeValue),n.api.revert())})).on("mouseover",(function(t,e){M(o.legend_item_onover,s,e)||((0,a.select)(this).classed(At.legendItemFocused,!0),d&&n.markOverlapped(e,n,"."+_t.gaugeValue),!l.transiting&&n.isTargetToShow(e)&&s.focus(e))})))},updateLegendElement:function(t,e){var n,a,r,s=this,o=this,l=o.config,c=o.state,d=o.$el.legend,h=o.$T,u="circle"!==l.legend_item_tile_type,g=l.legend_item_tile_r,f={width:u?l.legend_item_tile_width:2*g,height:u?l.legend_item_tile_height:2*g},p={padding:{top:4,right:10},max:{width:0,height:0},posMin:10,step:0,tileWidth:f.width+5,totalLength:0},v={offsets:{},widths:{},heights:{},margins:[0],steps:{}},x=t.filter(function(t){return i(this,s),!S(l.data_names[t])||null!==l.data_names[t]}.bind(this)),b=e.withTransition,m=o.getUpdateLegendPositions(x,p,v);c.isLegendInset&&(p.step=l.legend_inset_step?l.legend_inset_step:x.length,o.updateLegendStep(p.step)),c.isLegendRight?(n=function(t){return i(this,s),p.max.width*v.steps[t]}.bind(this),a=function(t){return i(this,s),v.margins[v.steps[t]]+v.offsets[t]}.bind(this)):c.isLegendInset?(n=function(t){return i(this,s),p.max.width*v.steps[t]+10}.bind(this),a=function(t){return i(this,s),v.margins[v.steps[t]]+v.offsets[t]}.bind(this)):(n=function(t){return i(this,s),v.margins[v.steps[t]]+v.offsets[t]}.bind(this),a=function(t){return i(this,s),p.max.height*v.steps[t]}.bind(this));var _={xText:function(t,e){return i(this,s),n(t,e)+4+f.width}.bind(this),xRect:function(t,e){return i(this,s),n(t,e)}.bind(this),x1Tile:function(t,e){return i(this,s),n(t,e)-2}.bind(this),x2Tile:function(t,e){return i(this,s),n(t,e)-2+f.width}.bind(this),yText:function(t,e){return i(this,s),a(t,e)+9}.bind(this),yRect:function(t,e){return i(this,s),a(t,e)-5}.bind(this),yTile:function(t,e){return i(this,s),a(t,e)+4}.bind(this)};o.generateLegendItem(x,f,m,_),r=d.select("."+yt.legendBackground+" rect"),c.isLegendInset&&p.max.width>0&&0===r.size()&&(r=d.insert("g","."+yt.legendItem).attr("class",yt.legendBackground).append("rect")),h(d.selectAll("text").data(x).text(function(t){return i(this,s),S(l.data_names[t])?l.data_names[t]:t}.bind(this)).each((function(t,e){m(this,t,e)})),b).attr("x",_.xText).attr("y",_.yText),h(d.selectAll("rect."+yt.legendItemEvent).data(x),b).attr("width",function(t){return i(this,s),v.widths[t]}.bind(this)).attr("height",function(t){return i(this,s),v.heights[t]}.bind(this)).attr("x",_.xRect).attr("y",_.yRect),o.updateLegendItemPos(x,b,_),r&&h(r,b).attr("height",o.getLegendHeight()-12).attr("width",p.max.width*(p.step+1)+10),o.updateLegendItemWidth(p.max.width),o.updateLegendItemHeight(p.max.height),o.updateLegendStep(p.step)},getUpdateLegendPositions:function(t,e,n){var a=this,r=a.config,s=a.state,o=s.isLegendRight||s.isLegendInset;return function(l,c,d){var h,u=this,g=d===t.length-1,f=a.getLegendItemTextBox(c,l),p=f.width+e.tileWidth+(g&&!o?0:e.padding.right)+r.legend_padding,v=f.height+e.padding.top,x=o?v:p,b=o?a.getLegendHeight():a.getLegendWidth(),m=function(t,i){i||(h=(b-e.totalLength-x)/2)<e.posMin&&(h=(b-x)/2,e.totalLength=0,e.step++),n.steps[t]=e.step,n.margins[e.step]=s.isLegendInset?10:h,n.offsets[t]=e.totalLength,e.totalLength+=x};if(0===d&&(e.totalLength=0,e.step=0,e.max.width=0,e.max.height=0),r.legend_show&&!a.isLegendToShow(c))return n.widths[c]=0,n.heights[c]=0,n.steps[c]=0,void(n.offsets[c]=0);n.widths[c]=p,n.heights[c]=v,(!e.max.width||p>=e.max.width)&&(e.max.width=p),(!e.max.height||v>=e.max.height)&&(e.max.height=v);var _=o?e.max.height:e.max.width;r.legend_equally?(Object.keys(n.widths).forEach(function(t){return i(this,u),n.widths[t]=e.max.width}.bind(this)),Object.keys(n.heights).forEach(function(t){return i(this,u),n.heights[t]=e.max.height}.bind(this)),(h=(b-_*t.length)/2)<e.posMin?(e.totalLength=0,e.step=0,t.forEach(function(t){return i(this,u),m(t)}.bind(this))):m(c,!0)):m(c)}},generateLegendItem:function(t,e,n,r){var s=this,l=this,c=l.config,d=l.state,h=l.$el.legend,u=c.legend_usePoint,g=c.legend_item_tile_r,f=c.legend_item_tile_type,p="circle"!==f,v=d.isLegendRight||d.isLegendInset,x=h.selectAll("."+yt.legendItem).data(t).enter().append("g");if(l.setLegendItem(x),x.append("text").text(function(t){return i(this,s),S(c.data_names[t])?c.data_names[t]:t}.bind(this)).each((function(t,e){n(this,t,e)})).style("pointer-events",l.getStylePropValue("none")).attr("x",v?r.xText:-200).attr("y",v?-200:r.yText),x.append("rect").attr("class",yt.legendItemEvent).style("fill-opacity",l.getStylePropValue("0")).attr("x",v?r.xRect:-200).attr("y",v?-200:r.yRect),u){var b=[];x.append(function(t){i(this,s);var e=P(c.point_pattern)?c.point_pattern:[c.point_type];-1===b.indexOf(t)&&b.push(t);var n=e[b.indexOf(t)%e.length];return"rectangle"===n&&(n="rect"),o.createElementNS(a.namespaces.svg,"hasValidPointType"in l&&l.hasValidPointType(n)?n:"use")}.bind(this)).attr("class",yt.legendItemPoint).style("fill",Me.bind(l)).style("pointer-events",l.getStylePropValue("none")).attr("href",function(t,e,n){i(this,s);var a=n[e].nodeName.toLowerCase(),r=l.getTargetSelectorSuffix(t);return"use"===a?"#"+d.datetimeId+"-point"+r:void 0}.bind(this))}else x.append(p?"line":f).attr("class",yt.legendItemTile).style("stroke",Me.bind(l)).style("pointer-events",l.getStylePropValue("none")).call(function(t){i(this,s),"circle"===f?t.attr("r",g).style("fill",Me.bind(l)).attr("cx",v?r.x2Tile:-200).attr("cy",v?-200:r.yTile):p&&t.attr("stroke-width",e.height).attr("x1",v?r.x1Tile:-200).attr("y1",v?-200:r.yTile).attr("x2",v?r.x2Tile:-200).attr("y2",v?-200:r.yTile)}.bind(this))},updateLegendItemPos:function(t,e,n){var r=this,s=this,o=s.config,l=s.$el.legend,c=s.$T,d=o.legend_usePoint,h=o.legend_item_tile_type;d?c(l.selectAll("."+yt.legendItemPoint).data(t),e).each((function(){var t=this,e=this.nodeName.toLowerCase(),r=o.point_r,s="x",l="y",c=2,d=2.5,h=null,u=null,g=null;if("circle"===e){var f=.2*r;s="cx",l="cy",h=r+f,c=2*r,d=-f}else if("rect"===e){var p=2.5*r;u=p,g=p,d=3}(0,a.select)(this).attr(s,function(e){return i(this,t),n.x1Tile(e)+c}.bind(this)).attr(l,function(e){return i(this,t),n.yTile(e)-d}.bind(this)).attr("r",h).attr("width",u).attr("height",g)})):c(l.selectAll("."+yt.legendItemTile).data(t),e).style("stroke",Me.bind(s)).call(function(t){var e=this;i(this,r),"circle"===h?t.attr("cx",function(t){i(this,e);var a=n.x2Tile(t);return a-(a-n.x1Tile(t))/2}.bind(this)).attr("cy",n.yTile):"circle"!==h&&t.attr("x1",n.x1Tile).attr("y1",n.yTile).attr("x2",n.x2Tile).attr("y2",n.yTile)}.bind(this))}},$e=p(8),Fe={redraw:function(t){var e,n=this;void 0===t&&(t={});var a=this,r=a.config,s=a.state,o=a.$el,l=o,c=l.main,d=l.treemap;s.redrawing=!0;var h=a.filterTargetsToShow(a.data.targets),u=t,g=u.flow,f=u.initializing,p=a.getWithOption(t),v=p.Transition?r.transition_duration:0,x=p.TransitionForExit?v:0,b=p.TransitionForAxis?v:0,m=null==(e=a.axis)?void 0:e.generateTransitions(b);a.updateSizes(f),p.Legend&&r.legend_show?(t.withTransition=!!v,d||a.updateLegend(a.mapToIds(a.data.targets),t,m)):p.Dimension&&a.updateDimension(!0),d||a.hasArcType()&&!s.hasRadar||a.updateCircleY&&(a.circleY=a.updateCircleY()),s.hasAxis?(a.axis.redrawAxis(h,p,m,g,f),r.data_empty_label_text&&c.select("text."+It.text+"."+ht.empty).attr("x",s.width/2).attr("y",s.height/2).text(r.data_empty_label_text).style("display",h.length?"none":null),a.hasGrid()&&a.updateGrid(),r.regions.length&&a.updateRegion(),["bar","candlestick","line","area"].forEach(function(t){i(this,n);var e=U(t);(/^(line|area)$/.test(t)&&a.hasTypeOf(e)||a.hasType(t))&&a["update"+e](p.TransitionForExit)}.bind(this)),o.text&&c.selectAll("."+Lt.selectedCircles).filter(a.isBarType.bind(a)).selectAll("circle").remove(),r.interaction_enabled&&!g&&p.EventRect&&(a.redrawEventRect(),null==a.bindZoomEvent||a.bindZoomEvent())):(o.arcs&&a.redrawArc(v,x,p.Transform),o.radar&&a.redrawRadar(),o.polar&&a.redrawPolar(),d&&a.updateTreemap(x)),s.resizing||d||!a.hasPointType()&&!s.hasRadar||a.updateCircle(),a.hasDataLabel()&&!a.hasArcType(null,["radar"])&&a.updateText(),null==a.redrawTitle||a.redrawTitle(),f&&a.updateTypesElements(),a.generateRedrawList(h,g,v,p.Subchart),a.callPluginHook("$redraw",t,v)},generateRedrawList:function(t,e,n,a){var r=this,s=this,o=s.config,l=s.state,c=s.getDrawShape();l.hasAxis&&o.subchart_show&&s.redrawSubchart(a,n,c);var d=e&&s.generateFlow({targets:t,flow:e,duration:e.duration,shape:c,xv:s.xv.bind(s)}),h=(n||d)&&st(),u=s.getRedrawList(c,e,d,h),g=function(){i(this,r),d&&d(),l.redrawing=!1,M(o.onrendered,s.api)}.bind(this);if(g)if(h&&u.length){var f=ue();(0,$e.transition)().duration(n).each(function(){var t=this;i(this,r),u.reduce(function(e,n){return i(this,t),e.concat(n)}.bind(this),[]).forEach(function(e){return i(this,t),f.add(e)}.bind(this))}.bind(this)).call(f,g)}else l.transiting||g();s.mapToIds(s.data.targets).forEach(function(t){i(this,r),l.withoutFadeIn[t]=!0}.bind(this))},getRedrawList:function(t,e,n,a){var r=this,s=this,o=s.config,l=s.state,c=l.hasAxis,d=l.hasRadar,h=l.hasTreemap,u=s.$el.grid,g=t.pos,f=g.cx,p=g.cy,v=g.xForText,x=g.yForText,b=[];return c&&((o.grid_x_lines.length||o.grid_y_lines.length)&&b.push(s.redrawGrid(a)),o.regions.length&&b.push(s.redrawRegion(a)),Object.keys(t.type).forEach(function(e){i(this,r);var n=U(e),o=t.type[e];(/^(area|line)$/.test(e)&&s.hasTypeOf(n)||s.hasType(e))&&b.push(s["redraw"+n](o,a))}.bind(this)),!e&&u.main&&b.push(s.updateGridFocus())),s.hasArcType()&&!d||P(o.data_labels)&&!1!==o.data_labels&&b.push(s.redrawText(v,x,e,a)),!s.hasPointType()&&!d||o.point_focus_only||s.redrawCircle&&b.push(s.redrawCircle(f,p,a,n)),h&&b.push(s.redrawTreemap(a)),b},updateAndRedraw:function(t){void 0===t&&(t={});var e,i=this,n=i.config,a=i.state;t.withTransition=z(t,"withTransition",!0),t.withTransform=z(t,"withTransform",!1),t.withLegend=z(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=z(t,"withTransitionForTransform",t.withTransition),t.withLegend&&n.legend_show||(a.hasAxis&&(e=i.axis.generateTransitions(t.withTransitionForAxis?n.transition_duration:0)),i.updateScales(),i.updateSvgSize(),i.transformAll(t.withTransitionForTransform,e)),i.redraw(t,e)},redrawWithoutRescale:function(){this.redraw({withY:!1,withDimension:!1,withLegend:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})}};function Be(t,e,i){void 0===t&&(t="linear"),void 0===e&&(e=0),void 0===i&&(i=1);var n={linear:Ee.scaleLinear,log:Ee.scaleSymlog,_log:Ee.scaleLog,time:Ee.scaleTime,utc:Ee.scaleUtc}[t]();return n.type=t,/_?log/.test(t)&&n.clamp(!0),n.range([e,i])}var Ne={getXScale:function(t,e,i,n){var a=this,r=a.scale.zoom||Be(a.axis.getAxisType("x"),t,e);return a.getCustomizedScale(i?r.domain(i):r,n)},getYScale:function(t,e,i,n){var a=Be(this.axis.getAxisType(t),e,i);return n&&a.domain(n),a},getYScaleById:function(t,e){var i;void 0===e&&(e=!1);var n="y2"===(null==(i=this.axis)?void 0:i.getId(t)),a=e?n?"subY2":"subY":n?"y2":"y";return this.scale[a]},getCustomizedScale:function(t,e){var n=this,a=this,r=e||function(){return i(this,n),a.axis.x.tickOffset()}.bind(this),s=function(e,i){var n=t(e)+r();return i?n:Math.ceil(n)};for(var o in t)s[o]=t[o];return s.orgDomain=function(){return i(this,n),t.domain()}.bind(this),s.orgScale=function(){return i(this,n),t}.bind(this),a.axis.isCategorized()&&(s.domain=function(e){var i=e;return arguments.length?(t.domain(i),s):[(i=this.orgDomain())[0],i[1]+1]}),s},updateScales:function(t,e){var n=this;void 0===e&&(e=!0);var a=this,r=a.axis,s=a.config,o=a.format,l=a.org,c=a.scale,d=a.state,h=d.current,u=d.width,g=d.height,f=d.width2,p=d.height2,v=d.hasAxis,x=d.hasTreemap;if(v){var b,m=s.axis_rotated,_=a.getResettedPadding(1),y={x:m?_:0,y:m?0:g,subX:m?1:0,subY:m?0:p},T={x:m?g:u,y:m?u:_,subX:m?g:u,subY:m?f:1},w=e&&(null==(b=c.x)?void 0:b.orgDomain()),A=e&&l.xDomain;c.x=a.getXScale(y.x,T.x,w,function(){return i(this,n),r.x.tickOffset()}.bind(this)),c.subX=a.getXScale(y.x,T.x,A,function(t){var e;return i(this,n),t%1?0:(null!=(e=r.subX)?e:r.x).tickOffset()}.bind(this)),o.xAxisTick=r.getXAxisTickFormat(),o.subXAxisTick=r.getXAxisTickFormat(!0),r.setAxis("x",c.x,s.axis_x_tick_outer,t),s.subchart_show&&r.setAxis("subX",c.subX,s.axis_x_tick_outer,t),c.y=a.getYScale("y",y.y,T.y,c.y?c.y.domain():s.axis_y_default),c.subY=a.getYScale("y",y.subY,T.subY,c.subY?c.subY.domain():s.axis_y_default),r.setAxis("y",c.y,s.axis_y_tick_outer,t),s.axis_y2_show&&(c.y2=a.getYScale("y2",y.y,T.y,c.y2?c.y2.domain():s.axis_y2_default),c.subY2=a.getYScale("y2",y.subY,T.subY,c.subY2?c.subY2.domain():s.axis_y2_default),r.setAxis("y2",c.y2,s.axis_y2_tick_outer,t))}else if(x){var S=a.getCurrentPadding();c.x=(0,Ee.scaleLinear)().rangeRound([S.left,h.width-S.right]),c.y=(0,Ee.scaleLinear)().rangeRound([S.top,h.height-S.bottom])}else null==a.updateArc||a.updateArc()},xx:function(t){var e=this.config,i=this.scale,n=i.x,a=i.zoom,r=e.zoom_enabled&&a?a:n;return t?r(_(t.x)?t.x:t):null},xv:function(t){var e=this,i=e.axis,n=e.config,a=e.scale,r=a.x,s=a.zoom,o=n.zoom_enabled&&s?s:r,l=e.getBaseValue(t);return i.isTimeSeries()?l=rt.call(e,l):i.isCategorized()&&T(l)&&(l=n.axis_x_categories.indexOf(l)),Math.ceil(o(l))},yv:function(t){var e=this.scale,i=e.y,n=e.y2,a=t.axis&&"y2"===t.axis?n:i;return Math.ceil(a(this.getBaseValue(t)))},subxx:function(t){return t?this.scale.subX(t.x):null}},Ge=p(9),je={getDrawShape:function(){var t,e,n=this,a=this,r=a.config.axis_rotated,s=a.state,o=s.hasRadar,l=s.hasTreemap,c={type:{},indices:{},pos:{}};(l||["bar","candlestick","line","area"].forEach(function(t){i(this,n);var e=U(/^(bubble|scatter)$/.test(t)?"line":t);if(a.hasType(t)||a.hasTypeOf(e)||"line"===t&&(a.hasType("bubble")||a.hasType("scatter"))){var r=a.getShapeIndices(a["is"+e+"Type"]),s=a["generateDraw"+e];c.indices[t]=r,c.type[t]=s?s.bind(a)(r,!1):void 0}}.bind(this)),!a.hasArcType()||o||l)&&(l||(t=o?a.radarCircleX:r?a.circleY:a.circleX,e=o?a.radarCircleY:r?a.circleX:a.circleY),c.pos={xForText:a.generateXYForText(c.indices,!0),yForText:a.generateXYForText(c.indices,!1),cx:(t||function(){}).bind(a),cy:(e||function(){}).bind(a)});return c},getShapeIndices:function(t){var e=this,n=this,a=n.config,r=a.data_xs,s=P(r),o={},l=s?{}:0;return s&&K(Object.keys(r).map(function(t){return i(this,e),r[t]}.bind(this))).forEach(function(t){i(this,e),l[t]=0,o[t]={}}.bind(this)),n.filterTargetsToShow(n.data.targets.filter(t,n)).forEach(function(t){i(this,e);for(var n,s=(t.id in r?r[t.id]:""),c=s?o[s]:o,d=0;n=a.data_groups[d];d++)if(!(n.indexOf(t.id)<0))for(var h,u=0;h=n[u];u++)if(h in c){c[t.id]=c[h];break}A(c[t.id])&&(c[t.id]=s?l[s]++:l++,c.__max__=(s?l[s]:l)-1)}.bind(this)),o},getIndices:function(t,e){var n=this,a=this,r=a.config,s=r.data_xs,o=r.bar_indices_removeNull,l=e.id,c=e.index;if(a.isBarType(l)&&o){var d={};return a.getAllValuesOnIndex(c,!0).forEach(function(t,e){i(this,n),d[t.id]=e,d.__max__=e}.bind(this)),d}return P(s)?t[s[l]]:t},getIndicesMax:function(t){var e=this;return P(this.config.data_xs)?Object.keys(t).map(function(n){return i(this,e),t[n].__max__||0}.bind(this)).reduce(function(t,n){return i(this,e),t+n}.bind(this)):t.__max__},getShapeX:function(t,e,n){var a=this,r=this,s=r.config,o=r.scale,l=n?o.subX:o.zoom||o.x,c=s.bar_overlap,d=s.bar_padding,h=function(t,e){return i(this,a),t+e}.bind(this),u=L(t)&&(t._$total.length?t._$total.reduce(h)/2:0);return function(n){i(this,a);var s=r.getIndices(e,n,"getShapeX"),o=n.id in s?s[n.id]:0,g=(s.__max__||0)+1,f=0;if(P(n.x)){var p=l(n.x,!0);if(u){var v=t[n.id]||t._$width;f=c?p-v/2:p-v+t._$total.slice(0,o+1).reduce(h)-u}else f=p-(w(t)?t:t._$width)*(g/2-(c?1:o))}return t&&f&&g>1&&d&&(o&&(f+=d*o),g>2?f-=(g-1)*d/2:2===g&&(f-=d/2)),f}.bind(this)},getShapeY:function(t){var e=this,n=this,a=n.isStackNormalized();return function(r){i(this,e);var s=r.value;return w(r)?s=r:a?s=n.getRatio("index",r,!0):n.isBubbleZType(r)?s=n.getBubbleZData(r.value,"y"):n.isBarRangeType(r)&&(s=s[1]),n.getYScaleById(r.id,t)(s)}.bind(this)},getShapeYMin:function(t){var e=this,i=e.axis.getId(t),n=e.scale[i].domain()[0],a=e.config["axis_"+i+"_inverted"];return!e.isGrouped(t)&&!a&&n>0?n:0},getShapeOffsetData:function(t){var e=this,n=this,a=n.orderTargets(n.filterTargetsToShow(n.data.targets.filter(t,n))),r=n.isStackNormalized(),s=a.map(function(t){var a=this;i(this,e);var s=t.values,o={};n.isStepType(t)&&(s=n.convertValuesToStep(s));var l=s.reduce(function(t,e){i(this,a);var s=+e.x;return t[s]=e,o[s]=r?n.getRatio("index",e,!0):e.value,t}.bind(this),{});return{id:t.id,rowValues:s,rowValueMapByXValue:l,values:o}}.bind(this));return{indexMapByTargetId:a.reduce(function(t,n,a){var r=n.id;return i(this,e),t[r]=a,t}.bind(this),{}),shapeOffsetTargets:s}},getShapeOffset:function(t,e,n){var a=this,r=this,s=r.getShapeOffsetData(t),o=s.shapeOffsetTargets,l=s.indexMapByTargetId,c=r.config.data_groupsZeroAs;return function(t,s){var d=this;i(this,a);var h=t.id,u=t.value,g=t.x,f=r.getIndices(e,t),p=r.getYScaleById(h,n);if(r.isBarRangeType(t))return p(u[0]);var v=+g,x=p("zero"===c?0:r.getShapeYMin(h)),b=x;return o.filter(function(t){return i(this,d),t.id!==h&&f[t.id]===f[h]}.bind(this)).forEach(function(t){i(this,d);var e=t.id,n=t.rowValueMapByXValue,a=t.rowValues,r=t.values;if(l[e]<l[h]){var o,g=r[v],f=a[s];if(f&&+f.x===v||(f=n[v]),(null==(o=f)?void 0:o.value)*u>=0&&w(g))(0!==u||("positive"===c&&g>0||"negative"===c&&g<0))&&(b+=p(g)-x)}}.bind(this)),b}.bind(this)},getBarW:function(t,e,n){var a=this,r=this,s=r.config,o=r.org,l=r.scale,c=r.getMaxDataCount(),d="bar"===t&&s.data_groups.length,h=t+"_width",u=l.zoom&&!r.axis.isCategorized()?o.xDomain.map(function(t){return i(this,a),l.zoom(t)}.bind(this)).reduce(function(t,e){return i(this,a),Math.abs(t)+e}.bind(this))/c:e.tickInterval(c),g=function(t){i(this,a);var e=t?s[h][t]:s[h],r=t?e.ratio:s[h+"_ratio"],o=t?e.max:s[h+"_max"],l=w(e)?e:n?u*r/n:0;return o&&l>o?o:l}.bind(this),f=g();return!d&&L(s[h])&&(f={_$width:f,_$total:[]},r.filterTargetsToShow(r.data.targets).forEach(function(t){i(this,a),s[h][t.id]&&(f[t.id]=g(t.id),f._$total.push(f[t.id]||f._$width))}.bind(this))),f},getShapeByIndex:function(t,e,n){var a=this,r=this.$el,s=_(e)?"-"+e:"",o=r[t];return o=o&&!o.empty()?o.filter(function(t){return i(this,a),!n||t.id===n}.bind(this)).filter(function(t){return i(this,a),!_(e)||t.index===e}.bind(this)):(n?r.main.selectAll("."+Xt[t+"s"]+this.getTargetSelectorSuffix(n)):r.main).selectAll("."+Xt[t]+s)},isWithinShape:function(t,e){var i,n=this,r=(0,a.select)(t);return n.isTargetToShow(e.id)?null!=n.hasValidPointType&&n.hasValidPointType(t.nodeName)?i=n.isStepType(e)?n.isWithinStep(t,n.getYScaleById(e.id)(e.value)):n.isWithinCircle(t,n.isBubbleType(e)?1.5*n.pointSelectR(e):0):"path"===t.nodeName&&(i=!r.classed(Xt.bar)||n.isWithinBar(t)):i=!1,i},getInterpolate:function(t){var e=this.getInterpolateType(t);return{basis:Ge.curveBasis,"basis-closed":Ge.curveBasisClosed,"basis-open":Ge.curveBasisOpen,bundle:Ge.curveBundle,cardinal:Ge.curveCardinal,"cardinal-closed":Ge.curveCardinalClosed,"cardinal-open":Ge.curveCardinalOpen,"catmull-rom":Ge.curveCatmullRom,"catmull-rom-closed":Ge.curveCatmullRomClosed,"catmull-rom-open":Ge.curveCatmullRomOpen,"monotone-x":Ge.curveMonotoneX,"monotone-y":Ge.curveMonotoneY,natural:Ge.curveNatural,"linear-closed":Ge.curveLinearClosed,linear:Ge.curveLinear,step:Ge.curveStep,"step-after":Ge.curveStepAfter,"step-before":Ge.curveStepBefore}[e]},getInterpolateType:function(t){var e=this,i=e.config,n=i.spline_interpolation_type,a=e.isInterpolationType(n)?n:"cardinal";return e.isSplineType(t)?a:e.isStepType(t)?i.line_step_type:"linear"},isWithinBar:function(t){var e=N(this.state.event,t),i=B(t),n=i[0],a=i[1],r=Math.min(n.x,a.x),s=Math.min(n.y,a.y),o=this.config.bar_sensitivity,l=t.getBBox(),c=l.width,d=l.height;return r-o<e[0]&&e[0]<r+c+o&&s-o<e[1]&&e[1]<s+d+o}},Ye={setContainerSize:function(){var t=this,e=t.state;e.current.width=t.getCurrentWidth(),e.current.height=t.getCurrentHeight()},getCurrentWidth:function(){return this.config.size_width||this.getParentWidth()},getCurrentHeight:function(){var t=this,e=t.config,i=e.size_height||t.getParentHeight();return i>0?i:320/(t.hasType("gauge")&&!e.gauge_fullCircle?2:1)},getCurrentPaddingTop:function(){var t=this,e=t.config,i=t.state.hasAxis,n=t.$el,a=i?e.axis_y2_axes.length:0,r=_(e.padding_top)?e.padding_top:0;return n.title&&n.title.node()&&(r+=t.getTitlePadding()),a&&e.axis_rotated&&(r+=t.getHorizontalAxisHeight("y2")*a),r},getCurrentPaddingBottom:function(){var t=this,e=t.config,i=t.state.hasAxis,n=e.axis_rotated?"y":"x",a=i?e["axis_"+n+"_axes"].length:0;return(_(e.padding_bottom)?e.padding_bottom:0)+(a?t.getHorizontalAxisHeight(n)*a:0)},getCurrentPaddingLeft:function(t){var e=this,i=e.config,n=e.state.hasAxis,a=i.axis_rotated,r=a?"x":"y",s=n?i["axis_"+r+"_axes"].length:0,o=n?e.getAxisWidthByAxisId(r,t):0;return(_(i.padding_left)?i.padding_left:n&&a?i.axis_x_show?Math.max(C(o),40):1:!n||i.axis_y_show&&!i.axis_y_inner?C(o):e.axis.getAxisLabelPosition("y").isOuter?30:1)+o*s},getCurrentPaddingRight:function(t){void 0===t&&(t=!1);var e=this,i=e.config,n=e.state.hasAxis,a=e.state.isLegendRight?e.getLegendWidth()+20:0,r=n?i.axis_y2_axes.length:0,s=n?e.getAxisWidthByAxisId("y2"):0,o=t?e.axis.getXAxisTickTextY2Overflow(10):0;return(_(i.padding_right)?i.padding_right+(n?1:0):e.axis&&i.axis_rotated?10+a:!e.axis||i.axis_y2_show&&!i.axis_y2_inner?Math.max(C(s)+a,o):Math.max(2+a+(e.axis.getAxisLabelPosition("y2").isOuter?20:0),o))+s*r},getParentRectValue:function(t){for(var e="offset"+U(t),i=this.$el.chart.node(),n=0;n<30&&i&&"BODY"!==i.tagName;){try{n=i.getBoundingClientRect()[t]}catch(t){e in i&&(n=i[e])}i=i.parentNode}var a=o.body[e];return n>a&&(n=a),n},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var t=this.$el.chart.style("height"),e=0;return t&&(e=/px$/.test(t)?parseInt(t,10):this.getParentRectValue("height")),e},getSvgLeft:function(t){var e=this,i=e.config,n=e.$el,a=i.axis_rotated||!i.axis_rotated&&!i.axis_y_inner,r=i.axis_rotated?ft.axisX:ft.axisY,s=n.main.select("."+r).node(),o=s&&a?s.getBoundingClientRect():{right:0},l=n.chart.node().getBoundingClientRect(),c=e.hasArcType(),d=o.right-l.left-(c?0:e.getCurrentPaddingLeft(t));return d>0?d:0},updateDimension:function(t){var e,i=this,n=i.config,a=i.state.hasAxis,r=i.$el;a&&!t&&i.axis.x&&n.axis_rotated&&(null==(e=i.axis.subX)||e.create(r.axis.subX));i.updateScales(t),i.updateSvgSize(),i.transformAll(!1)},updateSvgSize:function(){var t=this,e=t.state,i=e.clip,n=e.current,a=e.hasAxis,r=e.width,s=e.height,o=t.$el.svg;if(o.attr("width",n.width).attr("height",n.height),a){var l=o.select("."+Pt.brush+" .overlay"),c={width:0,height:0};l.size()&&(c.width=+l.attr("width"),c.height=+l.attr("height")),o.selectAll(["#"+i.id,"#"+i.idGrid]).select("rect").attr("width",r).attr("height",s),o.select("#"+i.idXAxis).select("rect").call(t.setXAxisClipPath.bind(t)),o.select("#"+i.idYAxis).select("rect").call(t.setYAxisClipPath.bind(t)),i.idSubchart&&o.select("#"+i.idSubchart).select("rect").attr("width",r).attr("height",c.height)}},getCurrentPadding:function(){var t=this;return{top:t.getCurrentPaddingTop(),bottom:t.getCurrentPaddingBottom(),left:t.getCurrentPaddingLeft(),right:t.getCurrentPaddingRight()}},getResettedPadding:function(t){var e=this,n=this.config,a=w(t),r=a?0:{};return!1===n.padding?a||Object.keys(t).forEach(function(a){i(this,e),r[a]=O(n.data_labels)||!1===n.data_labels||"top"!==a?0:t[a]}.bind(this)):r=t,r},updateSizes:function(t){var e=this,i=e.config,n=e.state,a=e.$el.legend,r=i.axis_rotated,s=e.hasArcType()||n.hasTreemap;t||e.setContainerSize();var o={width:a?e.getLegendWidth():0,height:a?e.getLegendHeight():0};!s&&i.axis_x_show&&i.axis_x_tick_autorotate&&e.updateXAxisTickClip();var l=n.isLegendRight||n.isLegendInset?0:o.height,c=r||s?0:e.getHorizontalAxisHeight("x"),d=i.subchart_axis_x_show&&i.subchart_axis_x_tick_text_show?c:30,h=i.subchart_show&&!s?i.subchart_size_height+d:0,u=e.getCurrentPadding();if(n.margin=!s&&r?{top:e.getHorizontalAxisHeight("y2")+u.top,right:s?0:e.getCurrentPaddingRight(!0),bottom:e.getHorizontalAxisHeight("y")+l+u.bottom,left:h+(s?0:u.left)}:{top:4+u.top,right:s?0:e.getCurrentPaddingRight(!0),bottom:c+h+l+u.bottom,left:s?0:u.left},n.margin=e.getResettedPadding(n.margin),n.margin2=r?{top:n.margin.top,right:NaN,bottom:20+l,left:e.state.rotatedPadding.left}:{top:n.current.height-h-l,right:NaN,bottom:d+l,left:n.margin.left},n.margin3={top:0,right:NaN,bottom:0,left:0},null==e.updateSizeForLegend||e.updateSizeForLegend(o),n.width=n.current.width-n.margin.left-n.margin.right,n.height=n.current.height-n.margin.top-n.margin.bottom,n.width<0&&(n.width=0),n.height<0&&(n.height=0),n.width2=r?n.margin.left-n.rotatedPadding.left-n.rotatedPadding.right:n.width,n.height2=r?n.height:n.current.height-n.margin2.top-n.margin2.bottom,n.width2<0&&(n.width2=0),n.height2<0&&(n.height2=0),e.hasArcType()){var g=e.hasType("gauge"),f=i.legend_show&&n.isLegendRight;n.arcWidth=n.width-(f?o.width+10:0),n.arcHeight=n.height-(f&&!g?0:10),g&&!i.gauge_fullCircle&&(n.arcHeight+=n.height-e.getPaddingBottomForGauge()),null==e.updateRadius||e.updateRadius()}n.isLegendRight&&s&&(n.margin3.left=n.arcWidth/2+1.1*n.radiusExpanded)}},Ve={setCssRule:function(t,e,n,a){var r=this,s=this,o=s.config,l=s.state,c=l.cssRule,d=l.style;return o.boost_useCssRule?function(o){var l=this;i(this,r),o.each(function(r){var o=this;i(this,l);var h=a&&(null==a?void 0:a.call(s,r)),u=(t?"."+(Ot.shapes+s.getTargetSelectorSuffix(r.id)):"")+e;e in c&&d.sheet.deleteRule(c[u]),s.state.cssRule[u]=function(t,e,n){var a=this,r=t.rootSelctor,s=t.sheet,o=r+" "+function(t){return i(this,a),t.replace(/\s?(bb-)/g,".$1").replace(/\.+/g,".")}.bind(this)(e)+" {"+n.join(";")+"}";return s[s.insertRule?"insertRule":"addRule"](o,s.cssRules.length)}(d,u,n.filter(Boolean).map(function(t){return i(this,o),T(h)&&-1===t.indexOf(":")?t+": "+h:t||""}.bind(this)))}.bind(this))}.bind(this):function(){i(this,r)}.bind(this)},getStylePropValue:function(t){return this.config.boost_useCssRule?null:y(t)?t.bind(this):t}};function He(t,e,i,n,a){var r,s=t.value,o=this.isCandlestickType(t),l=w(s)&&s<0||o&&!(null!=(r=this.getCandlestickData(t))&&r._isUp),c=e.x,d=e.y;return n?"start"===i?(c+=l?0:8,d+=4):"middle"===i?(c+=8,d-=8):"end"===i&&(l&&(c-=8),d+=4):("start"===i?(c+=4,l&&(d+=16)):"middle"===i?d-=8:"end"===i&&(c-=4,l&&(d+=16)),a&&(d+=l?-17:o?13:7)),{x:c,y:d}}var We={opacityForText:function(t){var e=this;return e.isBarType(t)&&!e.meetsLabelThreshold(Math.abs(e.getRatio("bar",t)),"bar")?"0":e.hasDataLabel?null:"0"},initText:function(){var t=this.$el;t.main.select("."+ht.chart).append("g").attr("class",It.chartTexts).style("pointer-events",t.treemap?"none":null)},updateTargetsForText:function(t){var e=this,n=this,a=n.getChartClass("Text"),r=n.getClass("texts","id"),s=n.classFocus.bind(n);n.$el.main.select("."+It.chartTexts).selectAll("."+It.chartText).data(t).attr("class",function(t){return i(this,e),(""+a(t)+s(t)).trim()}.bind(this)).enter().append("g").style("opacity","0").attr("class",a).call(n.setCssRule(!0," ."+It.text,["fill","pointer-events:none"],n.updateTextColor)).append("g").attr("class",r)},updateText:function(){var t=this,e=this,n=e.$el,r=e.$T,s=e.config,o=e.getClass("text","index"),l=s.data_labels.centered,c=n.main.selectAll("."+It.texts).selectAll("."+It.text).data(e.labelishData.bind(e));r(c.exit()).style("fill-opacity","0").remove(),n.text=c.enter().append("text").merge(c).attr("class",o).attr("text-anchor",function(n){i(this,t);var a=n.value<0;if(e.isCandlestickType(n)){var r=e.getCandlestickData(n);a=!(null!=r&&r._isUp)}else if(e.isTreemapType(n))return l?"middle":"start";return s.axis_rotated?a?"end":"start":"middle"}.bind(this)).style("fill",e.getStylePropValue(e.updateTextColor)).style("fill-opacity","0").each((function(t,i,n){var r=(0,a.select)(this),s=t.value;if(e.isBubbleZType(t))s=e.getBubbleZData(s,"z");else if(e.isCandlestickType(t)){var o=e.getCandlestickData(t);o&&(s=o.close)}s=e.isTreemapType(t)?e.treemapDataLabelFormat(t)(r):e.dataLabelFormat(t.id)(s,t.id,i,n),w(s)?this.textContent=s:F(r,s)}))},updateTextColor:function(t){var e,i=this,n=i.config,a=n.data_labels_colors,r=i.isArcType(t)&&!i.isRadarType(t)||i.isTreemapType(t)?null:i.color(t);if(T(a))e=a;else if(D(a)){e=a[(t.data||t).id]}else y(a)&&(e=a.bind(i.api)(r,t));if(i.isCandlestickType(t)&&!y(a)){var s=i.getCandlestickData(t);if(null==s||!s._isUp){var o=n.candlestick_color_down;e=D(o)?o[t.id]:o}}return e||r},updateTextBacgroundColor:function(t){var e=this,i=e.$el,n=e.config.data_labels_backgroundColors,a="";if(T(n)||D(n)){var r=T(n)?"":e.getTargetSelectorSuffix("id"in t?t.id:t.data.id),s=i.defs.select(["filter[id*='labels-bg","']"].join(r));s.size()&&(a="url(#"+s.attr("id")+")")}return a||null},redrawText:function(t,e,i,n){var a=this,r=a.$T,s=a.axis,o=a.config,l=a.state.hasTreemap,c=Y(!0),d=o.axis_rotated,h=o.data_labels.rotate,u=function(t){var e="middle";return t>0&&t<=170?e="end":t>190&&t<=360&&(e="start"),e}(h),g=h?"rotate("+h+")":"";return a.$el.text.style("fill",a.getStylePropValue(a.updateTextColor)).attr("filter",a.updateTextBacgroundColor.bind(a)).style("fill-opacity",i?0:a.opacityForText.bind(a)).each((function(i,f){var p=r(l&&this.childElementCount?this.parentNode:this,!(!n||!this.getAttribute("x")),c),v=o["axis_"+(null==s?void 0:s.getId(i.id))+"_inverted"],x={x:t.bind(this)(i,f),y:e.bind(this)(i,f)};h&&(x=He.bind(a)(i,x,u,d,v),p.attr("text-anchor",u)),this.childElementCount||h?p.attr("transform","translate("+x.x+" "+x.y+") "+g):p.attr("x",x.x).attr("y",x.y)})),!0},getTextRect:function(t,e){var n=this,r=this,s=t.node?t.node():t;/text/i.test(s.tagName)||(s=s.querySelector("text"));var o=s.textContent,l=le+"-"+o.replace(/\W/g,"_"),c=r.cache.get(l);return c||(r.$el.svg.append("text").style("visibility","hidden").style("font",(0,a.select)(s).style("font")).classed(e,!0).text(o).call(function(t){i(this,n),c=j(t.node())}.bind(this)).remove(),r.cache.add(l,c)),c},generateXYForText:function(t,e){var n=this,a=this,r=a.state,s=r.hasRadar,o=r.hasTreemap,l=Object.keys(t),c={},d=e?a.getXForText:a.getYForText;return s&&l.push("radar"),o&&l.push("treemap"),l.forEach(function(e){i(this,n),c[e]=a["generateGet"+U(e)+"Points"](t[e],!1)}.bind(this)),function(t,e){var i=(a.isAreaType(t)?"area":a.isBarType(t)&&"bar")||a.isCandlestickType(t)&&"candlestick"||a.isRadarType(t)&&"radar"||a.isTreemapType(t)&&"treemap"||"line";return d.call(a,c[i](t,e),t,this)}},getCenteredTextPos:function(t,e,i,n){var a=this,r=a.config,s=r.axis_rotated,o=a.isBarType(t),l=a.isTreemapType(t);if(r.data_labels.centered&&(o||l)){var c=j(i);if(o){var d=t.value>=0;if(s){var h=(d?e[1][1]-e[0][1]:e[0][1]-e[1][1])/2+c.width/2;return d?-h-3:h+2}var u=(d?e[0][1]-e[1][1]:e[1][1]-e[0][1])/2+c.height/2;return d?u:-u-2}if(l)return"x"===n?(e[1][0]-e[0][0])/2:(e[1][1]-e[0][1])/2+c.height/2}return 0},getTextPos:function(t,e){var i=this.config.data_labels_position;return(t in i?i[t]:i)[e]||0},getXForText:function(t,e,i){var n,a=this,r=a.config,s=a.state,o=r.axis_rotated,l=a.isTreemapType(e),c=t[0][0];if(a.isCandlestickType(e))o?c=null!=(n=a.getCandlestickData(e))&&n._isUp?t[2][2]+4:t[2][1]-4:c+=(t[1][0]-c)/2;else if(l)c+=r.data_labels.centered?0:5;else if(o){var d=a.isBarType(e)?4:6;c=t[2][1]+d*(e.value<0?-1:1)}else c=a.hasType("bar")?(t[2][0]+t[0][0])/2:c;if(null===e.value)if(c>s.width){var h=j(i).width;c=s.width-h}else c<0&&(c=4);return(o||l)&&(c+=a.getCenteredTextPos(e,t,i,"x")),c+a.getTextPos(e.id,"x")},getYForText:function(t,e,i){var n,a=this,r=a.axis,s=a.config,o=a.state,l=s.axis_rotated,c=s["axis_"+(null==r?void 0:r.getId(e.id))+"_inverted"],d=a.isBarType(e),h=a.isTreemapType(e),u=s.point_r,g=j(i),f=e.value,p=3;if(a.isCandlestickType(e))f=a.getCandlestickData(e),l?(n=t[0][0],n+=(t[1][0]-n)/2+p):(n=f&&f._isUp?t[2][2]-p:t[2][1]+4*p,c&&(n+=15*(f._isUp?1:-1)));else if(h)n=t[0][1]+(s.data_labels.centered?0:g.height+5);else if(l)n=(t[0][0]+t[2][0]+.6*g.height)/2;else if(n=t[2][1],w(u)&&u>5&&(a.isLineType(e)||a.isScatterType(e))&&(p+=s.point_r/2.3),f<0||0===f&&!o.hasPositiveValue&&o.hasNegativeValue)n+=c?d?-3:-5:g.height+(d?-p:p);else{var v=2*-p;d?v=-p:a.isBubbleType(e)&&(v=p),c&&(v=d?10:15),n+=v}if(null===e.value&&!l){var x=g.height;n<x?n=x:n>o.height&&(n=o.height-4)}return l&&!h||(n+=a.getCenteredTextPos(e,t,i,"y")),n+a.getTextPos(e.id,"y")},markOverlapped:function(t,e,n){var r=this,s=e.$el.arcs.selectAll(n),o=s.filter(function(e){return i(this,r),e.data.id!==t}.bind(this)),l=s.filter(function(e){return i(this,r),e.data.id===t}.bind(this)),c=q(l.node()),d=function(t,e){return i(this,r),Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}.bind(this);l.node()&&o.each((function(){var t=q(this),e=(0,a.select)(this),i=d(c.e,c.f)>d(t.e,t.f)?l:e,n=Math.ceil(Math.abs(c.e-t.e))<Math.ceil(i.node().getComputedTextLength()),r=Math.ceil(Math.abs(c.f-t.f))<parseInt(l.style("font-size"),10);e.classed(It.TextOverlapping,n&&r)}))},undoMarkOverlapped:function(t,e){t.$el.arcs.selectAll(e).each((function(){(0,a.selectAll)([this,this.previousSibling]).classed(It.TextOverlapping,!1)}))},meetsLabelThreshold:function(t,e){void 0===t&&(t=0);return t>=(this.config[e+"_label_threshold"]||0)}};function Ue(t,e){void 0===t&&(t="left");var i=w(e);return t.indexOf("center")>-1?i?e/2:"middle":t.indexOf("right")>-1?i?e:"end":i?0:"start"}var Ze={initTitle:function(){var t=this.config,e=this.$el;t.title_text&&(e.title=e.svg.append("g"),F(e.title.append("text").style("text-anchor",Ue(t.title_position)).attr("class",It.title),t.title_text,[.3,1.5]))},redrawTitle:function(){var t=this,e=t.config,i=t.state.current,n=t.$el.title;if(n){var a=t.yForTitle.call(t);/g/i.test(n.node().tagName)?n.attr("transform","translate("+Ue(e.title_position,i.width)+", "+a+")"):n.attr("x",t.xForTitle.call(t)).attr("y",a)}},xForTitle:function(){var t,e=this,i=e.config,n=e.state.current,a=i.title_position||"left",r=e.getTextRect(e.$el.title,It.title).width;return/(right|center)/.test(a)?(t=n.width-r,a.indexOf("right")>=0?t=n.width-r-i.title_padding.right:a.indexOf("center")>=0&&(t=(n.width-r)/2)):t=i.title_padding.left||0,t},yForTitle:function(){var t=this;return(t.config.title_padding.top||0)+t.getTextRect(t.$el.title,It.title).height},getTitlePadding:function(){return this.yForTitle()+(this.config.title_padding.bottom||0)}},qe={initTooltip:function(){var t=this,e=t.config,i=t.$el;i.tooltip=(0,a.select)(e.tooltip_contents.bindto),i.tooltip.empty()&&(i.tooltip=i.chart.append("div").attr("class",Dt.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),t.bindTooltipResizePos()},initShowTooltip:function(){var t=this,e=this,n=e.config,a=e.$el,r=e.state,s=r.hasAxis,o=r.hasRadar;if(n.tooltip_init_show){var l,c,d=!(s&&o);if(null!=(l=e.axis)&&l.isTimeSeries()&&T(n.tooltip_init_x)){var h,u,g=e.data.targets[0];for(n.tooltip_init_x=rt.call(e,n.tooltip_init_x),h=0;(u=g.values[h])&&u.x-n.tooltip_init_x!=0;h++);n.tooltip_init_x=h}var f=e.data.targets.map(function(a){i(this,t);var r=d?0:n.tooltip_init_x;return e.addName(a.values[r])}.bind(this));d&&(f=[f[n.tooltip_init_x]]),a.tooltip.html(e.getTooltipHTML(f,null==(c=e.axis)?void 0:c.getXAxisTickFormat(),e.getDefaultValueFormat(),e.color)),n.tooltip_contents.bindto||a.tooltip.style("top",n.tooltip_init_position.top).style("left",n.tooltip_init_position.left).style("display",null)}},getTooltipHTML:function(){var t=this,e=t.api,i=t.config;return y(i.tooltip_contents)?i.tooltip_contents.bind(e).apply(void 0,arguments):t.getTooltipContent.apply(t,arguments)},getTooltipContent:function(t,e,n,a){var r=this,s=this,o=s.api,l=s.config,c=s.state,d=s.$el,h=["title","name","value"].map(function(t){i(this,r);var e=l["tooltip_format_"+t];return y(e)?e.bind(o):e}.bind(this)),u=h[0],g=h[1],f=h[2];u=u||e,g=g||function(t){return i(this,r),t}.bind(this),f=f||(c.hasTreemap||s.isStackNormalized()?function(t,e){return i(this,r),(100*e).toFixed(2)+"%"}.bind(this):n);var p=l.tooltip_order,v=function(t){return i(this,r),s.axis&&s.isBubbleZType(t)?s.getBubbleZData(t.value,"z"):s.getBaseValue(t)}.bind(this),x=s.levelColor?function(t){return i(this,r),s.levelColor(t.value)}.bind(this):function(t){return i(this,r),a(t)}.bind(this),b=l.tooltip_contents,m=b.template,T=s.mapToTargetIds();if(null===p&&l.data_groups.length){var w=s.orderTargets(s.data.targets).map(function(t){return i(this,r),t.id}.bind(this)).reverse();t.sort(function(t,e){i(this,r);var n=t?t.value:null,a=e?e.value:null;return n>0&&a>0&&(n=t.id?w.indexOf(t.id):null,a=e.id?w.indexOf(e.id):null),n-a}.bind(this))}else/^(asc|desc)$/.test(p)?t.sort(function(t,e){i(this,r);var n=t?v(t):null,a=e?v(e):null;return"asc"===p?n-a:a-n}.bind(this)):y(p)&&t.sort(p.bind(o));var S,k,C,R,E,L=s.getTooltipContentTemplate(m),O=t.length,P=function(){var e=this;if(!(k=t[E])||!v(k)&&0!==v(k))return"continue";if(A(S)){var n=(c.hasAxis||c.hasRadar)&&$(u?u(k.x):k.x);S=at(L[0],{CLASS_TOOLTIP:Dt.tooltip,TITLE:_(n)?m?n:'<tr><th colspan="2">'+n+"</th></tr>":""})}if(!k.ratio&&d.arcs&&(C=["arc",s.$el.arcs.select("path."+ut.arc+"-"+k.id).data()[0]],k.ratio=s.getRatio.apply(s,C)),C=[k.ratio,k.id,k.index,t],R=$(f.apply(void 0,[v(k)].concat(C))),s.isAreaRangeType(k)){var a=["high","low"].map(function(t){return i(this,e),$(f.apply(void 0,[s.getRangedData(k,t)].concat(C)))}.bind(this)),r=a[0],o=a[1];R="<b>Mid:</b> "+R+" <b>High:</b> "+r+" <b>Low:</b> "+o}else if(s.isCandlestickType(k)){var l=["open","high","low","close","volume"].map(function(t){return i(this,e),$(f.apply(void 0,[s.getRangedData(k,t,"candlestick")].concat(C)))}.bind(this)),h=l[0],p=l[1],y=l[2],w=l[3],O=l[4];R="<b>Open:</b> "+h+" <b>High:</b> "+p+" <b>Low:</b> "+y+" <b>Close:</b> "+w+(O?" <b>Volume:</b> "+O:"")}else if(s.isBarRangeType(k)){var P=k.value,I=P[0],z=P[1];R=f(I)+" ~ "+f(z)}if(void 0!==R){if(null===k.name)return"continue";var M=$(g.apply(void 0,[k.name].concat(C))),X=x(k),F={CLASS_TOOLTIP_NAME:Dt.tooltipName+s.getTargetSelectorSuffix(k.id),COLOR:m||!s.patterns?X:'<svg><rect style="fill:'+X+'" width="10" height="10"></rect></svg>',NAME:M,VALUE:R};if(m&&D(b.text)){var B=T.indexOf(k.id);Object.keys(b.text).forEach(function(t){i(this,e),F[t]=b.text[t][B]}.bind(this))}S+=at(L[1],F)}};for(E=0;E<O;E++)P();return S+"</table>"},getTooltipContentTemplate:function(t){return(t||'<table class="{=CLASS_TOOLTIP}"><tbody>\n\t\t\t\t{=TITLE}\n\t\t\t\t{{<tr class="{=CLASS_TOOLTIP_NAME}">\n\t\t\t\t\t<td class="name">'+(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>')+'{=NAME}</td>\n\t\t\t\t\t<td class="value">{=VALUE}</td>\n\t\t\t\t</tr>}}\n\t\t\t</tbody></table>').replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},tooltipPosition:function(t,e,n,a){var r=this,s=this,o=s.config,l=s.scale,c=s.state,d=c,h=d.width,u=d.height,g=d.current,f=d.isLegendRight,p=d.inputType,v=d.event,x=s.hasType("gauge")&&!o.gauge_fullCircle,b=c.hasTreemap,m=s.getSvgLeft(!0),_=m+g.width-s.getCurrentPaddingRight(),y=s.getCurrentPaddingLeft(!0),T=N(v,a),w=T[0],A=T[1];if(s.hasArcType())"touch"===p||s.hasType("radar")||(A+=x?u:u/2,w+=(h-(f?s.getLegendWidth():0))/2);else if(!b){var S=l.x(t[0].x);o.axis_rotated?(A=S+20,w+=m+100,_-=m):(A-=5,w=m+y+20+(l.zoom?w:S))}(w+e+15>_&&(w-=e+(b?0:y)),A+n>g.height)&&(A-=x?3*n:n+(b?0:30));var k={top:A,left:w};return Object.keys(k).forEach(function(t){i(this,r),k[t]<0&&(k[t]=0)}.bind(this)),k},showTooltip:function(t,e){var n=this,a=this,r=a.config,s=a.scale,o=a.state,l=a.$el.tooltip,c=r.tooltip_contents.bindto,d=t.filter(function(t){return i(this,n),t&&_(a.getBaseValue(t))}.bind(this));if(l&&0!==d.length&&r.tooltip_show){var h=l.datum(),u=h||{},g=u.width,f=void 0===g?0:g,p=u.height,v=void 0===p?0:p,x=JSON.stringify(t);if(!h||h.current!==x){var b=t.concat().sort()[0].index;M(r.tooltip_onshow,a.api,t),l.html(a.getTooltipHTML(t,a.axis?a.axis.getXAxisTickFormat():a.categoryName.bind(a),a.getDefaultValueFormat(),a.color)).style("display",null).style("visibility",null).datum(h={index:b,current:x,width:f=l.property("offsetWidth"),height:v=l.property("offsetHeight")}),M(r.tooltip_onshown,a.api,t),a._handleLinkedCharts(!0,b)}if(!c){var m,y,T=(null==(m=r.tooltip_position)?void 0:m.bind(a.api))||a.tooltipPosition.bind(a),w=N(o.event,e),A={x:w[0],y:w[1]},S=null==(y=t.filter(Boolean))?void 0:y.shift();s.x&&S&&"x"in S&&(A.xAxis=s.x(S.x));var k=T(d,f,v,e,A);["top","left"].forEach(function(t){i(this,n);var e=k[t];l.style(t,e+"px"),"left"!==t||h.xPosInPercent||(h.xPosInPercent=e/o.current.width*100)}.bind(this))}}},bindTooltipResizePos:function(){var t=this,e=this,n=e.resizeFunction,a=e.state,r=e.$el.tooltip;n.add(function(){if(i(this,t),"block"===r.style("display")){var e=a.current,n=r.datum(),s=n.width,o=n.xPosInPercent,l=e.width/100*o,c=e.width-(l+s);c<0&&(l+=c),r.style("left",l+"px")}}.bind(this))},hideTooltip:function(t){var e=this,i=e.api,n=e.config,a=e.$el.tooltip;if(a&&"none"!==a.style("display")&&(!n.tooltip_doNotHide||t)){var r=JSON.parse(a.datum().current);M(n.tooltip_onhide,i,r),a.style("display","none").style("visibility","hidden").datum(null),M(n.tooltip_onhidden,i,r)}},_handleLinkedCharts:function(t,e){var n=this,a=this,r=a.charts,s=a.config,l=a.state.event;if(null!=l&&l.isTrusted&&s.tooltip_linked&&r.length>1){var c=s.tooltip_linked_name;r.filter(function(t){return i(this,n),t!==a.api}.bind(this)).forEach(function(a){i(this,n);var r=a.internal,s=r.config,l=r.$el,d=s.tooltip_linked,h=s.tooltip_linked_name,u=o.body.contains(l.chart.node());if(d&&c===h&&u){var g=l.tooltip.data()[0],f=e!==(null==g?void 0:g.index);try{a.tooltip[t&&f?"show":"hide"]({index:e})}catch(t){}}}.bind(this))}}},Ke={getTranslate:function(t,e){void 0===e&&(e=0);var i,n,a=this,r=a.config,s=a.state,o=r.axis_rotated,l=0;if(e&&/^(x|y2?)$/.test(t)&&(l=a.getAxisSize(t)*e),"main"===t)i=R(s.margin.left),n=R(s.margin.top);else if("context"===t)i=R(s.margin2.left),n=R(s.margin2.top);else if("legend"===t)i=s.margin3.left,n=s.margin3.top;else if("x"===t)i=o?-l:0,n=o?0:s.height+l;else if("y"===t)i=o?0:-l,n=o?s.height+l:0;else if("y2"===t)i=o?0:s.width+l,n=o?1-l:0;else if("subX"===t)i=0,n=o?0:s.height2;else if("arc"===t)i=s.arcWidth/2,n=s.arcHeight/2;else if("polar"===t)i=s.arcWidth/2,n=s.arcHeight/2;else if("radar"===t){var c=a.getRadarSize()[0];i=s.width/2-c,n=R(s.margin.top)}return"translate("+i+", "+n+")"},transformMain:function(t,e){var i=this,n=i.$el.main,a=i.$T,r=null!=e&&e.axisX?e.axisX:a(n.select("."+ft.axisX),t),s=null!=e&&e.axisY?e.axisY:a(n.select("."+ft.axisY),t),o=null!=e&&e.axisY2?e.axisY2:a(n.select("."+ft.axisY2),t);a(n,t).attr("transform",i.getTranslate("main")),r.attr("transform",i.getTranslate("x")),s.attr("transform",i.getTranslate("y")),o.attr("transform",i.getTranslate("y2")),n.select("."+ut.chartArcs).attr("transform",i.getTranslate("arc"))},transformAll:function(t,e){var i=this,n=i.config,a=i.state,r=a.hasAxis,s=a.hasTreemap,o=i.$el;s||i.transformMain(t,e),r&&n.subchart_show&&i.transformContext(t,e),o.legend&&i.transformLegend(t)}},Je={setTargetType:function(t,e){var n=this,a=this,r=a.config,s=a.state.withoutFadeIn;a.mapToTargetIds(t).forEach(function(t){i(this,n),s[t]=e===r.data_types[t],r.data_types[t]=e}.bind(this)),t||(r.data_type=e)},updateTypesElements:function(){var t=this,e=this,n=e.state.current;Object.keys(l).forEach(function(a){i(this,t);var r=l[a],s=e.hasType(r,null,!0),o=n.types.indexOf(r);-1===o&&s?n.types.push(r):o>-1&&!s&&n.types.splice(o,1)}.bind(this)),e.setChartElements()},hasType:function(t,e,n){var a,r=this;void 0===n&&(n=!1);var s=this,o=s.config,l=s.state.current,c=o.data_types,d=e||s.data.targets,h=!1;return!n&&(null==(a=l.types)?void 0:a.indexOf(t))>-1?h=!0:null!=d&&d.length?d.forEach(function(e){i(this,r);var n=c[e.id];(n===t||!n&&"line"===t)&&(h=!0)}.bind(this)):Object.keys(c).length?Object.keys(c).forEach(function(e){i(this,r),c[e]===t&&(h=!0)}.bind(this)):h=o.data_type===t,h},hasTypeOf:function(t,e,n){var a=this;return void 0===n&&(n=[]),t in d&&!d[t].filter(function(t){return i(this,a),-1===n.indexOf(t)}.bind(this)).every(function(t){return i(this,a),!this.hasType(t,e)}.bind(this))},isTypeOf:function(t,e){var i=T(t)?t:t.id,n=this.config.data_types[i]||this.config.data_type;return I(e)?e.indexOf(n)>=0:n===e},hasPointType:function(){var t=this;return t.hasTypeOf("Line")||t.hasType("bubble")||t.hasType("scatter")},hasArcType:function(t,e){return this.hasTypeOf("Arc",t,e)},hasMultiArcGauge:function(){return this.hasType("gauge")&&"multi"===this.config.gauge_type},isLineType:function(t){var e=T(t)?t:t.id;return!this.config.data_types[e]||this.isTypeOf(e,d.Line)},isStepType:function(t){return this.isTypeOf(t,d.Step)},isSplineType:function(t){return this.isTypeOf(t,d.Spline)},isAreaType:function(t){return this.isTypeOf(t,d.Area)},isAreaRangeType:function(t){return this.isTypeOf(t,d.AreaRange)},isBarType:function(t){return this.isTypeOf(t,"bar")},isBubbleType:function(t){return this.isTypeOf(t,"bubble")},isCandlestickType:function(t){return this.isTypeOf(t,"candlestick")},isScatterType:function(t){return this.isTypeOf(t,"scatter")},isTreemapType:function(t){return this.isTypeOf(t,"treemap")},isPieType:function(t){return this.isTypeOf(t,"pie")},isGaugeType:function(t){return this.isTypeOf(t,"gauge")},isDonutType:function(t){return this.isTypeOf(t,"donut")},isPolarType:function(t){return this.isTypeOf(t,"polar")},isRadarType:function(t){return this.isTypeOf(t,"radar")},isArcType:function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isPolarType(t)||this.isRadarType(t)},isCirclePoint:function(t){var e=this.config,i=e.point_pattern;return"circle"===(null==t?void 0:t.tagName)||"circle"===e.point_type&&(!i||I(i)&&0===i.length)},lineData:function(t){return this.isLineType(t)?[t]:[]},arcData:function(t){return this.isArcType(t.data)?[t]:[]},labelishData:function(t){var e=this;return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isCandlestickType(t)||this.isRadarType(t)||this.isTreemapType(t)?t.values.filter(function(t){return i(this,e),w(t.value)||!!t.value}.bind(this)):[]},barLineBubbleData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function(t){return["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)>=0}},Qe=function(){function t(t){this.api=void 0,this.config=void 0,this.cache=void 0,this.$el=void 0,this.state=void 0,this.charts=void 0,this.data={xs:{},targets:[]},this.axis=void 0,this.scale={x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null},this.org={xScale:null,xDomain:null},this.color=void 0,this.patterns=void 0,this.levelColor=void 0,this.point=void 0,this.brush=void 0,this.format={extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null};var e=this;e.api=t,e.config=new Jt,e.cache=new ce;var i=new Ft;e.$el=i.getStore("element"),e.state=i.getStore("state"),e.$T=e.$T.bind(e)}var e=t.prototype;return e.$T=function(t,e,i){var n=this.config,r=this.state,s=n.transition_duration,o=n.subchart_show,l=t;l&&("tagName"in l&&(l=(0,a.select)(l)),l=(!1!==e&&s||e)&&(!r.zooming||r.dragging)&&!r.resizing&&r.rendered&&!o?l.transition(i).duration(s):l);return l},e.beforeInit=function(){var t=this;t.callPluginHook("$beforeInit"),M(t.config.onbeforeinit,t.api)},e.afterInit=function(){var t=this;t.callPluginHook("$afterInit"),M(t.config.onafterinit,t.api)},e.init=function(){var t=this,e=t.config,i=t.state,n=t.$el,r=e.boost_useCssRule;if(lt(t),i.hasRadar=!i.hasAxis&&t.hasType("radar"),i.hasTreemap=!i.hasAxis&&t.hasType("treemap"),i.hasAxis=!t.hasArcType()&&!i.hasTreemap,i.datetimeId="bb-"+ +new Date*Y(),r){var s=o.createElement("style");s.type="text/css",o.head.appendChild(s),i.style={rootSelctor:"."+i.datetimeId,sheet:s.sheet},n.style=s}var l={element:e.bindto,classname:"bb"};D(e.bindto)&&(l.element=e.bindto.element||"#chart",l.classname=e.bindto.classname||l.classname),n.chart=y(l.element.node)?e.bindto.element:(0,a.select)(l.element||[]),n.chart.empty()&&(n.chart=(0,a.select)(o.body.appendChild(o.createElement("div")))),n.chart.html("").classed(l.classname,!0).classed(i.datetimeId,r).style("position","relative"),t.initParams(),t.initToRender()},e.initToRender=function(t){var e=this,n=this,a=n.config,r=n.state,o=n.$el.chart,l=function(){return i(this,e),"none"===o.style("display")||"hidden"===o.style("visibility")}.bind(this),c=a.render.lazy||l(),d=s.MutationObserver;c&&d&&!1!==a.render.observe&&!t&&new d(function(t,a){i(this,e),l()||(a.disconnect(),r.rendered||n.initToRender(!0))}.bind(this)).observe(o.node(),{attributes:!0,attributeFilter:["class","style"]}),c&&!t||n.convertData(a,function(t){i(this,e),n.initWithData(t),n.afterInit()}.bind(this))},e.initParams=function(){var t=this,e=this,a=e.config,r=e.format,l=e.state,c=a.axis_rotated;if(e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),!1===a.padding&&(a.axis_x_show=!1,a.axis_y_show=!1,a.axis_y2_show=!1,a.subchart_show=!1),e.hasPointType()&&(e.point=e.generatePoint()),e.initClip(),l.hasAxis){r.extraLineClasses=e.generateExtraLineClass(),r.dataTime=a.data_xLocaltime?n.timeParse:n.utcParse,r.axisTime=a.axis_x_localtime?n.timeFormat:n.utcFormat;var d=e.config.zoom_enabled&&"drag"===e.config.zoom_type;r.defaultAxisTime=function(n){i(this,t);var a=e.scale,s=a.x,o=a.zoom,l=d?o:o&&s.orgDomain().toString()!==o.domain().toString(),c=(n.getMilliseconds()?".%L":n.getSeconds()&&".:%S")||n.getMinutes()&&"%I:%M"||n.getHours()&&"%I %p"||1!==n.getDate()&&"%b %d"||l&&1===n.getDate()&&"%b'%y"||n.getMonth()&&"%-m/%-d"||"%Y";return r.axisTime(c)(n)}.bind(this)}l.isLegendRight="right"===a.legend_position,l.isLegendInset="inset"===a.legend_position,l.isLegendTop="top-left"===a.legend_inset_anchor||"top-right"===a.legend_inset_anchor,l.isLegendLeft="top-left"===a.legend_inset_anchor||"bottom-left"===a.legend_inset_anchor,l.rotatedPadding.top=e.getResettedPadding(l.rotatedPadding.top),l.rotatedPadding.right=c&&!a.axis_x_show?0:30,l.inputType=function(t,e){var n=this,a=s.DocumentTouch,r=s.matchMedia,l=s.navigator,c=!1;if(e)if(l&&"maxTouchPoints"in l)c=l.maxTouchPoints>0;else if("ontouchmove"in s||a&&o instanceof a)c=!0;else if(null!=r&&r("(pointer:coarse)").matches)c=!0;else{var d=l.userAgent;c=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(d)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(d)}return(t&&["any-hover:hover","any-pointer:fine"].some(function(t){return i(this,n),null==r?void 0:r("("+t+")").matches}.bind(this))?"mouse":c&&"touch")||"mouse"}(a.interaction_inputType_mouse,a.interaction_inputType_touch)},e.initWithData=function(t){var e=this,n=this,a=n.config,r=n.scale,s=n.state,o=n.$el,l=n.org,c=s,d=c.hasAxis,h=c.hasTreemap,u=a.interaction_enabled,g=n.hasType("polar");if(d&&(n.axis=n.getAxisInstance(),a.zoom_enabled&&n.initZoom()),n.data.xs={},n.data.targets=n.convertDataToTargets(t),a.data_filter&&(n.data.targets=n.data.targets.filter(a.data_filter.bind(n.api))),a.data_hide&&n.addHiddenTargetIds(!0===a.data_hide?n.mapToIds(n.data.targets):a.data_hide),a.legend_hide&&n.addHiddenLegendIds(!0===a.legend_hide?n.mapToIds(n.data.targets):a.legend_hide),n.updateSizes(),n.updateScales(!0),d){var f=r.x,p=r.y,v=r.y2,x=r.subX,b=r.subY,m=r.subY2;f&&(f.domain(tt(n.getXDomain(n.data.targets))),x.domain(f.domain()),l.xDomain=f.domain()),p&&(p.domain(n.getYDomain(n.data.targets,"y")),b.domain(p.domain())),v&&(v.domain(n.getYDomain(n.data.targets,"y2")),m&&m.domain(v.domain()))}if(o.svg=o.chart.append("svg").style("overflow","hidden").style("display","block"),u&&s.inputType){var _="touch"===s.inputType,T=a.onclick,w=a.onover,A=a.onout;o.svg.on("click",(null==T?void 0:T.bind(n.api))||null).on(_?"touchstart":"mouseenter",(null==w?void 0:w.bind(n.api))||null).on(_?"touchend":"mouseleave",(null==A?void 0:A.bind(n.api))||null)}a.svg_classname&&o.svg.attr("class",a.svg_classname);var S=y(a.color_tiles)&&n.patterns;(d||S||g||h||a.data_labels_backgroundColors)&&(o.defs=o.svg.append("defs"),d&&["id","idXAxis","idYAxis","idGrid"].forEach(function(t){i(this,e),n.appendClip(o.defs,s.clip[t])}.bind(this)),n.generateDataLabelBackgroundColorFilter(),S&&n.patterns.forEach(function(t){var n=this;return i(this,e),o.defs.append(function(){return i(this,n),t.node}.bind(this))}.bind(this))),n.updateSvgSize(),n.bindResize();var k,C=o.svg.append("g").classed(ht.main,!0).attr("transform",h?null:n.getTranslate("main"));(o.main=C,a.subchart_show&&n.initSubchart(),a.tooltip_show&&n.initTooltip(),a.title_text&&n.initTitle(),!h&&a.legend_show&&n.initLegend(),a.data_empty_label_text&&C.append("text").attr("class",It.text+" "+ht.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),d&&(a.regions.length&&n.initRegion(),a.clipPath||n.axis.init()),C.append("g").classed(ht.chart,!0).attr("clip-path",d?s.clip.path:null),n.callPluginHook("$init"),d)&&(u&&(null==n.initEventRect||n.initEventRect()),n.initGrid(),a.clipPath&&(null==(k=n.axis)||k.init()));if(n.initChartElements(),n.updateTargets(n.data.targets),n.updateDimension(),M(a.oninit,n.api),n.setBackground(),n.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),a.data_onmin||a.data_onmax){var R=n.getMinMaxData();M(a.data_onmin,n.api,R.min),M(a.data_onmax,n.api,R.max)}a.tooltip_show&&n.initShowTooltip(),s.rendered=!0},e.initChartElements=function(){var t=this,e=this,n=e.state,a=n.hasAxis,r=n.hasRadar,s=n.hasTreemap,o=[];if(a)["bar","bubble","candlestick","line"].forEach(function(n){i(this,t);var a=U(n);("line"===n&&e.hasTypeOf(a)||e.hasType(n))&&o.push(a)}.bind(this));else if(s)o.push("Treemap");else{var l=e.hasType("polar");r||o.push("Arc","Pie"),e.hasType("gauge")?o.push("Gauge"):r?o.push("Radar"):l&&o.push("Polar")}o.forEach(function(n){i(this,t),e["init"+n]()}.bind(this)),P(e.config.data_labels)&&!e.hasArcType(null,["radar"])&&e.initText()},e.setChartElements=function(){var t=this.$el,e=t.chart,i=t.svg,n=t.defs,a=t.main,r=t.tooltip,s=t.legend,o=t.title,l=t.grid,c=t.arcs,d=t.circle,h=t.bar,u=t.candlestick,g=t.line,f=t.area,p=t.text;this.api.$={chart:e,svg:i,defs:n,main:a,tooltip:r,legend:s,title:o,grid:l,arc:c,circles:d,bar:{bars:h},candlestick:u,line:{lines:g,areas:f},text:{texts:p}}},e.setBackground=function(){var t=this,e=t.config.background,i=t.state,n=t.$el.svg;if(P(e)){var a=n.select("g").insert(e.imgUrl?"image":"rect",":first-child");e.imgUrl?a.attr("href",e.imgUrl):e.color&&a.style("fill",e.color).attr("clip-path",i.clip.path),a.attr("class",e.class||null).attr("width","100%").attr("height","100%")}},e.updateTargets=function(t){var e=this,n=this,a=n.state,r=a.hasAxis,s=a.hasRadar,o=a.hasTreemap,l=function(a){return i(this,e),n["updateTargetsFor"+a](t.filter(n["is"+a+"Type"].bind(n)))}.bind(this);if(n.updateTargetsForText(t),r)["bar","candlestick","line"].forEach(function(t){i(this,e);var a=U(t);("line"===t&&n.hasTypeOf(a)||n.hasType(t))&&l(a)}.bind(this)),n.updateTargetsForSubchart&&n.updateTargetsForSubchart(t);else if(n.hasArcType(t)){var c="Arc";s?c="Radar":n.hasType("polar")&&(c="Polar"),l(c)}else o&&l("Treemap");var d=n.hasType("bubble")||n.hasType("scatter");d&&(null==n.updateTargetForCircle||n.updateTargetForCircle()),n.filterTargetsToShowAtInit(d)},e.filterTargetsToShowAtInit=function(t){var e=this;void 0===t&&(t=!1);var n=this,a=n.$el.svg,r=n.$T,s="."+ht.target;t&&(s+=", ."+xt.chartCircles+" > ."+xt.circles),r(a.selectAll(s).filter(function(t){return i(this,e),n.isTargetToShow(t.id)}.bind(this))).style("opacity",null)},e.getWithOption=function(t){var e=this,n={Dimension:!0,EventRect:!0,Legend:!1,Subchart:!0,Transform:!1,Transition:!0,TrimXDomain:!0,UpdateXAxis:"UpdateXDomain",UpdateXDomain:!1,UpdateOrgXDomain:!1,TransitionForExit:"Transition",TransitionForAxis:"Transition",Y:!0};return Object.keys(n).forEach(function(a){i(this,e);var r=n[a];T(r)&&(r=n[r]),n[a]=z(t,"with"+a,r)}.bind(this)),n},e.initialOpacity=function(t){var e=this.state.withoutFadeIn;return null!==this.getBaseValue(t)&&e[t.id]?null:"0"},e.bindResize=function(){var t=this,e=this,n=e.config,a=e.state,r=function(t){var e,n=this,a=[],r=function(){var n=this;r.clear(),!1===t&&s.requestIdleCallback?requestIdleCallback(function(){var t=this;i(this,n),a.forEach(function(e){return i(this,t),e()}.bind(this))}.bind(this),{timeout:200}):e=de(function(){var t=this;i(this,n),a.forEach(function(e){return i(this,t),e()}.bind(this))}.bind(this),w(t)?t:200)};return r.clear=function(){i(this,n),e&&(he(e),e=null)}.bind(this),r.add=function(t){return i(this,n),a.push(t)}.bind(this),r.remove=function(t){return i(this,n),a.splice(a.indexOf(t),1)}.bind(this),r}(n.resize_timer),o=[];o.push(function(){return i(this,t),M(n.onresize,e.api)}.bind(this)),n.resize_auto&&o.push(function(){i(this,t),a.resizing=!0,n.legend_show&&(e.updateSizes(),e.updateLegend()),e.api.flush(!1)}.bind(this)),o.push(function(){i(this,t),M(n.onresized,e.api),a.resizing=!1}.bind(this)),o.forEach(function(e){return i(this,t),r.add(e)}.bind(this)),e.resizeFunction=r,s.addEventListener("resize",e.resizeFunction=r)},e.callPluginHook=function(t){for(var e=this,n=arguments.length,a=Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];this.config.plugins.forEach(function(n){i(this,e),"$beforeInit"===t&&(n.$$=this,this.api.plugins.push(n)),n[t].apply(n,a)}.bind(this))},t}();function ti(t){var e,n,a,r=this,s=this.config,o=function(){i(this,r);var t=n.shift();return t&&e&&L(e)&&t in e?(e=e[t],o()):t?void 0:e}.bind(this);Object.keys(s).forEach(function(l){i(this,r),e=t,n=l.split("_"),a=o(),S(a)&&(s[l]=a)}.bind(this)),this.api&&(this.state.orgConfig=t)}W(Qe.prototype,[we,Ae,Se,{categoryName:function(t){var e=this.config.axis_x_categories;return t<(null==e?void 0:e.length)?e[t]:t}},Re,Pe,Ie,Ce,ze,Xe,Fe,Ne,je,Ye,Ve,We,Ze,qe,Ke,Je]);var ei={resize:function(t){var e=this.internal,i=e.config,n=e.state;n.rendered&&(i.size_width=t?t.width:null,i.size_height=t?t.height:null,n.resizing=!0,this.flush(!1),e.resizeFunction())},flush:function(t){var e=this.internal,i=e.state,n=e.$el.zoomResetBtn;if(i.rendered){var a,r;if(i.resizing)null==(a=e.brush)||a.updateResize();else null==(r=e.axis)||r.setOrient();null==n||n.style("display","none"),e.scale.zoom=null,t?e.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):e.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1}),!i.resizing&&e.brush&&(e.brush.getSelection().call(e.brush.move),e.unselectRect())}else e.initToRender(!0)},destroy:function(){var t=this,e=this.internal,n=e.$el,a=n.chart,r=n.style,o=n.svg;if(P(e))for(var l in e.callPluginHook("$willDestroy"),e.charts.splice(e.charts.indexOf(this),1),e.unbindAllEvents(),o.select("*").interrupt(),e.resizeFunction.clear(),s.removeEventListener("resize",e.resizeFunction),a.classed("bb",!1).style("position",null).selectChildren().remove(),r&&r.parentNode.removeChild(r),Object.keys(this).forEach(function(n){var a=this;i(this,t),"internal"===n&&Object.keys(e).forEach(function(t){i(this,a),e[t]=null}.bind(this)),this[n]=null,delete this[n]}.bind(this)),this)this[l]=function(){i(this,t)}.bind(this);return null},config:function(t,e,i){var n,a=this.internal,r=a.config,s=a.state,o=null==t?void 0:t.replace(/\./g,"_");return t&&o in r?S(e)?(r[o]=e,n=e,i&&this.flush()):n=r[o]:(0===arguments.length||O(t))&&(n=s.orgConfig),n}};function ii(t){var e=this,n=this.internal.data.targets;if(!A(t)){var a=I(t)?t:[t];return n.filter(function(t){var n=this;return i(this,e),a.some(function(e){return i(this,n),e===t.id}.bind(this))}.bind(this))}return n}W(ii,{shown:function(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t,e){var n=this;void 0===e&&(e=!0);var a=null;if(t){var r=this.data(t);I(r)&&(a=[],r.forEach(function(t){var r=this;i(this,n);var s=t.values.map(function(t){return i(this,r),t.value}.bind(this));e?a=a.concat(s):a.push(s)}.bind(this)))}return a},names:function(t){return this.internal.updateDataAttributes("names",t)},colors:function(t){return this.internal.updateDataAttributes("colors",t)},axes:function(t){return this.internal.updateDataAttributes("axes",t)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}});var ni={data:ii},ai=function(t){var e=this;return i(this,undefined),null==s.btoa?void 0:s.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,n){return i(this,e),String.fromCharCode(+("0x"+n))}.bind(this)))}.bind(void 0);function ri(t,e,n){var r=this,l=e||n,c=l.width,d=l.height,h=new XMLSerializer,u=t.cloneNode(!0),g=function(t){var e=this,n=[];return t.forEach(function(t){i(this,e);try{t.cssRules&&t.cssRules.length&&(n=n.concat(Z(t.cssRules)))}catch(e){var a;null==(a=s.console)||a.warn("Error while reading rules from "+t.href+": "+e.toString())}}.bind(this)),n}(Z(o.styleSheets)).filter(function(t){return i(this,r),t.cssText}.bind(this)).map(function(t){return i(this,r),t.cssText}.bind(this));u.setAttribute("xmlns",a.namespaces.xhtml),u.style.margin="0",u.style.padding="0",e.preserveFontStyle&&u.querySelectorAll("text").forEach(function(t){i(this,r),t.innerHTML=""}.bind(this));var f=h.serializeToString(u),p=o.createElement("style");p.appendChild(o.createTextNode(g.join("\n")));var v=h.serializeToString(p),x=('<svg xmlns="'+a.namespaces.svg+'" width="'+c+'" height="'+d+'" \n\t\tviewBox="0 0 '+n.width+" "+n.height+'" \n\t\tpreserveAspectRatio="'+(!1===(null==e?void 0:e.preserveAspectRatio)?"none":"xMinYMid meet")+'">\n\t\t\t<foreignObject width="100%" height="100%">\n\t\t\t\t'+v+"\n\t\t\t\t"+f.replace(/(url\()[^#]+/g,"$1")+"\n\t\t\t</foreignObject></svg>").replace("/\n/g","%0A");return"data:image/svg+xml;base64,"+ai(x)}function si(t){var e=this,n=t.getBoundingClientRect(),a=n.left,r=n.top,o=function(t){return i(this,e),t.textContent||t.childElementCount}.bind(this),l=[];return Z(t.querySelectorAll("text")).filter(o).forEach(function(t){var n=this;i(this,e);var c=function(t){var e;i(this,n);var o=s.getComputedStyle(t),l=o.fill,c=o.fontFamily,d=o.fontSize,h=o.textAnchor,u=o.transform,g=function(t,e){var i=e.top,n=e.left,a=t.getBBox(),r=a.x,s=a.y,o=t.getScreenCTM(),l=o.a,c=o.b,d=o.c,h=o.d,u=o.e,g=o.f,f=t.getBoundingClientRect(),p=f.width,v=f.height;return{x:l*r+d*s+u-n,y:c*r+h*s+g-i+(v-Math.round(v/4)),width:p,height:v}}(t,{left:a,top:r}),f=g.x,p=g.y,v=g.width,x=g.height;return(e={})[t.textContent]={x:f,y:p,width:v,height:x,fill:l,fontFamily:c,fontSize:d,textAnchor:h,transform:u},e}.bind(this);if(t.childElementCount>1)return Z(t.querySelectorAll("tspan")).filter(o).forEach(function(t){i(this,n),l.push(c(t))}.bind(this)),[];l.push(c(t))}.bind(this)),l}var oi={export:function(t,e){var n=this,a=this.internal,r=a.state,s=a.$el,l=s.chart,c=s.svg,d=r.current,h=d.width,u=d.height,g=Q({width:h,height:u,preserveAspectRatio:!0,preserveFontStyle:!1,mimeType:"image/png"},t),f=ri(l.node(),g,{width:h,height:u}),p=g.preserveFontStyle?si(c.node()):[];if(e&&y(e)){var v=new Image;v.crossOrigin="Anonymous",v.onload=function(){i(this,n);var t=o.createElement("canvas"),a=t.getContext("2d");t.width=g.width||h,t.height=g.height||u,a.drawImage(v,0,0),p.length&&(!function(t,e){var n=this;e.forEach(function(e){var a=this;i(this,n),Object.keys(e).forEach(function(n){var r=this;i(this,a);var s=e[n],o=s.x,l=s.y,c=s.width,d=s.height,h=s.fill,u=s.fontFamily,g=s.fontSize,f=s.transform;if(t.save(),t.font=g+" "+u,t.fillStyle=h,"none"===f)t.fillText(n,o,l);else{var p=f.replace(/(matrix|\(|\))/g,"").split(",");p.splice(4).every(function(t){return i(this,r),0==+t}.bind(this))?(p.push(o+c-c/4),p.push(l-d+d/3)):(p.push(o),p.push(l)),t.transform.apply(t,p),t.fillText(n,0,0)}t.restore()}.bind(this))}.bind(this))}(a,p),p.length=0),e.bind(this)(t.toDataURL(g.mimeType))}.bind(this),v.src=f}return f}},li={focus:function(t){var e=this,n=this.internal,a=n.state,r=n.mapToTargetIds(t),s=n.$el.svg.selectAll(n.selectorTargets(r.filter(n.isTargetToShow,n)));this.revert(),this.defocus(),s.classed(At.focused,!0).classed(At.defocused,!1),n.hasArcType()&&!a.hasRadar&&(n.expandArc(r),n.hasType("gauge")&&n.markOverlapped(t,n,"."+_t.gaugeValue)),n.toggleFocusLegend(r,!0),a.focusedTargetIds=r,a.defocusedTargetIds=a.defocusedTargetIds.filter(function(t){return i(this,e),r.indexOf(t)<0}.bind(this))},defocus:function(t){var e=this,n=this.internal,a=n.state,r=n.mapToTargetIds(t);n.$el.svg.selectAll(n.selectorTargets(r.filter(n.isTargetToShow,n))).classed(At.focused,!1).classed(At.defocused,!0),n.hasArcType(null,["polar"])&&(n.unexpandArc(r),n.hasType("gauge")&&n.undoMarkOverlapped(n,"."+_t.gaugeValue)),n.toggleFocusLegend(r,!1),a.focusedTargetIds=a.focusedTargetIds.filter(function(t){return i(this,e),r.indexOf(t)<0}.bind(this)),a.defocusedTargetIds=r},revert:function(t){var e=this.internal,i=e.config,n=e.state,r=e.$el,s=e.mapToTargetIds(t);r.svg.selectAll(e.selectorTargets(s)).classed(At.focused,!1).classed(At.defocused,!1),e.hasArcType(null,["polar"])&&e.unexpandArc(s),i.legend_show&&(e.showLegend(s.filter(e.isLegendToShow.bind(e))),r.legend.selectAll(e.selectorLegends(s)).filter((function(){return(0,a.select)(this).classed(At.legendItemFocused)})).classed(At.legendItemFocused,!1)),n.focusedTargetIds=[],n.defocusedTargetIds=[]}},ci={load:function(t){var e=this,n=this.internal,a=n.config;t.xs&&n.addXs(t.xs),"names"in t&&this.data.names(t.names),"classes"in t&&Object.keys(t.classes).forEach(function(n){i(this,e),a.data_classes[n]=t.classes[n]}.bind(this)),"categories"in t&&n.axis.isCategorized()&&(a.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach(function(n){i(this,e),a.data_axes[n]=t.axes[n]}.bind(this)),"colors"in t&&Object.keys(t.colors).forEach(function(n){i(this,e),a.data_colors[n]=t.colors[n]}.bind(this)),"unload"in t&&!1!==t.unload?n.unload(n.mapToTargetIds(!0===t.unload?null:t.unload),function(){var a=this;i(this,e),s.requestIdleCallback(function(){return i(this,a),n.loadFromArgs(t)}.bind(this))}.bind(this)):(n.api.tooltip.hide(),n.loadFromArgs(t))},unload:function(t){var e=this,n=this.internal,a=t||{};I(a)?a={ids:a}:T(a)&&(a={ids:[a]});var r=n.mapToTargetIds(a.ids);n.unload(r,function(){i(this,e),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),n.cache.remove(r),a.done&&a.done.call(this)}.bind(this))}};function di(t,e,n){var a=this,r=this.internal,s=r.mapToTargetIds(e),o=r.state.hiddenTargetIds.map(function(t){return i(this,a),s.indexOf(t)>-1&&t}.bind(this)).filter(Boolean);r.state.toggling=!0,r[(t?"remove":"add")+"HiddenTargetIds"](s);var l=r.$el.svg.selectAll(r.selectorTargets(s)),c=t?null:"0";t&&o.length&&(l.style("display",null),M(r.config.data_onshown,this,o)),r.$T(l).style("opacity",c,"important").call(X,function(){i(this,a),t||0!==o.length||(l.style("display","none"),M(r.config.data_onhidden,this,s)),l.style("opacity",c)}.bind(this)),n.withLegend&&r[(t?"show":"hide")+"Legend"](s),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),r.state.toggling=!1}var hi={show:function(t,e){void 0===e&&(e={}),di.call(this,!0,t,e)},hide:function(t,e){void 0===e&&(e={}),di.call(this,!1,t,e)},toggle:function(t,e){var n=this;void 0===e&&(e={});var a=this.internal,r={show:[],hide:[]};a.mapToTargetIds(t).forEach(function(t){return i(this,n),r[a.isTargetToShow(t)?"hide":"show"].push(t)}.bind(this)),r.show.length&&this.show(r.show,e),r.hide.length&&setTimeout(function(){return i(this,n),this.hide(r.hide,e)}.bind(this),0)}},ui={show:function(t){var e,n,a=this,r=this.internal,s=r.$el,o=r.config,l=r.state,c=l.eventReceiver,d=l.hasTreemap,h=l.inputType;if(t.mouse&&(n=t.mouse),t.data){var u=t.data,g=r.getYScaleById(u.id)(u.value);d&&u.id?c.rect=s.main.select(""+r.selectorTarget(u.id,void 0,"rect")):r.isMultipleX()?n=[r.scale.x(u.x),g]:(o.tooltip_grouped||(n=[0,g]),e=_(u.index)?u.index:r.getIndexByX(u.x))}else S(t.x)?e=r.getIndexByX(t.x):S(t.index)&&(e=t.index);("mouse"===h?["mouseover","mousemove"]:["touchstart"]).forEach(function(t){i(this,a),r.dispatchEvent(t,e,n)}.bind(this))},hide:function(){var t=this,e=this.internal,n=e.state.inputType,a=e.$el.tooltip,r=null==a?void 0:a.datum();if(r){var s=JSON.parse(r.current)[0].index;("mouse"===n?["mouseout"]:["touchend"]).forEach(function(n){i(this,t),e.dispatchEvent(n,s)}.bind(this))}"touch"===n&&e.callOverOutForTouch(),e.hideTooltip(!0),e.hideGridFocus(),null==e.unexpandCircles||e.unexpandCircles(),e.expandBarTypeShapes(!1)}},gi=function t(e){this.plugins=[],this.internal=void 0;var n=new Qe(this);this.internal=n,function t(e,n,a){var r=this;Object.keys(e).forEach(function(s){i(this,r);var o=y(e[s]),l=n!==a,c=P(e[s]),d=c&&Object.keys(e[s]).length>0;n[s]=o&&(!l&&d||l)?e[s].bind(a):c&&!o?{}:e[s],d&&t(e[s],n[s],a)}.bind(this))}(t.prototype,this,this),ti.call(n,e),n.beforeInit(),n.init()};function fi(t,e,n){var a=this,r=t.config,s=function(t,n){i(this,a);var s=w(n)?n:!1===n?void 0:null;null!==s&&(r["axis_"+t+"_"+e]=s)}.bind(this);S(n)&&(L(n)?Object.keys(n).forEach(function(t){i(this,a),s(t,n[t])}.bind(this)):(w(n)||!1===n)&&["y","y2"].forEach(function(t){i(this,a),s(t,n)}.bind(this)),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function pi(t,e){var i=t.config;return{x:i["axis_x_"+e],y:i["axis_y_"+e],y2:i["axis_y2_"+e]}}W(gi.prototype,[ei,{color:function(t){return this.internal.color(t)}},ni,oi,li,{legend:{show:function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}}},ci,hi,{tooltip:ui}]);var vi={labels:function(t){var e,n=this,a=this.internal;return t&&(Object.keys(t).forEach(function(e){i(this,n),a.axis.setLabelText(e,t[e])}.bind(this)),a.axis.updateLabels()),["x","y","y2"].forEach(function(t){i(this,n);var r=a.axis.getLabelText(t);r&&(e||(e={}),e[t]=r)}.bind(this)),e},min:function(t){var e=this.internal;return _(t)||!1===t?fi(e,"min",t):pi(e,"min")},max:function(t){var e=this.internal;return _(t)||!1===t?fi(e,"max",t):pi(e,"max")},range:function(t){var e=this.axis;if(!arguments.length)return{max:e.max(),min:e.min()};var i=t.min,n=t.max;S(n)&&e.max(n),S(i)&&e.min(i)}},xi={axis:vi};function bi(t){var e=this.internal,i=e.config;return t?(i.grid_x_lines=t,e.redrawWithoutRescale(),i.grid_x_lines):i.grid_x_lines}W(bi,{add:function(t){return this.xgrids(this.internal.config.grid_x_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!0)}});var mi={xgrids:bi};function _i(t){var e=this.internal,i=e.config;return t?(i.grid_y_lines=t,e.redrawWithoutRescale(),i.grid_y_lines):i.grid_y_lines}W(_i,{add:function(t){return this.ygrids(this.internal.config.grid_y_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!1)}});var yi={ygrids:_i},Ti={groups:function(t){var e=this.internal,i=e.config;return A(t)||(i.data_groups=t,e.redraw()),i.data_groups}};function wi(t){var e=this.internal,i=e.config;return t?(i.regions=t,e.redrawWithoutRescale(),t):i.regions}W(wi,{add:function(t){var e=this.internal,i=e.config;return t?(i.regions=i.regions.concat(t),e.redrawWithoutRescale(),i.regions):i.regions},remove:function(t){var e=this,n=this.internal,a=n.config,r=n.$T,s=t||{},o=z(s,"classes",[Et.region]),l=n.$el.main.select("."+Et.regions).selectAll(o.map(function(t){return i(this,e),"."+t}.bind(this)));return r(l).style("opacity","0").remove(),l=a.regions,Object.keys(s).length?(l=l.filter(function(t){var n=this;i(this,e);var a=!1;return!t.class||(t.class.split(" ").forEach(function(t){i(this,n),o.indexOf(t)>=0&&(a=!0)}.bind(this)),!a)}.bind(this)),a.regions=l):a.regions=[],l}});var Ai={regions:wi},Si={x:function(t){var e=this.internal,i=e.axis,n=e.data,a=i.isCustomX()&&i.isCategorized();return I(t)&&(a?this.categories(t):(e.updateTargetX(n.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),a?this.categories():n.xs},xs:function(t){var e=this.internal;return D(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}},ki={flow:function(t){var e,n=this,a=this.internal;(t.json||t.rows||t.columns)&&a.convertData(t,function(r){i(this,n),e=r,function(){var n,r,s,o=this,l=0,c=0;if(a.state.redrawing||!e||!st())return;var d=[],h=a.getMaxDataCount(),u=a.convertDataToTargets(e,!0),g=a.axis.isTimeSeries();a.data.targets.forEach(function(t){i(this,o);for(var e=!1,n=0;n<u.length;n++)if(t.id===u[n].id){e=!0,t.values[t.values.length-1]&&(c=t.values[t.values.length-1].index+1),l=u[n].values.length;for(var a=0;a<l;a++)u[n].values[a].index=c+a,g||(u[n].values[a].x=c+a);t.values=t.values.concat(u[n].values),u.splice(n,1);break}e||d.push(t.id)}.bind(this)),a.data.targets.forEach(function(t){i(this,o);for(var e=0;e<d.length;e++)if(t.id===d[e]){c=t.values[t.values.length-1].index+1;for(var n=0;n<l;n++)t.values.push({id:t.id,index:c+n,x:g?a.getOtherTargetX(c+n):c+n,value:null})}}.bind(this)),a.data.targets.length&&u.forEach(function(t){var e=this;i(this,o);for(var n=[],r=a.data.targets[0].values[0].index;r<c;r++)n.push({id:t.id,index:r,x:g?a.getOtherTargetX(r):r,value:null});t.values.forEach(function(t){i(this,e),t.index+=c,g||(t.x+=c)}.bind(this)),t.values=n.concat(t.values)}.bind(this));a.data.targets=a.data.targets.concat(u);var f=a.data.targets[0],p=f.values[0];S(t.to)?(l=0,s=g?rt.call(a,t.to):t.to,f.values.forEach(function(t){i(this,o),t.x<s&&l++}.bind(this))):S(t.length)&&(l=t.length);h?1===h&&g&&(r=(f.values[f.values.length-1].x-p.x)/2,n=[new Date(+p.x-r),new Date(+p.x+r)]):(r=g?f.values.length>1?f.values[f.values.length-1].x-p.x:p.x-a.getXDomain(a.data.targets)[0]:1,n=[p.x-r,p.x]);n&&a.updateXDomain(null,!0,!0,!1,n),a.updateTargets(a.data.targets),a.redraw({flow:{index:p.index,length:l,duration:_(t.duration)?t.duration:a.config.transition_duration,done:t.done,orgDataCount:h},withLegend:!0,withTransition:h>1,withTrimXDomain:!1,withUpdateXAxis:!0})}()}.bind(this))}},Ci=p(10),Ri=function(){function t(t){this.owner=void 0,this.config=void 0,this.scale=void 0;var e=Be(),i=t.config,n=t.params;this.owner=t,this.config=i,this.scale=e,!i.noTransition&&n.config.transition_duration||(i.withoutTransition=!0),i.range=this.scaleExtent((n.orgXScale||e).range())}t.getSizeFor1Char=function(t){var e=this,n={w:5.5,h:11.5};return t.empty()||t.select("text").text("0").call(function(t){i(this,e);try{var a=t.node().getBBox(),r=a.width,s=a.height;r&&s&&(n.w=r,n.h=s)}catch(t){}finally{t.text("")}}.bind(this)),this.getSizeFor1Char=function(){return i(this,e),n}.bind(this),n};var e=t.prototype;return e.getTickTransformSetter=function(t){var e=this,n=this.config,a="x"===t?function(t){return i(this,e),"translate("+(t+n.tickOffset)+",0)"}.bind(this):function(t){return i(this,e),"translate(0,"+t+")"}.bind(this);return function(t,n){var r=this;i(this,e),t.attr("transform",function(t){return i(this,r),_(t)?a(Math.ceil(n(t))):null}.bind(this))}.bind(this)},e.scaleExtent=function(t){var e=t[0],i=t[t.length-1];return e<i?[e,i]:[i,e]},e.generateTicks=function(t,e){var n=this,a=this.owner.params.tickStepSize,r=t.domain(),s=r[0],o=r[1],l=[];if(e&&a)for(var c=Math.round(s);c<=o;)l.push(c),c+=a;else if(t.ticks){var d=this.config.tickArguments;if("log"!==t.type||d)l=t.ticks.apply(t,this.config.tickArguments||[]);else{var h=Be("_log").domain([s>0?s:1,o]).range(t.range());l=h.ticks();for(var u=o.toFixed().length;l.length>15;u--)l=h.ticks(u);l.splice(0,1,s),l.splice(l.length-1,1,o)}l=l.map(function(t){return i(this,n),T(t)&&w(t)&&!isNaN(t)&&Math.round(10*t)/10||t}.bind(this))}else{for(var g=Math.ceil(s);g<o;g++)l.push(g);l.length>0&&l[0]>0&&l.unshift(l[0]-(l[1]-l[0]))}return l},e.copyScale=function(){var t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t.type=this.scale.type,t},e.textFormatted=function(t){var e=this.config.tickFormat,i=/\d+\.\d+0{5,}\d$/.test(t)?+(t+"").replace(/0+\d$/,""):t,n=e?e(i):i;return S(n)?n:""},e.transitionise=function(t){var e=this.config,i=t;if(e.withoutTransition)i=t.interrupt();else if(e.transition||!this.owner.params.noTransition)try{i=t.transition(e.transition)}catch(t){}return i},t}(),Ei=function(){function t(t){void 0===t&&(t={}),this.helper=void 0,this.config=void 0,this.params=void 0,this.g=void 0,this.generatedTicks=void 0;var e={innerTickSize:6,outerTickSize:t.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:t.noTransition};e.tickLength=Math.max(e.innerTickSize,0)+e.tickPadding,this.config=e,this.params=t,this.helper=new Ri(this)}var e=t.prototype;return e.create=function(t){var e=this,n=e.config,r=e.helper,s=e.params,o=r.scale,l=n.orient,c=this.splitTickText.bind(e),d=/^(left|right)$/.test(l),h=/^(top|bottom)$/.test(l),u=r.getTickTransformSetter(h?"x":"y"),g=u===r.axisX?"y":"x",f=/^(top|left)$/.test(l)?-1:1,p=s.tickTextRotate;this.config.range=o.rangeExtent?o.rangeExtent():r.scaleExtent((s.orgXScale||o).range());var v,x=n.innerTickSize,b=n.tickLength,m=n.range,_=s.id,y=_&&/^(x|y|y2)$/.test(_)?s.config["axis_"+_+"_tick_text_position"]:{x:0,y:0},T="subX"===_?"subchart_axis_x":"axis_"+_,A=s.config[T+"_show"],S=!!A&&s.config[T+"_tick_show"],k=!!A&&s.config[T+"_tick_text_show"];t.each((function(){var t=this,_=(0,a.select)(this),T=this.__chart__||o,A=r.copyScale();v=_,this.__chart__=A,n.tickOffset=s.isCategory?Math.ceil((A(1)-A(0))/2):0;var C=_.selectAll(".domain").data([0]);if(C.enter().append("path").attr("class","domain").merge(C).attr("d",function(){i(this,t);var e=n.outerTickSize*f;return h?"M"+m[0]+","+e+"V0H"+m[1]+"V"+e:"M"+e+","+m[0]+"H0V"+m[1]+"H"+e}.bind(this)),S||k){var R=n.tickValues||r.generateTicks(A,d);e.generatedTicks=R;var E=_.selectAll(".tick").data(R,A),L=E.enter().insert("g",".domain").attr("class","tick"),O=E.exit().remove();E=L.merge(E),S&&L.append("line"),k&&L.append("text");var P=Ri.getSizeFor1Char(E),D=[],z=E.select("text").selectAll("tspan").data(function(e,n){var a=this;i(this,t);var o=s.tickMultiline?c(e,A,R,d,P.w):I(r.textFormatted(e))?r.textFormatted(e).concat():[r.textFormatted(e)];return D[n]=o.length,o.map(function(t){return i(this,a),{index:n,splitted:t}}.bind(this))}.bind(this));z.exit().remove(),(z=z.enter().append("tspan").merge(z).text(function(e){return i(this,t),e.splitted}.bind(this))).attr("x",h?0:b*f).attr("dx",function(){i(this,t);var e=0;return/(top|bottom)/.test(l)&&p&&(e=8*Math.sin(Math.PI*(p/180))*("top"===l?-1:1)),e+(y.x||0)}.bind(this)()).attr("dy",function(e,n){i(this,t);var a=0;return"top"!==l&&(a=P.h,0===n&&(a=d?-((D[e.index]-1)*(P.h/2)-3):0===y.y?".71em":0)),w(a)&&y.y?a+y.y:a||".71em"}.bind(this));var M=E.select("line"),X=E.select("text");if(L.select("line").attr(g+"2",x*f),L.select("text").attr(g,b*f),e.setTickLineTextPosition(M,X),s.tickTitle){var $=X.select("title");($.empty()?X.append("title"):$).text(function(e){return i(this,t),s.tickTitle[e]}.bind(this))}if(A.bandwidth){var F=A,B=F.bandwidth()/2;T=function(e){return i(this,t),F(e)+B}.bind(this),A=T}else T.bandwidth?T=A:u(O,A);E=s.owner.state.flowing?r.transitionise(E):s.owner.$T(E),u(L,T),u(E.style("opacity",null),A)}})),this.g=v},e.getGeneratedTicks=function(t){var e,n=this,a=(null==(e=this.generatedTicks)?void 0:e.length)-1,r=this.generatedTicks;if(a>t){var s=Math.round(a/t+.1);r=this.generatedTicks.map(function(t,e){return i(this,n),e%s==0?t:null}.bind(this)).filter(function(t){return i(this,n),null!==t}.bind(this)).splice(0,t)}return r},e.getTickXY=function(){var t=this.config,e={x:0,y:0};return this.params.isCategory&&(e.x=t.tickCentered?0:t.tickOffset,e.y=t.tickCentered?t.tickOffset:0),e},e.getTickSize=function(t){var e=this.helper.scale,i=this.config,n=i,a=n.innerTickSize,r=n.range,s=e(t)+(i.tickCentered?0:i.tickOffset);return r[0]<s&&s<r[1]?a:0},e.setTickLineTextPosition=function(t,e){var n=this,a=this.getTickXY(),r=this.config,s=r.innerTickSize,o=r.orient,l=r.tickLength,c=r.tickOffset,d=this.params.tickTextRotate,h=function(t){i(this,n);var e=["start","end"];return"top"===o&&e.reverse(),t?e[t>0?0:1]:"middle"}.bind(this),u=function(t){return i(this,n),t?"rotate("+t+")":null}.bind(this),g=function(t){return i(this,n),t?11.5-2.5*(t/("bottom"===o?15:23))*(t>0?1:-1):l}.bind(this);switch(o){case"bottom":t.attr("x1",a.x).attr("x2",a.x).attr("y2",this.getTickSize.bind(this)),e.attr("x",0).attr("y",g(d)).style("text-anchor",h(d)).attr("transform",u(d));break;case"top":t.attr("x2",0).attr("y2",-s),e.attr("x",0).attr("y",2*-g(d)).style("text-anchor",h(d)).attr("transform",u(d));break;case"left":t.attr("x2",-s).attr("y1",a.y).attr("y2",a.y),e.attr("x",-l).attr("y",c).style("text-anchor","end");break;case"right":t.attr("x2",s).attr("y2",0),e.attr("x",l).attr("y",0).style("text-anchor","start")}},e.splitTickText=function(t,e,i,n,a){var r=this.params,s=this.helper.textFormatted(t),o=T(s)&&s.indexOf("\n")>-1?s.split("\n"):[];if(o.length)return o;if(I(s))return s;var l=r.tickWidth;return(!l||l<=0)&&(l=n?95:r.isCategory?Math.ceil(e(i[1])-e(i[0]))-12:110),function t(e,i){for(var n,r,s,o=1;o<i.length;o++)if(" "===i.charAt(o)&&(r=o),n=i.substr(0,o+1),s=a*n.length,l<s)return t(e.concat(i.substr(0,r||o)),i.slice(r?r+1:o));return e.concat(i)}(o,s+"")},e.scale=function(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale},e.orient=function(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",this):this.config.orient},e.tickFormat=function(t){var e=this.config;return arguments.length?(e.tickFormat=t,this):e.tickFormat},e.tickCentered=function(t){var e=this.config;return arguments.length?(e.tickCentered=t,this):e.tickCentered},e.tickOffset=function(){return this.config.tickOffset},e.tickInterval=function(t){var e,n=this,a=this.config,r=a.outerTickSize,s=a.tickOffset,o=a.tickValues;if(this.params.isCategory)e=2*s;else{e=(this.g.select("path.domain").node().getTotalLength()-2*r)/(t||this.g.selectAll("line").size());var l=o?o.map(function(t,e,a){i(this,n);var r=e+1;return r<a.length?this.helper.scale(a[r])-this.helper.scale(t):null}.bind(this)).filter(Boolean):[];e=Math.min.apply(Math,l.concat([e]))}return e===1/0?0:e},e.ticks=function(){for(var t=this.config,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.length?(t.tickArguments=Z(i),this):t.tickArguments},e.tickCulling=function(t){var e=this.config;return arguments.length?(e.tickCulling=t,this):e.tickCulling},e.tickValues=function(t){var e=this,n=this.config;if(y(t))n.tickValues=function(){return i(this,e),t(this.helper.scale.domain())}.bind(this);else{if(!arguments.length)return n.tickValues;n.tickValues=t}return this},e.setTransition=function(t){return this.config.transition=t,this},t}(),Li={getAxisInstance:function(){return this.axis||new Oi(this)}},Oi=function(){function t(t){this.owner=void 0,this.x=void 0,this.subX=void 0,this.y=void 0,this.y2=void 0,this.axesList={},this.tick={x:null,y:null,y2:null},this.xs=[],this.orient={x:"bottom",y:"left",y2:"right",subX:"bottom"},this.owner=t,this.setOrient()}var e=t.prototype;return e.getAxisClassName=function(t){return ft.axis+" "+ft["axis"+U(t)]},e.isHorizontal=function(t,e){var i=t.config.axis_rotated;return e?i:!i},e.isCategorized=function(){var t=this.owner,e=t.config,i=t.state;return e.axis_x_type.indexOf("category")>=0||i.hasRadar},e.isCustomX=function(){var t=this.owner.config;return!this.isTimeSeries()&&(t.data_x||P(t.data_xs))},e.isTimeSeries=function(t){return void 0===t&&(t="x"),"timeseries"===this.owner.config["axis_"+t+"_type"]},e.isLog=function(t){return void 0===t&&(t="x"),"log"===this.owner.config["axis_"+t+"_type"]},e.isTimeSeriesY=function(){return this.isTimeSeries("y")},e.getAxisType=function(t){void 0===t&&(t="x");var e="linear";return this.isTimeSeries(t)?e=this.owner.config.axis_x_localtime?"time":"utc":this.isLog(t)&&(e="log"),e},e.init=function(){var t=this,e=this.owner,n=e.config,a=e.$el,r=a.main,s=a.axis,o=e.state.clip,l=n.axis_rotated,c=["x","y"];n.axis_y2_show&&c.push("y2"),c.forEach(function(a){var c=this;i(this,t);var d=this.getAxisClassName(a),h=ft["axis"+a.toUpperCase()+"Label"];s[a]=r.append("g").attr("class",d).attr("clip-path",function(){i(this,c);var t=null;return"x"===a?t=o.pathXAxis:"y"===a&&(t=o.pathYAxis),t}.bind(this)).attr("transform",e.getTranslate(a)).style("visibility",n["axis_"+a+"_show"]?null:"hidden"),s[a].append("text").attr("class",h).attr("transform",["rotate(-90)",null]["x"===a?+!l:+l]).style("text-anchor",function(){return i(this,c),this.textAnchorForAxisLabel(a)}.bind(this)),this.generateAxes(a)}.bind(this))},e.setOrient=function(){var t=this.owner.config,e=t.axis_rotated,i=t.axis_y_inner,n=t.axis_y2_inner;this.orient={x:e?"left":"bottom",y:e?i?"top":"bottom":i?"right":"left",y2:e?n?"bottom":"top":n?"left":"right",subX:e?"left":"bottom"}},e.generateAxes=function(t){var e,n=this,a=this.owner,r=a.config,s=[],o=r["axis_"+t+"_axes"],l=r.axis_rotated;"x"===t?e=l?Ci.axisLeft:Ci.axisBottom:"y"===t?e=l?Ci.axisBottom:Ci.axisLeft:"y2"===t&&(e=l?Ci.axisTop:Ci.axisRight),o.length&&o.forEach(function(r){var o=this;i(this,n);var l=r.tick||{},c=a.scale[t].copy();r.domain&&c.domain(r.domain),s.push(e(c).ticks(l.count).tickFormat(y(l.format)?l.format.bind(a.api):function(t){return i(this,o),t}.bind(this)).tickValues(l.values).tickSizeOuter(!1===l.outer?0:6))}.bind(this)),this.axesList[t]=s},e.updateAxes=function(){var t=this,e=this.owner,n=e.config,a=e.$el.main,r=e.$T;Object.keys(this.axesList).forEach(function(s){var o=this;i(this,t);var l=n["axis_"+s+"_axes"],c=e.scale[s].copy(),d=c.range();this.axesList[s].forEach(function(t,h){var u=this;i(this,o);var g=t.scale().range();d.every(function(t,e){return i(this,u),t===g[e]}.bind(this))||t.scale().range(d);var f=this.getAxisClassName(s)+"-"+(h+1),p=a.select("."+f.replace(/\s/,"."));p.empty()?p=a.append("g").attr("class",f).style("visibility",n["axis_"+s+"_show"]?null:"hidden").call(t):(l[h].domain&&c.domain(l[h].domain),r(p).call(t.scale(c))),p.attr("transform",e.getTranslate(s,h+1))}.bind(this))}.bind(this))},e.setAxis=function(t,e,i,n){var a=this.owner;"subX"!==t&&(this.tick[t]=this.getTickValues(t)),this[t]=this.getAxis(t,e,i,!("x"!==t||!(a.scale.zoom||a.config.subchart_show||a.state.resizing))||n)},e.getAxis=function(t,e,n,a,r){var s,o=this,l=this.owner,c=l.config,d=/^(x|subX)$/.test(t),h=d?"x":t,u=d&&this.isCategorized(),g=this.orient[t],f=r?0:l.getAxisTickRotate(h);if(d)s="subX"===t?l.format.subXAxisTick:l.format.xAxisTick;else{var p=c["axis_"+t+"_tick_format"];y(p)&&(s=p.bind(l.api))}var v=this.tick[h],x=Q({outerTick:n,noTransition:a,config:c,id:t,tickTextRotate:f,owner:l},d&&{isCategory:u,tickMultiline:c.axis_x_tick_multiline,tickWidth:c.axis_x_tick_width,tickTitle:u&&c.axis_x_tick_tooltip&&l.api.categories(),orgXScale:l.scale.x});d||(x.tickStepSize=c["axis_"+h+"_tick_stepSize"]);var b=new Ei(x).scale(d&&l.scale.zoom||e).orient(g);if(d&&this.isTimeSeries()&&v&&!y(v)){var m=rt.bind(l);v=v.map(function(t){return i(this,o),m(t)}.bind(this))}else!d&&this.isTimeSeriesY()&&(b.ticks(c.axis_y_tick_time_value),v=null);v&&b.tickValues(v),b.tickFormat(s||!d&&l.isStackNormalized()&&function(t){return i(this,o),t+"%"}.bind(this)),u&&(b.tickCentered(c.axis_x_tick_centered),O(c.axis_x_tick_culling)&&(c.axis_x_tick_culling=!1));var _=c["axis_"+h+"_tick_count"];return _&&b.ticks(_),b},e.updateXAxisTickValues=function(t,e){var i,n=this.owner,a=n.config,r=a.axis_x_tick_fit,s=a.axis_x_tick_count;if((r||s&&r)&&(i=n.mapTargetsToUniqueXs(t),this.isCategorized()&&s>i.length&&(s=i.length),i=this.generateTickValues(i,s,this.isTimeSeries())),e)e.tickValues(i);else if(this.x){var o;this.x.tickValues(i),null==(o=this.subX)||o.tickValues(i)}return i},e.getId=function(t){var e=this.owner,i=e.config,n=e.scale,a=i.data_axes[t];return a&&n[a]||(a="y"),a},e.getXAxisTickFormat=function(t){var e,n=this,a=this.owner,r=a.config,s=a.format,o=t&&r.subchart_axis_x_tick_format||r.axis_x_tick_format,l=this.isTimeSeries(),c=this.isCategorized();return o?y(o)?e=o.bind(a.api):l&&(e=function(t){return i(this,n),t?s.axisTime(o)(t):""}.bind(this)):e=l?s.defaultAxisTime:c?a.categoryName:function(t){return i(this,n),t<0?t.toFixed(0):t}.bind(this),y(e)?function(t){return i(this,n),e.apply(a,c?[t,a.categoryName(t)]:[t])}.bind(this):e},e.getTickValues=function(t){var e=this.owner,i=e.config["axis_"+t+"_tick_values"],n=e[t+"Axis"];return(y(i)?i.call(e.api):i)||(n?n.tickValues():void 0)},e.getLabelOptionByAxisId=function(t){return this.owner.config["axis_"+t+"_label"]},e.getLabelText=function(t){var e=this.getLabelOptionByAxisId(t);return T(e)?e:e?e.text:null},e.setLabelText=function(t,e){var i=this.owner.config,n=this.getLabelOptionByAxisId(t);T(n)?i["axis_"+t+"_label"]=e:n&&(n.text=e)},e.getLabelPosition=function(t,e){var n=this,a=this.owner.config.axis_rotated,r=this.getLabelOptionByAxisId(t),s=L(r)&&r.position?r.position:e[+!a],o=function(t){return i(this,n),!!~s.indexOf(t)}.bind(this);return{isInner:o("inner"),isOuter:o("outer"),isLeft:o("left"),isCenter:o("center"),isRight:o("right"),isTop:o("top"),isMiddle:o("middle"),isBottom:o("bottom")}},e.getAxisLabelPosition=function(t){return this.getLabelPosition(t,"x"===t?["inner-top","inner-right"]:["inner-right","inner-top"])},e.getLabelPositionById=function(t){return this.getAxisLabelPosition(t)},e.xForAxisLabel=function(t){var e=this.owner,i=e.state,n=i.width,a=i.height,r=this.getAxisLabelPosition(t),s=r.isMiddle?-a/2:0;return this.isHorizontal(e,"x"!==t)?s=r.isLeft?0:r.isCenter?n/2:n:r.isBottom&&(s=-a),s},e.dxForAxisLabel=function(t){var e=this.owner,i=this.getAxisLabelPosition(t),n=i.isBottom?"0.5em":"0";return this.isHorizontal(e,"x"!==t)?n=i.isLeft?"0.5em":i.isRight?"-0.5em":"0":i.isTop&&(n="-0.5em"),n},e.textAnchorForAxisLabel=function(t){var e=this.owner,i=this.getAxisLabelPosition(t),n=i.isMiddle?"middle":"end";return this.isHorizontal(e,"x"!==t)?n=i.isLeft?"start":i.isCenter?"middle":"end":i.isBottom&&(n="start"),n},e.dyForAxisLabel=function(t){var e,i=this.owner,n=i.config,a=n.axis_rotated,r=this.getAxisLabelPosition(t).isInner,s=n["axis_"+t+"_tick_rotate"]?i.getHorizontalAxisHeight(t):0,o=this.getMaxTickWidth(t);if("x"===t){var l=n.axis_x_height;e=a?r?"1.2em":-25-o:r?"-0.5em":l?l-10:s?s-10:"3em"}else e={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[t],e=a?r?e[0]:s?s*("y2"===t?-1:1)-e[1]:e[2]:r?e[3]:(e[4]+(n["axis_"+t+"_inner"]?0:o+e[4]))*("y"===t?-1:1);return e},e.getMaxTickWidth=function(t,e){var n=this,a=this.owner,r=a.config,s=a.state.current,o=a.$el,l=o.svg,c=o.chart,d=s.maxTickWidths[t],h=0;if(e||!r["axis_"+t+"_show"]||d.size>0&&0===a.filterTargetsToShow().length)return d.size;if(l){var u=/^y2?$/.test(t),g=a.filterTargetsToShow(a.data.targets),f=a.scale[t].copy().domain(a["get"+(u?"Y":"X")+"Domain"](g,t)),p=f.domain(),v=p[0]===p[1]&&p.every(function(t){return i(this,n),t>0}.bind(this)),x=I(d.domain)&&d.domain[0]===d.domain[1]&&d.domain.every(function(t){return i(this,n),t>0}.bind(this));if(v||x)return d.size;d.domain=p,u||d.ticks.splice(0);var b=this.getAxis(t,f,!1,!1,!0),m=r["axis_"+t+"_tick_count"];!r["axis_"+t+"_tick_values"]&&m&&b.tickValues(this.generateTickValues(p,m,u?this.isTimeSeriesY():this.isTimeSeries())),u||this.updateXAxisTickValues(g,b);var _=c.append("svg").style("visibility","hidden").style("position","fixed").style("top","0").style("left","0");b.create(_),_.selectAll("text").each((function(t,e){var i=this.getBoundingClientRect().width;h=Math.max(h,i),u||(d.ticks[e]=i)})),_.remove()}return h>0&&(d.size=h),d.size},e.getXAxisTickTextY2Overflow=function(t){var e=this.owner,i=e.axis,n=e.config,a=e.state,r=e.getAxisTickRotate("x");if((i.isCategorized()||i.isTimeSeries())&&n.axis_x_tick_fit&&!n.axis_x_tick_culling&&!n.axis_x_tick_multiline&&r>0&&r<90){var s=a.current.width-e.getCurrentPaddingLeft(),o=this.getXAxisTickMaxOverflow(r,s-t),l=Math.max(0,o)+t;return Math.min(l,s/2)}return 0},e.getXAxisTickMaxOverflow=function(t,e){for(var i=this.owner,n=i.axis,a=i.config,r=i.state,s=n.isTimeSeries(),o=r.current.maxTickWidths.x.ticks,l=o.length,c=r.axis.x.padding,d=c.left,h=c.right,u=0,g=l-(s&&a.axis_x_tick_fit?.5:0),f=0;f<l;f++){var p=f+1,v=Math.cos(Math.PI*t/180)*o[f],x=p-(s?1:.5)+d;if(!(x<=0)){var b=(e-v)/x,m=v-b/2-((g-p)*b+h*b);u=Math.max(u,m)}}var _=i.filterTargetsToShow(i.data.targets),y=0;if(!s&&a.axis_x_tick_count<=_.length&&_[0].values.length){var T=Be(i.axis.getAxisType("x"),0,e-u).domain([-1*d,i.getXDomainMax(i.data.targets)+1+h]);y=Math.ceil((T(1)-T(0))/2)}return u+y},e.updateLabels=function(t){var e=this,n=this.owner,a=n.$el.main,r=n.$T,s={x:a.select("."+ft.axisX+" ."+ft.axisXLabel),y:a.select("."+ft.axisY+" ."+ft.axisYLabel),y2:a.select("."+ft.axisY2+" ."+ft.axisY2Label)};Object.keys(s).filter(function(t){return i(this,e),!s[t].empty()}.bind(this)).forEach(function(n){var a=this;i(this,e);var o=s[n];r(o,t).attr("x",function(){return i(this,a),this.xForAxisLabel(n)}.bind(this)).attr("dx",function(){return i(this,a),this.dxForAxisLabel(n)}.bind(this)).attr("dy",function(){return i(this,a),this.dyForAxisLabel(n)}.bind(this)).text(function(){return i(this,a),this.getLabelText(n)}.bind(this))}.bind(this))},e.getPadding=function(t,e,i,n){var a=w(t)?t:t[e];return _(a)?this.owner.convertPixelToScale(/(bottom|top)/.test(e)?"y":"x",a,n):i},e.generateTickValues=function(t,e,n){var a=this,r=t;if(e){var s=y(e)?e():e;if(1===s)r=[t[0]];else if(2===s)r=[t[0],t[t.length-1]];else if(s>2){var o,l=this.isCategorized(),c=s-2,d=t[0],h=t[t.length-1];r=[d];for(var u=0;u<c;u++)o=+d+(h-d)/(c+1)*(u+1),r.push(n?new Date(o):l?Math.round(o):o);r.push(h)}}return n||(r=r.sort(function(t,e){return i(this,a),t-e}.bind(this))),r},e.generateTransitions=function(t){var e=this,n=this.owner,a=n.$el.axis,r=n.$T,s=["x","y","y2","subX"].map(function(n){return i(this,e),r(a[n],t)}.bind(this));return{axisX:s[0],axisY:s[1],axisY2:s[2],axisSubX:s[3]}},e.redraw=function(t,e,n){var a=this,r=this.owner,s=r.config,o=r.$el,l=e?"0":null;["x","y","y2","subX"].forEach(function(e){i(this,a);var r=this[e],c=o.axis[e];r&&c&&(n||s.transition_duration||(r.config.withoutTransition=!0),c.style("opacity",l),r.create(t["axis"+U(e)]))}.bind(this)),this.updateAxes()},e.redrawAxis=function(t,e,n,a,r){var s,o,l,c=this,d=this.owner,h=d.config,u=d.scale,g=d.$el,f=!!u.zoom;if(!f&&this.isCategorized()&&0===t.length&&u.x.domain([0,g.axis.x.selectAll(".tick").size()]),u.x&&t.length)f||d.updateXDomain(t,e.UpdateXDomain,e.UpdateOrgXDomain,e.TrimXDomain),h.axis_x_tick_values||this.updateXAxisTickValues(t);else if(this.x){var p;this.x.tickValues([]),null==(p=this.subX)||p.tickValues([])}(h.zoom_rescale&&!a&&(s=u.x.orgDomain()),["y","y2"].forEach(function(e){var n=this;i(this,c);var a="axis_"+e+"_",r=u[e];if(r){var o=h[a+"tick_values"],l=h[a+"tick_count"];if(r.domain(d.getYDomain(t,e,s)),!o&&l){var g=d.axis[e],f=r.domain();g.tickValues(this.generateTickValues(f,f.every(function(t){return i(this,n),0===t}.bind(this))?1:l,this.isTimeSeriesY()))}}}.bind(this)),this.redraw(n,d.hasArcType(),r),this.updateLabels(e.Transition),(e.UpdateXDomain||e.UpdateXAxis||e.Y)&&t.length&&this.setCulling(),e.Y)&&(null==(o=u.subY)||o.domain(d.getYDomain(t,"y")),null==(l=u.subY2)||l.domain(d.getYDomain(t,"y2")))},e.setCulling=function(){var t=this,e=this.owner,n=e.config,a=e.state,r=a.clip,s=a.current,o=e.$el;["subX","x","y","y2"].forEach(function(e){i(this,t);var a=o.axis[e],l="axis_"+("subX"===e?"x":e)+"_tick_culling",c=n[l];if(a&&c){var d,h=a.selectAll(".tick"),u=tt(h.data()),g=u.length,f=n[l+"_max"],p=n[l+"_lines"];if(g){for(var v=1;v<g;v++)if(g/v<f){d=v;break}h.each((function(t){var e=p?this.querySelector("text"):this;e&&(e.style.display=u.indexOf(t)%d?"none":null)}))}else h.style("display",null);if("x"===e){var x=s.maxTickWidths.x.clipPath?r.pathXAxisTickTexts:null;o.svg.selectAll("."+ft.axisX+" .tick text").attr("clip-path",x)}}}.bind(this))},t}(),Pi={initEventRect:function(){this.$el.main.select("."+ht.chart).append("g").attr("class",wt.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var t=this,e=t.config,i=t.state,n=t.$el,a=t.isMultipleX();if(n.eventRect)t.updateEventRect(n.eventRect,!0);else{var r=t.$el.main.select("."+wt.eventRects).style("cursor",e.zoom_enabled&&"drag"!==e.zoom_type?e.axis_rotated?"ns-resize":"ew-resize":null).classed(wt.eventRectsMultiple,a).classed(wt.eventRectsSingle,!a).selectAll("."+wt.eventRect).data([0]).enter().append("rect");t.updateEventRect(r),a?t.generateEventRectsForMultipleXs(r):t.generateEventRectsForSingleX(r),r.call(t.getDraggableSelection()),n.eventRect=r,"touch"!==t.state.inputType||n.svg.on("touchstart.eventRect")||t.hasArcType()||t.bindTouchOnEventRect(a)}if(!a){var s=t.getMaxDataCountTarget();t.updateDataIndexByX(s),t.updateXs(s),null==t.updatePointClass||t.updatePointClass(!0),i.eventReceiver.data=s}t.updateEventRectData()},bindTouchOnEventRect:function(t){var e,n=this,a=this,r=a.config,s=a.state,o=a.$el,l=o.eventRect,c=o.svg,d=function(e){if(i(this,n),t)a.selectRectForMultipleXs(e);else{var r=a.getDataIndexFromEvent(s.event);a.callOverOutForTouch(r),-1===r?a.unselectRect():a.selectRectForSingle(e,l,r)}}.bind(this),h=function(){i(this,n),a.unselectRect(),a.callOverOutForTouch()}.bind(this),u=r.interaction_inputType_touch.preventDefault,g=k(u)&&u||!1,f=!isNaN(u)&&u||null,p=function(t){i(this,n);var a=t.type,s=t.changedTouches[0]["client"+(r.axis_rotated?"Y":"X")];"touchstart"===a?g?t.preventDefault():null!==f&&(e=s):"touchmove"===a&&(g||!0===e||null!==f&&Math.abs(e-s)>=f)&&(e=!0,t.preventDefault())}.bind(this);l.on("touchstart",function(t){i(this,n),s.event=t,a.updateEventRect()}.bind(this)).on("touchstart.eventRect touchmove.eventRect",function(t){if(i(this,n),s.event=t,!l.empty()&&l.classed(wt.eventRect)){if(s.dragging||s.flowing||a.hasArcType()||t.touches.length>1)return;p(t),d(l.node())}else h()}.bind(this),!0).on("touchend.eventRect",function(t){i(this,n),s.event=t,!l.empty()&&l.classed(wt.eventRect)&&(a.hasArcType()||!a.toggleShape||s.cancelClick)&&s.cancelClick&&(s.cancelClick=!1)}.bind(this),!0),c.on("touchstart",function(t){i(this,n),s.event=t;var e=t.target;e&&e!==l.node()&&h()}.bind(this))},updateEventRect:function(t,e){var n=this;void 0===e&&(e=!1);var a=this.state,r=this.$el,s=a,o=s.eventReceiver,l=s.width,c=s.height,d=s.rendered,h=s.resizing,u=t||r.eventRect,g=function(){i(this,n),o&&(o.rect=u.node().getBoundingClientRect())}.bind(this);(!d||h||e)&&(u.attr("x",0).attr("y",0).attr("width",l).attr("height",c),d||u.attr("class",wt.eventRect)),g()},updateEventRectData:function(){var t,e,n,a,r=this,s=this,o=s.config,l=s.scale,c=s.state,d=l.zoom||l.x,h=o.axis_rotated;if(s.isMultipleX())t=0,e=0,n=c.width,a=c.height;else{var u,g;if(s.axis.isCategorized())u=s.getEventRectWidth(),g=function(t){return i(this,r),d(t.x)-u/2}.bind(this);else{var f=function(t){var e=t.index;return i(this,r),{prev:s.getPrevX(e),next:s.getNextX(e)}}.bind(this);u=function(t){var e=this;i(this,r);var n,a=f(t),s=d.domain();return null===a.prev&&null===a.next?n=h?c.height:c.width:null===a.prev?n=(d(a.next)+d(t.x))/2:null===a.next?n=d(s[1])-(d(a.prev)+d(t.x))/2:(Object.keys(a).forEach(function(t,n){var r;i(this,e),a[t]=null!=(r=a[t])?r:s[n]}.bind(this)),n=Math.max(0,(d(a.next)-d(a.prev))/2)),n}.bind(this),g=function(t){i(this,r);var e=f(t);return null===e.prev&&null===e.next?0:null===e.prev?d(d.domain()[0]):(d(t.x)+d(e.prev))/2}.bind(this)}t=h?0:g,e=h?g:0,n=h?c.width:u,a=h?u:c.height}var p=c.eventReceiver,v=function(t,e){return i(this,r),y(t)?t(e):t}.bind(this);p.coords.splice(p.data.length),p.data.forEach(function(s,o){i(this,r),p.coords[o]={x:v(t,s),y:v(e,s),w:v(n,s),h:v(a,s)}}.bind(this))},selectRectForMultipleXs:function(t){var e=this,n=this,a=n.config,r=n.state,s=n.filterTargetsToShow(n.data.targets);if(!r.dragging&&!n.hasArcType(s)){var o=N(r.event,t),l=n.findClosestFromTargets(s,o);if(!r.mouseover||l&&l.id===r.mouseover.id||(a.data_onout.call(n.api,r.mouseover),r.mouseover=void 0),l){var c=(n.isBubbleType(l)||n.isScatterType(l)||!a.tooltip_grouped?[l]:n.filterByX(s,l.x)).map(function(t){return i(this,e),n.addName(t)}.bind(this));n.showTooltip(c,t),n.setExpand(l.index,l.id,!0),n.showGridFocus(c),(n.isBarType(l.id)||n.dist(l,o)<a.point_sensitivity)&&(n.$el.svg.select("."+wt.eventRect).style("cursor","pointer"),r.mouseover||(a.data_onover.call(n.api,l),r.mouseover=l))}else n.unselectRect()}},unselectRect:function(){var t=this,e=t.config,i=t.$el,n=i.circle,a=i.tooltip;t.$el.svg.select("."+wt.eventRect).style("cursor",null),t.hideGridFocus(),a&&(t.hideTooltip(),t._handleLinkedCharts(!1)),n&&!e.point_focus_only&&t.unexpandCircles(),t.expandBarTypeShapes(!1)},generateEventRectsForSingleX:function(t){var e=this,n=this,a=n.config,r=n.state,s=r.eventReceiver,o=t.style("cursor",a.data_selection_enabled&&a.data_selection_grouped?"pointer":null).on("click",(function(t){r.event=t;var e=s.currentIdx,i=s.data[-1===e?n.getDataIndexFromEvent(t):e];n.clickHandlerForSingleX.bind(this)(i,n)}));if("mouse"===r.inputType){var l=function(t){i(this,e);var a=t?n.getDataIndexFromEvent(t):s.currentIdx;return a>-1?s.data[a]:null}.bind(this);o.on("mouseover",function(t){i(this,e),r.event=t,n.updateEventRect()}.bind(this)).on("mousemove",(function(t){var e=l(t);if(r.event=t,e){var i=e.index,c=a.line_step_type;if(a.line_step_tooltipMatch&&n.hasType("step")&&/^step\-(before|after)$/.test(c)){var d=n.scale.zoom||n.scale.x,h=n.axis.xs[i],u=d.invert(N(t,this)[0]);"step-after"===c&&u<h?i-=1:"step-before"===c&&u>h&&(i+=1)}r.dragging||r.flowing||n.hasArcType()||a.tooltip_grouped&&i===s.currentIdx||(i!==s.currentIdx&&(n.setOverOut(!1,s.currentIdx),s.currentIdx=i),-1===i?n.unselectRect():n.selectRectForSingle(this,o,i),n.setOverOut(-1!==i,i))}})).on("mouseout",function(t){i(this,e),r.event=t,a&&!n.hasArcType()&&-1!==s.currentIdx&&(n.unselectRect(),n.setOverOut(!1,s.currentIdx),s.currentIdx=-1)}.bind(this))}return o},clickHandlerForSingleX:function(t,e){var i=e,n=i.config,a=i.state,r=i.$el.main;if(!t||i.hasArcType()||a.cancelClick)a.cancelClick&&(a.cancelClick=!1);else{var s=t.index;r.selectAll("."+Ot.shape+"-"+s).each((function(t){(n.data_selection_grouped||i.isWithinShape(this,t))&&(null==i.toggleShape||i.toggleShape(this,t,s),n.data_onclick.bind(i.api)(t,this))}))}},generateEventRectsForMultipleXs:function(t){var e=this,n=this,a=n.state;t.on("click",(function(t){a.event=t,n.clickHandlerForMultipleXS.bind(this)(n)})),"mouse"===a.inputType&&t.on("mouseover mousemove",(function(t){a.event=t,n.selectRectForMultipleXs(this)})).on("mouseout",function(t){i(this,e),a.event=t,n.config&&!n.hasArcType()&&n.unselectRect()}.bind(this))},clickHandlerForMultipleXS:function(t){var e=t,i=e.config,n=e.state,a=e.filterTargetsToShow(e.data.targets);if(!e.hasArcType(a)){var r=N(n.event,this),s=e.findClosestFromTargets(a,r);s&&(e.isBarType(s.id)||e.dist(s,r)<i.point_sensitivity)&&e.$el.main.selectAll("."+Ot.shapes+e.getTargetSelectorSuffix(s.id)).selectAll("."+Ot.shape+"-"+s.index).each((function(){(i.data_selection_grouped||e.isWithinShape(this,s))&&(null==e.toggleShape||e.toggleShape(this,s,s.index),i.data_onclick.bind(e.api)(s,this))}))}}},Ii=p(11),Di={generateFlow:function(t){var e=this,n=e.data,a=e.state,r=e.$el;return function(){var s=this,o=t.flow.length;a.flowing=!0,n.targets.forEach(function(t){i(this,s),t.values.splice(0,o)}.bind(this)),e.updateXGrid&&e.updateXGrid(!0);var l={};["axis.x","grid.x","gridLines.x","region.list","text","bar","line","area","circle"].forEach(function(t){var e;i(this,s);var n=t.split("."),a=r[n[0]];a&&n.length>1&&(a=a[n[1]]),null!=(e=a)&&e.size()&&(l[t]=a)}.bind(this)),e.hideGridFocus(),e.setFlowList(l,t)}},setFlowList:function(t,e){var n,a=this,r=this,s=e.flow,o=e.targets,l=s,c=l.duration,d=void 0===c?e.duration:c,h=l.index,u=l.length,g=l.orgDataCount,f=r.getFlowTransform(o,g,h,u),p=ue();p.add(Object.keys(t).map(function(e){var s=this;return i(this,a),n=t[e].transition().ease(Ii.easeLinear).duration(d),n="axis.x"===e?n.call(function(t){i(this,s),r.axis.x.setTransition(t).create(t)}.bind(this)):"region.list"===e?n.filter(r.isRegionOnX).attr("transform",f):n.attr("transform",f)}.bind(this))),n.call(p,function(){i(this,a),r.cleanUpFlow(t,e)}.bind(this))},cleanUpFlow:function(t,e){var n=this,a=this,r=a.config,s=a.state,o=a.$el.svg,l=r.axis_rotated,c=e.flow,d=e.shape,h=e.xv,u=d.pos,g=u.cx,f=u.cy,p=u.xForText,v=u.yForText,x=c,b=x.done,m=void 0===b?function(){i(this,n)}.bind(this):b,_=x.length;_&&(["circle","text","shape","eventRect"].forEach(function(t){i(this,n);for(var e=[],a=0;a<_;a++)e.push("."+Xt[t]+"-"+a);o.selectAll("."+Xt[t+"s"]).selectAll(e).remove()}.bind(this)),o.select("."+Xt.xgrid).remove()),Object.keys(t).forEach(function(e){var o=this;i(this,n);var c=t[e];if("axis.x"!==e&&c.attr("transform",null),"grid.x"===e)c.attr(s.xgridAttr);else if("gridLines.x"===e)c.attr("x1",l?0:h).attr("x2",l?s.width:h);else if("gridLines.x"===e)c.select("line").attr("x1",l?0:h).attr("x2",l?s.width:h),c.select("text").attr("x",l?s.width:0).attr("y",h);else if(/^(area|bar|line)$/.test(e))c.attr("d",d.type[e]);else if("text"===e)c.attr("x",p).attr("y",v).style("fill-opacity",a.opacityForText.bind(a));else if("circle"===e)if(a.isCirclePoint())c.attr("cx",g).attr("cy",f);else{var u=function(t){return i(this,o),g(t)-r.point_r}.bind(this),x=function(t){return i(this,o),f(t)-r.point_r}.bind(this);c.attr("x",u).attr("y",x).attr("cx",g).attr("cy",f)}else"region.list"===e&&c.select("rect").filter(a.isRegionOnX).attr("x",a.regionX.bind(a)).attr("width",a.regionWidth.bind(a))}.bind(this)),r.interaction_enabled&&a.redrawEventRect(),m.call(a.api),s.flowing=!1},getFlowTransform:function(t,e,i,n){var a,r,s,o=this,l=o.data,c=o.scale.x,d=l.targets[0].values,h=o.getValueOnIndex(d,i),u=o.getValueOnIndex(d,i+n),g=c.domain(),f=o.updateXDomain(t,!0,!0);if(e)if(1===e||(null==(a=h)?void 0:a.x)===(null==(r=u)?void 0:r.x))s=c(g[0])-c(f[0]);else{var p;s=o.axis.isTimeSeries()?c(g[0])-c(f[0]):c((null==(p=h)?void 0:p.x)||0)-c(u.x)}else 1!==d.length?s=c(g[0])-c(f[0]):o.axis.isTimeSeries()?(h=o.getValueOnIndex(d,0),u=o.getValueOnIndex(d,d.length-1),s=c(h.x)-c(u.x)):s=E(f)/2;return"translate("+s+",0) scale("+E(g)/E(f)+",1)"}},zi={initClip:function(){var t=this,e=t.state,i=e.clip,n=e.hasAxis;i.id=t.state.datetimeId+"-clip",n&&(i.idXAxis=i.id+"-xaxis",i.idYAxis=i.id+"-yaxis",i.idGrid=i.id+"-grid",i.path=t.getClipPath(i.id),i.pathXAxis=t.getClipPath(i.idXAxis),i.pathYAxis=t.getClipPath(i.idYAxis),i.pathGrid=t.getClipPath(i.idGrid))},getClipPath:function(t){var e=this.config;return!e.clipPath&&/-clip$/.test(t)||!e.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!e.axis_y_clipPath&&/-clip-yaxis$/.test(t)?null:"url("+(!!s.navigator&&s.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0?"":o.URL.split("#")[0])+"#"+t+")"},appendClip:function(t,e){e&&t.append("clipPath").attr("id",e).append("rect")},setXAxisClipPath:function(t){var e=this.config,i=this.state,n=i.margin,a=i.width,r=i.height,s=e.axis_rotated,o=Math.max(30,n.left)-(s?0:20),l=s?-(1+o):-(o-1),c=-Math.max(15,n.top),d=s?n.left+20:a+10+o,h=(s?n.top+r+10:n.bottom)+20;t.attr("x",l).attr("y",c).attr("width",d).attr("height",h)},setYAxisClipPath:function(t){var e=this.config,i=this.state,n=i.margin,a=i.width,r=i.height,s=e.axis_rotated,o=Math.max(30,n.left)-(s?20:0),l=e.axis_y_inner,c=l?-1:s?-(1+o):-(o-1),d=-(s?20:n.top),h=(s?a+15+o:n.left+20)+(l?20:0),u=(s?n.bottom:n.top+r)+10;t.attr("x",c).attr("y",d).attr("width",h).attr("height",u)},updateXAxisTickClip:function(){var t=this,e=t.config,i=t.state,n=i.clip,a=i.xAxisHeight,r=t.$el.defs,s=t.getHorizontalAxisHeight("x");if(r&&!n.idXAxisTickTexts){var o=n.id+"-xaxisticktexts";t.appendClip(r,o),n.pathXAxisTickTexts=t.getClipPath(n.idXAxisTickTexts),n.idXAxisTickTexts=o}!e.axis_x_tick_multiline&&t.getAxisTickRotate("x")&&s!==a&&(t.setXAxisTickClipWidth(),t.setXAxisTickTextClipPathWidth()),t.state.xAxisHeight=s},setXAxisTickClipWidth:function(){var t=this,e=t.config,i=t.state.current.maxTickWidths,n=t.getAxisTickRotate("x");if(!e.axis_x_tick_multiline&&n){var a=Math.sin(Math.PI/180*Math.abs(n));i.x.clipPath=(t.getHorizontalAxisHeight("x")-20)/a}else i.x.clipPath=null},setXAxisTickTextClipPathWidth:function(){var t=this.state,e=t.clip,i=t.current,n=this.$el.svg;n&&n.select("#"+e.idXAxisTickTexts+" rect").attr("width",i.maxTickWidths.x.clipPath).attr("height",30)}},Mi=void 0,Xi=function(t){return i(this,Mi),_(t.position)||"end"}.bind(void 0),$i=function(t){return i(this,Mi),"start"===t.position?4:"middle"===t.position?0:-4}.bind(void 0);function Fi(t,e,n){var a=this;return function(r){i(this,a);var s=t?0:e;return"start"===r.position?s=t?-n:0:"middle"===r.position&&(s=(t?-n:e)/2),s}.bind(this)}function Bi(t,e){"grid"===e&&t.each((function(){var t=this,e=(0,a.select)(this);["x1","x2","y1","y2"].forEach(function(n){return i(this,t),e.attr(n,Math.ceil(+e.attr(n)))}.bind(this))}))}var Ni={hasGrid:function(){var t=this,e=this.config;return["x","y"].some(function(n){return i(this,t),e["grid_"+n+"_show"]||e["grid_"+n+"_lines"].length}.bind(this))},initGrid:function(){var t=this;t.hasGrid()&&t.initGridLines(),t.initFocusGrid()},initGridLines:function(){var t=this,e=t.config,i=t.state.clip,n=t.$el;(e.grid_x_lines.length||e.grid_y_lines.length)&&(n.gridLines.main=n.main.insert("g","."+ht.chart+(e.grid_lines_front?" + *":"")).attr("clip-path",i.pathGrid).attr("class",St.grid+" "+St.gridLines),n.gridLines.main.append("g").attr("class",St.xgridLines),n.gridLines.main.append("g").attr("class",St.ygridLines),n.gridLines.x=(0,a.selectAll)([]))},updateXGrid:function(t){var e=this,n=this,r=n.config,s=n.scale,o=n.state,l=n.$el,c=l.main,d=l.grid,h=r.axis_rotated,u=n.generateGridData(r.grid_x_type,s.x),g=n.axis.isCategorized()?n.axis.x.tickOffset():0,f=function(t){return i(this,e),(s.zoom||s.x)(t)+g*(h?-1:1)}.bind(this);o.xgridAttr=h?{x1:0,x2:o.width,y1:f,y2:f}:{x1:f,x2:f,y1:0,y2:o.height},d.x=c.select("."+St.xgrids).selectAll("."+St.xgrid).data(u),d.x.exit().remove(),d.x=d.x.enter().append("line").attr("class",St.xgrid).merge(d.x),t||d.x.each((function(){var t=this,e=(0,a.select)(this);Object.keys(o.xgridAttr).forEach(function(n){var a=this;i(this,t),e.attr(n,o.xgridAttr[n]).style("opacity",function(){return i(this,a),e.attr(h?"y1":"x1")===(h?o.height:0)?"0":null}.bind(this))}.bind(this))}))},updateYGrid:function(){var t=this,e=this,n=e.axis,a=e.config,r=e.scale,s=e.state,o=e.$el,l=o.grid,c=o.main,d=a.axis_rotated,h=function(e){return i(this,t),Math.ceil(r.y(e))}.bind(this),u=n.y.getGeneratedTicks(a.grid_y_ticks)||e.scale.y.ticks(a.grid_y_ticks);l.y=c.select("."+St.ygrids).selectAll("."+St.ygrid).data(u),l.y.exit().remove(),l.y=l.y.enter().append("line").attr("class",St.ygrid).merge(l.y),l.y.attr("x1",d?h:0).attr("x2",d?h:s.width).attr("y1",d?0:h).attr("y2",d?s.height:h),Bi(l.y,"grid")},updateGrid:function(){var t=this,e=t.$el,i=e.grid;e.gridLines.main||t.initGridLines(),i.main.style("visibility",t.hasArcType()?"hidden":null),t.hideGridFocus(),t.updateXGridLines(),t.updateYGridLines()},updateXGridLines:function(){var t=this,e=this,n=e.config,a=e.$el,r=a.gridLines,s=a.main,o=e.$T,l=n.axis_rotated;n.grid_x_show&&e.updateXGrid();var c=s.select("."+St.xgridLines).selectAll("."+St.xgridLine).data(n.grid_x_lines);o(c.exit()).style("opacity","0").remove();var d=c.enter().append("g");d.append("line").style("opacity","0"),d.append("text").attr("transform",l?null:"rotate(-90)").attr("dy",-5).style("opacity","0"),o((c=d.merge(c)).attr("class",function(e){return i(this,t),(St.xgridLine+" "+(e.class||"")).trim()}.bind(this)).select("text").attr("text-anchor",Xi).attr("dx",$i)).text(function(e){return i(this,t),e.text}.bind(this)).style("opacity",null),r.x=c},updateYGridLines:function(){var t=this,e=this,n=e.config,a=e.state,r=a.width,s=a.height,o=e.$el,l=e.$T,c=n.axis_rotated;n.grid_y_show&&e.updateYGrid();var d=o.main.select("."+St.ygridLines).selectAll("."+St.ygridLine).data(n.grid_y_lines);l(d.exit()).style("opacity","0").remove();var h=d.enter().append("g");h.append("line").style("opacity","0"),h.append("text").attr("transform",c?"rotate(-90)":"").style("opacity","0"),d=h.merge(d);var u=e.yv.bind(e);l(d.attr("class",function(e){return i(this,t),(St.ygridLine+" "+(e.class||"")).trim()}.bind(this)).select("line")).attr("x1",c?u:0).attr("x2",c?u:r).attr("y1",c?0:u).attr("y2",c?s:u).style("opacity",null),l(d.select("text").attr("text-anchor",Xi).attr("dx",$i)).attr("dy",-5).attr("x",Fi(c,r,s)).attr("y",u).text(function(e){return i(this,t),e.text}.bind(this)).style("opacity",null),o.gridLines.y=d},redrawGrid:function(t){var e=this,n=this,a=n.config.axis_rotated,r=n.state,s=r.width,o=r.height,l=n.$el.gridLines,c=n.$T,d=n.xv.bind(n),h=l.x.select("line"),u=l.x.select("text");return h=c(h,t).attr("x1",a?0:d).attr("x2",a?s:d).attr("y1",a?d:0).attr("y2",a?d:o),u=c(u,t).attr("x",Fi(!a,s,o)).attr("y",d).text(function(t){return i(this,e),t.text}.bind(this)),[h.style("opacity",null),u.style("opacity",null)]},initFocusGrid:function(){var t=this,e=t.config,i=t.state.clip,n=t.$el,a=e.grid_front,r="."+(a&&n.gridLines.main?St.gridLines:ht.chart)+(a?" + *":""),s=n.main.insert("g",r).attr("clip-path",i.pathGrid).attr("class",St.grid);n.grid.main=s,e.grid_x_show&&s.append("g").attr("class",St.xgrids),e.grid_y_show&&s.append("g").attr("class",St.ygrids),e.interaction_enabled&&e.grid_focus_show&&(s.append("g").attr("class",At.xgridFocus).append("line").attr("class",At.xgridFocus),e.grid_focus_y&&!e.tooltip_grouped&&s.append("g").attr("class",At.ygridFocus).append("line").attr("class",At.ygridFocus))},showGridFocus:function(t){var e=this,n=this,r=n.config,s=n.state,o=s.width,l=s.height,c=r.axis_rotated,d=n.$el.main.selectAll("line."+At.xgridFocus+", line."+At.ygridFocus),h=(t||[d.datum()]).filter(function(t){return i(this,e),t&&_(n.getBaseValue(t))}.bind(this));if(r.tooltip_show&&0!==h.length&&!n.hasType("bubble")&&!n.hasArcType()){var u=r.grid_focus_edge&&!r.tooltip_grouped,g=n.xx.bind(n);d.style("visibility",null).data(h.concat(h)).each((function(t){var e,r=this,s=(0,a.select)(this),d={x:g(t),y:n.getYScaleById(t.id)(t.value)};if(s.classed(At.xgridFocus))e=c?[null,d.x,u?d.y:o,d.x]:[d.x,u?d.y:null,d.x,l];else{var h="y2"===n.axis.getId(t.id);e=c?[d.y,u&&!h?d.x:null,d.y,u&&h?d.x:l]:[u&&h?d.x:null,d.y,u&&!h?d.x:o,d.y]}["x1","y1","x2","y2"].forEach(function(t,n){return i(this,r),s.attr(t,e[n])}.bind(this))})),Bi(d,"grid"),null==n.showCircleFocus||n.showCircleFocus(t)}},hideGridFocus:function(){var t=this,e=t.state,i=e.inputType,n=e.resizing,a=t.$el.main;"mouse"!==i&&n||(a.selectAll("line."+At.xgridFocus+", line."+At.ygridFocus).style("visibility","hidden"),null==t.hideCircleFocus||t.hideCircleFocus())},updateGridFocus:function(){var t=this,e=t.state,i=e.inputType,n=e.width,a=e.height,r=e.resizing,s=t.$el.grid.main.select("line."+At.xgridFocus);if("touch"===i)s.empty()?r&&(null==t.showCircleFocus||t.showCircleFocus()):t.showGridFocus();else{var o=t.config.axis_rotated;s.attr("x1",o?0:-10).attr("x2",o?n:-10).attr("y1",o?-10:0).attr("y2",o?-10:a)}return!0},generateGridData:function(t,e){var n=this,a=this.$el.main.select("."+ft.axisX).selectAll(".tick").size(),r=[];if("year"===t)for(var s=this.getXDomain().map(function(t){return i(this,n),t.getFullYear()}.bind(this)),o=s[0],l=s[1],c=o;c<=l;c++)r.push(new Date(c+"-01-01 00:00:00"));else(r=e.ticks(10)).length>a&&(r=r.filter(function(t){return i(this,n),(t+"").indexOf(".")<0}.bind(this)));return r},getGridFilterToRemove:function(t){var e=this;return t?function(n){var a=this;i(this,e);var r=!1;return(I(t)?t.concat():[t]).forEach(function(t){i(this,a),("value"in t&&n.value===t.value||"class"in t&&n.class===t.class)&&(r=!0)}.bind(this)),r}.bind(this):function(){return i(this,e),!0}.bind(this)},removeGridLines:function(t,e){var n=this,a=this,r=a.config,s=a.$T,o=a.getGridFilterToRemove(t),l=function(t){return i(this,n),!o(t)}.bind(this),c=e?St.xgridLines:St.ygridLines,d=e?St.xgridLine:St.ygridLine;s(a.$el.main.select("."+c).selectAll("."+d).filter(o)).style("opacity","0").remove();var h="grid_"+(e?"x":"y")+"_lines";r[h]=r[h].filter(l)}},Gi={initRegion:function(){var t=this.$el;t.region.main=t.main.insert("g",":first-child").attr("clip-path",this.state.clip.path).attr("class",Et.regions)},updateRegion:function(){var t=this,e=t.config,i=t.$el.region,n=t.$T;i.main||t.initRegion(),i.main.style("visibility",t.hasArcType()?"hidden":null);var a=i.main.selectAll("."+Et.region).data(e.regions);n(a.exit()).style("opacity","0").remove(),(a=a.enter().append("g").merge(a).attr("class",t.classRegion.bind(t))).append("rect").style("fill-opacity","0"),i.list=a},redrawRegion:function(t){var e=this,n=this,r=n.$el.region,s=n.$T,o=r.list.select("rect");return[(o=s(o,t).attr("x",n.regionX.bind(n)).attr("y",n.regionY.bind(n)).attr("width",n.regionWidth.bind(n)).attr("height",n.regionHeight.bind(n))).style("fill-opacity",function(t){return i(this,e),_(t.opacity)?t.opacity:null}.bind(this)).on("end",(function(){(0,a.select)(this.parentNode).selectAll("rect:not([x])").remove()}))]},getRegionXY:function(t,e){var i=this,n=i.config,a=i.scale,r=n.axis_rotated,s="x"===t,o="start",l=0;return"y"===e.axis||"y2"===e.axis?(s||(o="end"),(s?r:!r)&&o in e&&(l=(0,a[e.axis])(e[o]))):(s?!r:r)&&o in e&&(l=(a.zoom||a.x)(i.axis.isTimeSeries()?rt.call(i,e[o]):e[o])),l},regionX:function(t){return this.getRegionXY("x",t)},regionY:function(t){return this.getRegionXY("y",t)},getRegionSize:function(t,e){var i=this,n=i.config,a=i.scale,r=i.state,s=n.axis_rotated,o="width"===t,l=i[o?"regionX":"regionY"](e),c="end",d=r[t];return"y"===e.axis||"y2"===e.axis?(o||(c="start"),(o?s:!s)&&c in e&&(d=(0,a[e.axis])(e[c]))):(o?!s:s)&&c in e&&(d=(a.zoom||a.x)(i.axis.isTimeSeries()?rt.call(i,e[c]):e[c])),d<l?0:d-l},regionWidth:function(t){return this.getRegionSize("width",t)},regionHeight:function(t){return this.getRegionSize("height",t)},isRegionOnX:function(t){return!t.axis||"x"===t.axis}},ji={getAxisSize:function(t){var e=this,i=e.config.axis_rotated;return i&&"x"===t||!i&&/y2?/.test(t)?e.getAxisWidthByAxisId(t,!0):e.getHorizontalAxisHeight(t)},getAxisWidthByAxisId:function(t,e){var i=this;if(i.axis){var n,a=null==(n=i.axis)?void 0:n.getLabelPositionById(t),r=i.axis.getMaxTickWidth(t,e),s=0===r?.5:0;return r+(a.isInner?20+s:40)}return 40},getHorizontalAxisHeight:function(t){var e=this,i=e.config,n=e.state,a=n.current,r=n.rotatedPadding,s=n.isLegendRight,o=n.isLegendInset,l=i.axis_rotated,c=30;if("x"===t&&!i.axis_x_show)return 8;if("x"===t&&i.axis_x_height)return i.axis_x_height;if("y"===t&&!i.axis_y_show)return!i.legend_show||s||o?1:10;if("y2"===t&&!i.axis_y2_show)return r.top;var d=e.getAxisTickRotate(t);return("x"===t&&!l||/y2?/.test(t)&&l)&&d&&(c=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(d))/180),!i.axis_x_tick_multiline&&a.height&&c>a.height/2&&(c=a.height/2)),c+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"!==t||l?0:-10)},getEventRectWidth:function(){return Math.max(0,this.axis.x.tickInterval())},getAxisTickRotate:function(t){var e=this,i=e.axis,n=e.config,a=e.state,r=e.$el,s=n["axis_"+t+"_tick_rotate"];if("x"===t){var o=i.isCategorized()||i.isTimeSeries();if(n.axis_x_tick_fit&&o){var l=n.axis_x_tick_count,c=a.current.maxTickWidths.x.ticks.length,d=0;if(l?d=l>c?c:l:c&&(d=c),d!==a.axis.x.tickCount){var h=e.data.targets;a.axis.x.padding=e.getXDomainPadding([e.getXDomainMinMax(h,"min"),e.getXDomainMinMax(h,"max")],d)}a.axis.x.tickCount=d}r.svg&&n.axis_x_tick_fit&&!n.axis_x_tick_multiline&&!n.axis_x_tick_culling&&n.axis_x_tick_autorotate&&o&&(s=e.needToRotateXAxisTickTexts()?n.axis_x_tick_rotate:0)}return s},needToRotateXAxisTickTexts:function(){var t=this,e=t.state,i=e.axis,n=e.current.width-t.getCurrentPaddingLeft(!1)-t.getCurrentPaddingRight(),a=i.x.tickCount+i.x.padding.left+i.x.padding.right;return t.axis.getMaxTickWidth("x")>(a?n/a:0)}},Yi={axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:"indexed",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_culling_lines:!0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[]},Vi={axis_y2_show:!1,axis_y2_type:"indexed",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_culling_lines:!0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[]};function Hi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Wi(t){for(var e,i=1;i<arguments.length;i++)e=null!=arguments[i]?arguments[i]:{},i%2?Hi(Object(e),!0).forEach((function(i){g(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Hi(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}));return t}var Ui=Wi(Wi(Wi({axis_rotated:!1},{axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_culling_lines:!0,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[]}),Yi),Vi),Zi=[xi,{category:function(t,e){var i=this.internal,n=i.config;return arguments.length>1&&(n.axis_x_categories[t]=e,i.redraw()),n.axis_x_categories[t]},categories:function(t){var e=this.internal,i=e.config;return arguments.length?(i.axis_x_categories=t,e.redraw(),i.axis_x_categories):i.axis_x_categories}},mi,yi,ki,Ti,Ai,Si],qi=[Li,zi,Pi,Di,Ni,Gi,ji],Ki=[{data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_axes:{},data_regions:{},data_stack_normalize:!1},Ui,{grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:void 0,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0}],Ji=p(12);function Qi(t){void 0===t&&(t=0);var e=this,i=e.config,n=e.state,a=e.hasMultiArcGauge(),r=n.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length,s=t?Math.min(n.radiusExpanded*t-n.radius,.8*r-100*(1-t)):0;return{inner:function(t){var i=e.getRadius(t).innerRadius;return a?n.radius-r*(t.index+1):w(i)?i:0},outer:function(i){var o,l=e.getRadius(i).outerRadius;if(a)o=n.radius-r*i.index+s;else if(e.hasType("polar")&&!t)o=e.getPolarOuterRadius(i,l);else if(o=l,t){var c=n.radiusExpanded;n.radius!==l&&(c-=Math.abs(n.radius-l)),o=c*t}return o},corner:function(t,n){var a=i.arc_cornerRadius_ratio,r=void 0===a?0:a,s=i.arc_cornerRadius,o=void 0===s?0:s,l=t.data.id,c=t.value;return r?r*n:w(o)?o:o.call(e.api,l,c,n)}}}function tn(t){return function(e){var i=(0,Ji.interpolate)(this._current,e);return this._current=e,function(e){var n=i(e);return t(n)}}}var en={initPie:function(){var t=this,e=this,n=e.config,a=n.data_type,r=n[a+"_padding"],s=n[a+"_startingAngle"]||0,o=(r?.01*r:n[a+"_padAngle"])||0;e.pie=(0,Ge.pie)().startAngle(s).endAngle(s+2*Math.PI).padAngle(o).value(function(e){var n=this;return i(this,t),e.values.reduce(function(t,e){return i(this,n),t+e.value}.bind(this),0)}.bind(this)).sort(e.getSortCompareFn.bind(e)(!0))},updateRadius:function(){var t=this,e=t.config,i=t.state,n=e[e.data_type+"_padding"],a=e.gauge_width||e.donut_width,r=t.filterTargetsToShow(t.data.targets).length*e.gauge_arcs_minWidth;i.radiusExpanded=Math.min(i.arcWidth,i.arcHeight)/2*(t.hasMultiArcGauge()&&e.gauge_label_show?.85:1),i.radius=.95*i.radiusExpanded,i.innerRadiusRatio=a?(i.radius-a)/i.radius:.6,i.gaugeArcWidth=a||(r<=i.radius-i.innerRadius?i.radius-i.innerRadius:r<=i.radius?r:i.radius);var s=e.pie_innerRadius||(n?n*(i.innerRadiusRatio+.1):0);i.outerRadius=e.pie_outerRadius,i.innerRadius=t.hasType("donut")||t.hasType("gauge")?i.radius*i.innerRadiusRatio:s},getRadius:function(t){var e=null==t?void 0:t.data,i=this.state,n=i.innerRadius,a=i.outerRadius;return!w(n)&&e&&(n=n[e.id]||0),D(a)&&e&&e.id in a?a=a[e.id]:w(a)||(a=this.state.radius),{innerRadius:n,outerRadius:a}},updateArc:function(){var t=this;t.updateRadius(),t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded()},getArcLength:function(){var t=3.6*this.config.gauge_arcLength,e=t/360*2;return t<-360?e=-2:t>360&&(e=2),e*Math.PI},getStartAngle:function(){var t=this.config,e=t.gauge_fullCircle,i=-1*Math.PI/2,n=Math.PI/2,a=t.gauge_startingAngle;return!e&&a<=i?a=i:!e&&a>=n?a=n:(a>Math.PI||a<-1*Math.PI)&&(a=Math.PI),a},updateAngle:function(t){var e=this,n=this,a=n.config,r=n.state,s=n.pie,o=t,l=!1;if(!a)return null;var c=n.getStartAngle(),d=a.gauge_fullCircle?n.getArcLength():-2*c;if(o.data&&n.isGaugeType(o.data)&&!n.hasMultiArcGauge()){var h=a.gauge_min,u=a.gauge_max,g=n.getTotalDataSum(r.rendered);s=s.startAngle(c).endAngle(d*((g-h)/(u-h))+c)}if(s(n.filterTargetsToShow()).forEach(function(t,n){i(this,e),l||t.data.id!==o.data.id||(l=!0,(o=t).index=n)}.bind(this)),isNaN(o.startAngle)&&(o.startAngle=0),isNaN(o.endAngle)&&(o.endAngle=o.startAngle),o.data&&n.hasMultiArcGauge()){var f=a.gauge_min,p=a.gauge_max,v=o.value<f?0:o.value<p?o.value-f:p-f;o.startAngle=c,o.endAngle=c+d/(p-f)*v}return l?o:null},getSvgArc:function(){var t=this,e=Qi.call(t),i=e.inner,n=e.outer,a=e.corner,r=(0,Ge.arc)().innerRadius(i).outerRadius(n),s=function(e,i){var s="M 0 0";if(e.value||e.data){var o,l=i?e:null!=(o=t.updateAngle(e))?o:null;l&&(s=r.cornerRadius(a(l,n(l)))(l))}return s};return s.centroid=r.centroid,s},getSvgArcExpanded:function(t){var e=this;void 0===t&&(t=1);var n=this,a=Qi.call(n,t),r=a.inner,s=a.outer,o=a.corner,l=(0,Ge.arc)().innerRadius(r).outerRadius(s);return function(t){i(this,e);var a=n.updateAngle(t),r=s(a),c=0;return a&&(c=o(a,r)),a?l.cornerRadius(c)(a):"M 0 0"}.bind(this)},getArc:function(t,e,i){return i||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},transformForArcLabel:function(t){var e=this,n=this,a=n.config,r=n.state.radiusExpanded,s=n.updateAngle(t),o="";if(s)if(n.hasMultiArcGauge()){var l=Math.sin(s.endAngle-Math.PI/2);o="translate("+(u=Math.cos(s.endAngle-Math.PI/2)*(r+25))+","+(g=l*(r+15-Math.abs(10*l))+3)+")"}else if(!n.hasType("gauge")||n.data.targets.length>1){var c,d=n.getRadius(t).outerRadius;n.hasType("polar")&&(d=n.getPolarOuterRadius(t,d));var h=this.svgArc.centroid(s).map(function(t){return i(this,e),isNaN(t)?0:t}.bind(this)),u=h[0],g=h[1],f=Math.sqrt(u*u+g*g),p=null==(c=["donut","pie","polar"].filter(n.hasType.bind(n)).map(function(t){return i(this,e),a[t+"_label_ratio"]}.bind(this)))?void 0:c[0];o="translate("+u*(p=p?y(p)?p.bind(n.api)(t,d,f):p:d&&(f?(36/d>.375?1.175-36/d:.8)*d/f:0))+","+g*p+")"}return o},convertToArcData:function(t){return this.addName({id:"data"in t?t.data.id:t.id,value:t.value,ratio:this.getRatio("arc",t),index:t.index})},textForArcLabel:function(t){var e=this,i=e.hasType("gauge");e.shouldShowArcLabel()&&t.style("fill",e.updateTextColor.bind(e)).attr("filter",e.updateTextBacgroundColor.bind(e)).each((function(t){var n,r=(0,a.select)(this),s=e.updateAngle(t),o=e.getRatio("arc",s);if(e.meetsLabelThreshold(o,null==(n=["donut","gauge","pie","polar"].filter(e.hasType.bind(e)))?void 0:n[0])){var l=(s||t).value;F(r,(e.getArcLabelFormat()||e.defaultArcValueFormat)(l,o,t.data.id).toString(),[-1,1],i)}else r.text("")}))},expandArc:function(t){var e=this,n=this,r=n.state.transiting,s=n.$el;if(r)var o=setInterval(function(){i(this,e),r||(clearInterval(o),s.legend.selectAll("."+At.legendItemFocused).size()>0&&n.expandArc(t))}.bind(this),10);else{var l=n.mapToTargetIds(t);s.svg.selectAll(n.selectorTargets(l,"."+ut.chartArc)).each((function(t){if(n.shouldExpand(t.data.id)){var e=n.getExpandConfig(t.data.id,"duration"),i=n.getSvgArcExpanded(n.getExpandConfig(t.data.id,"rate"));(0,a.select)(this).selectAll("path").transition().duration(e).attrTween("d",tn(n.svgArcExpanded.bind(n))).transition().duration(2*e).attrTween("d",tn(i.bind(n)))}}))}},unexpandArc:function(t){var e=this,n=this,a=n.state.transiting,r=n.$el.svg;if(!a){var s=n.mapToTargetIds(t);r.selectAll(n.selectorTargets(s,"."+ut.chartArc)).selectAll("path").transition().duration(function(t){return i(this,e),n.getExpandConfig(t.data.id,"duration")}.bind(this)).attrTween("d",tn(n.svgArc.bind(n))),r.selectAll(""+ut.arc).style("opacity",null)}},getExpandConfig:function(t,e){var i,n=this,a=n.config;return n.isDonutType(t)?i="donut":n.isGaugeType(t)?i="gauge":n.isPieType(t)&&(i="pie"),i?a[i+"_expand_"+e]:{duration:50,rate:.98}[e]},shouldExpand:function(t){var e=this,i=e.config;return e.isDonutType(t)&&i.donut_expand||e.isGaugeType(t)&&i.gauge_expand||e.isPieType(t)&&i.pie_expand},shouldShowArcLabel:function(){var t=this,e=this,n=e.config;return["donut","gauge","pie","polar"].some(function(a){return i(this,t),e.hasType(a)&&n[a+"_label_show"]}.bind(this))},getArcLabelFormat:function(){var t=this,e=this,n=e.config,a=function(e){return i(this,t),e}.bind(this);return["donut","gauge","pie","polar"].filter(e.hasType.bind(e)).forEach(function(e){i(this,t),a=n[e+"_label_format"]}.bind(this)),y(a)?a.bind(e.api):a},getArcTitle:function(){var t=this,e=t.hasType("donut")?"donut":t.hasType("gauge")&&"gauge";return e?t.config[e+"_title"]:""},updateTargetsForArc:function(t){var e=this,n=this,a=n.$el,r=n.hasType("gauge"),s=n.getChartClass("Arc"),o=n.getClass("arcs",!0),l=n.classFocus.bind(n),c=a.main.select("."+ut.chartArcs),d=c.selectAll("."+ut.chartArc).data(n.pie(t)).attr("class",function(t){return i(this,e),s(t)+l(t.data)}.bind(this)),h=d.enter().append("g").attr("class",s).call(this.setCssRule(!1,"."+ut.chartArcs+" text",["pointer-events:none","text-anchor:middle"]));h.append("g").attr("class",o).merge(d),h.append("text").attr("dy",r&&!n.hasMultiTargets()?"-.1em":".35em").style("opacity","0").style("text-anchor",n.getStylePropValue("middle")).style("pointer-events",n.getStylePropValue("none")),a.text=c.selectAll("."+ht.target+" text")},initArc:function(){var t=this,e=t.$el;e.arcs=e.main.select("."+ht.chart).append("g").attr("class",ut.chartArcs).attr("transform",t.getTranslate("arc")),t.setArcTitle()},setArcTitle:function(){var t=this,e=t.getArcTitle(),i=t.hasType("gauge");if(e){var n=t.$el.arcs.append("text").attr("class",i?_t.chartArcsGaugeTitle:ut.chartArcsTitle).style("text-anchor","middle");i&&n.attr("dy","-0.3em"),F(n,e,i?void 0:[-.6,1.35],!0)}},redrawArc:function(t,e,n){var r=this,s=this,o=s.config,l=s.state,c=s.$el.main,d=o.interaction_enabled,h=d&&o.data_selection_isselectable,u=c.selectAll("."+ut.arcs).selectAll("."+ut.arc).data(s.arcData.bind(s));u.exit().transition().duration(e).style("opacity","0").remove(),u=u.enter().append("path").attr("class",s.getClass("arc",!0)).style("fill",function(t){return i(this,r),s.color(t.data)}.bind(this)).style("cursor",function(t){return i(this,r),null!=h&&null!=h.bind&&h.bind(s.api)(t)?"pointer":null}.bind(this)).style("opacity","0").each((function(t){s.isGaugeType(t.data)&&(t.startAngle=o.gauge_startingAngle,t.endAngle=o.gauge_startingAngle),this._current=t})).merge(u),s.hasType("gauge")&&(s.updateGaugeMax(),s.hasMultiArcGauge()&&s.redrawMultiArcGauge()),u.attr("transform",function(t){return i(this,r),!s.isGaugeType(t.data)&&n?"scale(0)":""}.bind(this)).style("opacity",(function(t){return t===this._current?"0":null})).each(function(){i(this,r),l.transiting=!0}.bind(this)).transition().duration(t).attrTween("d",(function(t){var e=this,n=s.updateAngle(t);if(!n)return function(){return i(this,e),"M 0 0"}.bind(this);isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);var a=(0,Ji.interpolate)(this._current,n);return this._current=a(0),function(e){var i=a(e);return i.data=t.data,s.getArc(i,!0)}})).attr("transform",n?"scale(1)":"").style("fill",function(t){var e;return i(this,r),s.levelColor?(e=s.levelColor(t.data.values[0].value),o.data_colors[t.data.id]=e):e=s.color(t.data),e}.bind(this)).style("opacity",null).call(X,(function(){if(s.levelColor){var t=(0,a.select)(this),e=t.datum();s.updateLegendItemColor(e.data.id,t.style("fill"))}l.transiting=!1,M(o.onrendered,s.api)})),d&&s.bindArcEvent(u),s.hasType("polar")&&s.redrawPolar(),s.hasType("gauge")&&s.redrawBackgroundArcs(),s.redrawArcText(t)},redrawBackgroundArcs:function(){var t=this,e=this,n=e.config,a=e.state,r=e.hasMultiArcGauge(),s=n.gauge_fullCircle,o=e.getStartAngle(),l=s?o+e.getArcLength():-1*o,c=e.$el.arcs.select((r?"g":"")+"."+ut.chartArcsBackground);if(r){var d=0;(c=c.selectAll("path."+ut.chartArcsBackground).data(e.data.targets)).enter().append("path").attr("class",function(e,n){return i(this,t),ut.chartArcsBackground+" "+ut.chartArcsBackground+"-"+n}.bind(this)).merge(c).style("fill",n.gauge_background||null).attr("d",function(r){var s=r.id;if(i(this,t),a.hiddenTargetIds.indexOf(s)>=0)return"M 0 0";var c={data:[{value:n.gauge_max}],startAngle:o,endAngle:l,index:d++};return e.getArc(c,!0,!0)}.bind(this)),c.exit().remove()}else c.attr("d",function(){i(this,t);var a={data:[{value:n.gauge_max}],startAngle:o,endAngle:l};return e.getArc(a,!0,!0)}.bind(this))},bindArcEvent:function(t){var e=this,n=this,r=n.config,s=n.state,l="touch"===s.inputType,c="mouse"===s.inputType;function d(t,e,i){n.expandArc(i),n.api.focus(i),n.toggleFocusLegend(i,!0),n.showTooltip([e],t)}function h(t){var e=(null==t?void 0:t.id)||void 0;n.unexpandArc(e),n.api.revert(),n.revertLegend(),n.hideTooltip()}if(t.on("click",(function(t,e,i){var a,s=n.updateAngle(e);s&&(a=n.convertToArcData(s),null==n.toggleShape||n.toggleShape(this,a,i),r.data_onclick.bind(n.api)(a,this))})),c&&t.on("mouseover",(function(t,e){var i;if(!s.transiting){s.event=t;var a=n.updateAngle(e),r=a?n.convertToArcData(a):null;d(this,r,(null==(i=r)?void 0:i.id)||void 0),n.setOverOut(!0,r)}})).on("mouseout",function(t,a){if(i(this,e),!s.transiting){s.event=t;var r=n.updateAngle(a),o=r?n.convertToArcData(r):null;h(),n.setOverOut(!1,o)}}.bind(this)).on("mousemove",(function(t,e){var i=n.updateAngle(e),a=i?n.convertToArcData(i):null;s.event=t,n.showTooltip([a],this)})),l&&n.hasArcType()&&!n.radars){var u=function(t){i(this,e);var n=t.changedTouches[0];return(0,a.select)(o.elementFromPoint(n.clientX,n.clientY))}.bind(this);n.$el.svg.on("touchstart touchmove",(function(t){var e,i;if(!s.transiting){s.event=t;var a=u(t).datum(),r=null!=(e=a)&&e.data&&a.data.id?n.updateAngle(a):null,o=r?n.convertToArcData(r):null,l=(null==(i=o)?void 0:i.id)||void 0;n.callOverOutForTouch(o),A(l)?h():d(this,o,l)}}))}},redrawArcText:function(t){var e,n=this,a=this,r=a.config,s=a.state,o=a.$el,l=o.main,c=o.arcs,d=a.hasType("gauge"),h=a.hasMultiArcGauge();if(d&&1===a.data.targets.length&&r.gauge_title||(e=l.selectAll("."+ut.chartArc).select("text").style("opacity","0").attr("class",function(t){return i(this,n),a.isGaugeType(t.data)?_t.gaugeValue:null}.bind(this)).call(a.textForArcLabel.bind(a)).attr("transform",a.transformForArcLabel.bind(a)).style("font-size",function(t){return i(this,n),a.isGaugeType(t.data)&&1===a.data.targets.length&&!h?Math.round(s.radius/5)+"px":null}.bind(this)).transition().duration(t).style("opacity",function(t){return i(this,n),a.isTargetToShow(t.data.id)&&a.isArcType(t.data)?null:"0"}.bind(this)),h&&e.attr("dy","-.1em")),l.select("."+ut.chartArcsTitle).style("opacity",a.hasType("donut")||d?null:"0"),d){var u,g=r.gauge_fullCircle;g&&(null==(u=e)||u.attr("dy",""+(h?0:Math.round(s.radius/14)))),r.gauge_label_show&&(c.select("."+_t.chartArcsGaugeUnit).attr("dy",(g?1.5:.75)+"em").text(r.gauge_units),c.select("."+_t.chartArcsGaugeMin).attr("dx",-1*(s.innerRadius+(s.radius-s.innerRadius)/(g?1:2))+"px").attr("dy","1.2em").text(a.textForGaugeMinMax(r.gauge_min,!1)),g||c.select("."+_t.chartArcsGaugeMax).attr("dx",s.innerRadius+(s.radius-s.innerRadius)/2+"px").attr("dy","1.2em").text(a.textForGaugeMinMax(r.gauge_max,!0)))}}},nn={initArea:function(t){var e=this.config;t.insert("g","."+(e.area_front?xt.circles:Tt.lines)).attr("class",this.getClass("areas",!0))},updateAreaColor:function(t){var e=this;return e.config.area_linearGradient?e.getGradienColortUrl(t.id):e.color(t)},updateArea:function(t,e){void 0===e&&(e=!1);var i=this,n=i.config,r=i.state,s=i.$el,o=i.$T,l=e?s.subchart:s;n.area_linearGradient&&i.updateLinearGradient();var c=l.main.selectAll("."+gt.areas).selectAll("."+gt.area).data(i.lineData.bind(i));o(c.exit(),t).style("opacity","0").remove(),l.area=c.enter().append("path").attr("class",i.getClass("area",!0)).style("fill",i.updateAreaColor.bind(i)).style("opacity",(function(){return r.orgAreaOpacity=(0,a.select)(this).style("opacity"),"0"})).merge(c),c.style("opacity",r.orgAreaOpacity),i.setRatioForGroupedData(l.area.data())},redrawArea:function(t,e,n){var a=this;void 0===n&&(n=!1);var r=this,s=(n?this.$el.subchart:this.$el).area,o=r.state.orgAreaOpacity;return[r.$T(s,e,Y()).attr("d",t).style("fill",r.updateAreaColor.bind(r)).style("opacity",function(t){return i(this,a),(r.isAreaRangeType(t)?o/1.75:o)+""}.bind(this))]},generateDrawArea:function(t,e){var n=this,a=this,r=a.config,s=r.line_connectNull,o=r.axis_rotated,l=a.generateGetAreaPoints(t,e),c=a.getYScaleById.bind(a),d=function(t){return i(this,n),(e?a.subxx:a.xx).call(a,t)}.bind(this),h=function(t,r){return i(this,n),a.isGrouped(t.id)?l(t,r)[0][1]:c(t.id,e)(a.isAreaRangeType(t)?a.getRangedData(t,"high"):a.getShapeYMin(t.id))}.bind(this),u=function(t,r){return i(this,n),a.isGrouped(t.id)?l(t,r)[1][1]:c(t.id,e)(a.isAreaRangeType(t)?a.getRangedData(t,"low"):t.value)}.bind(this);return function(t){var e=this;i(this,n);var l,c=s?a.filterRemoveNull(t.values):t.values,g=0,f=0;if(a.isAreaType(t)){var p=(0,Ge.area)();p=o?p.y(d).x0(h).x1(u):p.x(d).y0(r.area_above?0:r.area_below?a.state.height:h).y1(u),s||(p=p.defined(function(t){return i(this,e),null!==a.getBaseValue(t)}.bind(this))),a.isStepType(t)&&(c=a.convertValuesToStep(c)),l=p.curve(a.getCurve(t))(c)}else c[0]&&(g=a.scale.x(c[0].x),f=a.getYScaleById(t.id)(c[0].value)),l=o?"M "+f+" "+g:"M "+g+" "+f;return l||"M 0 0"}.bind(this)},generateGetAreaPoints:function(t,e){var i=this,n=i.config,a=i.getShapeX(0,t,e),r=i.getShapeY(!!e),s=i.getShapeOffset(i.isAreaType,t,e),o=i.getYScaleById.bind(i);return function(t,l){var c=o.call(i,t.id,e)(i.getShapeYMin(t.id)),d=s(t,l)||c,h=a(t),u=t.value,g=r(t);return n.axis_rotated&&(u>0&&g<c||u<0&&c<g)&&(g=c),[[h,d],[h,g-(c-d)],[h,g-(c-d)],[h,d]]}}},an={initBar:function(){var t=this.$el,e=this.config,i=this.state.clip;t.bar=t.main.select("."+ht.chart).insert("g",":first-child").attr("class",pt.chartBars).call(this.setCssRule(!1,"."+pt.chartBars,["pointer-events:none"])),!1===e.clipPath&&(e.bar_radius||e.bar_radius_ratio)&&t.bar.attr("clip-path",i.pathXAxis.replace(/#[^)]*/,"#"+i.id))},updateTargetsForBar:function(t){var e=this,n=this,a=n.config,r=n.$el,s=n.getChartClass("Bar"),o=n.getClass("bars",!0),l=n.classFocus.bind(n),c=a.interaction_enabled&&a.data_selection_isselectable;r.bar||n.initBar(),r.main.select("."+pt.chartBars).selectAll("."+pt.chartBar).data(t.filter(function(t){var a=this;return i(this,e),t.values.some(function(t){return i(this,a),w(t.value)||n.isBarRangeType(t)}.bind(this))}.bind(this))).attr("class",function(t){return i(this,e),s(t)+l(t)}.bind(this)).enter().append("g").attr("class",s).style("opacity","0").style("pointer-events",n.getStylePropValue("none")).append("g").attr("class",o).style("cursor",function(t){return i(this,e),null!=c&&null!=c.bind&&c.bind(n.api)(t)?"pointer":null}.bind(this)).call(n.setCssRule(!0," ."+pt.bar,["fill"],n.color))},updateBar:function(t,e){void 0===e&&(e=!1);var i=this,n=i.config,a=i.$el,r=i.$T,s=e?a.subchart:a,o=i.getClass("bar",!0),l=i.initialOpacity.bind(i);n.bar_linearGradient&&i.updateLinearGradient();var c=s.main.selectAll("."+pt.bars).selectAll("."+pt.bar).data(i.labelishData.bind(i));r(c.exit(),t).style("opacity","0").remove(),s.bar=c.enter().append("path").attr("class",o).style("fill",i.updateBarColor.bind(i)).merge(c).style("opacity",l),i.setRatioForGroupedData(s.bar.data())},updateBarColor:function(t){var e=this,i=e.getStylePropValue(e.color);return e.config.bar_linearGradient?e.getGradienColortUrl(t.id):i?i(t):null},redrawBar:function(t,e,n){var a=this;void 0===n&&(n=!1);var r=this,s=(n?r.$el.subchart:r.$el).bar;return[r.$T(s,e,Y()).attr("d",function(e){return i(this,a),(w(e.value)||r.isBarRangeType(e))&&t(e)}.bind(this)).style("fill",r.updateBarColor.bind(r)).style("opacity",null)]},generateDrawBar:function(t,e){var n=this,a=this,r=a.config,s=a.generateGetBarPoints(t,e),o=r.axis_rotated,l=r.bar_radius,c=r.bar_radius_ratio,d=w(l)&&l>0?function(){return i(this,n),l}.bind(this):w(c)?function(t){return i(this,n),t*c}.bind(this):null;return function(t,e){i(this,n);var r=s(t,e),l=+o,c=+!l,h=t.value<0,u=["",""],g=0,f=a.isGrouped(t.id),p=!(!d||!f)&&a.isStackingRadiusData(t);if(d&&(!f||p)){var v=o?c:l,x=r[2][v]-r[0][v],b="a"+(g=d(x))+","+g+" "+(h?"1 0 0":"0 0 1")+" ";u[+!o]=""+b+g+","+g,u[+o]=""+b+[-g,g][o?"sort":"reverse"](),h&&u.reverse()}var m=o?"H"+(r[1][l]-g)+" "+u[0]+"V"+(r[2][c]-g)+" "+u[1]+"H"+r[3][l]:"V"+(r[1][c]+(h?-g:g))+" "+u[0]+"H"+(r[2][l]-g)+" "+u[1]+"V"+r[3][c];return"M"+r[0][l]+","+r[0][c]+m+"z"}.bind(this)},isStackingRadiusData:function(t){var e=this,n=this,a=n.$el,r=n.config,s=n.data,o=n.state,l=t.id,c=t.index,d=t.value;if(o.hiddenTargetIds.indexOf(l)>-1){var h=a.bar.filter(function(t){return i(this,e),t.id===l&&t.value===d}.bind(this));return!h.empty()&&/a\d+/i.test(h.attr("d"))}var u=r.data_groups.find(function(t){return i(this,e),t.indexOf(l)>-1}.bind(this)),g=n.orderTargets(n.filterTargetsToShow(s.targets.filter(n.isBarType,n))).filter(function(t){return i(this,e),u.indexOf(t.id)>-1}.bind(this)).map(function(t){var n=this;return i(this,e),t.values.filter(function(t){return i(this,n),t.index===c&&(w(d)&&d>0?t.value>0:t.value<0)}.bind(this))[0]}.bind(this)).filter(Boolean).map(function(t){return i(this,e),t.id}.bind(this));return 0!==d&&g.indexOf(l)===g.length-1},generateGetBarPoints:function(t,e){var n=this,a=this,r=a.config,s=e?a.axis.subX:a.axis.x,o=a.getIndicesMax(t)+1,l=a.getBarW("bar",s,o),c=a.getShapeX(l,t,!!e),d=a.getShapeY(!!e),h=a.getShapeOffset(a.isBarType,t,!!e),u=a.getYScaleById.bind(a);return function(t,s){i(this,n);var o=u.call(a,t.id,e)(a.getShapeYMin(t.id)),g=h(t,s)||o,f=w(l)?l:l[t.id]||l._$width,p=t.value,v=c(t),x=d(t);r.axis_rotated&&(p>0&&x<o||p<0&&o<x)&&(x=o),a.isBarRangeType(t)||(x-=o-g);var b=v+f;return[[v,g],[v,x],[b,x],[b,g]]}.bind(this)}};function rn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var sn={initCandlestick:function(){var t=this.$el;t.candlestick=t.main.select("."+ht.chart).append("g").attr("class",vt.chartCandlesticks)},updateTargetsForCandlestick:function(t){var e=this,n=this,a=n.$el,r=n.getChartClass("Candlestick"),s=n.classFocus.bind(n);a.candlestick||n.initCandlestick(),n.$el.main.select("."+vt.chartCandlesticks).selectAll("."+vt.chartCandlestick).data(t).attr("class",function(t){return i(this,e),r(t)+s(t)}.bind(this)).enter().append("g").attr("class",r).style("pointer-events","none")},updateCandlestick:function(t,e){var n=this;void 0===e&&(e=!1);var a=this,r=a.$el,s=a.$T,o=e?r.subchart:r,l=a.getClass("candlestick",!0),c=a.initialOpacity.bind(a),d=o.main.selectAll("."+vt.chartCandlestick).selectAll("."+vt.candlestick).data(a.labelishData.bind(a));s(d.exit(),t).style("opacity","0").remove();var h=d.enter().filter(function(t){return i(this,n),t.value}.bind(this)).append("g").attr("class",l);h.append("line"),h.append("path"),o.candlestick||(o.candlestick={}),o.candlestick=d.merge(h).style("opacity",c)},generateDrawCandlestick:function(t,e){var n=this,a=this,r=a.config,s=a.generateGetCandlestickPoints(t,e),o=r.axis_rotated,l=r.candlestick_color_down;return function(t,e,r){var c,d=this;i(this,n);var h=s(t,e),u=null==(c=a.getCandlestickData(t))?void 0:c._isUp,g=+o;r.classed&&r.classed(vt[u?"valueUp":"valueDown"],!0);var f=o?"H"+h[1][1]+" V"+h[1][0]+" H"+h[0][1]:"V"+h[1][1]+" H"+h[1][0]+" V"+h[0][1];r.select("path").attr("d","M"+h[0][g]+","+h[0][+!g]+f+"z").style("fill",function(t){return i(this,d),(u?a.color(t):D(l)?l[t.id]:l)||a.color(t)}.bind(this));var p=r.select("line"),v=o?{x1:h[2][1],x2:h[2][2],y1:h[2][0],y2:h[2][0]}:{x1:h[2][0],x2:h[2][0],y1:h[2][1],y2:h[2][2]};for(var x in v)p.attr(x,v[x])}.bind(this)},generateGetCandlestickPoints:function(t,e){var n=this;void 0===e&&(e=!1);var a=this,r=a.config,s=e?a.axis.subX:a.axis.x,o=a.getIndicesMax(t)+1,l=a.getBarW("candlestick",s,o),c=a.getShapeX(l,t,!!e),d=a.getShapeY(!!e),h=a.getShapeOffset(a.isBarType,t,!!e),u=a.getYScaleById.bind(a);return function(t,s){i(this,n);var o,g=u.call(a,t.id,e)(a.getShapeYMin(t.id)),f=h(t,s)||g,p=w(l)?l:l[t.id]||l._$width,v=a.getCandlestickData(t);if(v){var x={start:c(t),end:0};x.end=x.start+p;var b={start:d(v.open),end:d(v.close)},m={x:x.start+p/2,high:d(v.high),low:d(v.low)};r.axis_rotated&&(t.value>0&&b.start<g||t.value<0&&g<b.start)&&(b.start=g),b.start-=g-f,o=[[x.start,b.start],[x.end,b.end],[m.x,m.low,m.high]]}else o=[[0,0],[0,0],[0,0,0]];return o}.bind(this)},redrawCandlestick:function(t,e,i){void 0===i&&(i=!1);var n=this.$el,r=this.$T,s=(i?n.subchart:n).candlestick,o=Y(!0);return[s.each((function(i,n){var s=r((0,a.select)(this),e,o);t(i,n,s)})).style("opacity",null)]},getCandlestickData:function(t){var e,i=t.value;if(I(i)){var n=i[0],a=i[1],r=i[2],s=i[3],o=i[4],l=void 0!==o&&o;e={open:n,high:a,low:r,close:s},!1!==l&&(e.volume=l)}else D(i)&&(e=function(t){for(var e,i=1;i<arguments.length;i++)e=null!=arguments[i]?arguments[i]:{},i%2?rn(Object(e),!0).forEach((function(i){g(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):rn(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}));return t}({},i));return e&&(e._isUp=e.close>=e.open),e||null}},on={initGauge:function(){var t=this,e=this,n=e.config,a=e.$el.arcs,r=function(e){i(this,t),a.append("text").attr("class",e).style("text-anchor","middle").style("pointer-events","none")}.bind(this);if(e.hasType("gauge")){var s=e.hasMultiArcGauge();a.append(s?"g":"path").attr("class",ut.chartArcsBackground).style("fill",!s&&n.gauge_background||null),n.gauge_units&&r(_t.chartArcsGaugeUnit),n.gauge_label_show&&(r(_t.chartArcsGaugeMin),n.gauge_fullCircle||r(_t.chartArcsGaugeMax))}},updateGaugeMax:function(){var t=this,e=t.config,i=t.state,n=t.hasMultiArcGauge()?t.getMinMaxData().max[0].value:t.getTotalDataSum(i.rendered);n+e.gauge_min*(e.gauge_min>0?-1:1)>e.gauge_max&&(e.gauge_max=n-e.gauge_min)},redrawMultiArcGauge:function(){var t=this,e=this,n=e.config,r=e.state,s=e.$el,o=e.state.hiddenTargetIds,l=s.main.selectAll("."+ut.arcs).selectAll("."+ut.arcLabelLine).data(e.arcData.bind(e));l.enter().append("rect").attr("class",function(e){return i(this,t),ut.arcLabelLine+" "+ht.target+" "+ht.target+"-"+e.data.id}.bind(this)).merge(l).style("fill",function(n){return i(this,t),e.levelColor?e.levelColor(n.data.values[0].value):e.color(n.data)}.bind(this)).style("display",n.gauge_label_show?null:"none").each((function(t){var i=0,n=0,s=0,l="";if(o.indexOf(t.data.id)<0){var c=e.updateAngle(t),d=r.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length*(c.index+1),h=c.endAngle-Math.PI/2,u=r.radius-d,g=h-(0===u?0:1/u);i=r.radiusExpanded-r.radius+d,n=Math.cos(g)*u,s=Math.sin(g)*u,l="rotate("+180*h/Math.PI+", "+n+", "+s+")"}(0,a.select)(this).attr("x",n).attr("y",s).attr("width",i).attr("height",2).attr("transform",l).style("stroke-dasharray","0, "+(i+2)+", 0")}))},textForGaugeMinMax:function(t,e){var i=this.config.gauge_label_extents;return y(i)?i.bind(this.api)(t,e):t},getGaugeLabelHeight:function(){var t=this.config;return this.config.gauge_label_show&&!t.gauge_fullCircle?20:0},getPaddingBottomForGauge:function(){return this.getGaugeLabelHeight()*(this.config.gauge_label_show?2:2.5)}},ln={initBubble:function(){var t=this.config;this.hasType("bubble")&&(t.point_show=!0,t.point_type="circle",t.point_sensitivity=25)},getBaseLength:function(){var t=this,e=t.state,i=e.width,n=e.height,a=Qt,r=t.cache.get(a);return r||t.cache.add(a,r=et("min",[i,n])),r},getBubbleR:function(t){var e=this,n=this,a=n.config.bubble_maxR;y(a)?a=a.bind(n.api)(t):w(a)||(a=n.getBaseLength()/(2*n.getMaxDataCount())+12);var r=et("max",n.getMinMaxData().max.map(function(t){return i(this,e),n.isBubbleZType(t)?n.getBubbleZData(t.value,"y"):D(t.value)?t.value.mid:t.value}.bind(this))),s=a*a*Math.PI,o=(n.isBubbleZType(t)?n.getBubbleZData(t.value,"z"):t.value)*(s/r);return Math.sqrt(o/Math.PI)},getBubbleZData:function(t,e){return D(t)?t[e]:t["y"===e?0:1]}},cn={initLine:function(){var t=this.$el;t.line=t.main.select("."+ht.chart).append("g").attr("class",Tt.chartLines).call(this.setCssRule(!1,"."+Tt.chartLines,["pointer-events:none"]))},updateTargetsForLine:function(t){var e=this,n=this,a=n.$el,r=a.area,s=a.line,o=a.main,l=n.getChartClass("Line"),c=n.getClass("lines",!0),d=n.classFocus.bind(n);s||n.initLine();var h=t.filter(function(t){return i(this,e),!(n.isScatterType(t)||n.isBubbleType(t))}.bind(this)),u=o.select("."+Tt.chartLines).selectAll("."+Tt.chartLine).data(h).attr("class",function(t){return i(this,e),l(t)+d(t)}.bind(this)),g=u.enter().append("g").attr("class",l).style("opacity","0").style("pointer-events",n.getStylePropValue("none"));if(g.append("g").attr("class",c),n.hasTypeOf("Area")){var f=(!r&&g.empty()?u:g).filter(n.isAreaType.bind(n));n.initArea(f)}n.updateTargetForCircle(h,g)},updateLine:function(t,e){var n=this;void 0===e&&(e=!1);var a=this,r=a.format.extraLineClasses,s=a.$el,o=a.$T,l=e?s.subchart:s,c=l.main.selectAll("."+Tt.lines).selectAll("."+Tt.line).data(a.lineData.bind(a));o(c.exit(),t).style("opacity","0").remove(),l.line=c.enter().append("path").attr("class",function(t){return i(this,n),a.getClass("line",!0)(t)+" "+(r(t)||"")}.bind(this)).style("stroke",a.color).merge(c).style("opacity",a.initialOpacity.bind(a)).style("shape-rendering",function(t){return i(this,n),a.isStepType(t)?"crispEdges":""}.bind(this)).attr("transform",null)},redrawLine:function(t,e,i){void 0===i&&(i=!1);var n=this.$el;return[(0,this.$T)((i?n.subchart:n).line,e,Y()).attr("d",t).style("stroke",this.color).style("opacity",null)]},getCurve:function(t){var e=this,n=this;return n.config.axis_rotated&&n.isStepType(t)?function(a){i(this,e);var r=n.getInterpolate(t)(a);return r.orgPoint=r.point,r.pointRotated=function(t,e){1===this._point&&(this._point=2);var i=this._y*(1-this._t)+e*this._t;this._context.lineTo(this._x,i),this._context.lineTo(t,i),this._x=t,this._y=e},r.point=function(t,e){0===this._point?this.orgPoint(t,e):this.pointRotated(t,e)},r}.bind(this):n.getInterpolate(t)},generateDrawLine:function(t,e){var n=this,a=this,r=a.config,s=a.scale,o=r.line_connectNull,l=r.axis_rotated,c=a.generateGetLinePoints(t,e),d=a.getYScaleById.bind(a),h=function(t){return i(this,n),(e?a.subxx:a.xx).call(a,t)}.bind(this),u=function(t,r){return i(this,n),a.isGrouped(t.id)?c(t,r)[0][1]:d(t.id,e)(a.getBaseValue(t))}.bind(this),g=(0,Ge.line)();g=l?g.x(u).y(h):g.x(h).y(u),o||(g=g.defined(function(t){return i(this,n),null!==a.getBaseValue(t)}.bind(this)));var f=e?s.subX:s.x;return function(t){i(this,n);var c,h=d(t.id,e),u=o?a.filterRemoveNull(t.values):t.values,p=0,v=0;if(a.isLineType(t)){var x=r.data_regions[t.id];x?c=a.lineWithRegions(u,s.zoom||f,h,x):(a.isStepType(t)&&(u=a.convertValuesToStep(u)),c=g.curve(a.getCurve(t))(u))}else u[0]&&(p=f(u[0].x),v=h(u[0].value)),c=l?"M "+v+" "+p:"M "+p+" "+v;return c||"M 0 0"}.bind(this)},lineWithRegions:function(t,e,n,a){var r,s,o,l,c=this,d=this,h=d.config.axis_rotated,u=d.axis.isTimeSeries(),g=[];if(S(a))for(var f,p=function(t,e){return i(this,c),A(t)?e:u?rt.call(d,t):t}.bind(this),v=0;f=a[v];v++){var x=p(f.start,t[0].x),b=p(f.end,t[t.length-1].x),m=f.style||{dasharray:"2 2"};g[v]={start:x,end:b,style:m}}for(var y,T=h?function(t){return i(this,c),n(t.value)}.bind(this):function(t){return i(this,c),e(t.x)}.bind(this),w=h?function(t){return i(this,c),e(t.x)}.bind(this):function(t){return i(this,c),n(t.value)}.bind(this),k=function(t){return i(this,c),"M"+t[0][0]+","+t[0][1]+"L"+t[1][0]+","+t[1][1]}.bind(this),C=u?function(t,a,r,l){i(this,c);var d=t.x.getTime(),u=a.x-t.x,g=new Date(d+u*r),f=new Date(d+u*(r+l)),p=h?[[n(s(r)),e(g)],[n(s(r+o)),e(f)]]:[[e(g),n(s(r))],[e(f),n(s(r+o))]];return k(p)}.bind(this):function(t,a,o,l){i(this,c);var d=h?[[n(s(o),!0),e(r(o))],[n(s(o+l),!0),e(r(o+l))]]:[[e(r(o),!0),n(s(o))],[e(r(o+l),!0),n(s(o+l))]];return k(d)}.bind(this),R={x:d.axis.getAxisType("x"),y:d.axis.getAxisType("y")},E="",L=0;y=t[L];L++){var O=t[L-1],P=O&&_(O.value);m=d.isWithinRegions(y.x,g);if(_(y.value))if(!A(g)&&m&&P){if(P){try{m=m.dasharray.split(" ")}catch(t){m="2 2".split(" ")}r=Be(R.x,O.x,y.x),s=Be(R.y,O.value,y.value);var I=e(y.x)-e(O.x),D=n(y.value)-n(O.value),z=Math.sqrt(Math.pow(I,2)+Math.pow(D,2));l=(o=m[0]/z)*m[1];for(var M=o;M<=1;M+=l)E+=C(O,y,M,o),M+l>=1&&(E+=C(O,y,1,0))}}else E+=(L&&P?"L":"M")+T(y)+","+w(y)}return E},isWithinRegions:function(t,e){for(var i,n=0;i=e[n];n++)if(i.start<t&&t<=i.end)return i.style;return!1},isWithinStep:function(t,e){return Math.abs(e-N(this.state.event,t)[1])<30},shouldDrawPointsForLine:function(t){var e=this.config.line_point;return!0===e||I(e)&&-1!==e.indexOf(t.id)}},dn=function(){return i(this,undefined),Y()}.bind(void 0),hn={hasValidPointType:function(t){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(t||this.config.point_type)},hasValidPointDrawMethods:function(t){var e=t||this.config.point_type;return L(e)&&y(e.create)&&y(e.update)},initialOpacityForCircle:function(t){var e=this.config,i=this.state.withoutFadeIn,n=e.point_opacity;return A(n)&&(n=null!==this.getBaseValue(t)&&i[t.id]?this.opacityForCircle(t):"0"),n},opacityForCircle:function(t){var e=this.config,i=e.point_opacity;return A(i)&&(i=e.point_show&&!e.point_focus_only?null:"0",i=_(this.getBaseValue(t))?this.isBubbleType(t)||this.isScatterType(t)?"0.5":i:"0"),i},initCircle:function(){var t=this,e=t.$el.main;t.point=t.generatePoint(),(t.hasType("bubble")||t.hasType("scatter"))&&e.select("."+xt.chartCircles).empty()&&e.select("."+ht.chart).append("g").attr("class",xt.chartCircles)},updateTargetForCircle:function(t,e){var n=this,r=this,s=r.config,o=r.data,l=r.$el,c=s.interaction_enabled&&s.data_selection_enabled,d=c&&s.data_selection_isselectable,h=r.getClass("circles",!0);if(s.point_show){l.circle||r.initCircle();var u=t,g=e;if(!u){u=o.targets.filter(function(t){return i(this,n),this.isScatterType(t)||this.isBubbleType(t)}.bind(this));var f=l.main.select("."+xt.chartCircles).style("pointer-events","none").selectAll("."+xt.circles).data(u);f.exit().remove(),g=f.enter()}c&&g.append("g").attr("class",function(t){return i(this,n),r.generateClass(Lt.selectedCircles,t.id)}.bind(this)),g.append("g").attr("class",h).call(function(t){i(this,n),r.setCssRule(!0,"."+xt.circles,["cursor:pointer"],d)(t),r.setCssRule(!0," ."+xt.circle,["fill","stroke"],r.color)(t)}.bind(this)).style("opacity",(function(){return(0,a.select)(this.parentNode).attr("class").indexOf(xt.chartCircles)>-1?"0":null})),c&&u.forEach(function(t){var e=this;i(this,n),l.main.selectAll("."+Lt.selectedCircles+r.getTargetSelectorSuffix(t.id)).selectAll(""+Lt.selectedCircle).each(function(n){i(this,e),n.value=t.values[n.index].value}.bind(this))}.bind(this))}},updateCircle:function(t){var e=this;void 0===t&&(t=!1);var n=this,a=n.config,r=n.state,s=n.$el,o=a.point_focus_only,l=t?s.subchart:s;if(a.point_show&&!r.toggling){var c=l.main.selectAll("."+xt.circles).selectAll("."+xt.circle).data(function(t){return i(this,e),n.isLineType(t)&&n.shouldDrawPointsForLine(t)||n.isBubbleType(t)||n.isRadarType(t)||n.isScatterType(t)?o?[t.values[0]]:t.values:[]}.bind(this));c.exit().remove(),c.enter().filter(Boolean).append(n.point("create",this,n.pointR.bind(n),n.getStylePropValue(n.color))),l.circle=l.main.selectAll("."+xt.circles+" ."+xt.circle).style("stroke",n.getStylePropValue(n.color)).style("opacity",n.initialOpacityForCircle.bind(n))}},redrawCircle:function(t,e,i,n,a){void 0===a&&(a=!1);var r=this,s=r.state.rendered,o=r.$el,l=r.$T,c=a?o.subchart:o,d=c.main.selectAll("."+Lt.selectedCircle);if(!r.config.point_show)return[];var h=r.point("update",r,t,e,r.getStylePropValue(r.color),i,n,d),u=r.isCirclePoint()?"c":"",g=Y(),f=r.opacityForCircle.bind(r),p=[];return c.circle.each((function(t){var e=h.bind(this)(t);e=l(e,i||!s,g).style("opacity",f),p.push(e)})),[p,l(d,i).attr(u+"x",t).attr(u+"y",e)]},showCircleFocus:function(t){var e=this,n=e.config,r=e.state,s=r.hasRadar,o=r.resizing,l=r.toggling,c=r.transiting,d=e.$el.circle;if(!1===c&&n.point_focus_only&&d){var h=(s?e.radarCircleX:e.circleX).bind(e),u=(s?e.radarCircleY:e.circleY).bind(e),g=l||A(t),f=e.point("update",e,h,u,e.getStylePropValue(e.color),!o&&g);t&&(d=d.filter((function(e){var n=this,r=t.filter(function(t){return i(this,n),t.id===e.id}.bind(this));return!!r.length&&(0,a.select)(this).datum(r[0])}))),d.attr("class",this.updatePointClass.bind(this)).style("opacity",null).each((function(t){var i=t.id,n=t.index,a=t.value,r="hidden";_(a)&&(f.bind(this)(t),e.expandCircles(n,i),r=""),this.style.visibility=r}))}},hideCircleFocus:function(){var t=this,e=t.config,i=t.$el.circle;e.point_focus_only&&i&&(t.unexpandCircles(),i.style("visibility","hidden"))},circleX:function(t){return this.xx(t)},updateCircleY:function(t){var e=this;void 0===t&&(t=!1);var n=this,a=n.generateGetLinePoints(n.getShapeIndices(n.isLineType),t);return function(r,s){i(this,e);var o=r.id;return n.isGrouped(o)?a(r,s)[0][1]:n.getYScaleById(o,t)(n.getBaseValue(r))}.bind(this)},expandCircles:function(t,e,i){var n=this,r=n.pointExpandedR.bind(n);i&&n.unexpandCircles();var s=n.getShapeByIndex("circle",t,e).classed(ht.EXPANDED,!0),o=r(s)/n.config.point_r,l=1-o;n.isCirclePoint()?s.attr("r",r):s.each((function(){var t=(0,a.select)(this);if("circle"===this.tagName)t.attr("r",r);else{var e=this.getBBox(),i=e.width,n=e.height,s=l*(+t.attr("x")+i/2),c=l*(+t.attr("y")+n/2);t.attr("transform","translate("+s+" "+c+") scale("+o+")")}}))},unexpandCircles:function(t){var e=this,i=e.pointR.bind(e),n=e.getShapeByIndex("circle",t).filter((function(){return(0,a.select)(this).classed(ht.EXPANDED)})).classed(ht.EXPANDED,!1);if(n.attr("r",i),!e.isCirclePoint()){var r=i(n)/e.config.point_r;n.attr("transform",1!==r?"scale("+r+")":null)}},pointR:function(t){var e=this,i=e.config.point_r,n=i;return e.isBubbleType(t)?n=e.getBubbleR(t):y(i)&&(n=i.bind(e.api)(t)),n},pointExpandedR:function(t){var e=this,i=e.config,n=e.isBubbleType(t)?1.15:1.75;return i.point_focus_expand_enabled?i.point_focus_expand_r||e.pointR(t)*n:e.pointR(t)},pointSelectR:function(t){var e=this.config.point_select_r;return y(e)?e(t):e||4*this.pointR(t)},isWithinCircle:function(t,e){var i=N(this.state.event,t),n=(0,a.select)(t),r=this.isCirclePoint(t)?"c":"",s=+n.attr(r+"x"),o=+n.attr(r+"y");if(!s&&!o&&1===t.nodeType){var l=j(t);s=l.x,o=l.y}return Math.sqrt(Math.pow(s-i[0],2)+Math.pow(o-i[1],2))<(e||this.config.point_sensitivity)},insertPointInfoDefs:function(t,e){var n,r=this,s=function(t,e){i(this,r);for(var n,a=t.attributes,s=0;n=a[s];s++)n=n.name,e.setAttribute(n,t.getAttribute(n))}.bind(this),l=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement,c=o.createElementNS(a.namespaces.svg,l.nodeName.toLowerCase());if(c.id=e,c.style.fill="inherit",c.style.stroke="inherit",s(l,c),null!=(n=l.childNodes)&&n.length){var d=(0,a.select)(c);"innerHTML"in c?d.html(l.innerHTML):Z(l.childNodes).forEach(function(t){i(this,r),s(t,d.append(t.tagName).node())}.bind(this))}this.$el.defs.node().appendChild(c)},pointFromDefs:function(t){return this.$el.defs.select("#"+t)},updatePointClass:function(t){var e=this,i=e.$el.circle,n=!1;return(D(t)||i)&&(n=!0===t?i.each((function(t){var i=e.getClass("circle",!0)(t);this.getAttribute("class").indexOf(ht.EXPANDED)>-1&&(i+=" "+ht.EXPANDED),this.setAttribute("class",i)})):e.getClass("circle",!0)(t)),n},generateGetLinePoints:function(t,e){var n=this,a=this,r=a.config,s=a.getShapeX(0,t,e),o=a.getShapeY(e),l=a.getShapeOffset(a.isLineType,t,e),c=a.getYScaleById.bind(a);return function(t,d){i(this,n);var h=c.call(a,t.id,e)(a.getShapeYMin(t.id)),u=l(t,d)||h,g=s(t),f=o(t);r.axis_rotated&&(t.value>0&&f<h||t.value<0&&h<f)&&(f=h);var p=[g,f-(h-u)];return[p,p,p,p]}.bind(this)},generatePoint:function(){var t=this,e=t.config,i=t.state.datetimeId,n=[],r=P(e.point_pattern)?e.point_pattern:[e.point_type];return function(e,s){for(var o=arguments.length,l=Array(o>2?o-2:0),c=2;c<o;c++)l[c-2]=arguments[c];return function(o){var c,d=t.getTargetSelectorSuffix(o.id||(null==(c=o.data)?void 0:c.id)||o),h=(0,a.select)(this);n.indexOf(d)<0&&n.push(d);var u=r[n.indexOf(d)%r.length];if(t.hasValidPointType(u))u=t[u];else if(!t.hasValidPointDrawMethods(u)){var g=i+"-point"+d;if(t.pointFromDefs(g).size()<1&&t.insertPointInfoDefs(u,g),"create"===e)return t.custom.create.bind(s).apply(void 0,[h,g].concat(l));if("update"===e)return t.custom.update.bind(s).apply(void 0,[h].concat(l))}return u[e].bind(s).apply(void 0,[h].concat(l))}}},custom:{create:function(t,e,i){return t.append("use").attr("xlink:href","#"+e).attr("class",this.updatePointClass.bind(this)).style("fill",i).node()},update:function(t,e,n,a,r,s,o){var l=this,c=t.node().getBBox(),d=c.width,h=c.height,u=function(t){return i(this,l),_(t.value)?e(t)-d/2:0}.bind(this),g=function(t){return i(this,l),_(t.value)?n(t)-h/2:0}.bind(this),f=t;return r&&(s&&f.attr("x",u),f=this.$T(f,r,dn()),o&&this.$T(o,r,dn())),f.attr("x",u).attr("y",g).style("fill",a)}},circle:{create:function(t,e,i){return t.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",e).style("fill",i).node()},update:function(t,e,i,n,a,r,s){var o=this,l=t;return o.hasType("bubble")&&l.attr("r",o.pointR.bind(o)),a&&(r&&l.attr("cx",e),l.attr("cx")&&(l=o.$T(l,a,dn())),s&&o.$T(l,a,dn())),l.attr("cx",e).attr("cy",i).style("fill",n)}},rectangle:{create:function(t,e,n){var a=this,r=function(t){return i(this,a),2*e(t)}.bind(this);return t.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",r).attr("height",r).style("fill",n).node()},update:function(t,e,n,a,r,s,o){var l=this,c=this,d=c.config.point_r,h=function(t){return i(this,l),e(t)-d}.bind(this),u=function(t){return i(this,l),n(t)-d}.bind(this),g=t;return r&&(s&&g.attr("x",h),g=c.$T(g,r,dn()),o&&c.$T(o,r,dn())),g.attr("x",h).attr("y",u).style("fill",a)}}};function un(t){var e=t.config.polar_level_max,i=t.getMinMaxData().max[0].value;return e&&e>i&&(i=e),i}var gn={initPolar:function(){var t=this,e=t.$el.arcs,i=t.config,n=i.polar_level_text_show,a=i.polar_level_text_backgroundColor;e.levels=e.append("g").attr("class",Ct),n&&a&&t.generateDataLabelBackgroundColorFilter(a)},getPolarOuterRadius:function(t,e){var i,n=un(this);return(null!=(i=null==t?void 0:t.data.values[0].value)?i:0)/n*e},updateTargetsForPolar:function(t){this.updateTargetsForArc(t)},redrawPolar:function(){this.config.polar_level_show&&this.updatePolarLevel()},updatePolarLevel:function(){var t=this,e=this,n=e.config,a=e.state,r=e.$el.arcs.levels,s=n.polar_level_depth,o=un(e),l=it(0,s),c=a.radius,d=l.map(function(e){return i(this,t),c*((e+1)/s)}.bind(this)),h=(n.polar_level_text_format||function(){}).bind(e.api),u=r.selectAll("."+kt).data(l);u.exit().remove();var g=u.enter().append("g").attr("class",function(e,n){return i(this,t),kt+" "+kt+"-"+n}.bind(this));if(g.append("circle"),g.merge(u).selectAll("circle").style("visibility",n.polar_level_show?null:"hidden").attr("cx",0).attr("cy",0).attr("r",function(e){return i(this,t),d[e]}.bind(this)),n.polar_level_text_show){var f=n.polar_level_text_backgroundColor,p="#"+a.datetimeId+"-labels-bg"+e.getTargetSelectorSuffix(f);g.append("text").style("text-anchor","middle"),g.merge(u).selectAll("text").attr("dy",function(e){return i(this,t),5-d[e]}.bind(this)).attr("filter",f?"url("+p+")":null).text(function(e){return i(this,t),h(o/l.length*(e+1))}.bind(this))}}};var fn=re,pn={initRadar:function(){var t=this,e=t.config,i=t.state.current,n=t.$el;t.hasType("radar")&&(n.radar=n.main.select("."+ht.chart).append("g").attr("class",Rt.chartRadars),n.radar.levels=n.radar.append("g").attr("class",Ct),n.radar.axes=n.radar.append("g").attr("class",ft.axis),n.radar.shapes=n.radar.append("g").attr("class",Ot.shapes),i.dataMax=e.radar_axis_max||t.getMinMaxData().max[0].value)},getRadarSize:function(){var t=this.config,e=this.state,i=e.arcWidth,n=e.arcHeight,a=t.axis_x_categories.length<4?-20:10,r=(Math.min(i,n)-a)/2;return[r,r]},updateTargetsForRadar:function(t){var e=this,n=this.config;O(n.axis_x_categories)&&(n.axis_x_categories=it(0,et("max",t.map(function(t){return i(this,e),t.values.length}.bind(this))))),this.generateRadarPoints()},getRadarPosition:function(t,e,n,a){var r=this,s=this.config,o=this.getRadarSize(),l=o[0],c=o[1],d=s.axis_x_categories.length,h=s.radar_direction_clockwise,u=Z(t).map(function(o){return i(this,r),function(t,e,i,n,a,r){var s=t&&n>0?i-n:n,o=2*Math.PI;return a*(1-r*("x"===e?Math.sin:Math.cos)(s*o/i))}(h,o,d,e,S(n)?n:"x"===t?l:c,w(a)?a:s.radar_size_ratio)}.bind(this));return 1===u.length?u[0]:u},generateRadarPoints:function(){var t=this,e=this,n=e.data.targets,a=e.getRadarSize(),r=a[0],s=a[1],o=e.cache.get(fn)||{},l=o._size;(!l||l.width!==r&&l.height!==s)&&(n.forEach(function(n){var a=this;i(this,t),o[n.id]=n.values.map(function(t,n){return i(this,a),e.getRadarPosition(["x","y"],n,void 0,e.getRatio("radar",t))}.bind(this))}.bind(this)),o._size={width:r,height:s},e.cache.add(fn,o))},redrawRadar:function(){var t=this,e=t.$el,i=e.radar,n=e.main,a=t.getTranslate("radar");a&&(i.attr("transform",a),n.select("."+It.chartTexts).attr("transform",a),t.generateRadarPoints(),t.updateRadarLevel(),t.updateRadarAxes(),t.updateRadarShape())},generateGetRadarPoints:function(){var t=this,e=this.cache.get(fn);return function(n,a){i(this,t);var r=e[n.id][a];return[r,r,r,r]}.bind(this)},updateRadarLevel:function(){var t=this,e=this,n=e.config,a=e.state,r=e.$el.radar,s=e.getRadarSize(),o=s[0],l=s[1],c=n.radar_level_depth,d=n.axis_x_categories.length,h=n.radar_level_text_show,u=r.levels,g=it(0,c),f=n.radar_size_ratio*Math.min(o,l),p=g.map(function(e){return i(this,t),f*((e+1)/c)}.bind(this)),v=(n.radar_level_text_format||function(){}).bind(e.api),x=g.map(function(n){var a=this;i(this,t);var r=p[n];return it(0,d).map(function(t){return i(this,a),e.getRadarPosition(["x","y"],t,r,1).join(",")}.bind(this)).join(" ")}.bind(this)),b=u.selectAll("."+kt).data(g);b.exit().remove();var m=b.enter().append("g").attr("class",function(e,n){return i(this,t),kt+" "+kt+"-"+n}.bind(this));m.append("polygon").style("visibility",n.radar_level_show?null:"hidden"),h&&(u.select("text").empty()&&u.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(function(){return i(this,t),v(0)}.bind(this)),m.append("text").attr("dx","-.5em").style("text-anchor","end").text(function(e){return i(this,t),v(a.current.dataMax/g.length*(e+1))}.bind(this))),m.merge(b).attr("transform",function(e){return i(this,t),"translate("+(o-p[e])+", "+(l-p[e])+")"}.bind(this)).selectAll("polygon").attr("points",function(e){return i(this,t),x[e]}.bind(this)),h&&u.selectAll("text").attr("x",function(e){return i(this,t),A(e)?o:x[e].split(",")[0]}.bind(this)).attr("y",function(e){return i(this,t),A(e)?l:0}.bind(this))},updateRadarAxes:function(){var t=this,e=this,n=e.config,r=e.$el.radar,s=e.getRadarSize(),o=s[0],l=s[1],c=n.axis_x_categories,d=r.axes.selectAll("g").data(c);d.exit().remove();var h=d.enter().append("g").attr("class",function(e,n){return i(this,t),ft.axis+"-"+n}.bind(this));if(n.radar_axis_line_show&&h.append("line"),n.radar_axis_text_show&&h.append("text"),d=h.merge(d),n.radar_axis_line_show&&d.select("line").attr("x1",o).attr("y1",l).attr("x2",function(n,a){return i(this,t),e.getRadarPosition("x",a)}.bind(this)).attr("y2",function(n,a){return i(this,t),e.getRadarPosition("y",a)}.bind(this)),n.radar_axis_text_show){var u=n.radar_axis_text_position,g=u.x,f=void 0===g?0:g,p=u.y,v=void 0===p?0:p;d.select("text").style("text-anchor","middle").attr("dy",".5em").call(function(e){i(this,t),e.each((function(t){F((0,a.select)(this),t+"",[-.6,1.2])}))}.bind(this)).datum(function(e,n){return i(this,t),{index:n}}.bind(this)).attr("transform",(function(t){A(this.width)&&(this.width=this.getBoundingClientRect().width/2);var i=e.getRadarPosition("x",t.index,void 0,1),n=Math.round(e.getRadarPosition("y",t.index,void 0,1));return i>o?i+=this.width+f:Math.round(i)<o&&(i-=this.width+f),n>l?(n/2===l&&"tspan"===this.firstChild.tagName&&this.firstChild.setAttribute("dy","0em"),n+=v):n<l&&(n-=v),"translate("+i+" "+n+")"}))}e.bindRadarEvent()},bindRadarEvent:function(){var t=this,e=this,n=e.config,r=e.state,s=e.$el,o=s.radar,l=s.svg,c=n.point_focus_only,d=r,h=d.inputType,u=d.transiting;if(n.interaction_enabled){var g="mouse"===h,f=function(e){i(this,t);var n=e.target;/tspan/i.test(n.tagName)&&(n=n.parentNode);var r=(0,a.select)(n).datum();return r&&1===Object.keys(r).length?r.index:void 0}.bind(this),p=function(n){i(this,t),r.event=n;var a=f(n),s=A(a);(g||s)&&(e.hideTooltip(),c?e.hideCircleFocus():e.unexpandCircles(),g?e.setOverOut(!1,a):s&&e.callOverOutForTouch())}.bind(this);o.axes.selectAll("text").on(g?"mouseover ":"touchstart",function(n){if(i(this,t),!u){r.event=n;var a=f(n);e.selectRectForSingle(l.node(),null,a),g?e.setOverOut(!0,a):e.callOverOutForTouch(a)}}.bind(this)).on("mouseout",g?p:null),g||l.on("touchstart",p)}},updateRadarShape:function(){var t=this,e=this,n=e.data.targets.filter(function(n){return i(this,t),e.isRadarType(n)}.bind(this)),a=e.cache.get(fn),r=e.$el.radar.shapes.selectAll("polygon").data(n),s=r.enter().append("g").attr("class",e.getChartClass("Radar"));e.$T(r.exit()).remove(),s.append("polygon").merge(r).style("fill",e.color).style("stroke",e.color).attr("points",function(e){return i(this,t),a[e.id].join(" ")}.bind(this)),e.updateTargetForCircle(n,s)},radarCircleX:function(t){return this.cache.get(fn)[t.id][t.index][0]},radarCircleY:function(t){return this.cache.get(fn)[t.id][t.index][1]}},vn=p(13);function xn(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return bn(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return bn(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bn(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}function mn(t,e){var n=this,a=this.scale,r=a.x,s=a.y,o=this.state.width;t.selectAll("g").attr("transform",function(t){return i(this,n),"translate("+(t===e?"0,0":r(t.x0)+","+s(t.y0))+")"}.bind(this)).select("rect").attr("width",function(t){return i(this,n),t===e?o:r(t.x1)-r(t.x0)}.bind(this)).attr("height",function(t){return i(this,n),t===e?0:s(t.y1)-s(t.y0)}.bind(this))}function _n(t){var e=this,n=this;return t.map(function(t){i(this,e);var a=t.id,r=t.values;return{name:a,id:a,value:r[0].value,ratio:n.getRatio("treemap",r[0])}}.bind(this))}var yn={initTreemap:function(){var t=this,e=this,n=e.$el,a=e.state,r=a.current,s=r.width,o=r.height,l=a.clip.id;e.treemap=(0,vn.treemap)().tile(e.getTreemapTile()),e.treemapFn=function(n){var a=this;i(this,t);var r=(0,vn.hierarchy)(n).sum(function(t){return i(this,a),t.value}.bind(this)),s=e.getSortCompareFn(!0);return e.treemap(s?r.sort(s):r)}.bind(this),n.defs.append("clipPath").attr("id",l).append("rect").attr("width",s).attr("height",o),n.treemap=n.main.select("."+ht.chart).attr("clip-path","url(#"+l+")").append("g").classed(zt.chartTreemaps,!0),e.bindTreemapEvent()},bindTreemapEvent:function(){var t=this,e=this,n=e.$el,r=e.config,s=e.state,o=function(e){var n,r;i(this,t);var o,l=e.isTrusted?e.target:null==(n=s.eventReceiver.rect)?void 0:n.node();return/^rect$/i.test(l.tagName)&&(s.event=e,o=(0,a.select)(l).datum()),null==(r=o)?void 0:r.data}.bind(this);if(r.interaction_enabled){var l="touch"===s.inputType;n.treemap.on(l?"touchstart":"mousemove",function(n){i(this,t);var a=o(n);a&&(e.showTooltip([a],n.currentTarget),"mouseover"===n.type&&e.setOverOut(!0,a))}.bind(this)).on(l?"touchend":"mouseout",function(n){i(this,t);var a=o(n);e.hideTooltip(),e.setOverOut(!1,a)}.bind(this))}},getTreemapTile:function(){var t,e,n=this.config,a=this.state.current,r=a.width,s=a.height,o=null!=(t={binary:vn.treemapBinary,dice:vn.treemapDice,slice:vn.treemapSlice,sliceDice:vn.treemapSliceDice,squarify:vn.treemapSquarify,resquarify:vn.treemapResquarify}[null!=(e=n.treemap_tile)?e:"binary"])?t:vn.treemapBinary,l=this;return function(t,e,n,a,c){i(this,l),o(t,0,0,r,s);for(var d,h=xn(t.children);!(d=h()).done;){var u=d.value;u.x0=e+u.x0/r*(a-e),u.x1=e+u.x1/r*(a-e),u.y0=n+u.y0/s*(c-n),u.y1=n+u.y1/s*(c-n)}}.bind(this)},getTreemapData:function(t){var e=this;return{name:"root",children:_n.bind(e)(e.filterTargetsToShow(t.filter(e.isTreemapType,e)))}},updateTargetsForTreemap:function(t){var e=this,i=e.$el.treemap,n=e.treemapFn(e.getTreemapData(null!=t?t:e.data.targets));i.data(n)},updateTreemap:function(t){var e=this,n=this,a=n.$el,r=n.$T,s=a.treemap.datum(),o=n.getChartClass("Treemap"),l=a.treemap.selectAll("g").data(s.children);r(l.exit(),t).style("opacity","0").remove(),l.enter().append("g").append("rect"),a.treemap.selectAll("g").attr("class",o).select("rect").attr("fill",function(t){return i(this,e),n.color(t.data.name)}.bind(this))},generateGetTreemapPoints:function(){var t=this,e=this.$el,n=this.scale,a=n.x,r=n.y,s={};return e.treemap.selectAll("g").each(function(e){i(this,t),s[e.data.name]=[[a(e.x0),r(e.y0)],[a(e.x1),r(e.y1)]]}.bind(this)),function(e){return i(this,t),s[e.id]}.bind(this)},redrawTreemap:function(t){var e=this,i=e.$el,n=e.state.current,a=n.width,r=n.height;return i.defs.select("rect").attr("width",a).attr("height",r),[e.$T(i.treemap,t,Y()).call(mn.bind(e),i.treemap.datum())]},treemapDataLabelFormat:function(t){var e=this,i=e.config,n=t.id,a=t.value,r=i.treemap_label_format,s=e.getRatio("treemap",t),o=(100*s).toFixed(2),l=i.treemap_label_show&&e.meetsLabelThreshold(s,"treemap")?null:"0";return function(t){return t.style("opacity",l),y(r)?r.bind(e.api)(a,s,n):n+"\n"+o+"%"}}},Tn={point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_focus_only:!1,point_opacity:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle"},wn={area_above:!1,area_below:!1,area_front:!0,area_linearGradient:!1,area_zerobased:!0},An={bar_label_threshold:0,bar_linearGradient:!1,bar_indices_removeNull:!1,bar_overlap:!1,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0},Sn={bubble_maxR:35,bubble_zerobased:!1},kn={candlestick_width:void 0,candlestick_width_ratio:.6,candlestick_width_max:void 0,candlestick_color_down:"red"},Cn={line_connectNull:!1,line_step_type:"step",line_step_tooltipMatch:!1,line_zerobased:!1,line_classes:void 0,line_point:!0},Rn={scatter_zerobased:!1},En={spline_interpolation_type:"cardinal"},Ln={arc_cornerRadius:0,arc_cornerRadius_ratio:0},On={donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_rate:.98,donut_expand_duration:50,donut_padAngle:0,donut_startingAngle:0},Pn={gauge_background:"",gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_label_extents:void 0,gauge_label_threshold:0,gauge_min:0,gauge_max:100,gauge_type:"single",gauge_startingAngle:-1*Math.PI/2,gauge_arcLength:100,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_rate:.98,gauge_expand_duration:50},In={pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_rate:.98,pie_expand_duration:50,pie_innerRadius:0,pie_outerRadius:void 0,pie_padAngle:0,pie_padding:0,pie_startingAngle:0},Dn={polar_label_show:!0,polar_label_format:void 0,polar_label_threshold:.05,polar_label_ratio:void 0,polar_level_depth:3,polar_level_max:void 0,polar_level_show:!0,polar_level_text_backgroundColor:"#fff",polar_level_text_format:function(t){return i(this,undefined),t%1==0?t:t.toFixed(2)}.bind(void 0),polar_level_text_show:!0,polar_padAngle:0,polar_padding:0,polar_startingAngle:0},zn={radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function(t){return i(this,undefined),t%1==0?t:t.toFixed(2)}.bind(void 0),radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1},Mn={treemap_tile:"binary",treemap_label_format:void 0,treemap_label_threshold:.05,treemap_label_show:!0},Xn=void 0;function $n(t,e){W(Qe.prototype,qi.concat(t)),W(gi.prototype,Zi),Jt.setOptions(Ki.concat(e||[]))}function Fn(t,e){$n([hn,cn].concat(t||[])),Jt.setOptions([Tn,Cn].concat(e||[]))}function Bn(t,e){W(Qe.prototype,[en].concat(t||[])),Jt.setOptions(e)}var Nn=function(){var t=this;return i(this,Xn),Fn(nn,[wn]),(Nn=function(){return i(this,t),l.AREA}.bind(this))()}.bind(void 0),Gn=function(){var t=this;return i(this,Xn),Fn(nn,[wn]),(Gn=function(){return i(this,t),l.AREA_LINE_RANGE}.bind(this))()}.bind(void 0),jn=function(){var t=this;return i(this,Xn),Fn(nn,[wn,En]),(jn=function(){return i(this,t),l.AREA_SPLINE}.bind(this))()}.bind(void 0),Yn=function(){var t=this;return i(this,Xn),Fn(nn,[wn,En]),(Yn=function(){return i(this,t),l.AREA_SPLINE_RANGE}.bind(this))()}.bind(void 0),Vn=function(){var t=this;return i(this,Xn),Fn(nn,[wn]),(Vn=function(){return i(this,t),l.AREA_STEP}.bind(this))()}.bind(void 0),Hn=function(){var t=this;return i(this,Xn),Fn(),(Hn=function(){return i(this,t),l.LINE}.bind(this))()}.bind(void 0),Wn=function(){var t=this;return i(this,Xn),Fn(void 0,[En]),(Wn=function(){return i(this,t),l.SPLINE}.bind(this))()}.bind(void 0),Un=function(){var t=this;return i(this,Xn),Fn(),(Un=function(){return i(this,t),l.STEP}.bind(this))()}.bind(void 0),Zn=function(){var t=this;return i(this,Xn),Bn(void 0,[Ln,On]),(Zn=function(){return i(this,t),l.DONUT}.bind(this))()}.bind(void 0),qn=function(){var t=this;return i(this,Xn),Bn([on],[Ln,Pn]),(qn=function(){return i(this,t),l.GAUGE}.bind(this))()}.bind(void 0),Kn=function(){var t=this;return i(this,Xn),Bn(void 0,[Ln,In]),(Kn=function(){return i(this,t),l.PIE}.bind(this))()}.bind(void 0),Jn=function(){var t=this;return i(this,Xn),Bn([gn],[Ln,Dn]),(Jn=function(){return i(this,t),l.POLAR}.bind(this))()}.bind(void 0),Qn=function(){var t=this;return i(this,Xn),Bn([hn,pn],[Tn,zn]),(Qn=function(){return i(this,t),l.RADAR}.bind(this))()}.bind(void 0),ta=function(){var t=this;return i(this,Xn),$n([an],An),(ta=function(){return i(this,t),l.BAR}.bind(this))()}.bind(void 0),ea=function(){var t=this;return i(this,Xn),$n([hn,ln],[Sn,Tn]),(ea=function(){return i(this,t),l.BUBBLE}.bind(this))()}.bind(void 0),ia=function(){var t=this;return i(this,Xn),$n([sn],[kn]),(ia=function(){return i(this,t),l.CANDLESTICK}.bind(this))()}.bind(void 0),na=function(){var t=this;return i(this,Xn),$n([hn],[Tn,Rn]),(na=function(){return i(this,t),l.SCATTER}.bind(this))()}.bind(void 0),aa=function(){var t=this;return i(this,Xn),$n([yn],[Mn]),(aa=function(){return i(this,t),l.TREEMAP}.bind(this))()}.bind(void 0);function ra(t,e,i,n){void 0===t&&(t=!1);var r=this,s=r.config,o=r.$el.main,l=s.data_selection_grouped,c=s.data_selection_isselectable.bind(r.api);s.data_selection_enabled&&o.selectAll("."+Ot.shapes).selectAll("."+Ot.shape).each((function(s){var o=(0,a.select)(this),d=s.data?s.data:s,h=d.id,u=d.index,g=r.getToggle(this,s).bind(r),f=l||!e||e.indexOf(h)>=0,p=!i||i.indexOf(u)>=0,v=o.classed(Lt.SELECTED);o.classed(Tt.line)||o.classed(gt.area)||(t?f&&p&&c(s)&&!v?g(!0,o.classed(Lt.SELECTED,!0),s,u):S(n)&&n&&v&&g(!1,o.classed(Lt.SELECTED,!1),s,u):f&&p&&c(s)&&v&&g(!1,o.classed(Lt.SELECTED,!1),s,u))}))}var sa={selected:function(t){var e=this,n=this.internal,r=[];return n.$el.main.selectAll("."+(Ot.shapes+n.getTargetSelectorSuffix(t))).selectAll("."+Ot.shape).filter((function(){return(0,a.select)(this).classed(Lt.SELECTED)})).each(function(t){return i(this,e),r.push(t)}.bind(this)),r},select:function(t,e,i){var n=this.internal;ra.bind(n)(!0,t,e,i)},unselect:function(t,e){var i=this.internal;ra.bind(i)(!1,t,e)}},oa={subchart:{show:function(){var t=this.internal,e=t.$el.subchart,i=t.config,n=i.subchart_show;if(!n){var a,r;t.unbindZoomEvent(),i.subchart_show=!n,e.main||t.initSubchart();var s,o=e.main.selectAll("."+ht.target);if(t.data.targets.length!==o.size())t.updateSizes(),t.updateTargetsForSubchart(t.data.targets),o=null==(s=e.main)?void 0:s.selectAll("."+ht.target);null==(a=o)||a.style("opacity",null),null==(r=e.main)||r.style("display",null),this.resize()}},hide:function(){var t=this.internal,e=t.$el.subchart.main,i=t.config;i.subchart_show&&"none"!==(null==e?void 0:e.style("display"))&&(i.subchart_show=!1,e.style("display","none"),this.resize())},toggle:function(){var t=this.internal.config;this.subchart[t.subchart_show?"hide":"show"]()}}},la=p(14);var ca=function(t){var e=this,n=this.internal,a=n.$el,r=n.axis,s=n.config,o=n.org,l=n.scale,c=s.axis_rotated,d=r.isCategorized(),h=t;if(s.zoom_enabled&&h){if(r.isTimeSeries()&&(h=h.map(function(t){return i(this,e),rt.bind(n)(t)}.bind(this))),function(t,e,n){var a=this,r=n[0],s=n[1];return t.every(function(n,o){var l=this;return i(this,a),(0===o?n>=r:n<=s)&&!t.every(function(t,n){return i(this,l),t===e[n]}.bind(this))}.bind(this))}(h,n.getZoomDomain(!0),n.getZoomDomain())){if(d&&(h=h.map(function(t,n){return i(this,e),+t+(0===n?0:1)}.bind(this))),n.api.tooltip.hide(),s.subchart_show){var u=l.zoom||l.x;n.brush.getSelection().call(n.brush.move,h.map(u))}else{var g,f=d?l.x.orgScale():o.xScale||l.x,p=[-f(h[0]),0],v=(g=la.zoomIdentity.scale(f.range()[1]/(f(h[1])-f(h[0])))).translate.apply(g,c?p.reverse():p);a.eventRect.call(n.zoom.transform,v)}n.setZoomResetButton()}}else h=l.zoom?l.zoom.domain():l.x.orgDomain();return h};W(ca,{enable:function(t){var e=this.internal,i=e.config;/^(drag|wheel)$/.test(t)&&(i.zoom_type=t),i.zoom_enabled=!!t,e.zoom?!1===t&&e.bindZoomEvent(!1):(e.initZoom(),e.bindZoomEvent()),e.updateAndRedraw()},max:function(t){var e=this.internal,i=e.config,n=e.org.xDomain;return(0===t||t)&&(i.zoom_x_max=et("max",[n[1],t])),i.zoom_x_max},min:function(t){var e=this.internal,i=e.config,n=e.org.xDomain;return(0===t||t)&&(i.zoom_x_min=et("min",[n[0],t])),i.zoom_x_min},range:function(t){var e=this.zoom;if(D(t)){var i=t.min,n=t.max;S(i)&&e.min(i),S(n)&&e.max(n)}return{min:e.min(),max:e.max()}}});var da={zoom:ca,unzoom:function(){var t=this.internal,e=t.config,i=t.$el,n=i.eventRect,a=i.zoomResetBtn;t.scale.zoom&&(e.subchart_show?t.brush.getSelection().call(t.brush.move,null):t.zoom.updateTransformScale(la.zoomIdentity),t.updateZoom(!0),null==a||a.style("display","none"),(0,la.zoomTransform)(n.node())!==la.zoomIdentity&&t.zoom.transform(n,la.zoomIdentity))}},ha={drag:function(t){var e=this,n=this,r=n.config,s=n.state,o=n.$el.main,l=r.data_selection_grouped,c=r.interaction_enabled&&r.data_selection_isselectable;if(!n.hasArcType()&&r.data_selection_enabled&&(!r.zoom_enabled||n.zoom.altDomain)&&r.data_selection_multiple){var d=s.dragStart||[0,0],h=d[0],u=d[1],g=t[0],f=t[1],p=Math.min(h,g),v=Math.max(h,g),x=l?s.margin.top:Math.min(u,f),b=l?s.height:Math.max(u,f);o.select("."+mt.dragarea).attr("x",p).attr("y",x).attr("width",v-p).attr("height",b-x),o.selectAll("."+Ot.shapes).selectAll("."+Ot.shape).filter(function(t){return i(this,e),null==c?void 0:c.bind(n.api)(t)}.bind(this)).each((function(t,e){var i,r=(0,a.select)(this),s=r.classed(Lt.SELECTED),o=r.classed(mt.INCLUDED),l=!1;if(r.classed(xt.circle)){var c=1*+r.attr("cx"),d=1*+r.attr("cy");i=n.togglePoint,l=p<c&&c<v&&x<d&&d<b}else{if(!r.classed(pt.bar))return;var h=function(t){var e=t.getBoundingClientRect(),i=e.width,n=e.height,a=B(t);return{x:a[0].x,y:Math.min(a[0].y,a[1].y),width:i,height:n}}(this),u=h.x,g=(d=h.y,h.width),f=h.height;i=n.togglePath,l=!(v<u||u+g<p||b<d||d+f<x)}l^o&&(r.classed(mt.INCLUDED,!o),r.classed(Lt.SELECTED,!s),i.call(n,!s,r,t,e))}))}},dragstart:function(t){var e=this,i=e.config,n=e.state,a=e.$el.main;!e.hasArcType()&&i.data_selection_enabled&&(n.dragStart=t,a.select("."+ht.chart).append("rect").attr("class",mt.dragarea).style("opacity","0.1"),e.setDragStatus(!0))},dragend:function(){var t=this,e=t.config,i=t.$el.main,n=t.$T;!t.hasArcType()&&e.data_selection_enabled&&(n(i.select("."+mt.dragarea)).style("opacity","0").remove(),i.selectAll("."+Ot.shape).classed(mt.INCLUDED,!1),t.setDragStatus(!1))}};function ua(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function ga(t){for(var e,i=1;i<arguments.length;i++)e=null!=arguments[i]?arguments[i]:{},i%2?ua(Object(e),!0).forEach((function(i){g(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ua(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}));return t}var fa=ga(ga({},ha),{},{selectPoint:function(t,e,n){var a=this,r=this,s=r.config,o=r.$el.main,l=r.$T,c=s.axis_rotated,d=(c?r.circleY:r.circleX).bind(r),h=(c?r.circleX:r.circleY).bind(r),u=r.pointSelectR.bind(r);M(s.data_onselected,r.api,e,t.node()),l(o.select("."+Lt.selectedCircles+r.getTargetSelectorSuffix(e.id)).selectAll("."+Lt.selectedCircle+"-"+n).data([e]).enter().append("circle").attr("class",function(){return i(this,a),r.generateClass(Lt.selectedCircle,n)}.bind(this)).attr("cx",d).attr("cy",h).attr("stroke",r.color).attr("r",function(t){return i(this,a),1.4*r.pointSelectR(t)}.bind(this))).attr("r",u)},unselectPoint:function(t,e,i){var n=this,a=n.config,r=n.$el.main,s=n.$T;M(a.data_onunselected,n.api,e,null==t?void 0:t.node()),s(r.select("."+Lt.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+Lt.selectedCircle+"-"+i)).attr("r",0).remove()},togglePoint:function(t,e,i,n){this[(t?"":"un")+"selectPoint"](e,i,n)},selectPath:function(t,e){var i=this.config;M(i.data_onselected,this.api,e,t.node()),i.interaction_brighten&&t.style("filter","brightness(1.25)")},unselectPath:function(t,e){var i=this.config;M(i.data_onunselected,this.api,e,t.node()),i.interaction_brighten&&t.style("filter",null)},togglePath:function(t,e,i,n){this[(t?"":"un")+"selectPath"](e,i,n)},getToggle:function(t,e){var n=this,a=this;return"path"===t.nodeName?a.togglePath:a.isStepType(e)?function(){i(this,n)}.bind(this):a.togglePoint},toggleShape:function(t,e,i){var n=this,r=n.config,s=n.$el.main;if(r.data_selection_enabled&&r.data_selection_isselectable.bind(n.api)(e)){var o,l=(0,a.select)(t),c=l.classed(Lt.SELECTED),d=n.getToggle(t,e).bind(n);if(!r.data_selection_multiple){var h=r.point_focus_only,u="."+(h?Lt.selectedCircles:Ot.shapes);r.data_selection_grouped&&(u+=n.getTargetSelectorSuffix(e.id)),s.selectAll(u).selectAll(h?"."+Lt.selectedCircle:"."+Ot.shape+"."+Lt.SELECTED).classed(Lt.SELECTED,!1).each((function(t){var e=(0,a.select)(this);o=e,d(!1,e,t,t.index)}))}o&&o.node()===l.node()||(l.classed(Lt.SELECTED,!c),d(!c,l,e,i))}}}),pa={initBrush:function(){var t,e,n=this,r=this,s=r.config,o=r.scale,l=r.$el.subchart,c=s.axis_rotated;r.brush=(c?(0,f.brushY)():(0,f.brushX)()).handleSize(5);var d=function(){i(this,n);var t=r.$el.svg.select("."+Xt.brush+" .overlay"),e={width:0,height:0};return t.size()&&(e.width=+t.attr("width"),e.height=+t.attr("height")),e[c?"width":"height"]}.bind(this);r.brush.on("start brush end",function(e){var a=this;i(this,n);var s=e.selection,l=e.target,d=e.type;"start"===d&&"touch"===r.state.inputType&&r.hideTooltip(),/(start|brush)/.test(d)&&r.redrawForBrush(),"end"===d&&(t=o.x.orgDomain()),null!=l&&l.handle&&(null===s?r.brush.handle.attr("display","none"):r.brush.handle.attr("display",null).attr("transform",function(t,e){return i(this,a),"translate("+(c?[33,s[e]-(0===e?30:24)]:[s[e],3])+")"}.bind(this)))}.bind(this)),r.brush.updateResize=function(){var n=this;e&&clearTimeout(e),e=setTimeout(function(){i(this,n);var e=this.getSelection();t&&(0,f.brushSelection)(e.node())&&this.move(e,t.map(o.subX.orgScale()))}.bind(this),0)},r.brush.update=function(){var t,e=this;0===this.extent()()[1].filter(function(t){return i(this,e),isNaN(t)}.bind(this)).length&&(null==(t=l.main)||t.select("."+Xt.brush).call(this));return this},r.brush.scale=function(t){var e=this,n=s.subchart_size_height||d(),a=r.getExtent();!a&&t.range?a=[[0,0],[t.range()[1],n]]:I(a)&&(a=a.map(function(t,a){return i(this,e),[t,a>0?n:a]}.bind(this))),c&&a[1].reverse(),this.extent(a),this.update()},r.brush.getSelection=function(){return i(this,n),l.main?l.main.select("."+Xt.brush):(0,a.select)([])}.bind(this)},initSubchart:function(){var t=this,e=this,n=e.config,a=e.state,r=a.clip,s=a.hasAxis,o=e.$el,l=o.defs,c=o.svg,d=o.subchart,h=o.axis;if(s){var u=n.subchart_show?null:"hidden",g=r.id+"-subchart",f=e.getClipPath(g);r.idSubchart=g,e.appendClip(l,g),e.initBrush(),d.main=c.append("g").classed(Xt.subchart,!0).attr("transform",e.getTranslate("context"));var p=d.main;p.style("visibility",u),p.append("g").attr("clip-path",f).attr("class",Xt.chart),["bar","line","bubble","candlestick","scatter"].forEach(function(n){i(this,t);var a=U(/^(bubble|scatter)$/.test(n)?"circle":n);if(e.hasType(n)||e.hasTypeOf(a)){var r=p.select("."+Xt.chart),s=Xt["chart"+a+"s"];r.select("."+s).empty()&&r.append("g").attr("class",s)}}.bind(this));var v=p.append("g").attr("clip-path",f).attr("class",Xt.brush).call(e.brush);n.subchart_showHandle&&e.addBrushHandle(v),h.subX=p.append("g").attr("class",Xt.axisX).attr("transform",e.getTranslate("subX")).attr("clip-path",n.axis_rotated?"":r.pathXAxis).style("visibility",n.subchart_axis_x_show?u:"hidden")}},addBrushHandle:function(t){var e=this,n=this.config,a=n.axis_rotated,r=n.subchart_init_range,s=a?["M 5.2491724,29.749209 a 6,6 0 0 0 -5.50000003,-6.5 H -5.7508276 a 6,6 0 0 0 -6.0000004,6.5 z m -5.00000003,-2 H -6.7508276 m 6.99999997,-2 H -6.7508276Z","M 5.2491724,23.249172 a 6,-6 0 0 1 -5.50000003,6.5 H -5.7508276 a 6,-6 0 0 1 -6.0000004,-6.5 z m -5.00000003,2 H -6.7508276 m 6.99999997,2 H -6.7508276Z"]:["M 0 18 A 6 6 0 0 0 -6.5 23.5 V 29 A 6 6 0 0 0 0 35 Z M -2 23 V 30 M -4 23 V 30Z","M 0 18 A 6 6 0 0 1 6.5 23.5 V 29 A 6 6 0 0 1 0 35 Z M 2 23 V 30 M 4 23 V 30Z"];this.brush.handle=t.selectAll(".handle--custom").data(a?[{type:"n"},{type:"s"}]:[{type:"w"},{type:"e"}]).enter().append("path").attr("class","handle--custom").attr("cursor",(a?"ns":"ew")+"-resize").attr("d",function(t){return i(this,e),s[+/[se]/.test(t.type)]}.bind(this)).attr("display",r?null:"none")},updateTargetsForSubchart:function(t){var e=this,n=this,a=n.config,r=n.state,s=n.$el.subchart.main;a.subchart_show&&(["bar","line","bubble","candlestick","scatter"].filter(function(t){return i(this,e),n.hasType(t)||n.hasTypeOf(U(t))}.bind(this)).forEach(function(a){i(this,e);var r=/^(bubble|scatter)$/.test(a),o=U(r?"circle":a),l=n.getChartClass(o,!0),c=n.getClass(r?"circles":a+"s",!0),d=s.select("."+Xt["chart"+o+"s"]);if(r){var h=d.selectAll("."+Xt.circles).data(t.filter(n["is"+U(a)+"Type"].bind(n))).attr("class",c);h.exit().remove(),h.enter().append("g").attr("class",c)}else{var u=d.selectAll("."+Xt["chart"+o]).attr("class",l).data(t.filter(n["is"+o+"Type"].bind(n))),g=u.enter().append("g").style("opacity","0").attr("class",l).append("g").attr("class",c);u.exit().remove(),"line"===a&&n.hasTypeOf("Area")&&g.append("g").attr("class",n.getClass("areas",!0))}}.bind(this)),s.selectAll("."+Xt.brush+" rect").attr(a.axis_rotated?"width":"height",a.axis_rotated?r.width2:r.height2))},redrawSubchart:function(t,e,n){var a,r=this,s=this,o=s.config,l=s.$el.subchart.main,c=s.state,d=!!e;if((l.style("visibility",o.subchart_show?null:"hidden"),o.subchart_show)&&("zoom"===(null==(a=c.event)?void 0:a.type)&&s.brush.update(),t)){var h=o.subchart_init_range;if(H(s)||s.brush.update(),Object.keys(n.type).forEach(function(t){i(this,r);var e=U(t),a=s["generateDraw"+e](n.indices[t],!0);s["update"+e](d,!0),s["redraw"+e](a,d,!0)}.bind(this)),s.hasType("bubble")||s.hasType("scatter")){var u=n.pos.cx,g=s.updateCircleY(!0);s.updateCircle(!0),s.redrawCircle(u,g,d,void 0,!0)}!c.rendered&&h&&s.brush.move(s.brush.getSelection(),h.map(s.scale.x))}},redrawForBrush:function(){var t=this,e=t.config,i=e.subchart_onbrush,n=e.zoom_rescale,a=t.scale;t.redraw({withTransition:!1,withY:n,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),i.bind(t.api)(a.x.orgDomain())},transformContext:function(t,e){var i=this,n=i.$el.subchart,a=i.$T,r=null!=e&&e.axisSubX?e.axisSubX:a(n.main.select("."+Xt.axisX),t);n.main.attr("transform",i.getTranslate("context")),r.attr("transform",i.getTranslate("subX"))},getExtent:function(){var t=this,e=this,n=e.config,a=e.scale,r=n.axis_x_extent;if(r)if(y(r))r=r.bind(e.api)(e.getXDomain(e.data.targets),a.subX);else if(e.axis.isTimeSeries()&&r.every(isNaN)){var s=rt.bind(e);r=r.map(function(e){return i(this,t),a.subX(s(e))}.bind(this))}return r}},va={initZoom:function(){var t=this;t.scale.zoom=null,t.generateZoom(),t.initZoomBehaviour()},bindZoomEvent:function(t){void 0===t&&(t=!0);var e=this,i=e.config;i.zoom_enabled&&t?i.subchart_show||e.bindZoomOnEventRect():!1===t&&(e.api.unzoom(),e.unbindZoomEvent())},generateZoom:function(){var t=this,e=this,n=e.config,a=e.org,r=e.scale,s=(0,la.zoom)().duration(0).on("start",e.onZoomStart.bind(e)).on("zoom",e.onZoom.bind(e)).on("end",e.onZoomEnd.bind(e));s.orgScaleExtent=function(){i(this,t);var a=n.zoom_extent||[1,10];return[a[0],Math.max(e.getMaxDataCount()/a[1],a[1])]}.bind(this),s.updateScaleExtent=function(){var t=E(e.scale.x.orgDomain())/E(e.getZoomDomain()),i=this.orgScaleExtent();return this.scaleExtent([i[0]*t,i[1]*t]),this},s.updateTransformScale=function(s,o){var l;i(this,t);var c=n.axis_rotated;null==(l=a.xScale)||l.range(r.x.range());var d=s[c?"rescaleY":"rescaleX"](a.xScale||r.x),h=e.trimXDomain(d.domain()),u=n.zoom_rescale;if(d.domain(h,a.xDomain),o){var g=d(r.x.domain()[0]),f=c?s.x:g,p=c?g:s.y;e.$el.eventRect.property("__zoom",la.zoomIdentity.translate(f,p).scale(s.k))}e.state.xTickOffset||(e.state.xTickOffset=e.axis.x.tickOffset()),r.zoom=e.getCustomizedScale(d),e.axis.x.scale(r.zoom),u&&(a.xScale||(a.xScale=r.x.copy()),r.x.domain(h))}.bind(this),s.getDomain=function(){i(this,t);var n=r[r.zoom?"zoom":"subX"].domain();return e.axis.isCategorized()&&(n[1]-=2),n}.bind(this),e.zoom=s},onZoomStart:function(t){var e=this,i=t.sourceEvent;i&&(e.zoom.startEvent=i,e.state.zooming=!0,M(e.config.zoom_onzoomstart,e.api,t))},onZoom:function(t){var e=this,n=this,a=n.config,r=n.scale,s=n.state,o=n.org,l=t.sourceEvent,c=(null==t?void 0:t.transform)===la.zoomIdentity;if(!(!a.zoom_enabled||0===n.filterTargetsToShow(n.data.targets).length||!r.zoom&&(null==l?void 0:l.type.indexOf("touch"))>-1&&1===(null==l?void 0:l.touches.length))){t.sourceEvent&&(s.zooming=!0);var d="mousemove"===(null==l?void 0:l.type),h=(null==l?void 0:l.wheelDelta)<0,u=t.transform;!d&&h&&r.x.domain().every(function(t,n){return i(this,e),t!==o.xDomain[n]}.bind(this))&&r.x.domain(o.xDomain),n.zoom.updateTransformScale(u,"wheel"===a.zoom_type&&l);var g=a.transition_duration>0&&!a.subchart_show&&(s.dragging||c||!t.sourceEvent);n.redraw({withTransition:g,withY:a.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),n.state.cancelClick=d,c||M(a.zoom_onzoom,n.api,n.zoom.getDomain())}},onZoomEnd:function(t){var e,i,n,a=this,r=a.config,s=a.state,o=a.zoom.startEvent,l=null==t?void 0:t.sourceEvent,c=(null==t?void 0:t.transform)===la.zoomIdentity;(null==(e=o)?void 0:e.type.indexOf("touch"))>-1&&(o=o.changedTouches[0],l=null==(i=l)||null==(n=i.changedTouches)?void 0:n[0]);"drag"===r.zoom_type&&l&&o.clientX===l.clientX&&o.clientY===l.clientY||(a.redrawEventRect(),a.updateZoom(),s.zooming=!1,!c&&(l||s.dragging)&&M(r.zoom_onzoomend,a.api,a.zoom.getDomain()))},updateZoom:function(t){var e=this,i=e.scale,n=i.subX,a=i.x,r=i.zoom;if(r){var s=r.domain(),o=n.domain(),l=(s[0]<=o[0]||s[0]-.015<=o[0])&&(o[1]<=s[1]||o[1]<=s[1]-.015);(t||l)&&(e.axis.x.scale(n),a.domain(n.orgDomain()),e.scale.zoom=null)}},bindZoomOnEventRect:function(){var t=this,e=this,n=e.config,a=e.$el.eventRect,r="drag"===n.zoom_type?e.zoomBehaviour:e.zoom;e.$el.svg.on("wheel",function(){i(this,t)}.bind(this)),a.call(r).on("dblclick.zoom",null)},initZoomBehaviour:function(){var t,e=this,n=this,a=n.config,r=n.state,s=a.axis_rotated,o=0,l=0,c={axis:s?"y":"x",attr:s?"height":"width",index:s?1:0};n.zoomBehaviour=(0,ke.drag)().clickDistance(4).on("start",(function(e){r.event=e,n.setDragStatus(!0),n.unselectRect(),t||(t=n.$el.main.append("rect").attr("clip-path",r.clip.path).attr("class",Mt.zoomBrush).attr("width",s?r.width:0).attr("height",s?0:r.height)),o=N(e,this)[c.index],l=o,t.attr(c.axis,o).attr(c.attr,0),n.onZoomStart(e)})).on("drag",(function(e){l=N(e,this)[c.index],t.attr(c.axis,Math.min(o,l)).attr(c.attr,Math.abs(l-o))})).on("end",function(a){var s=this;i(this,e);var d=n.scale.zoom||n.scale.x;if(r.event=a,t.attr(c.axis,0).attr(c.attr,0),o>l){var h=[l,o];o=h[0],l=h[1]}o<0&&(l+=Math.abs(o),o=0),o!==l&&n.api.zoom([o,l].map(function(t){return i(this,s),d.invert(t)}.bind(this))),n.setDragStatus(!1)}.bind(this))},setZoomResetButton:function(){var t=this,e=t.config,i=t.$el,n=e.zoom_resetButton;n&&"drag"===e.zoom_type&&(i.zoomResetBtn?i.zoomResetBtn.style("display",null):i.zoomResetBtn=t.$el.chart.append("div").classed(ht.button,!0).append("span").on("click",(function(){y(n.onclick)&&n.onclick.bind(t.api)(this),t.api.unzoom()})).classed(Mt.buttonZoomReset,!0).text(n.text||"Reset Zoom"))}},xa=void 0,ba={data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return i(this,xa),!0}.bind(void 0),data_selection_multiple:!0,data_selection_draggable:!1,data_onselected:function(){i(this,xa)}.bind(void 0),data_onunselected:function(){i(this,xa)}.bind(void 0)},ma={subchart_show:!1,subchart_showHandle:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_format:void 0,subchart_axis_x_tick_text_show:!0,subchart_init_range:void 0,subchart_onbrush:function(){i(this,undefined)}.bind(void 0)},_a={zoom_enabled:!1,zoom_type:"wheel",zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0},ya=void 0,Ta=function(){var t=this;return i(this,ya),W(Qe.prototype,fa),W(gi.prototype,sa),Jt.setOptions([ba]),(Ta=function(){return i(this,t),!0}.bind(this))()}.bind(void 0),wa=function(){var t=this;return i(this,ya),W(Qe.prototype,pa),W(gi.prototype,oa),Jt.setOptions([ma]),(wa=function(){return i(this,t),!0}.bind(this))()}.bind(void 0),Aa=function(){var t=this;return i(this,ya),W(Qe.prototype,va),W(gi.prototype,da),Jt.setOptions([_a]),(Aa=function(){return i(this,t),!0}.bind(this))()}.bind(void 0),Sa={},ka={version:"3.7.0",generate:function(t){var e=Q({},Sa,t),i=new gi(e);return i.internal.charts=this.instance,this.instance.push(i),i},defaults:function(t){return D(t)&&(Sa=t),Sa},instance:[],plugin:{}},Ca=void 0;Object.keys(t).forEach(function(e){return i(this,Ca),t[e]()}.bind(void 0)),Object.keys(e).forEach(function(t){return i(this,Ca),e[t]()}.bind(void 0))}(),v}()}));