/*!
 * Copyright (c) 2017 ~ present NAVER Corp.
 * billboard.js project is licensed under the MIT license
 *
 * billboard.js, JavaScript chart library
 * https://naver.github.io/billboard.js/
 *
 * @version 3.18.0-nightly-20260207005040
 */(function(_t,Jt){if(typeof exports=="object"&&typeof module=="object")module.exports=Jt(require("d3-axis"),require("d3-brush"),require("d3-drag"),require("d3-hierarchy"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom"));else if(typeof define=="function"&&define.amd)define(["d3-axis","d3-brush","d3-drag","d3-hierarchy","d3-interpolate","d3-scale","d3-selection","d3-shape","d3-time-format","d3-transition","d3-zoom"],Jt);else{var $e=typeof exports=="object"?Jt(require("d3-axis"),require("d3-brush"),require("d3-drag"),require("d3-hierarchy"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom")):Jt(_t.d3,_t.d3,_t.d3,_t.d3,_t.d3,_t.d3,_t.d3,_t.d3,_t.d3,_t.d3,_t.d3);for(var be in $e)(typeof exports=="object"?exports:_t)[be]=$e[be]}})(this,function(cn,_t,Jt,$e,be,gi,fi,pi,xi,_i,mi){return(function(){"use strict";var yi=[,,(function(F){F.exports=fi}),(function(F){F.exports=xi}),(function(F){F.exports=_t}),(function(F){F.exports=Jt}),(function(F){F.exports=gi}),(function(F){F.exports=_i}),(function(F){F.exports=pi}),(function(F){F.exports=mi}),(function(F){F.exports=cn}),(function(F){F.exports=be}),(function(F){F.exports=$e})],dn={};function tt(F){var mt=dn[F];if(mt!==void 0)return mt.exports;var S=dn[F]={exports:{}};return yi[F](S,S.exports,tt),S.exports}(function(){tt.d=function(F,mt){for(var S in mt)tt.o(mt,S)&&!tt.o(F,S)&&Object.defineProperty(F,S,{enumerable:!0,get:mt[S]})}})(),(function(){tt.o=function(F,mt){return Object.prototype.hasOwnProperty.call(F,mt)}})(),(function(){tt.r=function(F){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})}})();var Ie={};return(function(){tt.r(Ie),tt.d(Ie,{bb:function(){return ui},default:function(){return ui}});var F={};tt.r(F),tt.d(F,{selection:function(){return ds},subchart:function(){return us},zoom:function(){return hs}});var mt={};tt.r(mt),tt.d(mt,{area:function(){return js},areaLineRange:function(){return Ws},areaSpline:function(){return Us},areaSplineRange:function(){return Zs},areaStep:function(){return qs},areaStepRange:function(){return Hs},bar:function(){return ai},bubble:function(){return oi},candlestick:function(){return ri},donut:function(){return ti},funnel:function(){return ci},gauge:function(){return ei},line:function(){return Ks},pie:function(){return ni},polar:function(){return si},radar:function(){return ii},scatter:function(){return li},spline:function(){return Js},step:function(){return Qs},treemap:function(){return di}});var S=tt(2),ve=tt(3),$i=Object.defineProperty,un=Object.getOwnPropertySymbols,bi=Object.prototype.hasOwnProperty,vi=Object.prototype.propertyIsEnumerable,hn=(e,t,n)=>t in e?$i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Z=(e,t)=>{for(var n in t||(t={}))bi.call(t,n)&&hn(e,n,t[n]);if(un)for(var n of un(t))vi.call(t,n)&&hn(e,n,t[n]);return e};const D={button:"bb-button",chart:"bb-chart",empty:"bb-empty",main:"bb-main",target:"bb-target",EXPANDED:"_expanded_",dummy:"_dummy_"},X={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcLabelLineText:"bb-arc-label-line-text",arcRange:"bb-arc-range",arcs:"bb-arcs",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsTitle:"bb-chart-arcs-title",needle:"bb-needle"},Te={area:"bb-area",areas:"bb-areas"},rt={axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",axisXTooltip:"bb-axis-x-tooltip",axisYTooltip:"bb-axis-y-tooltip",axisY2Tooltip:"bb-axis-y2-tooltip",axisTooltipX:"bb-axis-tooltip-x",axisTooltipY:"bb-axis-tooltip-y"},yt={bar:"bb-bar",bars:"bb-bars",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars",barConnectLine:"bb-bar-connectLine"},Lt={candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",valueDown:"bb-value-down",valueUp:"bb-value-up"},ft={chartCircles:"bb-chart-circles",circle:"bb-circle",circles:"bb-circles"},De={colorPattern:"bb-color-pattern",colorScale:"bb-colorscale"},Gt={dragarea:"bb-dragarea",INCLUDED:"_included_"},ge={funnel:"bb-funnel",chartFunnel:"bb-chart-funnel",chartFunnels:"bb-chart-funnels",funnelBackground:"bb-funnel-background"},$t={chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",gaugeValue:"bb-gauge-value"},W={legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile"},Ct={chartLine:"bb-chart-line",chartLines:"bb-chart-lines",line:"bb-line",lines:"bb-lines"},St={eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single"},q={focused:"bb-focused",defocused:"bb-defocused",legendItemFocused:"bb-legend-item-focused",xgridFocus:"bb-xgrid-focus",ygridFocus:"bb-ygrid-focus"},nt={grid:"bb-grid",gridLines:"bb-grid-lines",xgrid:"bb-xgrid",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids"},zt={level:"bb-level",levels:"bb-levels"},gn={chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars"},fe={region:"bb-region",regions:"bb-regions"},Q={selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",SELECTED:"_selected_"},st={shape:"bb-shape",shapes:"bb-shapes"},fn={brush:"bb-brush",subchart:"bb-subchart"},lt={chartText:"bb-chart-text",chartTexts:"bb-chart-texts",text:"bb-text",texts:"bb-texts",title:"bb-title",textBorderRect:"bb-text-border",textLabelImage:"bb-text-label-image",TextOverlapping:"text-overlapping"},Ae={tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name"},pn={treemap:"bb-treemap",chartTreemap:"bb-chart-treemap",chartTreemaps:"bb-chart-treemaps"},ze={buttonZoomReset:"bb-zoom-reset",zoomBrush:"bb-zoom-brush"};var N=Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z({},D),X),Te),rt),yt),Lt),ft),De),Gt),$t),W),Ct),St),q),ge),nt),gn),fe),Q),st),fn),lt),Ae),pn),ze),Ti={boost_useCssRule:!1,boost_useWorker:!1},Ai={color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0},wi={legend_contents_bindto:void 0,legend_contents_template:"<span style='color:#fff;padding:5px;background-color:{=COLOR}'>{=TITLE}</span>",legend_equally:!1,legend_hide:!1,legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_interaction:!0,legend_item_dblclick:!1,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_item_tile_width:10,legend_item_tile_height:10,legend_item_tile_r:5,legend_item_tile_type:"rectangle",legend_format:void 0,legend_padding:0,legend_position:"bottom",legend_show:!0,legend_tooltip:!1,legend_usePoint:!1},Si={bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding:!0,padding_mode:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,resize_timer:!0,onclick:void 0,onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:250,plugins:[],render:{},regions:[]},Ri={title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"},Ci={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:void 0,tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:()=>{},tooltip_onhide:()=>{},tooltip_onshown:()=>{},tooltip_onhidden:()=>{},tooltip_order:null},Ei={data_x:void 0,data_idConverter:e=>e,data_names:{},data_classes:{},data_type:void 0,data_types:{},data_order:"desc",data_groups:[],data_groupsZeroAs:"positive",data_color:void 0,data_colors:{},data_labels:{},data_labels_backgroundColors:void 0,data_labels_colors:void 0,data_labels_position:{},data_labels_imgUrl:void 0,data_hide:!1,data_filter:void 0,data_onclick:()=>{},data_onover:()=>{},data_onout:()=>{},data_onshown:void 0,data_onhidden:void 0,data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:""},ki={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{},interaction_onout:!0},we=tt(4);function Li(){return typeof globalThis=="object"&&globalThis!==null&&globalThis.Object===Object&&globalThis||typeof global=="object"&&global!==null&&global.Object===Object&&global||typeof self=="object"&&self!==null&&self.Object===Object&&self||Function("return this")()}function Pi(e){const t=typeof(e==null?void 0:e.requestAnimationFrame)=="function"&&typeof(e==null?void 0:e.cancelAnimationFrame)=="function",n=typeof(e==null?void 0:e.requestIdleCallback)=="function"&&typeof(e==null?void 0:e.cancelIdleCallback)=="function",s=a=>setTimeout(a,1),i=a=>clearTimeout(a);return[t?e.requestAnimationFrame:s,t?e.cancelAnimationFrame:i,n?e.requestIdleCallback:s,n?e.cancelIdleCallback:i]}const B=Li(),ct=B==null?void 0:B.document,[Oi,Nl,xn,Bl]=Pi(B),Ii=new Set(["span","div","p","br","b","i","em","strong","u","s","sub","sup","ul","ol","li","dl","dt","dd","table","thead","tbody","tfoot","tr","th","td","caption","colgroup","col","hr","pre","code","blockquote","a","img","svg","g","path","circle","ellipse","rect","line","polyline","polygon","text","tspan","textPath","use","defs","symbol","clipPath","mask","linearGradient","radialGradient","stop","pattern","marker","title","desc"]),_n=new Set(["class","id","style","title","lang","dir","href","src","alt","width","height","colspan","rowspan","scope","headers","d","points","x","y","x1","x2","y1","y2","cx","cy","r","rx","ry","dx","dy","viewBox","preserveAspectRatio","transform","fill","fill-opacity","fill-rule","stroke","stroke-width","stroke-opacity","stroke-linecap","stroke-linejoin","stroke-dasharray","stroke-dashoffset","opacity","clip-path","clip-rule","mask","font-family","font-size","font-weight","font-style","text-anchor","dominant-baseline","offset","stop-color","stop-opacity","gradientUnits","gradientTransform","spreadMethod","patternUnits","patternTransform","marker-start","marker-mid","marker-end","markerWidth","markerHeight","refX","refY","xlink:href"]),Di=new Set(["http:","https:","mailto:"]),zi=new Set(["href","src","xlink:href"]),Fi=/^<\/?([a-zA-Z][a-zA-Z0-9]*)/,Mi=/^<\/([a-zA-Z][a-zA-Z0-9]*)\s*>$/,Xi=/^<([a-zA-Z][a-zA-Z0-9]*)([\s\S]*?)(\/?)>$/,mn=/([a-zA-Z][\w:-]*)\s*(?:=\s*(?:"([^"]*)"|'([^']*)'|([^\s>]+)))?/g,yn=/url\s*\(\s*["']?([^"')]+)["']?\s*\)/gi,Ni=["expression(","behavior:","binding:","@import","@charset","-moz-binding:"];function Fe(e){return e.replace(/&colon;/gi,":").replace(/&newline;/gi,`
`).replace(/&tab;/gi,"	").replace(/&nbsp;/gi," ").replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;/gi,"&").replace(/&quot;/gi,'"').replace(/&apos;/gi,"'").replace(/&#(\d+);/gi,(t,n)=>String.fromCharCode(parseInt(n,10))).replace(/&#x([0-9a-f]+);/gi,(t,n)=>String.fromCharCode(parseInt(n,16)))}function $n(e){const n=Fe(e).trim().replace(/[\s\u0000-\u001f]/g,"").toLowerCase();if(!n||n.startsWith("#")||n.startsWith("/")||n.startsWith("./")||n.startsWith("../")||!n.includes(":"))return!0;const s=n.indexOf(":");if(s>0){const i=n.substring(0,s+1);return Di.has(i)}return!1}function Bi(e){const n=Fe(e).replace(/[\u0000-\u001f]/g,"");yn.lastIndex=0;let s;for(;(s=yn.exec(n))!==null;)if(!$n(s[1]))return null;const i=n.toLowerCase().replace(/\s/g,"");for(const a of Ni)if(i.includes(a))return null;return e}const Gi={'"':"&quot;","'":"&#39;","`":"&#96;"},Vi=/["'`]/g;function Me(e){return e.replace(Vi,t=>Gi[t])}function Yi(e,t,n=!1){if(zi.has(e))return $n(t)?n?Me(t):t:null;if(e==="style"){const i=Bi(t);return i===null?null:n?Me(i):i}const s=Fe(t).toLowerCase().replace(/\s/g,"");return/\bon\w+=/.test(s)?null:n?Me(t):t}function ji(e){const t=e.match(Fi);return t?t[1].toLowerCase():null}function Wi(e){const t=ji(e);return t!==null&&Ii.has(t)}function Hi(e){const t=e.match(Mi);if(t)return`</${t[1].toLowerCase()}>`;const n=e.match(Xi);if(!n)return"";const[,s,i,a]=n,o=s.toLowerCase(),r=[];mn.lastIndex=0;let l;for(;(l=mn.exec(i))!==null;){const d=l[1].toLowerCase(),h=l[2],g=l[3],f=l[4];if(d.startsWith("on"))continue;let p,_;if(h!==void 0)p=h,_='"';else if(g!==void 0)p=g,_="'";else if(f!==void 0)p=f,_='"';else{_n.has(d)&&r.push(d);continue}if(_n.has(d)){const m=Yi(d,p,f!==void 0);m!==null&&r.push(`${d}=${_}${m}${_}`)}}const c=r.length>0?` ${r.join(" ")}`:"";return`<${o}${c}${a?"/>":">"}`}function Qt(e){return typeof e!="string"||!e||e.indexOf("<")===-1?e:e.replace(/<\/?[^>]*>|[^<>\s]+>/g,t=>t.startsWith("<!--")?"":t.startsWith("<")?Wi(t)?Hi(t):t.replace(/</g,"&lt;"):t.slice(0,-1)+"&gt;")}var Ui=Object.defineProperty,bn=Object.getOwnPropertySymbols,Zi=Object.prototype.hasOwnProperty,qi=Object.prototype.propertyIsEnumerable,vn=(e,t,n)=>t in e?Ui(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tn=(e,t)=>{for(var n in t||(t={}))Zi.call(t,n)&&vn(e,n,t[n]);if(bn)for(var n of bn(t))qi.call(t,n)&&vn(e,n,t[n]);return e};function An(e,t,n=!1){const s=i=>i[e?"getBoundingClientRect":"getBBox"]();return n?s(t):!("rect"in t)||"rect"in t&&t.hasAttribute("width")&&t.rect.width!==+(t.getAttribute("width")||0)?t.rect=s(t):t.rect}function wn(e,t){for(let n=0;n<e.length;n++){const s=e[n];s&&t(s,n)}}const M=e=>e||e===0,L=e=>typeof e=="function",G=e=>typeof e=="string",I=e=>typeof e=="number",it=e=>typeof e=="undefined",H=e=>typeof e!="undefined",Xe=e=>typeof e=="boolean",Ki=e=>Math.ceil(e/10)*10,Se=e=>Math.ceil(e)+.5,Vt=e=>e[1]-e[0],bt=e=>typeof e=="object",Ji=e=>{for(const t in e)return!1;return!0},vt=e=>it(e)||e===null||G(e)&&e.length===0||bt(e)&&!(e instanceof Date)&&Ji(e)||I(e)&&isNaN(e),ot=e=>!vt(e),Y=e=>Array.isArray(e),V=e=>e&&!(e!=null&&e.nodeType)&&bt(e)&&!Y(e);function Ft(e,t,n){return H(e[t])?e[t]:n}function Qi(e,t){let n=!1;return Object.keys(e).forEach(s=>e[s]===t&&(n=!0)),n}function K(e,t,...n){const s=L(e);return s&&e.call(t,...n),s}function Re(e,t){let n=0;const s=function(...i){!--n&&t.apply(this,...i)};"duration"in e?e.each(()=>++n).on("end",s):(++n,e.call(s))}function te(e,t,n=[-1,1],s=!1){if(!(!e||!G(t)))if(t.indexOf(`
`)===-1)e.text(t);else{const i=[e.text(),t].map(a=>a.replace(/[\s\n]/g,""));if(i[0]!==i[1]){const a=t.split(`
`),o=s?a.length-1:1;e.html(""),a.forEach((r,l)=>{e.append("tspan").attr("x",0).attr("dy",`${l===0?n[0]*o:n[1]}em`).text(r)})}}}function Sn(e){const{x:t,y:n,width:s,height:i}=e.getBBox();return[{x:t,y:n+i},{x:t,y:n},{x:t+s,y:n},{x:t+s,y:n+i}]}function Rn(e){const{width:t,height:n}=dt(e),s=Sn(e),i=s[0].x,a=Math.min(s[0].y,s[1].y);return{x:i,y:a,width:t,height:n}}function Tt(e,t){var n;const s=e&&((n=e.touches||e.sourceEvent&&e.sourceEvent.touches)==null?void 0:n[0]);let i=[0,0];try{i=(0,S.pointer)(s||e,t)}catch(a){}return i.map(a=>isNaN(a)?0:a)}function Cn(e){const{event:t,$el:n}=e,s=n.subchart.main||n.main;let i;return t&&t.type==="brush"?i=t.selection:s&&(i=s.select(".bb-brush").node())&&(i=(0,we.brushSelection)(i)),i}function dt(e,t=!1){return An(!0,e,t)}function Pt(e,t=!1){return An(!1,e,t)}function Et(e=!0,t=0,n=1e4){const s=B.crypto||B.msCrypto,i=s?t+s.getRandomValues(new Uint32Array(1))[0]%(n-t+1):Math.floor(Math.random()*(n-t)+t);return e?String(i):i}function Ne(e,t,n,s,i){if(n>s)return-1;const a=Math.floor((n+s)/2);let{x:o,w:r=0}=e[a];return i&&(o=e[a].y,r=e[a].h),t>=o&&t<=o+r?a:t<o?Ne(e,t,n,a-1,i):Ne(e,t,a+1,s,i)}function En(e){const t=Cn(e);return t?t[0]===t[1]:!0}function ta(...e){const t=n=>{if(V(n)&&n.constructor){const s=new n.constructor;for(const i in n)s[i]=t(n[i]);return s}return n};return e.map(n=>t(n)).reduce((n,s)=>Tn(Tn({},n),s))}function ut(e={},t){Y(t)&&t.forEach(n=>ut(e,n));for(const n in t)/^\d+$/.test(n)||n in e||(e[n]=t[n]);return e}const pt=e=>e.charAt(0).toUpperCase()+e.slice(1);function ea(e,t="-"){return e.split(t).map((n,s)=>s?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()).join("")}const Yt=e=>[].slice.call(e);function na(e,t,n){const{rootSelector:s="",sheet:i}=e,o=`${s} ${(r=>r.replace(/\s?(bb-)/g,".$1").replace(/\.+/g,"."))(t)} {${n.join(";")}}`;return i[i.insertRule?"insertRule":"addRule"](o,i.cssRules.length)}function sa(e){let t=[];return e.forEach(n=>{var s;try{n.cssRules&&n.cssRules.length&&(t=t.concat(Yt(n.cssRules)))}catch(i){(s=B.console)==null||s.warn(`Error while reading rules from ${n.href}: ${i.toString()}`)}}),t}function kn(e){var t,n,s,i,a,o;return{x:((n=(t=B.pageXOffset)!=null?t:B.scrollX)!=null?n:0)+((s=e.scrollLeft)!=null?s:0),y:((a=(i=B.pageYOffset)!=null?i:B.scrollY)!=null?a:0)+((o=e.scrollTop)!=null?o:0)}}function Ce(e,t=0,n=0,s=!0){const i=new DOMPoint(t,n),a=e.getScreenCTM(),o=i.matrixTransform(s?a==null?void 0:a.inverse():a);if(s===!1){const r=dt(e);o.x-=r.x,o.y-=r.y}return o}function Be(e){const t=e?e.transform:null,n=t&&t.baseVal;return n&&n.numberOfItems?n.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}}function Ge(e,t){var n;const s=(n=e==null?void 0:e.getAttribute)==null?void 0:n.call(e,t);if(s)return parseFloat(s);const i=Be(e);return t==="x"?i.e:i.f}function Ve(e){const t=e[0]instanceof Date,n=(t?e.map(Number):e).filter((s,i,a)=>a.indexOf(s)===i);return t?n.map(s=>new Date(s)):n}function Ln(e){return e&&e.length?e.reduce((t,n)=>t.concat(n)):[]}function ee(e,...t){if(!t.length||t.length===1&&!t[0])return e;const n=t.shift();return V(e)&&V(n)&&Object.keys(n).forEach(s=>{if(!/^(__proto__|constructor|prototype)$/i.test(s)){const i=n[s];V(i)?(!e[s]&&(e[s]={}),e[s]=ee(e[s],i)):e[s]=Y(i)?i.concat():i}}),ee(e,...t)}function ne(e,t=!0){let n;return e[0]instanceof Date?n=t?(s,i)=>s-i:(s,i)=>i-s:t&&!e.every(isNaN)?n=(s,i)=>s-i:t||(n=(s,i)=>s>i&&-1||s<i&&1||s===i&&0),e.concat().sort(n)}function Rt(e,t){let n=t.filter(s=>ot(s));return n.length?I(n[0])?n=Math[e](...n):n[0]instanceof Date&&(n=ne(n,e==="min")[0]):n=void 0,n}const Ee=(e,t,n=1)=>{const s=[],i=Math.max(0,Math.ceil((t-e)/n))|0;for(let a=e;a<i;a++)s.push(e+a*n);return s},ia={mouse:(()=>{const e=()=>({bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0});try{return new MouseEvent("t"),(t,n,s=e())=>{t.dispatchEvent(new MouseEvent(n,s))}}catch(t){return(n,s,i=e())=>{const a=ct.createEvent("MouseEvent");a.initMouseEvent(s,i.bubbles,i.cancelable,B,0,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.dispatchEvent(a)}}})(),touch:(e,t,n)=>{const s=new Touch(ee({identifier:Date.now(),target:e,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},n));e.dispatchEvent(new TouchEvent(t,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[s],targetTouches:[],changedTouches:[s]}))}};function pe(e,t){let n=e;for(const s in t)n=n.replace(new RegExp(`{=${s}}`,"g"),t[s]);return Qt(n)}function At(e){var t;let n;if(e instanceof Date)n=e;else if(G(e)){const{config:s,format:i}=this;n=(t=i.dataTime(s.data_xFormat)(e))!=null?t:new Date(e)}else I(e)&&!isNaN(e)&&(n=new Date(+e));return(!n||isNaN(+n))&&console&&console.error&&console.error(`Failed to parse x '${e}' to Date object`),n}function Ye(e){const t=e.attr("viewBox");return t?/(\d+(\.\d+)?){3}/.test(t):!1}function aa(e,t,n=!1){const s=!!e.node;let i=!1;for(const[a,o]of Object.entries(t))if(i=s?e.style(a)===o:e.style[a]===o,n===!1&&i)break;return i}function xe(){var e,t;return((e=ct)==null?void 0:e.hidden)===!1||((t=ct)==null?void 0:t.visibilityState)==="visible"}function oa(e,t){const{DocumentTouch:n,matchMedia:s,navigator:i}=B,a=s==null?void 0:s("(pointer:coarse)").matches;let o=!1;if(t)if(i&&"maxTouchPoints"in i)o=i.maxTouchPoints>0;else if("ontouchmove"in B||n&&ct instanceof n)o=!0;else if(a)o=!0;else{const l=i.userAgent;o=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(l)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(l)}return e&&!a&&(s==null?void 0:s("(pointer:fine)").matches)&&"mouse"||o&&"touch"||"mouse"}function Pn(e,t){t()===!1?Oi(()=>Pn(e,t)):e()}function ra(e){if(V(e)&&!G(e)){const o=e;return{top:o.top||0,right:o.right||0,bottom:o.bottom||0,left:o.left||0}}const t=(G(e)?e.trim().split(/\s+/):[e]).map(o=>+o||0),[n,s=n,i=n,a=s]=t;return{top:n,right:s,bottom:i,left:a}}function On(e,t){e.pendingRaf!==null?(B.cancelAnimationFrame(e.pendingRaf),e.pendingRaf=B.requestAnimationFrame(()=>{e.pendingRaf=null,t()})):(e.pendingRaf=B.requestAnimationFrame(()=>{e.pendingRaf=null}),t())}function In(e,t=(n=>n)){const n=new Set;return wn(e,(s,i)=>{n.add(t(s,i))}),n}function Dn(e,t,n=(s=>s)){const s=new Map;return wn(e,(i,a)=>{s.set(t(i,a),n(i,a))}),s}var la=Object.defineProperty,zn=Object.getOwnPropertySymbols,ca=Object.prototype.hasOwnProperty,da=Object.prototype.propertyIsEnumerable,je=(e,t,n)=>t in e?la(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fn=(e,t)=>{for(var n in t||(t={}))ca.call(t,n)&&je(e,n,t[n]);if(zn)for(var n of zn(t))da.call(t,n)&&je(e,n,t[n]);return e},ua=(e,t,n)=>je(e,typeof t!="symbol"?t+"":t,n);const Mn=class hi{static setOptions(t){this.data=t.reduce((n,s)=>Fn(Fn({},n),s),this.data)}constructor(){return ta(Si,Ti,Ei,Ai,ki,wi,Ri,Ci,hi.data)}};ua(Mn,"data",{});let jt=Mn;class ha{constructor(){return{chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},axisTooltip:{x:null,y:null,y2:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,candlestick:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null,zoomResetBtn:null}}}class ga{constructor(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasFunnel:!1,hasRadar:!1,hasTreemap:!1,cssRule:{},loading:void 0,domain:void 0,current:{domain:void 0,width:0,height:0,dataMax:0,maxTickSize:{x:{width:0,height:0,ticks:[],clipPath:0,domain:""},y:{width:0,height:0,domain:""},y2:{width:0,height:0,domain:""}},types:[],needle:void 0,zoomDomain:null},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,eventReceiver:{currentIdx:-1,rect:{},data:[],coords:[]},axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},event:null,dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,redrawing:!1,resizing:!1,toggling:!1,zooming:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",orgConfig:{},hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,outerRadius:void 0,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null},pendingRaf:null,rafBatchQueue:[]}}}const Xn={element:ha,state:ga};class fa{constructor(){Object.keys(Xn).forEach(t=>{this[t]=new Xn[t]})}getStore(t){return this[t]}}var pa=Object.defineProperty,xa=(e,t,n)=>t in e?pa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_a=(e,t,n)=>xa(e,typeof t!="symbol"?t+"":t,n);const at={bubbleBaseLength:"$baseLength",colorPattern:"__colorPattern__",dataMinMax:"$dataMinMax",dataTotalSum:"$dataTotalSum",dataTotalPerIndex:"$totalPerIndex",domainMinMax:"$domainMinMax",filteredTargets:"$filteredTargets",filteredNullish:"$filteredNullish",visibilityChecksum:"visibilityChecksum",legendItemTextBox:"legendItemTextBox",legendItemMap:"$legendItemMap",radarPoints:"$radarPoints",radarTextWidth:"$radarTextWidth",setOverOut:"setOverOut",callOverOutForTouch:"callOverOutForTouch",textRect:"textRect",shapeOffset:"$shapeOffset"};class ma{constructor(){_a(this,"cache",{})}add(t,n,s=!1){return this.cache[t]=s?this.cloneTarget(n):n,this.cache[t]}remove(t){(G(t)?[t]:t).forEach(n=>delete this.cache[n])}get(t,n=!1){if(n&&Array.isArray(t)){const s=[];for(let i=0,a;a=t[i];i++)a in this.cache&&s.push(this.cloneTarget(this.cache[a]));return s}else{const s=this.cache[t];return M(s)?s:null}}has(t){return t in this.cache&&this.cache[t]!==null}getKeys(){return Object.keys(this.cache)}reset(t){const n=this;for(const s in n.cache)(t||/^\$/.test(s))&&(n.cache[s]=null)}cloneTarget(t){return{id:t.id,id_org:t.id_org,values:t.values.map(n=>({x:n.x,value:n.value,id:n.id}))}}}const k={AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",AREA_STEP_RANGE:"area-step-range",BAR:"bar",BUBBLE:"bubble",CANDLESTICK:"candlestick",DONUT:"donut",FUNNEL:"funnel",GAUGE:"gauge",LINE:"line",PIE:"pie",POLAR:"polar",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step",TREEMAP:"treemap"},We={AREA:"initArea",AREA_LINE_RANGE:"initArea",AREA_SPLINE:"initArea",AREA_SPLINE_RANGE:"initArea",AREA_STEP:"initArea",AREA_STEP_RANGE:"initArea",BAR:"initBar",BUBBLE:"initCircle",CANDLESTICK:"initCandlestick",DONUT:"initArc",FUNNEL:"initFunnel",GAUGE:"initArc",LINE:"initLine",PIE:"initArc",POLAR:"initPolar",RADAR:"initCircle",SCATTER:"initCircle",SPLINE:"initLine",STEP:"initLine",TREEMAP:"initTreemap"},Mt={Area:[k.AREA,k.AREA_SPLINE,k.AREA_SPLINE_RANGE,k.AREA_LINE_RANGE,k.AREA_STEP,k.AREA_STEP_RANGE],AreaRange:[k.AREA_SPLINE_RANGE,k.AREA_LINE_RANGE,k.AREA_STEP_RANGE],Arc:[k.PIE,k.DONUT,k.GAUGE,k.POLAR,k.RADAR],Line:[k.LINE,k.SPLINE,k.AREA,k.AREA_SPLINE,k.AREA_SPLINE_RANGE,k.AREA_LINE_RANGE,k.STEP,k.AREA_STEP,k.AREA_STEP_RANGE],Step:[k.STEP,k.AREA_STEP,k.AREA_STEP_RANGE],Spline:[k.SPLINE,k.AREA_SPLINE,k.AREA_SPLINE_RANGE]};function ya(e){const t=e,{config:n}=t;let s="";if(vt(n.data_type||n.data_types)&&!t[We.LINE])s="line";else for(const i in We){const a=k[i];if(t.hasType(a)&&!t[We[i]]){s=a;break}}s&&$a(`Please, make sure if %c${ea(s)}`,"module has been imported and specified correctly.","https://github.com/naver/billboard.js/wiki/CHANGELOG-v2#modularization-by-its-functionality")}function $a(e,t,n){var s;const i="[billboard.js]";if((s=B.console)==null?void 0:s.error){const o=t?["background:red;color:white;display:block;font-size:15px",t]:[];console.error(`\u274C ${i} ${e}`,"background:red;color:white;display:block;font-size:15px",...o),n&&console.info("%c\u2139\uFE0F","font-size:15px",n)}throw Error(`${i} ${e.replace(/\%c([a-z-]+)/i,"'$1' ")} ${t!=null?t:""}`)}const{setTimeout:ba,clearTimeout:va}=B;function Ta(e){const t=[];let n;const s=function(){s.clear(),e===!1?xn(()=>{t.forEach(i=>i())},{timeout:200}):n=ba(()=>{t.forEach(i=>i())},I(e)?e:200)};return s.clear=()=>{n&&(va(n),n=null)},s.add=i=>t.push(i),s.remove=i=>t.splice(t.indexOf(i),1),s}function Nn(){let e=[];const t=function(n,s){function i(){var a;let o=0;for(let r=0,l;l=e[r];r++){if(l===!0||(a=l.empty)!=null&&a.call(l)){o++;continue}if(xe()===!1){o=e.length;break}try{l.transition()}catch(c){o++}}return o===e.length}Pn(()=>{s==null||s()},i)};return t.add=function(n){Y(n)?e=e.concat(n):e.push(n)},t}const Wt={};function Aa(e,t){var n;const s=e.toString(),i=(n=t==null?void 0:t.map(String).join(";"))!=null?n:"",a=(s+i).replace(/(function|[\s\W\n])/g,"").substring(0,30);if(!(a in Wt)){const o=new B.Blob([`${i}

			self.onmessage=function({data}) {
				const result = (${s}).apply(null, data);
				self.postMessage(result);
			};`],{type:"text/javascript"});Wt[a]={src:B.URL.createObjectURL(o),worker:null}}return{key:a,src:Wt[a].src}}function wa(e,t){const n=Wt[e];return n?(n.worker||(n.worker=new B.Worker(t),n.worker&&(n.worker.onerror=function(s){console.error?console.error(s):console.log(s)})),n.worker):null}function He(e=!0,t,n,s){let i=function(...a){const o=t(...a);n(o)};if(B.Worker&&e){const{key:a,src:o}=Aa(t,s),r=wa(a,o);i=function(...l){r&&(r.postMessage(l),r.onmessage=function(c){return n(c.data)})}}return i}function Gl(){for(const e in Wt){const t=Wt[e];t.worker&&t.worker.terminate(),t.src&&B.URL.revokeObjectURL(t.src),delete Wt[e]}}const Ue=34,_e=10,Ze=13;function Bn(e){const t=e.charCodeAt(0);function n(i,a){const o=[];let r=i.length,l=0,c=0,u=r<=0,d=!1;i.charCodeAt(0)===65279&&l++,i.charCodeAt(r-1)===_e&&--r,i.charCodeAt(r-1)===Ze&&--r;function h(){if(u)return null;if(d)return d=!1,null;const f=l;let p,_;if(i.charCodeAt(f)===Ue){for(;++l<r;)if(i.charCodeAt(l)===Ue){if(i.charCodeAt(l+1)!==Ue)break;l++}return(_=l++)>=r?u=!0:(p=i.charCodeAt(l++))===_e?d=!0:p===Ze&&(d=!0,i.charCodeAt(l)===_e&&++l),i.slice(f+1,_).replace(/""/g,'"')}for(;l<r;){if((p=i.charCodeAt(_=l++))===_e)d=!0;else if(p===Ze)d=!0,i.charCodeAt(l)===_e&&++l;else if(p!==t)continue;return i.slice(f,_)}return u=!0,i.slice(f,r)}let g;for(;(g=h())!==null;){const f=[];for(;g!==null;)f.push(g),g=h();if(a){const p=a(f,c++);p!=null&&o.push(p)}else o.push(f)}return o}function s(i,a){let o=[];return n(i,(r,l)=>{var c;if(l===0)return o=r,null;const u={};for(let d=0;d<o.length;d++)u[o[d]]=(c=r[d])!=null?c:"";return a?a(u,l-1,o):u})}return{parse:s,parseRows:n}}const Gn=Bn(","),Vn=Bn("	"),Sa=Gn.parse,Ra=Gn.parseRows,Ca=Vn.parse,Ea=Vn.parseRows;function qe(e){const t=[];return e.forEach(function(n,s){const i=n[0];n.forEach(function(a,o){if(o>0){if(typeof t[o-1]=="undefined"&&(t[o-1]={}),typeof a=="undefined")throw new Error(`Source data is missing a component at (${s}, ${o})!`);t[o-1][i]=a}})}),t}function Ke(e){const t=e[0],n=[];return e.forEach(function(s,i){if(i>0){const a={};s.forEach(function(o,r){if(typeof o=="undefined")throw new Error(`Source data is missing a component at (${i}, ${r})!`);a[t[r]]=o}),n.push(a)}}),n}function Yn(e,t){const n=[];let s,i;if(Array.isArray(e)){const a=function(o,r){if(o[r]!==void 0)return o[r];const c=r.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split(".");let u=o;return c.some(function(d){return!(u=u&&d in u?u[d]:void 0)}),u};t.x?s=t.value.concat(t.x):s=t.value,n.push(s),e.forEach(function(o){const r=s.map(function(l){let c=a(o,l);return typeof c=="undefined"&&(c=null),c});n.push(r)}),i=Ke(n)}else Object.keys(e).forEach(function(a){var o;const r=e[a].concat();(o=r.unshift)==null||o.call(r,a),n.push(r)}),i=qe(n);return i}function ka(e,t="csv",n,s,i){const a=new XMLHttpRequest,o={csv:La,tsv:Pa,json:Yn};a.open("GET",e),n&&Object.keys(n).forEach(function(r){a.setRequestHeader(r,n[r])}),a.onreadystatechange=function(){if(a.readyState===4)if(a.status===200){const r=a.responseText;r&&i.call(this,o[t](t==="json"?JSON.parse(r):r,s))}else throw new Error(`${e}: Something went wrong loading!`)},a.send()}function jn(e,t){const n=e.rows(t);let s;return n.length===1?(s=[{}],n[0].forEach(i=>{s[0][i]=null})):s=e.parse(t),s}function La(e){return jn({rows:Ra,parse:Sa},e)}function Pa(e){return jn({rows:Ea,parse:Ca},e)}function Wn(e,t){const n=e||(t==null?void 0:t.data_keys);return n!=null&&n.x&&(t.data_x=n.x),n}function Oa(e,t,n){const s=this,{config:i}=s;let a;e.forEach(o=>{const r=s.getXKey(o);if(n.customX||n.timeSeries?n.xs.indexOf(r)>=0?a=(n.appendXs&&s.data.xs[o]||[]).concat(t.map((l,c)=>{const u=M(l[r]);return u?s.generateTargetX(u,o,c):!1}).filter(l=>l!==!1)):i.data_x?a=this.getOtherTargetXs():ot(i.data_xs)&&(a=s.getXValuesOfXKey(r,s.data.targets)):a=t.map((l,c)=>c),a)s.data.xs[o]=a;else throw new Error(`x is not defined for id = "${o}".`)})}var Ia={convertData(e,t){const{config:n}=this,s=a=>a!=null&&a.length&&!vt(a[0])?n.boost_useWorker:!1;let i=e;if(e.bindto&&(i={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(a=>{const o=`data_${a}`;o in e&&(i[a]=e[o])})),i.url&&t)ka(i.url,i.mimeType,i.headers,Wn(i.keys,n),t);else if(i.json)He(s(i.json),Yn,t,[qe,Ke])(i.json,Wn(i.keys,n));else if(i.rows)He(s(i.rows),Ke,t)(i.rows);else if(i.columns)He(s(i.columns),qe,t)(i.columns);else if(e.bindto)throw Error("url or json or rows or columns is required.")},convertDataToTargets(e,t){const n=this,{axis:s,config:i,state:a}=n,o=i.data_type,r=Object.keys(e[0]||{}),{ids:l,xs:c}=r.length?r.reduce((h,g)=>(n.isX.call(n,g)?h.xs.push(g):n.isNotX.call(n,g)&&h.ids.push(g),h),{ids:[],xs:[]}):{ids:[],xs:[]},u={appendXs:t,xs:c,idConverter:i.data_idConverter.bind(n.api),categorized:s==null?void 0:s.isCategorized(),timeSeries:s==null?void 0:s.isTimeSeries(),customX:s==null?void 0:s.isCustomX()};Oa.bind(n)(l,e,u);const d=l.map((h,g)=>{const f=i.data_idConverter.bind(n.api)(h),p=n.getXKey(h),_=u.customX&&u.categorized,x=_&&(()=>{const $=In(i.axis_x_categories);return e.every(v=>$.has(v.x))})(),m=e.__append__,y=p===null&&m?n.api.data.values(h).length:0;return{id:f,id_org:h,values:e.map(($,v)=>{const b=$[p];let T=$[h],R;return T=T!==null&&!isNaN(T)&&!V(T)?+T:Y(T)||V(T)?T:null,(_||a.hasRadar)&&g===0&&!it(b)?(!x&&g===0&&v===0&&!m&&(i.axis_x_categories=[]),R=i.axis_x_categories.indexOf(b),R===-1&&(R=i.axis_x_categories.length,i.axis_x_categories.push(b))):R=n.generateTargetX(b,h,y+v),(it(T)||n.data.xs[h].length<=v)&&(R=void 0),{x:R,value:T,id:f,index:-1}}).filter($=>H($.x))}});if(d.forEach(h=>{var g;i.data_xSort&&(h.values=h.values.sort((f,p)=>{const _=f.x||f.x===0?f.x:1/0,x=p.x||p.x===0?p.x:1/0;return _-x})),h.values.forEach((f,p)=>f.index=p),(g=n.data.xs[h.id])==null||g.sort((f,p)=>f-p)}),a.hasNegativeValue=n.hasNegativeValueInTargets(d),a.hasPositiveValue=n.hasPositiveValueInTargets(d),o&&n.isValidChartType(o)){const h=n.mapToIds(d).filter(g=>!(g in i.data_types)||!n.isValidChartType(i.data_types[g]));n.setTargetType(h,o)}return d.forEach(h=>n.cache.add(h.id_org,h,!0)),d}},Da={isX(e){const t=this,{config:n}=t,s=n.data_x&&e===n.data_x,i=ot(n.data_xs)&&Qi(n.data_xs,e);return s||i},isNotX(e){return!this.isX(e)},isStackNormalized(){const{config:e}=this;return!!((e.data_stack_normalize===!0||bt(e.data_stack_normalize))&&e.data_groups.length)},isStackNormalizedPerGroup(){var e;const{config:t}=this;return!!(bt(t.data_stack_normalize)&&((e=t.data_stack_normalize)!=null&&e.perGroup)&&t.data_groups.length)},isGrouped(e){const t=this.config.data_groups;return e?t.some(n=>n.indexOf(e)>=0&&n.length>1):t.length>0},hasAxisGroupedData(e){const t=this,{axis:n}=t;return t.data.targets.filter(a=>n.getId(a.id)===e).map(a=>a.id).some(a=>t.isGrouped(a))},getXKey(e){const t=this,{config:n}=t;return n.data_x?n.data_x:ot(n.data_xs)?n.data_xs[e]:null},getXValuesOfXKey(e,t){const n=this,s=t&&ot(t)?n.mapToIds(t):[];let i;return s.forEach(a=>{n.getXKey(a)===e&&(i=n.data.xs[a])}),i},getIndexByX(e,t){const n=this;return t?t.indexOf(G(e)?e:+e):(n.filterByX(n.data.targets,e)[0]||{index:null}).index},getXValue(e,t){const n=this;return e in n.data.xs&&n.data.xs[e]&&M(n.data.xs[e][t])?n.data.xs[e][t]:t},getOtherTargetXs(){const e=this,t=Object.keys(e.data.xs);return t.length?e.data.xs[t[0]]:null},getOtherTargetX(e){const t=this.getOtherTargetXs();return t&&e<t.length?t[e]:null},addXs(e){const t=this,{config:n}=t;Object.keys(e).forEach(s=>{n.data_xs[s]=e[s]})},isMultipleX(){return!this.config.axis_x_forceAsSingle&&(ot(this.config.data_xs)||this.hasType("bubble")||this.hasType("scatter"))},addName(e){const t=this,{config:n}=t;let s;return e&&(s=n.data_names[e.id],e.name=s!==void 0?s:e.id),e},getAllValuesOnIndex(e,t=!1){const n=this;let s=n.filterTargetsToShow(n.data.targets).map(i=>n.addName(n.getValueOnIndex(i.values,e)));return t&&(s=s.filter(i=>i&&"value"in i&&M(i.value))),s},getValueOnIndex(e,t){const n=e.filter(s=>s.index===t);return n.length?n[0]:null},updateTargetX(e,t){const n=this;e.forEach(s=>{s.values.forEach((i,a)=>{i.x=n.generateTargetX(t[a],s.id,a)}),n.data.xs[s.id]=t})},updateTargetXs(e,t){const n=this;e.forEach(s=>{t[s.id]&&n.updateTargetX([s],t[s.id])})},generateTargetX(e,t,n){const s=this,{axis:i}=s;let a=i!=null&&i.isCategorized()?n:e||n;if(i!=null&&i.isTimeSeries()){const o=At.bind(s);a=o(e||s.getXValue(t,n))}else i!=null&&i.isCustomX()&&!(i!=null&&i.isCategorized())&&(a=M(e)?+e:s.getXValue(t,n));return a},updateXs(e){e.length&&(this.axis.xs=e.map(t=>t.x))},getPrevX(e){const t=this.axis.xs[e-1];return H(t)?t:null},getNextX(e){const t=this.axis.xs[e+1];return H(t)?t:null},getBaseValue(e){const t=this,{hasAxis:n}=t.state;let{value:s}=e;return s&&n&&(t.isAreaRangeType(e)?s=t.getRangedData(e,"mid"):t.isBubbleZType(e)&&(s=t.getBubbleZData(s,"y"))),s},getMinMaxValue(e){const t=this.getBaseValue.bind(this);let n,s;return(e||this.data.targets.map(i=>i.values)).forEach((i,a)=>{const o=i.map(t).filter(I);n=Math.min(a?n:1/0,...o),s=Math.max(a?s:-1/0,...o)}),{min:n,max:s}},getMinMaxData(){const e=this,t=at.dataMinMax;let n=e.cache.get(t);if(!n){const s=e.data.targets.map(c=>c.values),i=e.getMinMaxValue(s);let a=[],o=[];const{min:r,max:l}=i;s.forEach(c=>{const u=e.getFilteredDataByValue(c,r),d=e.getFilteredDataByValue(c,l);u.length&&(a=a.concat(u)),d.length&&(o=o.concat(d))}),e.cache.add(t,n={min:a,max:o})}return n},getTotalPerIndex(e){const t=this,{config:n}=t,s=e?`${at.dataTotalPerIndex}-${e}`:at.dataTotalPerIndex;let i=t.cache.get(s);if((t.config.data_groups.length||t.isStackNormalized())&&!i){i=[];let{targets:a}=t.data;if(t.isStackNormalizedPerGroup()&&e){const o=n.data_groups.find(r=>r.indexOf(e)>=0);if(o)a=a.filter(r=>o.indexOf(r.id)>=0);else return null}a.forEach(o=>{o.values.forEach((r,l)=>{i[l]||(i[l]=0),i[l]+=~~r.value})}),t.cache.add(s,i)}return i},getTotalDataSum(e){const t=this,n=at.dataTotalSum;let s=t.cache.get(n);return I(s)||(s=t.data.targets.reduce((i,a)=>i+a.values.reduce((o,r)=>{var l;return o+((l=r.value)!=null?l:0)},0),0),t.cache.add(n,s)),e&&(s-=t.getHiddenTotalDataSum()),s},getHiddenTotalDataSum(){const e=this,{api:t,state:{hiddenTargetIds:n}}=e;let s=0;return n.length&&(s=t.data.values.bind(t)(n).reduce((i,a)=>i+a)),s},getFilteredDataByValue(e,t){return e.filter(n=>this.getBaseValue(n)===t)},getMaxDataCount(){return Math.max(...this.data.targets.map(e=>e.values.length),0)},getMaxDataCountTarget(){let e=this.filterTargetsToShow()||[];const t=e.length,n=this.config.axis_x_inverted;return t>1?(e=e.map(s=>s.values).reduce((s,i)=>s.concat(i)).map(s=>s.x),e=ne(Ve(e)).map((s,i,a)=>({x:s,index:n?a.length-i-1:i}))):t&&(e=e[0].values.concat()),e},mapToIds(e){return e.map(t=>t.id)},mapToTargetIds(e){const t=this;return e?Y(e)?e.concat():[e]:t.mapToIds(t.data.targets)},hasTarget(e,t){const n=this.mapToIds(e);for(let s=0,i;i=n[s];s++)if(i===t)return!0;return!1},isTargetToShow(e){return this.state.hiddenTargetIds.indexOf(e)<0},isLegendToShow(e){return this.state.hiddenLegendIds.indexOf(e)<0},filterTargetsToShow(e){const t=this;if(!e){const{cache:n,data:s,state:i}=t,a=at.filteredTargets,o=i.hiddenTargetIds.join(","),r=n.get(at.visibilityChecksum);if(o!==r&&(n.remove(a),n.add(at.visibilityChecksum,o)),n.has(a))return n.get(a);const l=s.targets.filter(c=>t.isTargetToShow(c.id));return n.add(a,l),l}return e.filter(n=>t.isTargetToShow(n.id))},mapTargetsToUniqueXs(e){const t=this,{axis:n}=t;let s=[];return e!=null&&e.length&&(s=Ve(Ln(e.map(i=>i.values.map(a=>+a.x)))),s=n!=null&&n.isTimeSeries()?s.map(i=>new Date(+i)):s.map(Number)),ne(s)},addTargetIds(e,t){const{state:n}=this;(Y(t)?t:[t]).forEach(i=>{n[e].indexOf(i)<0&&n[e].push(i)})},removeTargetIds(e,t){const{state:n}=this;(Y(t)?t:[t]).forEach(i=>{const a=n[e].indexOf(i);a>=0&&n[e].splice(a,1)})},addHiddenTargetIds(e){this.addTargetIds("hiddenTargetIds",e)},removeHiddenTargetIds(e){this.removeTargetIds("hiddenTargetIds",e)},addHiddenLegendIds(e){this.addTargetIds("hiddenLegendIds",e)},removeHiddenLegendIds(e){this.removeTargetIds("hiddenLegendIds",e)},getValuesAsIdKeyed(e){const t=this,{hasAxis:n}=t.state,s={},i=t.isMultipleX(),a=i?t.mapTargetsToUniqueXs(e).map(r=>G(r)?r:+r):null,o=a?new Map(a.map((r,l)=>[r,l])):null;return e.forEach(r=>{const l=[];r.values.filter(({value:c})=>M(c)||c===null).forEach(c=>{let{value:u}=c;if(u!==null&&t.isCandlestickType(c)&&(u=Y(u)?u.slice(0,4):[u.open,u.high,u.low,u.close]),Y(u))l.push(...u);else if(V(u)&&"high"in u)l.push(...Object.values(u));else if(t.isBubbleZType(c))l.push(n&&t.getBubbleZData(u,"y"));else if(i&&o){const d=G(c.x)?c.x:+c.x,h=o.get(d);h!==void 0&&(l[h]=u)}else l.push(u)}),s[r.id]=l}),s},checkValueInTargets(e,t){return Object.keys(e).some(n=>e[n].values.some(s=>t(s.value)))},hasMultiTargets(){return this.filterTargetsToShow().length>1},hasNegativeValueInTargets(e){return this.checkValueInTargets(e,t=>t<0)},hasPositiveValueInTargets(e){return this.checkValueInTargets(e,t=>t>0)},orderTargets(e){const t=this,n=[...e],s=t.getSortCompareFn();return s&&n.sort(s),n},getSortCompareFn(e=!1){const t=this,{config:n}=t,s=n.data_order,i=/asc/i.test(s),a=/desc/i.test(s);let o;if(i||a){const r=(c,u)=>c+Math.abs(u.value),l=c=>I(c)?c:"values"in c?c.values.reduce(r,0):c.value;o=(c,u)=>{const d=l(c),h=l(u);return e?i?d-h:h-d:i?h-d:d-h}}else L(s)&&(o=s.bind(t.api));return o||null},filterByX(e,t){return Ln(e.map(n=>n.values)).filter(n=>n.x-t===0)},filterNullish(e){const t=n=>M(n.value);return e&&e.filter(n=>"value"in n?t(n):n.values.some(t))},filterRemoveNull(e){return e.filter(t=>M(this.getBaseValue(t)))},filterByXDomain(e,t){return e.map(n=>({id:n.id,id_org:n.id_org,values:n.values.filter(s=>t[0]<=s.x&&s.x<=t[1])}))},hasDataLabel(){const e=this.config.data_labels;return Xe(e)&&e||bt(e)&&ot(e)},hasNullDataValue(e){return e.some(({value:t})=>t===null)},getDataIndexFromEvent(e){const t=this,{$el:n,config:s,state:{hasRadar:i,inputType:a,eventReceiver:{coords:o,rect:r}}}=t;let l;if(i){let c=e.target;/tspan/i.test(c.tagName)&&(c=c.parentNode);const u=(0,S.select)(c).datum();l=u&&Object.keys(u).length===1?u.index:void 0}else{const c=s.axis_rotated,u=kn(n.chart.node()),d=a==="touch"&&e.changedTouches?e.changedTouches[0]:e;let h=c?d.clientY+u.y:d.clientX+u.x;if(Ye(n.svg)){const g=[h,0];c&&g.reverse(),h=Ce(n.eventRect.node(),...g)[c?"y":"x"]}else h-=c?r.top:r.left;l=Ne(o,h,0,o.length-1,c)}return l},getDataLabelLength(e,t,n){var s;const i=this,a=1.3;return((s=i.getTextRect([e,t].map(o=>i.dataLabelFormat()(o))))==null?void 0:s.map(o=>o[n]*a))||[0,0]},isNoneArc(e){return this.hasTarget(this.data.targets,e.id)},isArc(e){return"data"in e&&this.hasTarget(this.data.targets,e.data.id)},findSameXOfValues(e,t){const n=e[t].x,s=[];let i;for(i=t-1;i>=0&&n===e[i].x;i--)s.push(e[i]);for(i=t;i<e.length&&n===e[i].x;i++)s.push(e[i]);return s},findClosestFromTargets(e,t){const n=this,s=e.map(i=>n.findClosest(i.values,t));return n.findClosest(s,t)},findClosest(e,t){const n=this,{$el:{main:s}}=n,i=e.filter(r=>r&&M(r.value));let a,o;return i.filter(r=>n.isBarType(r.id)||n.isCandlestickType(r.id)).forEach(r=>{const l=n.isBarType(r.id)?`.${yt.chartBar}.${D.target}${n.getTargetSelectorSuffix(r.id)} .${yt.bar}-${r.index}`:`.${Lt.chartCandlestick}.${D.target}${n.getTargetSelectorSuffix(r.id)} .${Lt.candlestick}-${r.index} path`;!o&&n.isWithinBar(s.select(l).node())&&(o=r)}),i.filter(r=>!n.isBarType(r.id)&&!n.isCandlestickType(r.id)).forEach(r=>{const l=n.dist(r,t);a=n.getPointSensitivity(r),l<a&&(a=l,o=r)}),o},dist(e,t){const n=this,{config:{axis_rotated:s},scale:i}=n,a=+s,o=+!s,r=n.circleY(e,e.index),l=(i.zoom||i.x)(e.x);return Math.sqrt(Math.pow(l-t[a],2)+Math.pow(r-t[o],2))},convertValuesToStep(e){const t=this,{axis:n,config:s}=t,i=s.line_step_type,a=n?n.isCategorized():!1,o=Y(e)?e.concat():[e];if(!(a||/step\-(after|before)/.test(i)))return e;if(o.length){const r=o[0],l=o[o.length-1],{id:c}=r;let{x:u}=r;o.unshift({x:--u,value:r.value,id:c}),a&&i==="step-after"&&o.unshift({x:--u,value:r.value,id:c}),u=l.x,o.push({x:++u,value:l.value,id:c}),a&&i==="step-before"&&o.push({x:++u,value:l.value,id:c})}return o},convertValuesToRange(e){const t=Y(e)?e.concat():[e],n=[];return t.forEach(s=>{const{x:i,id:a}=s;n.push({x:i,id:a,value:s.value[0]}),n.push({x:i,id:a,value:s.value[2]})}),n},updateDataAttributes(e,t){const n=this,{config:s}=n,i=s[`data_${e}`];return it(t)||(Object.keys(t).forEach(a=>{i[a]=t[a]}),n.redraw({withLegend:!0})),i},getRangedData(e,t="",n="areaRange"){const s=e==null?void 0:e.value;if(Y(s)){if(n==="bar")return s.reduce((i,a)=>a-i);{const i={areaRange:["high","mid","low"],candlestick:["open","high","low","close","volume"]}[n].indexOf(t);return i>=0&&s?s[i]:void 0}}else if(s&&t)return s[t];return s},setRatioForGroupedData(e){const t=this,{config:n}=t;if(n.data_groups.length&&e.some(s=>t.isGrouped(s.id))){const s=i=>t.getRatio("index",i,!0);e.forEach(i=>{"values"in i?i.values.forEach(s):s(i)})}},getRatio(e,t,n=!1){const s=this,{config:i,state:a}=s,o=s.api;let r=0;if(t&&o.data.shown().length)if(r=t.ratio||t.value,e==="arc")if(s.pie.padAngle()())r=t.value/s.getTotalDataSum(!0);else{const l=i.gauge_fullCircle?s.getArcLength():s.getStartingAngle()*-2,c=s.hasType("gauge")?l:Math.PI*2;r=(t.endAngle-t.startAngle)/c}else if(e==="index"){const l=o.data.values.bind(o),{hiddenTargetIds:c}=a;let u=this.getTotalPerIndex(s.isStackNormalizedPerGroup()?t.id:void 0);if(u===null)return r;if(c.length){let h=c;if(s.isStackNormalizedPerGroup()&&t.id){const g=i.data_groups.find(f=>f.indexOf(t.id)>=0);g&&(h=h.filter(f=>g.indexOf(f)>=0))}if(h.length){let g=l(h,!1);g.length&&(g=g.reduce((f,p)=>f.map((_,x)=>~~_+p[x])),u=u.map((f,p)=>f-g[p]))}}const d=u[t.index];t.ratio=I(t.value)&&u&&d?t.value/d:0,r=t.ratio}else if(e==="radar")r=parseFloat(String(Math.max(t.value,0)))/a.current.dataMax*i.radar_size_ratio;else if(e==="bar"){const c=s.getYScaleById.bind(s)(t.id).domain().reduce((u,d)=>d-u);r=c===0?0:Math.abs(s.getRangedData(t,null,e)/c)}else e==="treemap"&&(r/=s.getTotalDataSum(!0));return n&&r?r*100:r},updateDataIndexByX(e){const t=this,n=e.reduce((s,i,a)=>(s[Number(i.x)]=a,s),{});t.data.targets.forEach(s=>{s.values.forEach((i,a)=>{let o=n[Number(i.x)];o===void 0&&(o=a),i.index=o})})},isBubbleZType(e){return this.isBubbleType(e)&&(V(e.value)&&("z"in e.value||"y"in e.value)||Y(e.value)&&e.value.length>=2)},isBarRangeType(e){const t=this,{value:n}=e;return t.isBarType(e)&&Y(n)&&n.length>=2&&n.every(I)},getDataById(e){var t;const n=this.cache.get(e)||this.api.data(e);return(t=n==null?void 0:n[0])!=null?t:n}};function Hn(e,t=!1){const n=this,{api:s}=n;t&&n.api.flush(!0),e==null||e.call(s)}var za={load(e,t){const n=this,{axis:s,data:i,org:a,scale:o}=n,{append:r}=t,l={domain:null,currentDomain:null,x:null};let c=e;c&&(t.filter&&(c=c.filter(t.filter)),(t.type||t.types)&&c.forEach(u=>{var d;const h=((d=t.types)==null?void 0:d[u.id])||t.type;n.setTargetType(u.id,h)}),i.targets.forEach(u=>{for(let d=0;d<c.length;d++)if(u.id===c[d].id){u.values=r?u.values.concat(c[d].values):c[d].values,c.splice(d,1);break}}),i.targets=i.targets.concat(c)),n.updateTargets(i.targets),o.zoom&&(l.x=s.isCategorized()?o.x.orgScale():(a.xScale||o.x).copy(),l.domain=n.getXDomain(i.targets),l.x.domain(l.domain),l.currentDomain=n.zoom.getDomain(),n.withinRange(l.currentDomain,void 0,l.domain)||(o.x.domain(l.domain),o.zoom=null,n.$el.eventRect.property("__zoom",null))),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),o.zoom?(a.xDomain=l.domain,a.xScale=l.x,s.isCategorized()&&(l.currentDomain=n.getZoomDomainValue(l.currentDomain),a.xDomain=n.getZoomDomainValue(a.xDomain),a.xScale=l.x.domain(a.xDomain)),n.updateCurrentZoomTransform(l.x,l.currentDomain)):a.xScale&&a.xScale.domain(a.xDomain),n.updateTypesElements(),Hn.call(n,t.done,t.resizeAfter)},loadFromArgs(e){const t=this;t.config&&(t.cache.reset(),t.convertData(e,n=>{const s=e.data||n;e.append&&(s.__append__=!0),s&&t.load(t.convertDataToTargets.call(t,s),e)}))},unload(e,t){var n;const s=this,{state:i,$el:a,$T:o}=s,r=!!((n=s.hasLegendDefsPoint)!=null&&n.call(s));let l=t,c=e;if(s.cache.reset(),l||(l=()=>{}),c=c.filter(d=>s.hasTarget(s.data.targets,d)),!c||c.length===0){l();return}c.forEach(d=>{var h;const g=s.getTargetSelectorSuffix(d);i.withoutFadeIn[d]=!1,a.legend&&a.legend.selectAll(`.${W.legendItem}${g}`).remove(),s.data.targets=s.data.targets.filter(f=>f.id!==d),r&&((h=a.defs)==null||h.select(`#${s.getDefsPointId(g)}`).remove())}),i.hasFunnel&&s.updateFunnel(s.data.targets),i.hasTreemap&&s.updateTargetsForTreemap(s.data.targets),s.updateTypesElements();const u=a.svg.selectAll(c.map(d=>s.selectorTarget(d)));o(u).style("opacity","0").remove().call(Re,l)}},Un=tt(5),Fa={setExpand(e,t,n){const s=this,{config:i,$el:{circle:a}}=s;a&&i.point_focus_expand_enabled&&s.expandCircles(e,t,n),s.expandBarTypeShapes(!0,e,t,n)},expandBarTypeShapes(e=!0,t,n,s){const i=this;["bar","candlestick"].filter(a=>i.$el[a]).forEach(a=>{s&&i.$el[a].classed(D.EXPANDED,!1),i.getShapeByIndex(a,t,n).classed(D.EXPANDED,e)})},setOverOut(e,t){const n=this,{config:s,state:{hasFunnel:i,hasRadar:a,hasTreemap:o},$el:{main:r}}=n,l=V(t);if(l||t!==-1){const c=s[e?"data_onover":"data_onout"].bind(n.api);if(s.color_onover&&n.setOverColor(e,t,l),l){const u=n.getTargetSelectorSuffix(t.id),d=i||o?`${D.target+u} .${st.shape}`:X.arc+u;c(t,r.select(`.${d}`).node())}else if(s.tooltip_grouped)e&&(a&&n.isPointFocusOnly()?n.showCircleFocus(n.getAllValuesOnIndex(t,!0)):n.setExpand(t,null,!0)),!n.isMultipleX()&&r.selectAll(`.${st.shape}-${t}`).each(function(u){c(u,this)});else{const u=n.cache.get(at.setOverOut)||[],d=r.selectAll(`.${st.shape}-${t}`).filter(function(g){return n.isWithinShape(this,g)}),h=d.filter(function(){return u.every(g=>g!==this)});if(!e||d.empty()||u.length===h.size()&&h.nodes().every((g,f)=>g!==u[f]))for(;u.length;){const g=u.pop();s.data_onout.bind(n.api)((0,S.select)(g).datum(),g)}h.each(function(){e&&(c((0,S.select)(this).datum(),this),u.push(this))}),n.cache.add(at.setOverOut,u)}}},callOverOutForTouch(e){const t=this,n=t.cache.get(at.callOverOutForTouch);(V(e)&&n?e.id!==n.id:e!==n)&&((n||I(n))&&t.setOverOut(!1,n),(e||I(e))&&t.setOverOut(!0,e),t.cache.add(at.callOverOutForTouch,e))},getDraggableSelection(){const e=this,{config:t,state:n}=e;return t.interaction_enabled&&t.data_selection_draggable&&e.drag?(0,Un.drag)().on("drag",function(s){n.event=s,e.drag(Tt(s,this))}).on("start",function(s){n.event=s,e.dragstart(Tt(s,this))}).on("end",s=>{n.event=s,e.dragend()}):()=>{}},dispatchEvent(e,t,n){var s,i,a;const o=this,{config:r,state:{eventReceiver:l,hasAxis:c,hasFunnel:u,hasRadar:d,hasTreemap:h},$el:{eventRect:g,funnel:f,radar:p,svg:_,treemap:x}}=o;let m=(a=(i=(u||h)&&l.rect||d&&p.axes.select(`.${rt.axis}-${t} text`)||g||((s=o.getArcElementByIdOrIndex)==null?void 0:s.call(o,t)))==null?void 0:i.node)==null?void 0:a.call(i);if(m){const y=o.isMultipleX(),$=r.axis_rotated;let{width:v,left:b,top:T}=dt(m);if(c&&!d&&!y){const w=l.coords[t];w?(v=w.w,b+=w.x,T+=w.y):(v=0,b=0,T=0)}let R=b+(n?n[0]:0)+(y||$?0:v/2),C=T+(n?n[1]:0)+($?4:0);if(Ye(_)){const w=Ce(o.$el.eventRect.node(),R,C,!1);R=w.x,C=w.y}const A={screenX:R,screenY:C,clientX:R,clientY:C,bubbles:d};(u||h)&&(m=(f!=null?f:x).node()),ia[/^(mouse|click)/.test(e)?"mouse":"touch"](m,e,A)}},setDragStatus(e){this.state.dragging=e},unbindZoomEvent(){const e=this,{$el:{eventRect:t,zoomResetBtn:n}}=e;t==null||t.on(".zoom wheel.zoom .drag",null),n==null||n.on("click",null).style("display","none")},unbindAllEvents(){var e;const t=this,{$el:{arcs:n,eventRect:s,legend:i,region:a,svg:o,treemap:r},brush:l}=t,c=["wheel","click","mouseover","mousemove","mouseout","touchstart","touchmove","touchend","touchstart.eventRect","touchmove.eventRect","touchend.eventRect",".brush",".drag",".zoom","wheel.zoom","dblclick.zoom"].join(" ");[o,s,a==null?void 0:a.list,l==null?void 0:l.getSelection(),n==null?void 0:n.selectAll("path"),i==null?void 0:i.selectAll("g"),r].forEach(u=>u==null?void 0:u.on(c,null)),(e=t.unbindZoomEvent)==null||e.call(t)}},Ma={categoryName(e){var t;const{axis_x_categories:n}=this.config;return(t=n==null?void 0:n[e])!=null?t:e}},Xa={generateClass(e,t){return` ${e} ${e+this.getTargetSelectorSuffix(t)}`},getClass(e,t){const n=/s$/.test(e),s=/^(area|arc|line|funnel|treemap)s?$/.test(e),i=n?"id":"index";return a=>{const o=a.data||a;return((t?this.generateClass(N[n?"shapes":"shape"],o[i]):"")+this.generateClass(N[e],o[s?"id":i])).trim()}},getChartClass(e){return t=>N[`chart${e}`]+this.classTarget((t.data?t.data:t).id)},generateExtraLineClass(){const t=this.config.line_classes||[],n=[];return function(s){var i;const a=s.id||((i=s.data)==null?void 0:i.id)||s;return n.indexOf(a)<0&&n.push(a),t[n.indexOf(a)%t.length]}},classRegion(e,t){return`${this.generateClass(N.region,t)} ${"class"in e?e.class:""}`},classTarget(e){const t=this.config.data_classes[e];let n="";return t&&(n=` ${N.target}-${t}`),this.generateClass(N.target,e)+n},classFocus(e){return this.classFocused(e)+this.classDefocused(e)},classFocused(e){return` ${this.state.focusedTargetIds.indexOf(e.id)>=0?N.focused:""}`},classDefocused(e){return` ${this.state.defocusedTargetIds.indexOf(e.id)>=0?N.defocused:""}`},getTargetSelectorSuffix(e){return(e||e===0?`-${e}`:"").replace(/[\x00-\x20\x7F-\xA0\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-")},selectorTarget(e,t="",n=""){const s=this.getTargetSelectorSuffix(e);return`${t}.${N.target+s} ${n}, ${t}.${N.circles+s} ${n}`},selectorTargets(e,t){const n=e||[];return n.length?n.map(s=>this.selectorTarget(s,t)):null},selectorLegend(e){return`.${N.legendItem+this.getTargetSelectorSuffix(e)}`},selectorLegends(e){return e!=null&&e.length?e.map(t=>this.selectorLegend(t)):null}},Xt=tt(6);const Na=(e,t,n)=>{const s=(0,S.select)(e.cloneNode(!0));return s.attr("id",n).insert("rect",":first-child").attr("width",s.attr("width")).attr("height",s.attr("height")).style("fill",t),{id:n,node:s.node()}};function Ba(e){const t=at.colorPattern,{body:n}=ct;let s=n[t];if(!s){const a=e.classed(De.colorPattern,!0).style("background-image");e.classed(De.colorPattern,!1),a.indexOf(";")>-1&&(s=a.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map(o=>o.trim().replace(/[\"'\s]/g,"")).filter(Boolean),n[t]=s)}return s}const Ga=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];var Va={generateColor(){const e=this,{$el:t,config:n}=e,s=[],i=n.area_linearGradient||n.bar_linearGradient||n.point_radialGradient;let a=ot(n.color_pattern)?n.color_pattern:(0,Xt.scaleOrdinal)(Ba(t.chart)||Ga).range();const o=a;if(L(n.color_tiles)){const r=n.color_tiles.bind(e.api)(),l=a.map((c,u)=>{const d=c.replace(/[#\(\)\s,]/g,""),h=`${e.state.datetimeId}-pattern-${d}-${u}`;return Na(r[u%r.length],c,h)});a=l.map(c=>`url(#${c.id})`),e.patterns=l}return function(r){var l;const c=n.data_colors,u=n.data_color,d=r.id||((l=r.data)==null?void 0:l.id)||r,h=e.isTypeOf(d,["line","spline","step"])||!n.data_types[d];let g;if(L(c[d])?g=c[d].bind(e.api)(r):c[d]?g=c[d]:(s.indexOf(d)<0&&s.push(d),g=h?o[s.indexOf(d)%o.length]:a[s.indexOf(d)%a.length],c[d]=g),g=L(u)?u.call(e.api,g,r):g,i){const f=e.$el.defs.selectAll(`[id$='-gradient${e.getTargetSelectorSuffix(d)}'] stop`);let p;f.each(function(_,x){p=x===0?this.style.stopColor:this.style.stopColor===p}),p===!0&&f.attr("stop-color",g)}return g}},generateLevelColor(){const e=this,{config:t}=e,n=t.color_pattern,s=t.color_threshold,i=s.unit==="value",a=s.max||100,o=s.values&&s.values.length?s.values:[];return ot(s)?function(r){const l=i?r:r*100/a;let c=n[n.length-1];for(let u=0,d=o.length;u<d;u++)if(l<=o[u]){c=n[u];break}return c}:null},generateTextBGColorFilter(e,t={x:0,y:0,width:1,height:1}){const n=this,{$el:{defs:s},state:i}=n;if(e){let a=[];G(e)?a.push(""):V(e)?a=Object.keys(e):L(e)&&(a=n.mapToTargetIds()),a.forEach(o=>{const r=`${i.datetimeId}-labels-bg${n.getTargetSelectorSuffix(o)}${G(e)?n.getTargetSelectorSuffix(e):""}`,l=Qt(o===""?e:(e==null?void 0:e[o])||"");s.select(`#${r}`).empty()&&s.append("filter").attr("x",t.x).attr("y",t.y).attr("width",t.width).attr("height",t.height).attr("id",r).html(`<feFlood flood-color="${l}" />
							<feComposite in="SourceGraphic" />`)})}},getGradienColortUrl(e){return`url(#${this.state.datetimeId}-gradient${this.getTargetSelectorSuffix(e)})`},updateLinearGradient(){const e=this,{config:t,data:{targets:n},state:{datetimeId:s},$el:{defs:i}}=e;n.forEach(a=>{const o=`${s}-gradient${e.getTargetSelectorSuffix(a.id)}`,r=e.hasPointType()&&t.point_radialGradient,l=e.isAreaType(a)&&"area"||e.isBarType(a)&&"bar";if((r||l)&&i.select(`#${o}`).empty()){const c=e.color(a),u={defs:null,stops:[]};if(r){const{cx:d=.3,cy:h=.3,r:g=.7,stops:f=[[.1,c,0],[.9,c,1]]}=r;u.stops=f,u.defs=i.append("radialGradient").attr("id",`${o}`).attr("cx",d).attr("cy",h).attr("r",g)}else{const d=t.axis_rotated,{x:h=d?[1,0]:[0,0],y:g=d?[0,0]:[0,1],stops:f=[[0,c,1],[1,c,0]]}=t[`${l}_linearGradient`];u.stops=f,u.defs=i.append("linearGradient").attr("id",`${o}`).attr("x1",h[0]).attr("x2",h[1]).attr("y1",g[0]).attr("y2",g[1])}u.stops.forEach(d=>{const[h,g,f]=d,p=L(g)?g.bind(e.api)(a.id):g;u.defs&&u.defs.append("stop").attr("offset",h).attr("stop-color",p||c).attr("stop-opacity",f)})}})},setOverColor(e,t){const n=this,{config:s,$el:{main:i}}=n,a=s.color_onover;let o=e?a:n.color;V(o)?o=({id:r})=>r in a?a[r]:n.color(r):G(o)?o=()=>a:L(a)&&(o=o.bind(n.api)),i.selectAll(V(t)?`.${X.arc}${n.getTargetSelectorSuffix(t.id)}`:`.${st.shape}-${t}`).style("fill",o)}},Ya={getYDomainMinMax(e,t){const n=this,{axis:s,config:i}=n,a=t==="min",o=i.data_groups,r=n.mapToIds(e),l=In(r),c=n.getValuesAsIdKeyed(e);if(o.length>0){const u=n[`has${a?"Negative":"Positive"}ValueInTargets`](e),d=new Map(r.map(h=>[h,s.getId(h)]));o.forEach(h=>{const g=h.filter(f=>l.has(f));if(g.length){const f=g[0],p=d.get(f);u&&c[f]&&(c[f]=c[f].map(_=>(a?_<0:_>0)?_:0)),g.filter((_,x)=>x>0).forEach(_=>{if(c[_]){const x=d.get(_);c[_].forEach((m,y)=>{const $=+m,v=a?$>0:$<0;x===p&&!(u&&v)&&(c[f][y]+=$)})}})}})}return Rt(t,Object.keys(c).map(u=>Rt(t,c[u])))},isHiddenTargetWithYDomain(e){const t=this;return t.state.hiddenTargetIds.some(n=>t.axis.getId(n)===e)},getYDomain(e,t,n){const s=this,{axis:i,config:a,scale:o}=s,r=`axis_${t}`;if(s.isStackNormalized()&&e.filter(P=>i.getId(P.id)===t).map(P=>P.id).some(P=>s.isGrouped(P)))return[0,100];const l=(o==null?void 0:o[t])&&o[t].type==="log",c=e.filter(A=>i.getId(A.id)===t),u=n?s.filterByXDomain(c,n):c;if(u.length===0)return s.isHiddenTargetWithYDomain(t)?o[t].domain():t==="y2"?o.y.domain():s.getYDomain(e,"y2",n);const d=a[`${r}_min`],h=a[`${r}_max`],g=a[`${r}_center`],f=a[`${r}_inverted`],p=s.hasDataLabel()&&a.axis_rotated,_=s.hasDataLabel()&&!a.axis_rotated;let x=s.getYDomainMinMax(u,"min"),m=s.getYDomainMinMax(u,"max"),y=[k.BAR,k.BUBBLE,k.SCATTER,...Mt.Line].some(A=>{const w=A.indexOf("area")>-1?"area":A;return s.hasType(A,u,!0)&&a[`${w}_zerobased`]});x=M(d)?d:M(h)?x<=h?x:h-10:x,m=M(h)?h:M(d)?d<=m?m:d+10:m,isNaN(x)&&(x=0),isNaN(m)&&(m=x),x===m&&(x<0?m=0:x=0);const $=x>=0&&m>=0,v=x<=0&&m<=0;(M(d)&&$||M(h)&&v)&&(y=!1),y&&($&&(x=0),v&&(m=0));const b=Math.abs(m-x);let T={top:b*.1,bottom:b*.1};if(H(g)){const A=Math.max(Math.abs(x),Math.abs(m));m=g+A,x=g-A}if(p){const A=Vt(o.y.range()),w=s.getDataLabelLength(x,m,"width").map(P=>{const E=P/A;return isFinite(E)?E:0});["bottom","top"].forEach((P,E)=>{T[P]+=b*(w[E]/(1-w[0]-w[1]))})}else if(_){const A=s.getDataLabelLength(x,m,"height");["bottom","top"].forEach((w,P)=>{T[w]+=s.convertPixelToScale("y",A[P],b)})}T=s.getResettedPadding(T);const R=a[`${r}_padding`];ot(R)&&["bottom","top"].forEach(A=>{T[A]=i.getPadding(R,A,T[A],b)}),y&&($&&(T.bottom=x),v&&(T.top=-m));const C=l?[x,m].map(A=>A<0?0:A):[x-T.bottom,m+T.top];return f?C.reverse():C},getXDomainMinMax(e,t){var n;const s=this,i=s.config[`axis_x_${t}`],a=Rt(t,e.map(r=>Rt(t,r.values.map(l=>l.x))));let o=V(i)?i.value:i;return o=H(o)&&((n=s.axis)!=null&&n.isTimeSeries())?At.bind(this)(o):o,V(i)&&i.fit&&(t==="min"&&o<a||t==="max"&&o>a)&&(o=void 0),H(o)?o:a},getXDomainPadding(e,t){const n=this,{axis:s,config:i}=n,a=i.axis_x_padding,o=s.isTimeSeries()&&t,r=Vt(e);let l;if(s.isCategorized()||o)l=0;else if(n.hasType("bar")){const d=n.getMaxDataCount();l=d>1?r/(d-1)/2:.5}else l=n.getResettedPadding(r*.01);let{left:c=l,right:u=l}=I(a)?{left:a,right:a}:a;if(a.unit==="px"){const d=Math.abs(r+r*.2);c=s.getPadding(a,"left",l,d),u=s.getPadding(a,"right",l,d)}else{const d=r+c+u;if(o&&d){const h=r/t/d;c=c/d/h,u=u/d/h}}return{left:c,right:u}},getXDomain(e){const t=this,{axis:n,config:s,scale:{x:i}}=t,a=s.axis_x_inverted,o=[t.getXDomainMinMax(e,"min"),t.getXDomainMinMax(e,"max")];let[r=0,l=0]=o;if(i.type!=="log"){const c=n.isCategorized(),u=n.isTimeSeries(),d=t.getXDomainPadding(o);let[h,g]=o;h-g===0&&!c&&(u?(h=new Date(h.getTime()*.5),g=new Date(g.getTime()*1.5)):(h=h===0?1:h*.5,g=g===0?-1:g*1.5)),(h||h===0)&&(r=u?new Date(h.getTime()-d.left):h-d.left),(g||g===0)&&(l=u?new Date(g.getTime()+d.right):g+d.right)}return a?[l,r]:[r,l]},updateXDomain(e,t,n,s,i){var a;const o=this,{config:r,org:l,scale:{x:c,subX:u}}=o,d=r.zoom_enabled;if(n&&(c.domain(i||ne(o.getXDomain(e),!r.axis_x_inverted)),l.xDomain=c.domain(),u.domain(c.domain()),(a=o.brush)==null||a.scale(u)),t){const h=i||!o.brush||En(o)?l.xDomain:Cn(o).map(u.invert);c.domain(h)}return(n||t)&&d&&o.zoom.updateScaleExtent(),s&&c.domain(o.trimXDomain(c.orgDomain())),c.domain()},trimXDomain(e){const t=this,n=t.config.axis_x_inverted,s=t.getZoomDomain(),[i,a]=s;return(n?e[0]>=i:e[0]<=i)&&(e[1]=+e[1]+(i-e[0]),e[0]=i),(n?e[1]<=a:e[1]>=a)&&(e[0]=+e[0]-(e[1]-a),e[1]=a),e},getZoomDomain(e="zoom",t=!1){const n=this,{config:s,scale:i,org:a}=n;let[o,r]=t&&i[e]?i[e].domain():a.xDomain;return e==="zoom"&&(H(s.zoom_x_min)&&(o=Rt("min",[o,s.zoom_x_min])),H(s.zoom_x_max)&&(r=Rt("max",[r,s.zoom_x_max]))),[o,r]},getZoomDomainValue(e){const t=this,{config:n,axis:s}=t;if(s.isCategorized()&&Array.isArray(e)){const i=n.axis_x_inverted;return e.map((o,r)=>Number(o)+(r===0?+i:+!i))}return e},convertPixelToScale(e,t,n){const s=this,{config:i,state:a}=s,o=i.axis_rotated;let r;return e==="x"?r=o?"height":"width":r=o?"width":"height",n*(t/a[r])},withinRange(e,t=[0,0],n){const i=this.config.axis_x_inverted,[a,o]=n;if(Array.isArray(e)){const r=[...e];if(i&&r.reverse(),r[0]<r[1])return e.every((l,c)=>(c===0?i?+l<=a:+l>=a:i?+l>=o:+l<=o)&&!e.every((u,d)=>u===t[d]))}return!1}};function Zn(e,t,n){const{config:s}=e,i=`axis_${t}_tick_format`;return(s[i]?s[i]:e.defaultValueFormat).call(e.api,n)}var ja={yFormat(e){return Zn(this,"y",e)},y2Format(e){return Zn(this,"y2",e)},getDefaultValueFormat(){const e=this,{defaultArcValueFormat:t,yFormat:n,y2Format:s}=e,i=e.hasArcType(null,["gauge","polar","radar"]);return function(a,o,r){return(i?t:e.axis&&e.axis.getId(r)==="y2"?s:n).call(e,a,o)}},defaultValueFormat(e){return Y(e)?e.join("~"):M(e)?+e:""},defaultArcValueFormat(e,t){return`${(t*100).toFixed(1)}%`},defaultPolarValueFormat(e){return`${e}`},dataLabelFormat(e){const t=this,n=t.config.data_labels,s=a=>{let r=a;return Y(a)?r=a.join("~"):V(a)&&(r=Object.values(a).join("~")),r};let i=s;return L(n.format)?i=n.format:bt(n.format)&&(n.format[e]?i=n.format[e]===!0?s:n.format[e]:i=()=>""),i.bind(t.api)}};function ke(e){const t=this,n=t.getDataById(e);return t.levelColor?t.levelColor(n.values[0].value):t.color(n)}function Je(e,t=!0){var n;const{config:s}=this;let i=(n=s.data_names[e])!=null?n:e;return t&&L(s.legend_format)&&(i=s.legend_format(i,e!==i?e:void 0)),i}function Wa(e,t){if(!t||t.empty())return;const n=[];t.each(function(i){n.push({id:i,node:this})});const s=Dn(n,i=>i.id,i=>i.node);e.cache.add(at.legendItemMap,s)}var Ha={initLegend(){const e=this,{config:t,$el:n}=e;e.legendItemTextBox={},e.state.legendHasRendered=!1,t.legend_show?(t.legend_contents_bindto||(n.legend=e.$el.svg.append("g").classed(W.legend,!0).attr("transform",e.getTranslate("legend"))),e.updateLegend()):e.state.hiddenLegendIds=e.mapToIds(e.data.targets)},updateLegend(e,t,n){var s;const i=this,{config:a,state:o,scale:r,$el:l}=i,c=t||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};c.withTransition=Ft(c,"withTransition",!0),c.withTransitionForTransform=Ft(c,"withTransitionForTransform",!0),a.legend_contents_bindto&&a.legend_contents_template?i.updateLegendTemplate():o.hasTreemap||i.updateLegendElement(e||i.mapToIds(i.data.targets),c,n),(s=l.legend)==null||s.selectAll(`.${W.legendItem}`).classed(W.legendItemHidden,function(u){const d=!i.isTargetToShow(u);return d&&(this.style.opacity=null),d}),i.updateScales(!1,!r.zoom),i.updateSvgSize(),i.transformAll(c.withTransitionForTransform,n),o.legendHasRendered=!0},updateLegendTemplate(){const e=this,{config:t,$el:n}=e,s=(0,S.select)(t.legend_contents_bindto),i=t.legend_contents_template;if(!s.empty()){const a=e.mapToIds(e.data.targets),o=[];let r="";a.forEach(c=>{const u=L(i)?Qt(i.call(e.api,c,e.color(c),e.api.data(c)[0].values)):pe(i,{COLOR:e.color(c),TITLE:c});u&&(o.push(c),r+=u)});const l=s.html(r).selectAll(function(){return this.childNodes}).data(o);e.setLegendItem(l),n.legend=s}},updateSizeForLegend(e){const t=this,{config:n,state:{isLegendTop:s,isLegendLeft:i,isLegendRight:a,isLegendInset:o,current:r}}=t,{width:l,height:c}=e,u={top:s?t.getCurrentPaddingByDirection("top")+n.legend_inset_y+5.5:r.height-c-t.getCurrentPaddingByDirection("bottom")-n.legend_inset_y,left:i?t.getCurrentPaddingByDirection("left")+n.legend_inset_x+.5:r.width-l-t.getCurrentPaddingByDirection("right")-n.legend_inset_x+.5};t.state.margin3={top:a?0:o?u.top:r.height-c,right:NaN,bottom:0,left:a?r.width-l:o?u.left:0}},transformLegend(e){const t=this,{$el:{legend:n},$T:s}=t;s(n,e).attr("transform",t.getTranslate("legend"))},updateLegendStep(e){this.state.legendStep=e},updateLegendItemWidth(e){this.state.legendItemWidth=e},updateLegendItemHeight(e){this.state.legendItemHeight=e},updateLegendItemColor(e,t){const n=this,{legend:s}=n.$el;if(s){const i=n.getLegendItemById(e);i&&(0,S.select)(i).select("line").style("stroke",t)}},getLegendWidth(){const e=this,{current:{width:t},isLegendRight:n,isLegendInset:s,legendItemWidth:i,legendStep:a}=e.state;return e.config.legend_show?n||s?i*(a+1):t:0},getLegendHeight(){var e;const t=this,{current:n,isLegendRight:s,legendItemHeight:i,legendStep:a}=t.state,o=((e=t.config.padding)==null?void 0:e.mode)==="fit";return t.config.legend_show?s?n.height:Math.max(o?10:20,i)*(a+1):0},opacityForUnfocusedLegend(e){return e.classed(W.legendItemHidden)?null:"0.3"},toggleFocusLegend(e,t){const n=this,{$el:{legend:s},$T:i}=n,a=n.mapToTargetIds(e);s&&i(s.selectAll(`.${W.legendItem}`).filter(o=>a.indexOf(o)>=0).classed(q.legendItemFocused,t)).style("opacity",function(){return t?null:n.opacityForUnfocusedLegend.call(n,(0,S.select)(this))})},revertLegend(){const e=this,{$el:{legend:t},$T:n}=e;t&&n(t.selectAll(`.${W.legendItem}`).classed(q.legendItemFocused,!1)).style("opacity",null)},showLegend(e){const t=this,{config:n,$el:s,$T:i}=t;n.legend_show||(n.legend_show=!0,s.legend?s.legend.style("visibility",null):t.initLegend(),!t.state.legendHasRendered&&t.updateLegend()),t.removeHiddenLegendIds(e),i(s.legend.selectAll(t.selectorLegends(e)).style("visibility",null)).style("opacity",null)},hideLegend(e){const t=this,{config:n,$el:{legend:s}}=t;n.legend_show&&vt(e)&&(n.legend_show=!1,s.style("visibility","hidden")),t.addHiddenLegendIds(e),s.selectAll(t.selectorLegends(e)).style("opacity","0").style("visibility","hidden")},getLegendItemTextBox(e,t){const n=this,{cache:s,state:i}=n;let a;const o=at.legendItemTextBox;return e&&(a=!i.redrawing&&s.get(o)||{},a[e]||(a[e]=n.getTextRect(t,W.legendItem),s.add(o,a)),a=a[e]),a},setLegendItem(e){const t=this,{$el:n,api:s,config:i,state:a}=t,o=a.inputType==="touch",r=t.hasType("gauge"),l=i.boost_useCssRule,c=i.legend_item_interaction;e.attr("class",function(u){const d=(0,S.select)(this);return(!d.empty()&&d.attr("class")||"")+t.generateClass(W.legendItem,u)}).style("visibility",u=>t.isLegendToShow(u)?null:"hidden"),i.interaction_enabled&&(l&&[[`.${W.legendItem}`,"cursor:pointer"],[`.${W.legendItem} text`,"pointer-events:none"],[`.${W.legendItemPoint} text`,"pointer-events:none"],[`.${W.legendItemTile}`,"pointer-events:none"],[`.${W.legendItemEvent}`,"fill-opacity:0"]].forEach(u=>{const[d,h]=u;t.setCssRule(!1,d,[h])(n.legend)}),e.on(c.dblclick?"dblclick":"click",c||L(i.legend_item_onclick)?function(u,d){if(!K(i.legend_item_onclick,s,d,!a.hiddenTargetIds.includes(d))){const{altKey:h,target:g,type:f}=u;f==="dblclick"||h?a.hiddenTargetIds.length&&g.parentNode.getAttribute("class").indexOf(W.legendItemHidden)===-1?s.show():(s.hide(),s.show(d)):(s.toggle(d),(0,S.select)(this).classed(q.legendItemFocused,!1))}o&&t.hideTooltip()}:null),!o&&e.on("mouseout",c||L(i.legend_item_onout)?function(u,d){K(i.legend_item_onout,s,d,!a.hiddenTargetIds.includes(d))||((0,S.select)(this).classed(q.legendItemFocused,!1),r&&t.undoMarkOverlapped(t,`.${$t.gaugeValue}`),t.api.revert())}:null).on("mouseover",c||L(i.legend_item_onover)?function(u,d){K(i.legend_item_onover,s,d,!a.hiddenTargetIds.includes(d))||((0,S.select)(this).classed(q.legendItemFocused,!0),r&&t.markOverlapped(d,t,`.${$t.gaugeValue}`),!a.transiting&&t.isTargetToShow(d)&&s.focus(d))}:null),!e.empty()&&e.on("click mouseout mouseover")&&e.style("cursor",t.getStylePropValue("pointer"))),Wa(t,e)},getLegendItemById(e){var t;const n=this,s=n.cache.get(at.legendItemMap);if(s&&s instanceof Map)return s.get(e)||null;const i=(t=n.$el.legend)==null?void 0:t.selectAll(`.${W.legendItem}`).filter(a=>a===e);return(i==null?void 0:i.node())||null},updateLegendElement(e,t){const n=this,{config:s,state:i,$el:{legend:a},$T:o}=n,l=s.legend_item_tile_type!=="circle",c=s.legend_item_tile_r,u={width:l?s.legend_item_tile_width:c*2,height:l?s.legend_item_tile_height:c*2},d={padding:{top:4,right:10},max:{width:0,height:0},posMin:10,step:0,tileWidth:u.width+5,totalLength:0},h={offsets:{},widths:{},heights:{},margins:[0],steps:{}};let g,f,p;const _=e.filter(b=>!H(s.data_names[b])||s.data_names[b]!==null),x=t.withTransition,m=n.getUpdateLegendPositions(_,d,h);i.isLegendInset&&(d.step=s.legend_inset_step?s.legend_inset_step:_.length,n.updateLegendStep(d.step)),i.isLegendRight?(g=b=>d.max.width*h.steps[b],f=b=>h.margins[h.steps[b]]+h.offsets[b]):i.isLegendInset?(g=b=>d.max.width*h.steps[b]+10,f=b=>h.margins[h.steps[b]]+h.offsets[b]):(g=b=>h.margins[h.steps[b]]+h.offsets[b],f=b=>d.max.height*h.steps[b]);const y={xText:(b,T)=>g(b,T)+4+u.width,xRect:(b,T)=>g(b,T),x1Tile:(b,T)=>g(b,T)-2,x2Tile:(b,T)=>g(b,T)-2+u.width,yText:(b,T)=>f(b,T)+9,yRect:(b,T)=>f(b,T)-5,yTile:(b,T)=>f(b,T)+4};n.generateLegendItem(_,u,m,y),p=a.select(`.${W.legendBackground} rect`),i.isLegendInset&&d.max.width>0&&p.size()===0&&(p=a.insert("g",`.${W.legendItem}`).attr("class",W.legendBackground).append("rect")),s.legend_tooltip&&a.selectAll("title").data(_).text(b=>Je.bind(n)(b,!1));const $=a.selectAll("text").data(_).text(b=>Je.bind(n)(b)).each(function(b,T){m(this,b,T)});o($,x).attr("x",y.xText).attr("y",y.yText);const v=a.selectAll(`rect.${W.legendItemEvent}`).data(_);o(v,x).attr("width",b=>h.widths[b]).attr("height",b=>h.heights[b]).attr("x",y.xRect).attr("y",y.yRect),n.updateLegendItemPos(_,x,y),p&&o(p,x).attr("height",n.getLegendHeight()-12).attr("width",d.max.width*(d.step+1)+10),n.updateLegendItemWidth(d.max.width),n.updateLegendItemHeight(d.max.height),n.updateLegendStep(d.step)},getUpdateLegendPositions(e,t,n){const s=this,{config:i,state:a}=s,o=a.isLegendRight||a.isLegendInset;return function(r,l,c){const u=c===0,d=c===e.length-1,h=s.getLegendItemTextBox(l,r),g=h.width+t.tileWidth+(d&&!o?0:t.padding.right)+i.legend_padding,f=h.height+t.padding.top,p=o?f:g,_=o?s.getLegendHeight():s.getLegendWidth();let x;const m=function($,v){v||(x=(_-t.totalLength-p)/2,x<t.posMin&&(x=(_-p)/2,t.totalLength=0,t.step++)),n.steps[$]=t.step,n.margins[t.step]=a.isLegendInset?10:x,n.offsets[$]=t.totalLength,t.totalLength+=p};if(u&&(t.totalLength=0,t.step=0,t.max.width=0,t.max.height=0),i.legend_show&&!s.isLegendToShow(l)){n.widths[l]=0,n.heights[l]=0,n.steps[l]=0,n.offsets[l]=0;return}n.widths[l]=g,n.heights[l]=f,(!t.max.width||g>=t.max.width)&&(t.max.width=g),(!t.max.height||f>=t.max.height)&&(t.max.height=f);const y=o?t.max.height:t.max.width;i.legend_equally?(Object.keys(n.widths).forEach($=>n.widths[$]=t.max.width),Object.keys(n.heights).forEach($=>n.heights[$]=t.max.height),x=(_-y*e.length)/2,x<t.posMin?(t.totalLength=0,t.step=0,e.forEach($=>m($))):m(l,!0)):m(l)}},generateLegendItem(e,t,n,s){const i=this,{config:a,state:o,$el:{legend:r}}=i,l=a.legend_usePoint,c=a.legend_item_tile_r,u=a.legend_item_tile_type,d=u!=="circle",h=o.isLegendRight||o.isLegendInset,g=-200,f=r.selectAll(`.${W.legendItem}`).data(e).enter().append("g");if(i.setLegendItem(f),a.legend_tooltip&&f.append("title").text(p=>p),f.append("text").text(p=>Je.bind(i)(p)).each(function(p,_){n(this,p,_)}).style("pointer-events",i.getStylePropValue("none")).attr("x",h?s.xText:g).attr("y",h?g:s.yText),f.append("rect").attr("class",W.legendItemEvent).style("fill-opacity",i.getStylePropValue("0")).attr("x",h?s.xRect:g).attr("y",h?g:s.yRect),l){const p=[],_=i.getValidPointPattern();f.append(x=>{p.indexOf(x)===-1&&p.push(x);let m=_[p.indexOf(x)%_.length];return m==="rectangle"&&(m="rect"),ct.createElementNS(S.namespaces.svg,"hasValidPointType"in i&&i.hasValidPointType(m)?m:"use")}).attr("class",W.legendItemPoint).style("fill",ke.bind(i)).style("pointer-events",i.getStylePropValue("none")).attr("href",(x,m,y)=>{const v=y[m].nodeName.toLowerCase(),b=i.getTargetSelectorSuffix(x);return v==="use"?`#${o.datetimeId}-point${b}`:void 0})}else f.append(d?"line":u).attr("class",W.legendItemTile).style("stroke",ke.bind(i)).style("pointer-events",i.getStylePropValue("none")).call(p=>{u==="circle"?p.attr("r",c).style("fill",ke.bind(i)).attr("cx",h?s.x2Tile:g).attr("cy",h?g:s.yTile):d&&p.attr("stroke-width",t.height).attr("x1",h?s.x1Tile:g).attr("y1",h?g:s.yTile).attr("x2",h?s.x2Tile:g).attr("y2",h?g:s.yTile)})},updateLegendItemPos(e,t,n){const s=this,{config:i,$el:{legend:a},$T:o}=s,r=i.legend_usePoint,l=i.legend_item_tile_type,c=l!=="circle";if(r){const u=a.selectAll(`.${W.legendItemPoint}`).data(e);o(u,t).each(function(){const d=this.nodeName.toLowerCase(),h=i.point_r;let g="x",f="y",p=2,_=2.5,x=null,m=null,y=null;if(d==="circle"){const $=h*.2;g="cx",f="cy",x=h+$,p=h*2,_=-$}else if(d==="rect"){const $=h*2.5;m=$,y=$,_=3}(0,S.select)(this).attr(g,$=>n.x1Tile($)+p).attr(f,$=>n.yTile($)-_).attr("r",x).attr("width",m).attr("height",y)})}else{const u=a.selectAll(`.${W.legendItemTile}`).data(e);o(u,t).style("stroke",ke.bind(s)).call(d=>{l==="circle"?d.attr("cx",h=>{const g=n.x2Tile(h);return g-(g-n.x1Tile(h))/2}).attr("cy",n.yTile):c&&d.attr("x1",n.x1Tile).attr("y1",n.yTile).attr("x2",n.x2Tile).attr("y2",n.yTile)})}}},Ua=tt(7),Za={redraw(e={}){var t,n,s,i;const a=this,{config:o,state:r,$el:l}=a,{main:c,treemap:u}=l;r.redrawing=!0;const d=a.filterTargetsToShow(a.data.targets),{flow:h,initializing:g}=e,f=a.getWithOption(e),p=f.Transition?o.transition_duration:0,_=f.TransitionForExit?p:0,x=f.TransitionForAxis?p:0,m=(t=a.axis)==null?void 0:t.generateTransitions(x);a.updateSizes(g),f.Legend&&o.legend_show?(e.withTransition=!!p,!u&&a.updateLegend(a.mapToIds(a.data.targets),e,m)):f.Dimension&&a.updateDimension(!0),o.data_empty_label_text&&c.select(`text.${lt.text}.${D.empty}`).attr("x",r.width/2).attr("y",r.height/2).text(o.data_empty_label_text).style("display",d.length?"none":null),(n=a.redrawTitle)==null||n.call(a),r.hasAxis?(a.axis.redrawAxis(d,f,m,h,g),a.hasGrid()&&a.updateGrid(),o.regions.length&&a.updateRegion(),["bar","candlestick","line","area"].forEach(y=>{const $=pt(y);(/^(line|area)$/.test(y)&&a.hasTypeOf($)||a.hasType(y))&&a[`update${$}`](f.TransitionForExit)}),l.text&&c.selectAll(`.${Q.selectedCircles}`).filter(a.isBarType.bind(a)).selectAll("circle").remove(),o.interaction_enabled&&!h&&f.EventRect&&(a.redrawEventRect(),(s=a.bindZoomEvent)==null||s.call(a))):(l.arcs&&a.redrawArc(p,_,f.Transform),l.radar&&a.redrawRadar(),l.polar&&a.redrawPolar(),l.funnel&&a.redrawFunnel(),u&&a.updateTreemap(_)),!r.resizing&&!u&&(a.hasPointType()||r.hasRadar)?a.updateCircle():(i=a.hasLegendDefsPoint)!=null&&i.call(a)&&a.data.targets.forEach(a.point("create",this)),a.hasDataLabel()&&!a.hasArcType(null,["radar"])&&a.updateText(),g&&a.updateTypesElements(),a.generateRedrawList(d,h,p,f.Subchart),a.updateTooltipOnRedraw(),a.callPluginHook("$redraw",e,p)},generateRedrawList(e,t,n,s){const i=this,{config:a,state:o}=i,r=i.getDrawShape();o.hasAxis&&a.subchart_show&&i.redrawSubchart(s,n,r);const l=t&&i.generateFlow({targets:e,flow:t,duration:t.duration,shape:r,xv:i.xv.bind(i)}),c=(n||l)&&xe(),u=i.getRedrawList(r,t,l,c),d=()=>{l&&l(),o.redrawing=!1,K(a.onrendered,i.api)};if(d)if(c&&u.length){const h=Nn();(0,Ua.transition)().duration(n).each(()=>{u.reduce((g,f)=>g.concat(f),[]).forEach(g=>h.add(g))}).call(h,d)}else o.transiting||d();i.mapToIds(i.data.targets).forEach(h=>{o.withoutFadeIn[h]=!0})},getRedrawList(e,t,n,s){const i=this,{config:a,state:{hasAxis:o,hasRadar:r,hasTreemap:l},$el:{grid:c}}=i,{cx:u,cy:d,xForText:h,yForText:g}=e.pos,f=[];return o&&((a.grid_x_lines.length||a.grid_y_lines.length)&&f.push(i.redrawGrid(s)),a.regions.length&&f.push(i.redrawRegion(s)),Object.keys(e.type).forEach(p=>{const _=pt(p),x=e.type[p];(/^(area|line)$/.test(p)&&i.hasTypeOf(_)||i.hasType(p))&&f.push(i[`redraw${_}`](x,s))}),!t&&c.main&&f.push(i.updateGridFocus())),(!i.hasArcType()||r)&&ot(a.data_labels)&&a.data_labels!==!1&&f.push(i.redrawText(h,g,t,s)),(i.hasPointType()||r)&&!i.isPointFocusOnly()&&i.redrawCircle&&f.push(i.redrawCircle(u,d,s,n)),l&&f.push(i.redrawTreemap(s)),f},updateAndRedraw(e={}){const t=this,{config:n,state:s}=t;let i;e.withTransition=Ft(e,"withTransition",!0),e.withTransform=Ft(e,"withTransform",!1),e.withLegend=Ft(e,"withLegend",!1),e.withUpdateXDomain=!0,e.withUpdateOrgXDomain=!0,e.withTransitionForExit=!1,e.withTransitionForTransform=Ft(e,"withTransitionForTransform",e.withTransition),e.withLegend&&n.legend_show||(s.hasAxis&&(i=t.axis.generateTransitions(e.withTransitionForAxis?n.transition_duration:0)),t.updateScales(),t.updateSvgSize(),t.transformAll(e.withTransitionForTransform,i)),t.redraw(e,i)}};function Ht(e="linear",t,n){const s={linear:Xt.scaleLinear,log:Xt.scaleSymlog,_log:Xt.scaleLog,time:Xt.scaleTime,utc:Xt.scaleUtc}[e]();return s.type=e,/_?log/.test(e)&&s.clamp(!0),s.range([t!=null?t:0,n!=null?n:1])}var qa={getXScale(e,t,n,s){const i=this,a=i.state.loading!=="append"&&i.scale.zoom||Ht(i.axis.getAxisType("x"),e,t);return i.getCustomizedXScale(n?a.domain(n):a,s)},getYScale(e,t,n,s){const a=Ht(this.axis.getAxisType(e),t,n);return s&&a.domain(s),a},getYScaleById(e,t=!1){var n;const s=((n=this.axis)==null?void 0:n.getId(e))==="y2",i=t?s?"subY2":"subY":s?"y2":"y";return this.scale[i]},getCustomizedXScale(e,t){const n=this,s=t||(()=>n.axis.x.tickOffset()),i=n.config.axis_x_inverted,a=function(o){return e(o)+s()};for(const o in e)a[o]=e[o];return a.orgDomain=()=>e.domain(),a.orgScale=()=>e,n.axis.isCategorized()&&(a.domain=function(o){let r=o;return arguments.length?(e.domain(r),a):(r=this.orgDomain(),i?[r[0]+1,r[1]]:[r[0],r[1]+1])}),a},updateScales(e,t=!0){var n,s;const i=this,{axis:a,config:o,format:r,org:l,scale:c,state:{current:u,width:d,height:h,width2:g,height2:f,hasAxis:p,hasTreemap:_}}=i;if(p){const x=o.axis_rotated,m=i.getResettedPadding(1),y={x:x?m:0,y:x?0:h,subX:x?1:0,subY:x?0:f},$={x:x?h:d,y:x?d:m,subX:x?h:d,subY:x?g:1},v=t&&((n=c.x)==null?void 0:n.orgDomain()),b=t&&l.xDomain;c.x=i.getXScale(y.x,$.x,v,()=>a.x.tickOffset()),c.subX=i.getXScale(y.x,$.x,b,T=>{var R;return T%1?0:((R=a.subX)!=null?R:a.x).tickOffset()}),r.xAxisTick=a.getXAxisTickFormat(),r.subXAxisTick=a.getXAxisTickFormat(!0),a.setAxis("x",c.x,o.axis_x_tick_outer,e),o.subchart_show&&a.setAxis("subX",c.subX,o.axis_x_tick_outer,e),c.y=i.getYScale("y",y.y,$.y,c.y?c.y.domain():o.axis_y_default),c.subY=i.getYScale("y",y.subY,$.subY,c.subY?c.subY.domain():o.axis_y_default),a.setAxis("y",c.y,o.axis_y_tick_outer,e),o.axis_y2_show&&(c.y2=i.getYScale("y2",y.y,$.y,c.y2?c.y2.domain():o.axis_y2_default),c.subY2=i.getYScale("y2",y.subY,$.subY,c.subY2?c.subY2.domain():o.axis_y2_default),a.setAxis("y2",c.y2,o.axis_y2_tick_outer,e))}else if(_){const x=i.getCurrentPadding();c.x=(0,Xt.scaleLinear)().rangeRound([x.left,u.width-x.right]),c.y=(0,Xt.scaleLinear)().rangeRound([x.top,u.height-x.bottom])}else(s=i.updateArc)==null||s.call(i)},xx(e){const t=this,{config:n,scale:{x:s,zoom:i}}=t,a=n.zoom_enabled&&i?i:s;return e?a(M(e.x)?e.x:e):null},xv(e){const t=this,{axis:n,config:s,scale:{x:i,zoom:a}}=t,o=s.zoom_enabled&&a?a:i;let r=t.getBaseValue(e);return n.isTimeSeries()?r=At.call(t,r):n.isCategorized()&&G(r)&&(r=s.axis_x_categories.indexOf(r)),o(r)},yv(e){const t=this,{scale:{y:n,y2:s}}=t;return(e.axis&&e.axis==="y2"?s:n)(t.getBaseValue(e))},subxx(e){return e?this.scale.subX(e.x):null}},Ka={setContainerSize(){const e=this,{state:t}=e;t.current.width=e.getCurrentWidth(),t.current.height=e.getCurrentHeight()},getCurrentWidth(){const e=this;return e.config.size_width||e.getParentWidth()},getCurrentHeight(){const e=this,{config:t}=e,n=t.size_height||e.getParentHeight();return n>0?n:320/(e.hasType("gauge")&&!t.gauge_fullCircle?2:1)},getParentRectValue(e){const t=`offset${pt(e)}`;let n=this.$el.chart.node(),s=0;for(;s<30&&n&&n.tagName!=="BODY";){try{s=dt(n,!0)[e]}catch(a){t in n&&(s=n[t])}n=n.parentNode}const i=ct.body[t];return s>i&&(s=i),s},getParentWidth(){return this.getParentRectValue("width")},getParentHeight(){const e=this.$el.chart.style("height");let t=0;return e&&(t=/px$/.test(e)?parseInt(e,10):this.getParentRectValue("height")),t},getSvgLeft(e){var t,n,s;const i=this,{config:a,state:{hasAxis:o},$el:r}=i,l=a.axis_rotated,c=l||!l&&!a.axis_y_inner,u=l?rt.axisX:rt.axisY,d=r.main.select(`.${u}`).node(),h=o&&a[`axis_${l?"x":"y"}_label`],f=o&&(G(h)||G(h.text)||/^inner-/.test(h==null?void 0:h.position))?r.main.select(`.${u}-label`):null,p=f&&!f.empty()?f.node():null,_=!e,x={label:p?dt(p,_):null,leftAxis:d&&c?dt(d,_):null,chart:dt(r.chart.node(),_)},m=(n=(t=x.label)==null?void 0:t.left)!=null?n:0,y=(s=x.leftAxis)!=null?s:{right:0},$=x.chart.left+m,v=i.hasArcType(),b=y.right-$-(v?0:i.getCurrentPaddingByDirection("left",e));return b>0?b:0},updateDimension(e){var t;const n=this,{config:s,state:{hasAxis:i},$el:a}=n;i&&!e&&n.axis.x&&s.axis_rotated&&((t=n.axis.subX)==null||t.create(a.axis.subX)),n.updateScales(e),n.updateSvgSize(),n.transformAll(!1)},updateSvgSize(){const e=this,{config:t,state:{clip:n,current:s,hasAxis:i,width:a,height:o},$el:{svg:r}}=e;if(t.resize_auto==="viewBox"?r.attr("viewBox",`0 0 ${s.width} ${s.height}`):r.attr("width",s.width).attr("height",s.height),i){const l=r.select(`.${fn.brush} .overlay`),c={width:0,height:0};l.size()&&(c.width=+l.attr("width"),c.height=+l.attr("height")),r.selectAll([`#${n.id}`,`#${n.idGrid}`]).select("rect").attr("width",a).attr("height",o),r.select(`#${n.idXAxis}`).select("rect").call(e.setXAxisClipPath.bind(e)),r.select(`#${n.idYAxis}`).select("rect").call(e.setYAxisClipPath.bind(e)),n.idSubchart&&r.select(`#${n.idSubchart}`).select("rect").attr("width",a).attr("height",c.height)}},getCurrentPaddingByDirection(e,t=!1,n=!1){var s;const i=this,{config:a,$el:o,state:{hasAxis:r}}=i,l=a.axis_rotated,c=((s=a.padding)==null?void 0:s.mode)==="fit",u=I(a[`padding_${e}`])?a[`padding_${e}`]:void 0,d=r?{top:l?"y2":null,bottom:l?"y":"x",left:l?"x":"y",right:l?null:"y2"}[e]:null,h=/^(left|right)$/.test(e),g=d&&a[`axis_${d}_inner`],f=d&&a[`axis_${d}_show`],p=d?a[`axis_${d}_axes`].length:0;let _=d?h?i.getAxisWidthByAxisId(d,t):i.getHorizontalAxisHeight(d):0;const x=20;let m=0;!c&&h&&(_=Ki(_));let y=r&&h&&(g||it(u)&&!f)?0:c?(f?_:0)+(u!=null?u:0):it(u)?_:u;return h&&r?(d&&(c||g)&&a[`axis_${d}_label`].text&&(y+=i.axis.getAxisLabelPosition(d).isOuter?x:0),e==="right"?(y+=l?!c&&it(u)?10:2:!f||g?c?2:1:0,y+=n?i.axis.getXAxisTickTextY2Overflow(x):0):e==="left"&&l&&it(u)&&(y=a.axis_x_show?c?_:Math.max(_,40):1)):e==="top"?(o.title&&o.title.node()&&(y+=i.getTitlePadding()),m=l&&!g?p:0):e==="bottom"&&r&&l&&!f&&(y+=1),y+_*p-m},getCurrentPadding(e=!1){const t=this,[n,s,i,a]=["top","bottom","left","right"].map(o=>t.getCurrentPaddingByDirection(o,null,e));return{top:n,bottom:s,left:i,right:a}},getResettedPadding(e){const t=this,{config:n}=t,s=I(e);let i=s?0:{};return n.padding===!1?!s&&Object.keys(e).forEach(a=>{i[a]=!vt(n.data_labels)&&n.data_labels!==!1&&a==="top"?e[a]:0}):i=e,i},updateSizes(e){var t,n,s,i,a;const o=this,{config:r,state:l,$el:{legend:c}}=o,u=r.axis_rotated,d=o.hasArcType()||l.hasFunnel||l.hasTreemap,h=((t=r.padding)==null?void 0:t.mode)==="fit";!e&&o.setContainerSize();const g={width:c?o.getLegendWidth():0,height:c?o.getLegendHeight():0};!d&&r.axis_x_show&&r.axis_x_tick_autorotate&&o.updateXAxisTickClip();const f={right:r.legend_show&&l.isLegendRight?o.getLegendWidth()+(h?0:20):0,bottom:!r.legend_show||l.isLegendRight||l.isLegendInset?0:g.height},p=u||d?0:o.getHorizontalAxisHeight("x"),_=r.subchart_axis_x_show&&r.subchart_axis_x_tick_text_show?p:30,x=r.subchart_show&&!d?r.subchart_size_height+_:0,m=o.hasType("gauge")&&r.arc_needle_show&&!r.gauge_fullCircle&&!r.gauge_label_show?10:0,y=o.getCurrentPadding(!0);if(l.margin=!d&&u?{top:y.top,right:d?0:y.right+f.right,bottom:f.bottom+y.bottom,left:x+(d?0:y.left)}:{top:(h?0:4)+y.top,right:d?0:y.right+f.right,bottom:m+x+f.bottom+y.bottom,left:d?0:y.left},l.margin=o.getResettedPadding(l.margin),l.margin2=u?{top:l.margin.top,right:NaN,bottom:20+f.bottom,left:o.state.rotatedPadding.left}:{top:l.current.height-x-f.bottom,right:NaN,bottom:_+f.bottom,left:l.margin.left},l.margin3={top:0,right:NaN,bottom:0,left:0},(n=o.updateSizeForLegend)==null||n.call(o,g),l.width=l.current.width-l.margin.left-l.margin.right,l.height=l.current.height-l.margin.top-l.margin.bottom,l.width<0&&(l.width=0),l.height<0&&(l.height=0),l.width2=u?l.margin.left-l.rotatedPadding.left-l.rotatedPadding.right:l.width,l.height2=u?l.height:l.current.height-l.margin2.top-l.margin2.bottom,l.width2<0&&(l.width2=0),l.height2<0&&(l.height2=0),o.hasArcType()){const $=o.hasType("gauge"),v=r.legend_show&&l.isLegendRight,b=(s=l.hasRadar&&o.cache.get(at.radarTextWidth))!=null?s:0;l.arcWidth=l.width-(v?g.width+10:0)-b,l.arcHeight=l.height-(v&&!$?0:10),(i=r.arc_rangeText_values)!=null&&i.length&&($?(l.arcWidth-=25,l.arcHeight-=10,l.margin.left+=10):(l.arcHeight-=20,l.margin.top+=10)),$&&!r.gauge_fullCircle&&(l.arcHeight+=l.height-o.getPaddingBottomForGauge()),(a=o.updateRadius)==null||a.call(o)}l.isLegendRight&&d&&(l.margin3.left=l.arcWidth/2+l.radiusExpanded*1.1)}},Ja={setCssRule(e,t,n,s){const i=this,{config:a,state:{cssRule:o,style:r}}=i;return a.boost_useCssRule?l=>{l.each(c=>{const u=s&&(s==null?void 0:s.call(i,c)),d=`${e?`.${st.shapes+i.getTargetSelectorSuffix(c.id)}`:""}${t}`;t in o&&r.sheet.deleteRule(o[d]),i.state.cssRule[d]=na(r,d,n.filter(Boolean).map(h=>G(u)&&h.indexOf(":")===-1?`${h}: ${u}`:h||""))})}:()=>{}},getStylePropValue(e){const{config:{boost_useCssRule:t}}=this;return t?null:L(e)?e.bind(this):e}};function Qa(e){let t="middle";return e>0&&e<=170?t="end":e>190&&e<=360&&(t="start"),t}function to(e,t,n,s,i){var a;const o=this,{value:r}=e,l=o.isCandlestickType(e),c=I(r)&&r<0||l&&!((a=o.getCandlestickData(e))!=null&&a._isUp);let{x:u,y:d}=t;const h=4,g=h*2;return s?n==="start"?(u+=c?0:g,d+=h):n==="middle"?(u+=g,d-=g):n==="end"&&(c&&(u-=g),d+=h):(n==="start"?(u+=h,c&&(d+=g*2)):n==="middle"?d-=g:n==="end"&&(u-=h,c&&(d+=g*2)),i&&(d+=c?-17:l?13:7)),{x:u,y:d}}function qn(e,t){var n;const s=this.config.data_labels_position,{id:i,index:a,value:o}=e;return(n=L(s)?s.bind(this.api)(t,o,i,a,this.$el.text):(i in s?s[i]:s)[t])!=null?n:0}function eo(e,t,n){var s,i;const a=this,{config:o,$T:r}=a,l=o.axis_rotated,{border:{padding:c="3 5",radius:u=10,stroke:d="#000",strokeWidth:h=1,fill:g="none"}}=o.data_labels,f=ra(c),p=o.data_labels.border!==!0,_=Pt(e);let x=(0,S.select)(e.previousElementSibling);(x.empty()||((s=x.node())==null?void 0:s.tagName)!=="rect"||!((i=x.attr("class"))!=null&&i.includes(n)))&&(x=(0,S.select)(e.parentNode).insert("rect",()=>e).attr("class",`${lt.textBorderRect} ${n}`).attr("width",_.width+(p?f.left+f.right:0)).attr("height",_.height+(p?f.top+f.bottom:0)),p&&x.style("fill",g).style("stroke",d).style("stroke-width",`${h}px`).attr("rx",u).attr("ry",u)),r(x).attr("x",t.x-(p?f.left:0)-(l?0:_.width/2)).attr("y",t.y-(p?f.top:0)-_.height/4*3.2)}function Qe(e=0,t){const n=this,{config:s}=n,i=s[`${t}_label_threshold`]||0;return e>=i}function Kn(){const e=this,{$el:{text:t},config:n}=e;(e.state.arcWidth?e.getArcLabelConfig("image"):n.data_labels.image)&&t.filter(function(){const i=this.previousElementSibling;return i?i.tagName!=="image"||!i.classList.contains(lt.textLabelImage):!0}).each(function(i){var a,o,r,l;const{url:c,width:u,height:d,pos:h}=no.call(e,i);if(c){const g=(0,S.select)(this.parentNode);g==null||g.insert("image",`${(o=(a=this.getAttribute("class"))==null?void 0:a.replace(/(?:^(.)|\s)/g,".$1"))!=null?o:"text"}`).style("opacity","0").attr("href",f=>pe(c,{ID:"id"in f?f.id:f.data.id})).attr("class",lt.textLabelImage).style("pointer-events","none").attr("width",u).attr("height",d).attr("transform",h?`translate(${(r=h.x)!=null?r:0} ${(l=h.y)!=null?l:0})`:null)}})}function no(e){var t;const n=this,{config:s,state:i}=n,a=i.arcWidth?n.getArcLabelConfig("image"):s.data_labels.image;if(L(a))return(t=a.call(n.api,e.value,e.id,e.index))!=null?t:{url:"",width:0,height:0,pos:{x:0,y:0}};if(a){const{url:o="",width:r=0,height:l=0,pos:c}=a;return{url:o,width:r,height:l,pos:c}}return null}function Jn(e,t){var n;const s=this,{config:i,state:{arcWidth:a,hasTreemap:o}}=s,r=i.axis_rotated,l=(0,S.select)(e.previousElementSibling),c=u=>{var d;const h=u.style.opacity!=="0"&&u.style.fillOpacity!=="0";return(a?u.textContent:h)&&((d=this.previousElementSibling)==null?void 0:d.tagName)!=="image"};if(!l.empty()&&((n=l.node())==null?void 0:n.tagName)==="image"){const u=dt(e),d=+l.attr("width")/2,h=+l.attr("height")/2;let g=t.x-d,f=t.y-h-u.height/2;r?t.x+=d:(o&&(g=-d,f=-(h*2+u.height)),s.hasType("pie")||s.hasType("polar")||(t.y+=h)),s.$T(l).style("opacity",c(e)?null:"0").attr("x",g).attr("y",f)}}function so(e){return Dn(e,t=>t,t=>Pt(t))}var io={opacityForText(e){const t=this;return t.isBarType(e)&&!Qe.call(t,Math.abs(t.getRatio("bar",e)),"bar")?"0":t.hasDataLabel?null:"0"},initText(){const{$el:e}=this;e.main.select(`.${D.chart}`).append("g").attr("class",lt.chartTexts).style("pointer-events",e.funnel||e.treemap?"none":null)},updateTargetsForText(e){const t=this,n=t.getChartClass("Text"),s=t.getClass("texts","id"),i=t.classFocus.bind(t);t.$el.main.select(`.${lt.chartTexts}`).selectAll(`.${lt.chartText}`).data(t.filterNullish(e)).attr("class",r=>`${n(r)}${i(r)}`.trim()).enter().append("g").style("opacity","0").attr("class",n).call(t.setCssRule(!0,` .${lt.text}`,["fill","pointer-events:none"],t.updateTextColor)).append("g").attr("class",s)},updateText(){const e=this,{$el:t,$T:n,config:s,axis:i}=e,a=e.getClass("text","index"),o=s.data_labels.centered,r=t.main.selectAll(`.${lt.texts}`).selectAll(`.${lt.text}`).data(e.labelishData.bind(e));n(r.exit()).style("fill-opacity","0").remove(),t.text=r.enter().append("text").merge(r).attr("class",a).attr("text-anchor",l=>{let u=s[`axis_${i==null?void 0:i.getId(l.id)}_inverted`]?l.value>0:l.value<0;if(e.isCandlestickType(l)){const d=e.getCandlestickData(l);u=!(d!=null&&d._isUp)}else if(e.isTreemapType(l))return o?"middle":"start";return s.axis_rotated?u?"end":"start":"middle"}).style("fill",e.getStylePropValue(e.updateTextColor)).style("fill-opacity","0").each(function(l,c,u){const d=(0,S.select)(this);let{value:h}=l;if(e.isBubbleZType(l))h=e.getBubbleZData(h,"z");else if(e.isCandlestickType(l)){const g=e.getCandlestickData(l);g&&(h=g.close)}h=e.isTreemapType(l)?e.treemapDataLabelFormat(l)(d):e.dataLabelFormat(l.id)(h,l.id,l.index,u),I(h)?this.textContent=h:te(d,h,void 0,!0)}),Kn.call(e)},updateTextColor(e){const t=this,{config:n}=t,s=n.data_labels_colors,i=t.isArcType(e)&&!t.isRadarType(e)||t.isFunnelType(e)||t.isTreemapType(e)?null:t.color(e);let a;if(G(s))a=s;else if(V(s)){const{id:o}=e.data||e;a=s[o]}else L(s)&&(a=s.bind(t.api)(i,e));if(t.isCandlestickType(e)&&!L(s)){const o=t.getCandlestickData(e);if(!(o!=null&&o._isUp)){const r=n.candlestick_color_down;a=V(r)?r[e.id]:r}}return a||i},updateTextBGColor(e,t){const n=this,{$el:{defs:s}}=n;let i="";if(t){const a=G(t)?"":n.getTargetSelectorSuffix("id"in e?e.id:e.data.id),o=s.select(["filter[id*='labels-bg","']"].join(a));if(o.size()&&(i=`url(#${o.attr("id")})`),L(t)){n.generateTextBGColorFilter(t);const r=n.color(e),l=t.bind(n.api)(r,e);l?o.select("feFlood").attr("flood-color",l):i=""}}return i||null},redrawText(e,t,n,s){const i=this,{$T:a,axis:o,config:r,state:{hasTreemap:l}}=i,c=Et(!0),u=r.axis_rotated,d=r.data_labels.rotate,h=Qa(d),g=d?`rotate(${d})`:"";let f=new Map;if(r.data_labels.centered){const p=[];i.$el.text.each(function(_){(i.isBarType(_)||i.isTreemapType(_))&&p.push(this)}),p.length>0&&(f=so(p))}return i.$el.text.style("fill",i.getStylePropValue(i.updateTextColor)).attr("filter",p=>i.updateTextBGColor.bind(i)(p,r.data_labels_backgroundColors)).style("fill-opacity",n?0:i.opacityForText.bind(i)).each(function(p,_){const x=f.get(this),m=a(l&&this.childElementCount?this.parentNode:this,!!(s&&(this.getAttribute("x")||this.getAttribute("transform"))),c),y=r[`axis_${o==null?void 0:o.getId(p.id)}_inverted`];let $={x:e.bind(this)(p,_,x),y:t.bind(this)(p,_,x)};d&&($=to.bind(i)(p,$,h,u,y),m.attr("text-anchor",h)),Jn.call(i,this,$),this.childElementCount||d?m.attr("transform",`translate(${$.x} ${$.y}) ${g}`):m.attr("x",$.x).attr("y",$.y),r.data_labels.border&&eo.call(i,m.node(),$,`${lt.textBorderRect}-${_}`)}),!0},getTextRect(e,t){var n,s;const i=this;let a,o,r;Array.isArray(e)?a=`${at.textRect}-${e.join("_")}`:(o=(s=(n=e.node)==null?void 0:n.call(e))!=null?s:e,/text/i.test(o.tagName)||(o=o.querySelector("text")),r=o.textContent,a=`${at.textRect}-${r.replace(/\W/g,"_")}`);const l=i.cache.get(a)||[];return l.length===0&&((i.$el.svg||i.$el.chart.select("svg")).selectAll(`.${D.dummy}`).data(r?[r]:e).enter().append("text").style("visibility","hidden").style("font",o?(0,S.select)(o).style("font"):null).classed(t||D.dummy,!0).text(c=>c).each(function(c,u){l[u]=dt(this)}).remove(),i.cache.add(a,l)),l.length>1?l:l[0]},generateXYForText(e,t){const n=this,{state:{hasRadar:s,hasFunnel:i,hasTreemap:a}}=n,o=Object.keys(e),r={},l=t?n.getXForText:n.getYForText;return i&&o.push("funnel"),s&&o.push("radar"),a&&o.push("treemap"),o.forEach(c=>{r[c]=n[`generateGet${pt(c)}Points`](e[c],!1)}),function(c,u){const d=n.isAreaType(c)&&"area"||n.isBarType(c)&&"bar"||n.isCandlestickType(c)&&"candlestick"||n.isFunnelType(c)&&"funnel"||n.isRadarType(c)&&"radar"||n.isTreemapType(c)&&"treemap"||"line";return l.call(n,r[d](c,u),c,this)}},getCenteredTextPos(e,t,n,s,i){const a=this,{config:o}=a,r=o.axis_rotated,l=a.isBarType(e),c=a.isTreemapType(e);if(o.data_labels.centered&&(l||c)){const u=i||Pt(n);if(l){const d=a.getRangedData(e,null,"bar")>=0;if(r){const h=(d?t[1][1]-t[0][1]:t[0][1]-t[1][1])/2+u.width/2;return d?-h-3:h+2}else{const h=(d?t[0][1]-t[1][1]:t[1][1]-t[0][1])/2+u.height/2;return d?h:-h-2}}else if(c)return s==="x"?(t[1][0]-t[0][0])/2:(t[1][1]-t[0][1])/2-u.y-u.height/2}return 0},getXForText(e,t,n,s){var i,a,o;const r=this,{config:l}=r,c=l.axis_rotated,u=r.isFunnelType(t),d=r.isTreemapType(t);let h=e?e[0][0]:0;if(r.isCandlestickType(t))c?h=(i=r.getCandlestickData(t))!=null&&i._isUp?e[2][2]+4:e[2][1]-4:h+=(e[1][0]-h)/2;else if(u)if(e)h=(o=(a=e[2])==null?void 0:a[0])!=null?o:h;else return Ge(n,"x");else if(d)h+=l.data_labels.centered?0:5;else if(c){const g=l[`axis_${r.axis.getId(t.id)}_inverted`],f=r.isBarType(t)?4:6,p=t.value;h=e[2][1],h+=f*((g?p>0:p<0)?-1:1)}else h=r.hasType("bar")?(e[2][0]+e[0][0])/2:h;return(c||d||u)&&(h+=r.getCenteredTextPos(t,e,n,"x",s)),h+qn.call(this,t,"x")},getYForText(e,t,n,s){var i,a;const o=this,{axis:r,config:l,state:c}=o,u=l.axis_rotated,d=l[`axis_${r==null?void 0:r.getId(t.id)}_inverted`],h=o.isBarType(t),g=o.isFunnelType(t),f=o.isTreemapType(t),p=l.point_r,_=dt(n);let{value:x}=t,m=3,y;if(o.isCandlestickType(t))x=o.getCandlestickData(t),u?(y=e[0][0],y+=(e[1][0]-y)/2+m):(y=x&&x._isUp?e[2][2]-m:e[2][1]+m*4,d&&(y+=15*(x._isUp?1:-1)));else if(g)if(e)y=((a=(i=e[2])==null?void 0:i[1])!=null?a:e[0][1])+_.height/2-3;else return Ge(n,"y");else if(f)y=e[0][1]+(l.data_labels.centered?0:_.height+5);else if(u)y=(e[0][0]+e[2][0]+_.height*.6)/2;else if(y=e[2][1],I(p)&&p>5&&(o.isLineType(t)||o.isScatterType(t))&&(m+=l.point_r/2.3),x<0||x===0&&!c.hasPositiveValue&&c.hasNegativeValue)y+=d?h?-3:-5:_.height+(h?-m:m);else{let $=-m*2;h?$=-m:o.isBubbleType(t)&&($=m),d&&($=h?10:15),y+=$}return(!u||f)&&(y+=o.getCenteredTextPos(t,e,n,"y",s)),y+qn.call(this,t,"y")},markOverlapped(e,t,n){const s=t.$el.arcs.selectAll(n),i=s.filter(l=>l.data.id!==e),a=s.filter(l=>l.data.id===e),o=Be(a.node()),r=(l,c)=>Math.sqrt(Math.pow(l,2)+Math.pow(c,2));a.node()&&i.each(function(){const l=Be(this),c=(0,S.select)(this),u=r(o.e,o.f)>r(l.e,l.f)?a:c,d=Math.ceil(Math.abs(o.e-l.e))<Math.ceil(u.node().getComputedTextLength()),h=Math.ceil(Math.abs(o.f-l.f))<parseInt(a.style("font-size"),10);c.classed(lt.TextOverlapping,d&&h)})},undoMarkOverlapped(e,t){e.$el.arcs.selectAll(t).each(function(){(0,S.selectAll)([this,this.previousSibling]).classed(lt.TextOverlapping,!1)})}};function Qn(e="left",t){const n=I(t);return e.includes("center")?n?t/2:"middle":e.includes("right")?n?t:"end":n?0:"start"}var ao={initTitle(){const e=this,{config:t,$el:n}=e;if(t.title_text){n.title=n.svg.append("g");const s=n.title.append("text").style("text-anchor",Qn(t.title_position)).attr("class",lt.title);te(s,t.title_text,[.3,1.5])}},redrawTitle(){const e=this,{config:t,state:{current:n},$el:{title:s}}=e;if(s){const i=Qn(t.title_position,n.width),a=(t.title_padding.top||0)+e.getTextRect(e.$el.title,lt.title).height;s.attr("transform",`translate(${i}, ${a})`)}},getTitlePadding(){const e=this,{$el:{title:t},config:n}=e,s=n.title_padding.top||0,i=n.title_padding.bottom||0;if(!(t!=null&&t.node()))return s+i;const a=t.node(),o=Ge(a,"y");if(o){const r=Pt(a);return o+r.y+r.height+i}return s+e.getTextRect(t,lt.title).height+i}},oo={initTooltip(){const e=this,{config:t,$el:n}=e;n.tooltip=(0,S.select)(t.tooltip_contents.bindto),n.tooltip.empty()&&(n.tooltip=n.chart.append("div").attr("class",Ae.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),e.bindTooltipResizePos()},initShowTooltip(){var e;const t=this,{config:n,$el:s,state:{hasAxis:i,hasRadar:a}}=t;if(n.tooltip_init_show){const o=!(i||a);(e=t.axis)!=null&&e.isTimeSeries()&&G(n.tooltip_init_x)&&(n.tooltip_init_x=At.call(t,n.tooltip_init_x)),t.api.tooltip.show({data:{[o?"index":"x"]:n.tooltip_init_x}});const r=n.tooltip_init_position;if(!n.tooltip_contents.bindto&&!vt(r)){const{top:l=0,left:c=50}=r;s.tooltip.style("top",G(l)?l:`${l}px`).style("left",G(c)?c:`${c}px`).style("display",null)}}},getTooltipHTML(...e){const t=this,{api:n,config:s}=t;return Qt(L(s.tooltip_contents)?s.tooltip_contents.bind(n)(...e):t.getTooltipContent(...e))},getTooltipContent(e,t,n,s){var i;const a=this,{api:o,config:r,state:l,$el:c}=a,[u,d,h]=["title","name","value"].map(E=>{const O=r[`tooltip_format_${E}`];return L(O)?O.bind(o):O}),g=(...E)=>(u||t)(...E),f=(...E)=>(d||(O=>O))(...E),p=(E,O,z,U)=>{let j=h;return j||(l.hasTreemap||a.isStackNormalized()&&(!a.isStackNormalizedPerGroup()||a.isGrouped(z))?j=(ht,et)=>`${(et*100).toFixed(2)}%`:j=n),j(E,O,z,U)},_=r.tooltip_order,x=E=>a.axis&&a.isBubbleZType(E)?a.getBubbleZData(E.value,"z"):a.getBaseValue(E),m=a.levelColor?E=>a.levelColor(E.value):E=>s(E),y=r.tooltip_contents,$=y.template,v=a.mapToTargetIds();if(_===null&&r.data_groups.length){const E=a.orderTargets(a.data.targets).map(O=>O.id).reverse();e.sort((O,z)=>{let U=O?O.value:null,j=z?z.value:null;return U>0&&j>0&&(U=O.id?E.indexOf(O.id):null,j=z.id?E.indexOf(z.id):null),U-j})}else if(/^(asc|desc)$/.test(_)){const E=_==="asc";e.sort((O,z)=>{const U=O?x(O):null,j=z?x(z):null;return E?U-j:j-U})}else L(_)&&e.sort(_.bind(o));const b=a.getTooltipContentTemplate($),T=e.length;let R,C,A,w,P;for(P=0;P<T;P++)if(C=e[P],!(!C||!(x(C)||x(C)===0))){if(it(R)){const E=(l.hasAxis||l.hasRadar)&&g(C.x);R=pe(b[0],{CLASS_TOOLTIP:Ae.tooltip,TITLE:M(E)?$?E:`<tr><th colspan="2">${E}</th></tr>`:""})}if(!C.ratio&&c.arcs&&(A=["arc",a.$el.arcs.select(`path.${X.arc}-${C.id}`).data()[0]],C.ratio=a.getRatio(...A)),A=[C.ratio,C.id,C.index],a.isAreaRangeType(C)){const[E,O]=["high","low"].map(U=>p(a.getRangedData(C,U),...A));w=`<b>Mid:</b> ${p(x(C),...A)} <b>High:</b> ${E} <b>Low:</b> ${O}`}else if(a.isCandlestickType(C)){const[E,O,z,U,j]=["open","high","low","close","volume"].map(ht=>a.getRangedData(C,ht,"candlestick")?p(a.getRangedData(C,ht,"candlestick"),...A):void 0);w=`<b>Open:</b> ${E} <b>High:</b> ${O} <b>Low:</b> ${z} <b>Close:</b> ${U}${j?` <b>Volume:</b> ${j}`:""}`}else if(a.isBarRangeType(C)){const{value:E,id:O,index:z}=C;w=`${p(E,void 0,O,z)}`}else w=p(x(C),...A);if(w!==void 0){if(C.name===null)continue;const E=f((i=C.name)!=null?i:C.id,...A),O=m(C),z={CLASS_TOOLTIP_NAME:Ae.tooltipName+a.getTargetSelectorSuffix(C.id),COLOR:$||!a.patterns?O:`<svg><rect style="fill:${O}" width="10" height="10"></rect></svg>`,NAME:E,VALUE:w};if($&&V(y.text)){const U=v.indexOf(C.id);Object.keys(y.text).forEach(j=>{z[j]=y.text[j][U]})}R+=pe(b[1],z)}}return`${R}</table>`},getTooltipContentTemplate(e){return(e||`<table class="{=CLASS_TOOLTIP}"><tbody>
				{=TITLE}
				{{<tr class="{=CLASS_TOOLTIP_NAME}">
					<td class="name">${this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>'}{=NAME}</td>
					<td class="value">{=VALUE}</td>
				</tr>}}
			</tbody></table>`).replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},setTooltipPosition(e,t){var n,s;const i=this,{config:a,scale:o,state:r,$el:{eventRect:l,tooltip:c,svg:u}}=i,{bindto:d}=a.tooltip_contents,h=a.axis_rotated,g=c==null?void 0:c.datum();if(!d&&g){const f=e!=null?e:JSON.parse(g.current),[p,_]=Tt(r.event,t!=null?t:l==null?void 0:l.node()),x={x:p,y:_};if(r.hasAxis&&o.x&&g&&"x"in g){const v=(b=0,T,R="y")=>{var C;const A=o[T?(C=i.axis)==null?void 0:C.getId(T):R];return A?A(b)+(h?r.margin.left:r.margin.top):0};x.xAxis=o.x(g.x)+(a.tooltip_position?h?r.margin.top:r.margin.left:0),f.length===1?x.yAxis=v(f[0].value,f[0].id):x.yAxis=v}const{width:m=0,height:y=0}=g,$=(s=(n=a.tooltip_position)==null?void 0:n.bind(i.api)(f,m,y,l==null?void 0:l.node(),x))!=null?s:Ye(u)?i.getTooltipPositionViewBox.bind(i)(m,y,x):i.getTooltipPosition.bind(i)(m,y,x);["top","left"].forEach(v=>{const b=$[v];c.style(v,`${b}px`),v==="left"&&!g.xPosInPercent&&(g.xPosInPercent=b/r.current.width*100)})}},getTooltipPositionViewBox(e,t,n){var s,i;const a=this,{$el:{eventRect:o,svg:r},config:l,state:c}=a,u=l.axis_rotated,d=a.hasArcType()||c.hasFunnel||c.hasTreemap,h=(i=(s=d?r:o)==null?void 0:s.node())!=null?i:c.event.target;let{x:g,y:f}=n;c.hasAxis&&(g=u?g:n.xAxis,f=u?n.xAxis:f);const p=Ce(h,g,f,!1),_=dt(h),x=Ce(h,20,0,!1).x;let m=p.y,y=p.x+e/2+x;return d&&(c.hasFunnel||c.hasTreemap||c.hasRadar?(y-=e/2+x,m+=t):(m+=_.height/2,y+=_.width/2-(e-x))),y+e>_.width&&(y=_.width-e-x),m+t>_.height&&(m-=t*2),{top:m,left:y}},getTooltipPosition(e,t,n){var s,i,a;const o=this,{config:r,scale:l,state:c}=o,{width:u,height:d,current:h,hasFunnel:g,hasRadar:f,hasTreemap:p,isLegendRight:_,inputType:x}=c,m=o.hasType("gauge")&&!r.gauge_fullCircle,y=r.axis_rotated,$=o.hasArcType(),v=o.getSvgLeft(!0);let b=v+h.width-o.getCurrentPaddingByDirection("right");const T=20;let{x:R,y:C}=n;if(f)R+=R>=u/2?15:-(e+15),C+=15;else if($){if(x!=="touch"){let P=(i=(s=o.getTitlePadding)==null?void 0:s.call(o))!=null?i:0;P&&m&&((a=r.arc_rangeText_values)!=null&&a.length)&&(P+=10),R+=(u-(_?o.getLegendWidth():0))/2,C+=(m?d:d/2+t)+P}}else if(g||p)C+=t;else{const w={top:o.getCurrentPaddingByDirection("top",!0),left:o.getCurrentPaddingByDirection("left",!0)};y?(R+=v+w.left+T,C=w.top+n.xAxis+T,b-=v):(R=v+w.left+T+(l.zoom?R:n.xAxis),C+=w.top-5)}if(R+e+15>b&&(R-=e+(g||p||$?0:y?T*2:38)),C+t>h.height){const w=p?t+10:30;C-=m?t*1.5:t+w}const A={top:C,left:R};return Object.keys(A).forEach(w=>{A[w]<0&&(A[w]=0)}),A},showTooltip(e,t){const n=this,{config:s,$el:{tooltip:i}}=n,a=e.filter(l=>l&&M(n.getBaseValue(l)));if(!i||a.length===0||!s.tooltip_show)return;let o=i.datum();const r=JSON.stringify(e);if(!o||o.current!==r){const{index:l,x:c}=e.concat().sort()[0];K(s.tooltip_onshow,n.api,e),i.html(n.getTooltipHTML(e,n.axis?n.axis.getXAxisTickFormat():n.categoryName.bind(n),n.getDefaultValueFormat(),n.color)).style("display",null).style("visibility",null),i.datum(o={index:l,x:c,current:r,width:i.property("offsetWidth"),height:i.property("offsetHeight")}),K(s.tooltip_onshown,n.api,e),n._handleLinkedCharts(!0,l)}n.setTooltipPosition(a,t)},bindTooltipResizePos(){const e=this,{resizeFunction:t,state:n,$el:{tooltip:s}}=e;t.add(()=>{if(s.style("display")==="block"){const{current:i}=n,{width:a,xPosInPercent:o}=s.datum();let r=i.width/100*o;const l=i.width-(r+a);l<0&&(r+=l),s.style("left",`${r}px`)}})},hideTooltip(e){var t;const n=this,{api:s,config:i,$el:{tooltip:a}}=n;if(a&&a.style("display")!=="none"&&(!i.tooltip_doNotHide||e)){const o=JSON.parse((t=a.datum().current)!=null?t:{});K(i.tooltip_onhide,s,o),a.style("display","none").datum(null),K(i.tooltip_onhidden,s,o)}},_handleLinkedCharts(e,t){const n=this,{charts:s,config:i,state:{event:a}}=n;if(a!=null&&a.isTrusted&&i.tooltip_linked&&s.length>1){const o=i.tooltip_linked_name;s.filter(r=>r!==n.api).forEach(r=>{const{config:l,$el:c}=r.internal,u=l.tooltip_linked,d=l.tooltip_linked_name,h=ct.body.contains(c.chart.node());if(u&&o===d&&h){const g=c.tooltip.data()[0],f=t!==(g==null?void 0:g.index);try{r.tooltip[e&&f?"show":"hide"]({index:t})}catch(p){}}})}},updateTooltipOnRedraw(e,t){var n;const s=this,{config:i,$el:{eventRect:a,svg:o,tooltip:r},state:{event:l,hasAxis:c,hasRadar:u,hasTreemap:d}}=s;if((r==null?void 0:r.style("display"))==="block"&&l){const h=e!=null?e:(n=u?o:a)==null?void 0:n.node();if(c||u)if(s.isMultipleX())s.selectRectForMultipleXs(h,!1);else{const g=t!=null?t:s.getDataIndexFromEvent(l);t===-1?s.api.tooltip.hide():(s.selectRectForSingle(h,g),s.setExpand(g,null,!0))}else{const{clientX:g,clientY:f}=l;setTimeout(()=>{let p=[g,f].every(Number.isFinite)&&ct.elementFromPoint(g,f);const _=p&&(0,S.select)(p).datum();if(_){const x=s.hasArcType()?s.convertToArcData(s.updateAngle(_)):_==null?void 0:_.data;d&&(p=o.node()),x&&s.showTooltip([x],p)}else s.api.tooltip.hide()},i.transition_duration)}}}},ro={getTranslate(e,t=0){var n;const s=this,{config:i,state:a}=s,o=i.axis_rotated;let r=0,l,c;if(t&&/^(x|y2?)$/.test(e)&&(r=s.getAxisSize(e)*t),e==="main")l=Se(a.margin.left),c=Se(a.margin.top);else if(e==="context")l=Se(a.margin2.left),c=Se(a.margin2.top);else if(e==="legend")l=a.margin3.left,c=a.margin3.top;else if(e==="x")l=o?-r:0,c=o?0:a.height+r;else if(e==="y")l=o?0:-r,c=o?a.height+r:0;else if(e==="y2")l=o?0:a.width+r,c=o?-r-1:0;else if(e==="subX")l=0,c=o?0:a.height2;else if(e==="arc")l=a.arcWidth/2,c=a.arcHeight/2,(n=i.arc_rangeText_values)!=null&&n.length&&(c+=5+(s.hasType("gauge")&&i.title_text?10:0));else if(e==="polar")l=a.arcWidth/2,c=a.arcHeight/2;else if(e==="radar"){const[u,d]=s.getRadarSize();l=a.width/2-u,c=a.height/2-d}return`translate(${l}, ${c})`},transformMain(e,t){const n=this,{$el:{main:s},$T:i}=n,a=t!=null&&t.axisX?t.axisX:i(s.select(`.${rt.axisX}`),e),o=t!=null&&t.axisY?t.axisY:i(s.select(`.${rt.axisY}`),e),r=t!=null&&t.axisY2?t.axisY2:i(s.select(`.${rt.axisY2}`),e);i(s,e).attr("transform",n.getTranslate("main")),a.attr("transform",n.getTranslate("x")),o.attr("transform",n.getTranslate("y")),r.attr("transform",n.getTranslate("y2")),s.select(`.${X.chartArcs}`).attr("transform",n.getTranslate("arc"))},transformAll(e,t){const n=this,{config:s,state:{hasAxis:i,hasFunnel:a,hasTreemap:o},$el:r}=n;!a&&!o&&n.transformMain(e,t),i&&s.subchart_show&&n.transformContext(e,t),r.legend&&n.transformLegend(e)}},lo={isValidChartType(e){return!!(e&&Object.values(k).indexOf(e)>-1)},setTargetType(e,t){const n=this,{config:s,state:{withoutFadeIn:i}}=n;n.mapToTargetIds(e).forEach(a=>{i[a]=t===s.data_types[a],s.data_types[a]=t}),e||(s.data_type=t)},updateTypesElements(){const e=this,{state:{current:t}}=e;Object.keys(k).forEach(n=>{const s=k[n],i=e.hasType(s,null,!0),a=t.types.indexOf(s);a===-1&&i?t.types.push(s):a>-1&&!i&&t.types.splice(a,1)}),e.setChartElements()},hasType(e,t,n=!1){var s;const i=this,{config:a,state:{current:o}}=i,r=a.data_types,l=t||i.data.targets;let c=!1;return!n&&((s=o.types)==null?void 0:s.indexOf(e))>-1?c=!0:l!=null&&l.length?l.forEach(u=>{const d=r[u.id];(d===e||!d&&e==="line")&&(c=!0)}):Object.keys(r).length?Object.keys(r).forEach(u=>{r[u]===e&&(c=!0)}):c=a.data_type===e,c},hasTypeOf(e,t,n=[]){return e in Mt?!Mt[e].filter(s=>n.indexOf(s)===-1).every(s=>!this.hasType(s,t)):!1},isTypeOf(e,t){var n;const s=G(e)?e:e.id,i=this.config&&(((n=this.config.data_types)==null?void 0:n[s])||this.config.data_type);return Y(t)?t.indexOf(i)>=0:i===t},hasPointType(){const e=this;return e.hasTypeOf("Line")||e.hasType("bubble")||e.hasType("scatter")},hasArcType(e,t){return this.hasTypeOf("Arc",e,t)},hasMultiArcGauge(){return this.hasType("gauge")&&this.config.gauge_type==="multi"},isLineType(e){const t=G(e)?e:e.id;return!this.config.data_types[t]||this.isTypeOf(t,Mt.Line)},isStepType(e){return this.isTypeOf(e,Mt.Step)},isSplineType(e){return this.isTypeOf(e,Mt.Spline)},isAreaType(e){return this.isTypeOf(e,Mt.Area)},isAreaRangeType(e){return this.isTypeOf(e,Mt.AreaRange)},isBarType(e){return this.isTypeOf(e,"bar")},isBubbleType(e){return this.isTypeOf(e,"bubble")},isCandlestickType(e){return this.isTypeOf(e,"candlestick")},isScatterType(e){return this.isTypeOf(e,"scatter")},isTreemapType(e){return this.isTypeOf(e,"treemap")},isPieType(e){return this.isTypeOf(e,"pie")},isFunnelType(e){return this.isTypeOf(e,"funnel")},isGaugeType(e){return this.isTypeOf(e,"gauge")},isDonutType(e){return this.isTypeOf(e,"donut")},isPolarType(e){return this.isTypeOf(e,"polar")},isRadarType(e){return this.isTypeOf(e,"radar")},isArcType(e){return this.isPieType(e)||this.isDonutType(e)||this.isGaugeType(e)||this.isPolarType(e)||this.isRadarType(e)},isCirclePoint(e){const{config:t}=this,n=t.point_pattern;let s=!1;return(e==null?void 0:e.tagName)==="circle"?s=!0:s=t.point_type==="circle"&&(!n||Y(n)&&n.length===0),s},lineData(e){return this.isLineType(e)?[e]:[]},arcData(e){return this.isArcType(e.data)?[e]:[]},labelishData(e){return this.isBarType(e)||this.isLineType(e)||this.isScatterType(e)||this.isBubbleType(e)||this.isCandlestickType(e)||this.isFunnelType(e)||this.isRadarType(e)||this.isTreemapType(e)?e.values.filter(t=>I(t.value)||!!t.value):[]},barLineBubbleData(e){return this.isBarType(e)||this.isLineType(e)||this.isBubbleType(e)?e.values:[]},isInterpolationType(e){return["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(e)>=0}},J=tt(8);function co(e){const t=this;let n;return t.isLineType(e)?n=t.generateGetLinePoints(t.getShapeIndices(t.isLineType)):t.isBarType(e)&&(n=t.generateGetBarPoints(t.getShapeIndices(t.isBarType))),n}function ts(e,t,n){return this.config[t]?this.getGradienColortUrl(e.id):n(e)}function es(e){const{$el:t}=this,{elKey:n,className:s,cssRules:i,position:a}=e,o=t.main.select(`.${N.chart}`);t[n]=a==="first"?o.insert("g",":first-child"):o.append("g"),t[n].attr("class",s),i!=null&&i.length&&t[n].call(this.setCssRule(!1,`.${s}`,i))}function tn(e,t){const n=this,{$el:s}=n,{type:i,elKey:a,containerClass:o,itemClass:r,initFn:l,withFocus:c=!0,withStyles:u=!0}=t;s[a]||l.call(n);const d=n.getChartClass(i),h=c?n.classFocus.bind(n):()=>"",f=s.main.select(`.${o}`).selectAll(`.${r}`).data(n.filterNullish(e)).attr("class",p=>d(p)+h(p)).enter().append("g").attr("class",d);return u&&f.style("opacity","0").style("pointer-events",n.getStylePropValue("none")),f}var uo={getDrawShape(){const e=this,t=e.config.axis_rotated,{hasRadar:n,hasTreemap:s}=e.state,i={type:{},indices:{},pos:{}};if(!s&&["bar","candlestick","line","area"].forEach(a=>{const o=pt(/^(bubble|scatter)$/.test(a)?"line":a);if(e.hasType(a)||e.hasTypeOf(o)||a==="line"&&(e.hasType("bubble")||e.hasType("scatter"))){const r=e.getShapeIndices(e[`is${o}Type`]),l=e[`generateDraw${o}`];i.indices[a]=r,i.type[a]=l?l.bind(e)(r,!1):void 0}}),!e.hasArcType()||n||s){let a,o;s||(a=n?e.radarCircleX:t?e.circleY:e.circleX,o=n?e.radarCircleY:t?e.circleX:e.circleY),i.pos={xForText:e.generateXYForText(i.indices,!0),yForText:e.generateXYForText(i.indices,!1),cx:(a||function(){}).bind(e),cy:(o||function(){}).bind(e)}}return i},getShapeIndices(e){const t=this,{config:n}=t,s=n.data_xs,i=ot(s),a={};let o=i?{}:0;return i&&Ve(Object.keys(s).map(r=>s[r])).forEach(r=>{o[r]=0,a[r]={}}),t.filterTargetsToShow(t.data.targets.filter(e,t)).forEach(r=>{var l;const c=r.id in s?s[r.id]:"",u=c?a[c]:a;for(let d=0,h;h=n.data_groups[d];d++)if(!(h.indexOf(r.id)<0))for(let g=0,f;f=h[g];g++){if(f in u){u[r.id]=u[f];break}r.id!==f&&c&&(u[f]=(l=u[r.id])!=null?l:o[c])}it(u[r.id])&&(u[r.id]=c?o[c]++:o++,u.__max__=(c?o[c]:o)-1)}),a},getIndices(e,t,n){const s=this,{data_xs:i,bar_indices_removeNull:a}=s.config,{id:o,index:r}=t;if(s.isBarType(o)&&a){const l={};return s.getAllValuesOnIndex(r,!0).forEach((c,u)=>{l[c.id]=u,l.__max__=u}),l}return ot(i)?e[i[o]]:e},getIndicesMax(e){return ot(this.config.data_xs)?Object.keys(e).map(t=>e[t].__max__||0).reduce((t,n)=>t+n):e.__max__},getShapeX(e,t,n){const s=this,{config:i,scale:a}=s,o=n?a.subX:a.zoom||a.x,r=i.bar_overlap,l=i.bar_padding,c=(d,h)=>d+h,u=bt(e)&&(e._$total.length?e._$total.reduce(c)/2:0);return d=>{const h=s.getIndices(t,d,"getShapeX"),g=d.id in h?h[d.id]:0,f=(h.__max__||0)+1;let p=0;if(ot(d.x)){const _=o(d.x,!0);if(u){const x=e[d.id]||e._$width;p=r?_-x/2:_-x+e._$total.slice(0,g+1).reduce(c)-u}else p=_-(I(e)?e:e._$width)*(f/2-(r?1:g))}return e&&p&&f>1&&l&&(g&&(p+=l*g),f>2?p-=(f-1)*l/2:f===2&&(p-=l/2)),p}},getShapeY(e){const t=this,n=t.isStackNormalized();return s=>{let{value:i}=s;return I(s)?i=s:t.isAreaRangeType(s)?i=t.getBaseValue(s,"mid"):n?i=t.getRatio("index",s,!0):t.isBubbleZType(s)?i=t.getBubbleZData(s.value,"y"):t.isBarRangeType(s)&&(i=i[1]),t.getYScaleById(s.id,e)(i)}},getShapeYMin(e){const t=this,n=t.axis.getId(e),s=t.scale[n],[i]=s.domain(),a=t.config[`axis_${n}_inverted`];return!t.isGrouped(e)&&!a&&i>0?i:0},getShapeOffsetData(e){const t=this,n=t.orderTargets(t.filterTargetsToShow(t.data.targets.filter(e,t))),s=n.map(u=>u.id).join("_"),i=`${at.shapeOffset}_${s}`,a=t.cache.get(i);if(a)return a;const o=t.isStackNormalized(),r=n.map(u=>{let d=u.values;const h={};t.isStepType(u)&&(d=t.convertValuesToStep(d));const g=d.reduce((f,p)=>{const _=Number(p.x);return f[_]=p,h[_]=o?t.getRatio("index",p,!0):p.value,f},{});return{id:u.id,rowValues:d,rowValueMapByXValue:g,values:h}}),c={indexMapByTargetId:n.reduce((u,{id:d},h)=>(u[d]=h,u),{}),shapeOffsetTargets:r};return t.cache.add(i,c),c},getShapeOffset(e,t,n){const s=this,{shapeOffsetTargets:i,indexMapByTargetId:a}=s.getShapeOffsetData(e),o=s.config.data_groupsZeroAs;return(r,l)=>{const{id:c,value:u,x:d}=r,h=s.getIndices(t,r),g=s.getYScaleById(c,n);if(s.isBarRangeType(r))return g(u[0]);const f=Number(d),p=g(o==="zero"?0:s.getShapeYMin(c));let _=p;return i.filter(x=>x.id!==c&&h[x.id]===h[c]).forEach(x=>{const{id:m,rowValueMapByXValue:y,rowValues:$,values:v}=x;if(a[m]<a[c]){const b=v[f];let T=$[l];(!T||Number(T.x)!==f)&&(T=y[f]),(T==null?void 0:T.value)*u>=0&&I(b)&&(u!==0||o==="positive"&&b>0||o==="negative"&&b<0)&&(_+=g(b)-p)}}),_}},circleY(e,t){const n=this,s=e.id;let i;return n.isGrouped(s)&&(i=co.bind(n)(e)),i?i(e,t)[0][1]:n.getYScaleById(s)(n.getBaseValue(e))},getBarW(e,t,n){var s,i,a,o,r;const l=this,{config:c,org:u,scale:d,state:h}=l,g=l.getMaxDataCount(),f=e==="bar"&&((s=c.data_groups)==null?void 0:s.length),p=`${e}_width`,{k:_}=(a=(i=l.getZoomTransform)==null?void 0:i.call(l))!=null?a:{k:1},x=[(o=c.axis_x_min)!=null?o:u.xDomain[0],(r=c.axis_x_max)!=null?r:u.xDomain[1]].map(l.axis.isTimeSeries()?At.bind(l):Number);let m=t.tickInterval(g);if(d.zoom&&!l.axis.isCategorized()&&_>1){const v=x.every((b,T)=>b===u.xDomain[T]);m=u.xDomain.map((b,T)=>{const R=v?b:b-Math.abs(x[T]);return d.zoom(R)}).reduce((b,T)=>Math.abs(b)+T)/g}const y=v=>{const b=v?c[p][v]:c[p],T=v?b.ratio:c[`${p}_ratio`],R=v?b.max:c[`${p}_max`],C=I(b)?b:L(b)?b.call(l,h.width,n,g):n?m*T/n:0;return R&&C>R?R:C};let $=y();return!f&&bt(c[p])&&($={_$width:$,_$total:[]},l.filterTargetsToShow(l.data.targets).forEach(v=>{c[p][v.id]&&($[v.id]=y(v.id),$._$total.push($[v.id]||$._$width))})),$},getShapeByIndex(e,t,n){const s=this,{$el:i}=s,a=M(t)?`-${t}`:"";let o=i[e];return o&&!o.empty()?o=o.filter(r=>n?r.id===n:!0).filter(r=>M(t)?r.index===t:!0):o=(n?i.main.selectAll(`.${N[`${e}s`]}${s.getTargetSelectorSuffix(n)}`):i.main).selectAll(`.${N[e]}${a}`),o},isWithinShape(e,t){var n;const s=this,i=(0,S.select)(e);let a;return s.isTargetToShow(t.id)?(n=s.hasValidPointType)!=null&&n.call(s,e.nodeName)?a=s.isStepType(t)?s.isWithinStep(e,s.getYScaleById(t.id)(s.getBaseValue(t))):s.isWithinCircle(e,s.isBubbleType(t)?s.pointSelectR(t)*1.5:0):e.nodeName==="path"&&(a=i.classed(N.bar)?s.isWithinBar(e):!0):a=!1,a},getInterpolate(e){const n=this.getInterpolateType(e);return{basis:J.curveBasis,"basis-closed":J.curveBasisClosed,"basis-open":J.curveBasisOpen,bundle:J.curveBundle,cardinal:J.curveCardinal,"cardinal-closed":J.curveCardinalClosed,"cardinal-open":J.curveCardinalOpen,"catmull-rom":J.curveCatmullRom,"catmull-rom-closed":J.curveCatmullRomClosed,"catmull-rom-open":J.curveCatmullRomOpen,"monotone-x":J.curveMonotoneX,"monotone-y":J.curveMonotoneY,natural:J.curveNatural,"linear-closed":J.curveLinearClosed,linear:J.curveLinear,step:J.curveStep,"step-after":J.curveStepAfter,"step-before":J.curveStepBefore}[n]},getInterpolateType(e){const t=this,{config:n}=t,s=n.spline_interpolation_type,i=t.isInterpolationType(s)?s:"cardinal";return t.isSplineType(e)?i:t.isStepType(e)?n.line_step_type:"linear"},isWithinBar(e){const t=Tt(this.state.event,e),n=Sn(e),[s,i]=n,a=Math.min(s.x,i.x),o=Math.min(s.y,i.y),r=this.config.bar_sensitivity,{width:l,height:c}=Pt(e,!0),u=a-r,d=a+l+r,h=o+c+r,g=o-r;return u<t[0]&&t[0]<d&&g<t[1]&&t[1]<h}},ho=Object.defineProperty,go=(e,t,n)=>t in e?ho(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xt=(e,t,n)=>go(e,typeof t!="symbol"?t+"":t,n);class Ut{constructor(t){xt(this,"api"),xt(this,"config"),xt(this,"cache"),xt(this,"$el"),xt(this,"state"),xt(this,"charts"),xt(this,"data",{xs:{},targets:[]}),xt(this,"axis"),xt(this,"scale",{x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null}),xt(this,"org",{xScale:null,xDomain:null}),xt(this,"color"),xt(this,"patterns"),xt(this,"levelColor"),xt(this,"point"),xt(this,"brush"),xt(this,"format",{extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null});const n=this;n.api=t,n.config=new jt,n.cache=new ma;const s=new fa;n.$el=s.getStore("element"),n.state=s.getStore("state"),n.$T=n.$T.bind(n)}$T(t,n,s){const{config:i,state:a}=this,o=i.transition_duration,r=i.subchart_show;let l=t;return l&&("tagName"in l&&(l=(0,S.select)(l)),l=(n!==!1&&o||n)&&(!a.zooming||a.dragging)&&!a.resizing&&a.rendered&&!r?l.transition(s).duration(o):l),l}beforeInit(){const t=this;t.callPluginHook("$beforeInit"),K(t.config.onbeforeinit,t.api)}afterInit(){const t=this;t.callPluginHook("$afterInit"),K(t.config.onafterinit,t.api)}init(){const t=this,{config:n,state:s,$el:i}=t,{boost_useCssRule:a,bindto:o}=n;ya(t);const r=t.hasArcType();if(s.hasRadar=!s.hasAxis&&t.hasType("radar"),s.hasFunnel=!s.hasAxis&&t.hasType("funnel"),s.hasTreemap=!s.hasAxis&&t.hasType("treemap"),s.hasAxis=!r&&!s.hasFunnel&&!s.hasTreemap,s.datetimeId=`bb-${+new Date*Et()}`,a){const c=ct.createElement("style");c.type="text/css",ct.head.appendChild(c),s.style={rootSelctor:`.${s.datetimeId}`,sheet:c.sheet},i.style=c}const l={element:o,classname:"bb"};V(o)&&(l.element=o.element||"#chart",l.classname=o.classname||l.classname),i.chart=L(l.element.node)?o.element:(0,S.select)(l.element||[]),i.chart.empty()&&(i.chart=(0,S.select)(ct.body.appendChild(ct.createElement("div")))),i.chart.html("").classed(l.classname,!0).classed(s.datetimeId,a).style("position","relative"),t.initParams(),t.initToRender()}initToRender(t){const n=this,{config:s,state:i,$el:{chart:a}}=n,o=()=>aa(a,{display:"none",visibility:"hidden"}),r=s.render.lazy===!1?!1:s.render.lazy||o(),l=B.MutationObserver;r&&l&&s.render.observe!==!1&&!t&&new l((c,u)=>{o()||(u.disconnect(),!i.rendered&&n.initToRender(!0))}).observe(a.node(),{attributes:!0,attributeFilter:["class","style"]}),(!r||t)&&n.convertData(s,c=>{n.initWithData(c),n.afterInit()})}initParams(){var t;const n=this,{config:s,format:i,state:a}=n;if(n.color=n.generateColor(),n.levelColor=n.generateLevelColor(),s.padding===!1&&(s.axis_x_show=!1,s.axis_y_show=!1,s.axis_y2_show=!1,s.subchart_show=!1),(n.hasPointType()||(t=n.hasLegendDefsPoint)!=null&&t.call(n))&&(n.point=n.generatePoint()),a.hasAxis){n.initClip(),i.extraLineClasses=n.generateExtraLineClass(),i.dataTime=s.data_xLocaltime?ve.timeParse:ve.utcParse,i.axisTime=s.axis_x_localtime?ve.timeFormat:ve.utcFormat;const c=s.zoom_enabled&&s.zoom_type==="drag";i.defaultAxisTime=u=>{const{x:d,zoom:h}=n.scale,g=c?h:h&&d.orgDomain().toString()!==h.domain().toString(),f=u.getMilliseconds()&&".%L"||u.getSeconds()&&".:%S"||u.getMinutes()&&"%I:%M"||u.getHours()&&"%I %p"||u.getDate()!==1&&"%b %d"||g&&u.getDate()===1&&"%b'%y"||u.getMonth()&&"%-m/%-d"||"%Y";return i.axisTime(f)(u)}}const{legend_position:o,legend_inset_anchor:r,axis_rotated:l}=s;a.isLegendRight=o==="right",a.isLegendInset=o==="inset",a.isLegendTop=r==="top-left"||r==="top-right",a.isLegendLeft=r==="top-left"||r==="bottom-left",a.rotatedPadding.top=n.getResettedPadding(a.rotatedPadding.top),a.rotatedPadding.right=l&&!s.axis_x_show?0:30,a.inputType=oa(s.interaction_inputType_mouse,s.interaction_inputType_touch)}initWithData(t){var n,s,i;const a=this,{config:o,scale:r,state:l,$el:c,org:u}=a,{hasAxis:d,hasFunnel:h,hasTreemap:g}=l,f=o.interaction_enabled,p=a.hasType("polar"),_=o.data_labels_backgroundColors;if(d&&(a.axis=a.getAxisInstance(),o.zoom_enabled&&a.initZoom()),a.data.xs={},a.data.targets=a.convertDataToTargets(t),o.data_filter&&(a.data.targets=a.data.targets.filter(o.data_filter.bind(a.api))),o.data_hide&&a.addHiddenTargetIds(o.data_hide===!0?a.mapToIds(a.data.targets):o.data_hide),o.legend_hide&&a.addHiddenLegendIds(o.legend_hide===!0?a.mapToIds(a.data.targets):o.legend_hide),a.updateSizes(),a.updateScales(!0),d){const{x:y,y:$,y2:v,subX:b,subY:T,subY2:R}=r;y&&(y.domain(ne(a.getXDomain(a.data.targets),!o.axis_x_inverted)),b.domain(y.domain()),u.xDomain=y.domain()),$&&($.domain(a.getYDomain(a.data.targets,"y")),T.domain($.domain())),v&&(v.domain(a.getYDomain(a.data.targets,"y2")),R&&R.domain(v.domain()))}if(c.svg=c.chart.append("svg").style("overflow","hidden").style("display","block"),f&&l.inputType){const y=l.inputType==="touch",{onclick:$,onover:v,onout:b}=o;c.svg.on("click",($==null?void 0:$.bind(a.api))||null).on(y?"touchstart":"mouseenter",(v==null?void 0:v.bind(a.api))||null,y?{passive:!0}:void 0).on(y?"touchend":"mouseleave",(b==null?void 0:b.bind(a.api))||null)}o.svg_classname&&c.svg.attr("class",o.svg_classname);const x=L(o.color_tiles)&&a.patterns;(d||x||p||g||_||(n=a.hasLegendDefsPoint)!=null&&n.call(a))&&(c.defs=c.svg.append("defs"),d&&["id","idXAxis","idYAxis","idGrid"].forEach(y=>{a.appendClip(c.defs,l.clip[y])}),a.generateTextBGColorFilter(_),x&&a.patterns.forEach(y=>c.defs.append(()=>y.node))),a.updateSvgSize(),a.bindResize();const m=c.svg.append("g").classed(D.main,!0).attr("transform",h||g?null:a.getTranslate("main"));if(c.main=m,o.subchart_show&&a.initSubchart(),o.tooltip_show&&a.initTooltip(),o.title_text&&a.initTitle(),!g&&o.legend_show&&a.initLegend(),o.data_empty_label_text&&m.append("text").attr("class",`${lt.text} ${D.empty}`).attr("text-anchor","middle").attr("dominant-baseline","middle"),d&&(o.regions.length&&a.initRegion(),!o.clipPath&&a.axis.init()),m.append("g").classed(D.chart,!0).attr("clip-path",d?l.clip.path:null),a.callPluginHook("$init"),a.initChartElements(),d&&(f&&((s=a.initEventRect)==null||s.call(a)),a.initGrid(),o.clipPath&&((i=a.axis)==null||i.init())),a.updateTargets(a.data.targets),a.updateDimension(),K(o.oninit,a.api),a.setBackground(),a.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),o.data_onmin||o.data_onmax){const y=a.getMinMaxData();K(o.data_onmin,a.api,y.min),K(o.data_onmax,a.api,y.max)}o.tooltip_show&&a.initShowTooltip(),l.rendered=!0}initChartElements(){const t=this,{hasAxis:n,hasRadar:s,hasTreemap:i}=t.state,a=[];if(n){const o=["bar","bubble","candlestick","line"];t.config.bar_front&&o.push(o.shift());for(const r of o){const l=pt(r);(r==="line"&&t.hasTypeOf(l)||t.hasType(r))&&a.push(l)}}else if(i)a.push("Treemap");else if(t.hasType("funnel"))a.push("Funnel");else{const o=t.hasType("polar"),r=t.hasType("gauge");s||a.push("Arc","Pie"),r?a.push("Gauge"):s?a.push("Radar"):o&&a.push("Polar")}for(const o of a)t[`init${o}`]();ot(t.config.data_labels)&&!t.hasArcType(null,["radar"])&&t.initText()}setChartElements(){const t=this,{$el:{chart:n,svg:s,defs:i,main:a,tooltip:o,legend:r,title:l,grid:c,needle:u,arcs:d,circle:h,bar:g,candlestick:f,line:p,area:_,text:x}}=t;t.api.$={chart:n,svg:s,defs:i,main:a,tooltip:o,legend:r,title:l,grid:c,arc:d,circles:h,bar:{bars:g},candlestick:f,line:{lines:p,areas:_},needle:u,text:{texts:x}}}setBackground(){const t=this,{config:{background:n},state:s,$el:{svg:i}}=t;if(ot(n)){const a=i.select("g").insert(n.imgUrl?"image":"rect",":first-child");n.imgUrl?a.attr("href",n.imgUrl):n.color&&a.style("fill",n.color).attr("clip-path",s.clip.path),a.attr("class",n.class||null).attr("width","100%").attr("height","100%")}}updateTargets(t){var n,s;const i=this,{hasAxis:a,hasFunnel:o,hasRadar:r,hasTreemap:l}=i.state,c=d=>i[`updateTargetsFor${d}`](t.filter(i[`is${d}Type`].bind(i)));if(i.updateTargetsForText(t),a){const d=["bar","candlestick","line"];for(const h of d){const g=pt(h);(h==="line"&&i.hasTypeOf(g)||i.hasType(h))&&c(g)}(n=i.updateTargetsForSubchart)==null||n.call(i,t)}else if(i.hasArcType(t)){let d="Arc";r?d="Radar":i.hasType("polar")&&(d="Polar"),c(d)}else o?c("Funnel"):l&&c("Treemap");const u=i.hasType("bubble")||i.hasType("scatter");u&&((s=i.updateTargetForCircle)==null||s.call(i)),i.filterTargetsToShowAtInit(u)}filterTargetsToShowAtInit(t=!1){const n=this,{$el:{svg:s},$T:i}=n;let a=`.${D.target}`;t&&(a+=`, .${ft.chartCircles} > .${ft.circles}`),i(s.selectAll(a).filter(o=>n.isTargetToShow(o.id))).style("opacity",null)}getWithOption(t){const n={Dimension:!0,EventRect:!0,Legend:!1,Subchart:!0,Transform:!1,Transition:!0,TrimXDomain:!0,UpdateXAxis:"UpdateXDomain",UpdateXDomain:!1,UpdateOrgXDomain:!1,TransitionForExit:"Transition",TransitionForAxis:"Transition",Y:!0};for(const[s,i]of Object.entries(n)){const a=G(i)?n[i]:i;n[s]=Ft(t,`with${s}`,a)}return n}initialOpacity(t){const n=this,{withoutFadeIn:s}=n.state;return n.getBaseValue(t)!==null&&s[t.id]?null:"0"}bindResize(){const t=this,{$el:n,config:s,state:i}=t,a=Ta(s.resize_timer),{resize_auto:o}=s,r=[];r.push(()=>K(s.onresize,t.api)),/^(true|parent)$/.test(o)&&r.push(()=>{i.resizing=!0,s.legend_show&&(t.updateSizes(),t.updateLegend()),t.api.flush(!1)}),r.push(()=>{K(s.onresized,t.api),i.resizing=!1}),r.forEach(l=>a.add(l)),t.resizeFunction=a,o==="parent"?(t.resizeFunction.resizeObserver=new ResizeObserver(t.resizeFunction.bind(t))).observe(n.chart.node().parentNode):B.addEventListener("resize",t.resizeFunction)}callPluginHook(t,...n){this.config.plugins.forEach(s=>{t==="$beforeInit"&&(s.$$=this,this.api.plugins.push(s)),s[t](...n)})}}ut(Ut.prototype,[Ia,Da,za,Ma,Xa,Va,Ya,Fa,ja,Ha,Za,qa,uo,Ka,Ja,io,ao,oo,ro,lo]);function fo(e){const t=this.config;let n,s,i;const a=()=>{const o=s.shift();if(o&&n&&bt(n)&&o in n)return n=n[o],a();if(!o)return n};Object.keys(t).forEach(o=>{n=e,s=o.split("_"),i=a(),H(i)&&(t[o]=i)}),this.api&&(this.state.orgConfig=e)}var po={resize(e){const t=this.internal,{config:n,state:s}=t;s.rendered&&(n.size_width=e?e.width:null,n.size_height=e?e.height:null,s.resizing=!0,this.flush(!1),t.resizeFunction())},flush(e){var t,n;const s=this.internal,{state:i,$el:{zoomResetBtn:a}}=s;i.rendered?(i.resizing?(t=s.brush)==null||t.updateResize():(n=s.axis)==null||n.setOrient(),a==null||a.style("display","none"),s.scale.zoom&&(i.current.zoomDomain=s.scale.zoom.domain()),s.scale.zoom=null,e?s.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):s.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1}),!i.resizing&&s.brush&&(s.brush.getSelection().call(s.brush.move),s.unselectRect()),i.current.zoomDomain&&(s.api.zoom(i.current.zoomDomain),i.current.zoomDomain=null)):s.initToRender(!0)},destroy(){var e;const t=this.internal,{$el:{chart:n,style:s,svg:i}}=t;if(ot(t)){t.callPluginHook("$willDestroy"),t.charts.splice(t.charts.indexOf(this),1),t.unbindAllEvents(),i.select("*").interrupt(),t.resizeFunction.clear(),(e=t.resizeFunction.resizeObserver)==null||e.disconnect(),B.removeEventListener("resize",t.resizeFunction),n.classed("bb",!1).style("position",null).selectChildren().remove(),s&&s.parentNode.removeChild(s),Object.keys(this).forEach(a=>{a==="internal"&&Object.keys(t).forEach(o=>{t[o]=null}),this[a]=null,delete this[a]});for(const a in this)this[a]=()=>{}}return null},config(e,t,n){const s=this.internal,{config:i,state:a}=s,o=e==null?void 0:e.replace(/\./g,"_");let r;return e&&o in i?H(t)?(i[o]=t,r=t,n&&this.flush()):r=i[o]:(arguments.length===0||vt(e))&&(r=a.orgConfig),r}},xo={color(e){return this.internal.color(e)}};const ns=function(e){const{targets:t}=this.internal.data;if(!it(e)){const n=Y(e)?e:[e];return t.filter(s=>n.some(i=>i===s.id))}return t};ut(ns,{shown:function(e){return this.internal.filterTargetsToShow(this.data(e))},values:function(e,t=!0){let n=null;if(e){const s=this.data(e);Y(s)&&(n=[],s.forEach(i=>{const a=i.values.map(o=>o.value);t?n=n.concat(a):n.push(a)}))}return n},names:function(e){return this.internal.updateDataAttributes("names",e)},colors:function(e){return this.internal.updateDataAttributes("colors",e)},axes:function(e){return this.internal.updateDataAttributes("axes",e)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}});var _o={data:ns};const mo=e=>{var t,n;return(n=(t=B).btoa)==null?void 0:n.call(t,encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(s,i)=>String.fromCharCode(+`0x${i}`)))};function yo(e,t,n){const{width:s,height:i}=t||n,a=new XMLSerializer,o=e.cloneNode(!0),r=sa(Yt(ct.styleSheets)).filter(h=>h.cssText).map(h=>h.cssText);o.setAttribute("xmlns",S.namespaces.xhtml),o.style.margin="0",o.style.padding="0",t.preserveFontStyle&&o.querySelectorAll("text").forEach(h=>{h.innerHTML=""});const l=a.serializeToString(o),c=ct.createElement("style");c.appendChild(ct.createTextNode(r.join(`
`)));const u=a.serializeToString(c),d=`<svg xmlns="${S.namespaces.svg}" width="${s}" height="${i}" 
		viewBox="0 0 ${n.width} ${n.height}" 
		preserveAspectRatio="${(t==null?void 0:t.preserveAspectRatio)===!1?"none":"xMinYMid meet"}">
			<foreignObject width="100%" height="100%">
				${u}
				${l.replace(/(url\()[^#]+/g,"$1")}
			</foreignObject></svg>`;return`data:image/svg+xml;base64,${mo(d)}`}function $o(e,t){const{top:n,left:s}=t,{x:i,y:a}=Pt(e,!0),{a:o,b:r,c:l,d:c,e:u,f:d}=e.getScreenCTM(),{width:h,height:g}=dt(e,!0);return{x:o*i+l*a+u-s,y:r*i+c*a+d-n+(g-Math.round(g/4)),width:h,height:g}}function bo(e){const{left:t,top:n}=dt(e),s=a=>a.textContent||a.childElementCount,i=[];return Yt(e.querySelectorAll("text")).filter(s).forEach(a=>{const o=r=>{const{fill:l,fontFamily:c,fontSize:u,textAnchor:d,transform:h}=B.getComputedStyle(r),{x:g,y:f,width:p,height:_}=$o(r,{left:t,top:n});return{[r.textContent]:{x:g,y:f,width:p,height:_,fill:l,fontFamily:c,fontSize:u,textAnchor:d,transform:h}}};if(a.childElementCount>1){const r=[];return Yt(a.querySelectorAll("tspan")).filter(s).forEach(l=>{i.push(o(l))}),r}else i.push(o(a))}),i}function vo(e,t){t.forEach(n=>{Object.keys(n).forEach(s=>{const{x:i,y:a,width:o,height:r,fill:l,fontFamily:c,fontSize:u,transform:d}=n[s];if(e.save(),e.font=`${u} ${c}`,e.fillStyle=l,d==="none")e.fillText(s,i,a);else{const h=d.replace(/(matrix|\(|\))/g,"").split(",");h.splice(4).every(g=>+g==0)?(h.push(i+o-o/4),h.push(a-r+r/3)):(h.push(i),h.push(a)),e.transform(...h),e.fillText(s,0,0)}e.restore()})})}var To={export(e,t){const n=this.internal,{state:s,$el:{chart:i,svg:a}}=n,{width:o,height:r}=s.current,l=ee(Object.create(null),{width:o,height:r,preserveAspectRatio:!0,preserveFontStyle:!1,mimeType:"image/png"},e),c=yo(i.node(),l,{width:o,height:r}),u=l.preserveFontStyle?bo(a.node()):[];if(t&&L(t)){const d=new Image;d.crossOrigin="Anonymous",d.onload=()=>{const h=ct.createElement("canvas"),g=h.getContext("2d");h.width=l.width||o,h.height=l.height||r,g.drawImage(d,0,0),u.length&&(vo(g,u),u.length=0),t.bind(this)(h.toDataURL(l.mimeType))},d.src=c}return c}},Ao={focus(e){const t=this.internal,{state:n}=t,s=t.mapToTargetIds(e),i=t.$el.svg.selectAll(t.selectorTargets(s.filter(t.isTargetToShow,t)));this.revert(),this.defocus(),i.classed(q.focused,!0).classed(q.defocused,!1),t.hasArcType()&&!n.hasRadar&&(t.expandArc(s),t.hasType("gauge")&&t.markOverlapped(e,t,`.${$t.gaugeValue}`)),t.toggleFocusLegend(s,!0),n.focusedTargetIds=s,n.defocusedTargetIds=n.defocusedTargetIds.filter(a=>s.indexOf(a)<0)},defocus(e){const t=this.internal,{state:n}=t,s=t.mapToTargetIds(e);t.$el.svg.selectAll(t.selectorTargets(s.filter(t.isTargetToShow,t))).classed(q.focused,!1).classed(q.defocused,!0),t.hasArcType(null,["polar"])&&(t.unexpandArc(s),t.hasType("gauge")&&t.undoMarkOverlapped(t,`.${$t.gaugeValue}`)),t.toggleFocusLegend(s,!1),n.focusedTargetIds=n.focusedTargetIds.filter(a=>s.indexOf(a)<0),n.defocusedTargetIds=s},revert(e){const t=this.internal,{config:n,state:s,$el:i}=t,a=t.mapToTargetIds(e);i.svg.selectAll(t.selectorTargets(a)).classed(q.focused,!1).classed(q.defocused,!1),t.hasArcType(null,["polar"])&&t.unexpandArc(a),n.legend_show&&(t.showLegend(a.filter(t.isLegendToShow.bind(t))),i.legend.selectAll(t.selectorLegends(a)).filter(function(){return(0,S.select)(this).classed(q.legendItemFocused)}).classed(q.legendItemFocused,!1)),s.focusedTargetIds=[],s.defocusedTargetIds=[]}},wo={legend:{show:function(e){const t=this.internal;t.showLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})},hide:function(e){const t=this.internal;t.hideLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})}}},So={load(e){const t=this.internal,{config:n}=t;e.xs&&t.addXs(e.xs),"names"in e&&this.data.names(e.names),"classes"in e&&Object.keys(e.classes).forEach(s=>{n.data_classes[s]=e.classes[s]}),"categories"in e&&t.axis.isCategorized()&&(n.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(s=>{n.data_axes[s]=e.axes[s]}),"colors"in e&&Object.keys(e.colors).forEach(s=>{n.data_colors[s]=e.colors[s]}),"unload"in e&&e.unload!==!1?t.unload(t.mapToTargetIds(e.unload===!0?null:e.unload),()=>{xn(()=>t.loadFromArgs(e))}):t.loadFromArgs(e)},unload(e){const t=this.internal;let n=e||{};vt(n)&&this.tooltip.hide(),Y(n)?n={ids:n}:G(n)&&(n={ids:[n]});const s=t.mapToTargetIds(n.ids);t.unload(s,()=>{t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.cache.remove(s),Hn.call(t,n.done,n.resizeAfter)})}};function ss(e,t,n){const s=this.internal,i=s.mapToTargetIds(t),a=s.state.hiddenTargetIds.map(l=>i.indexOf(l)>-1&&l).filter(Boolean);s.state.toggling=!0,s[`${e?"remove":"add"}HiddenTargetIds`](i);const o=s.$el.svg.selectAll(s.selectorTargets(i)),r=e?null:"0";e&&a.length&&(o.style("display",null),K(s.config.data_onshown,this,a)),s.$T(o).style("opacity",r,"important").call(Re,()=>{var l;!e&&a.length===0&&(o.style("display","none"),K((l=s.config)==null?void 0:l.data_onhidden,this,i)),o.style("opacity",r)}),n.withLegend&&s[`${e?"show":"hide"}Legend`](i),s.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),s.state.toggling=!1}var Ro={show(e,t={}){ss.call(this,!0,e,t)},hide(e,t={}){ss.call(this,!1,e,t)},toggle(e,t={}){const n=this.internal,s={show:[],hide:[]};n.mapToTargetIds(e).forEach(i=>s[n.isTargetToShow(i)?"hide":"show"].push(i)),s.show.length&&this.show(s.show,t),s.hide.length&&setTimeout(()=>this.hide(s.hide,t),0)}},Co={tooltip:{show:function(e){var t,n,s;const i=this.internal,{$el:a,config:o,state:{eventReceiver:r,hasFunnel:l,hasTreemap:c,inputType:u}}=i;let d,h;if(e.mouse&&(h=e.mouse),e.data){const{data:g}=e,f=(t=i.getYScaleById(g.id))==null?void 0:t(g.value);if((l||c)&&g.id){const p=i.selectorTarget(g.id,void 0,`.${st.shape}`);r.rect=a.main.select(p)}else i.isMultipleX()?h=[i.xx(g),f]:(o.tooltip_grouped||(h=[0,f]),d=(s=g.index)!=null?s:i.hasArcType()&&g.id?(n=i.getArcElementByIdOrIndex(g.id))==null?void 0:n.datum().index:i.getIndexByX(g.x))}else H(e.x)?d=i.getIndexByX(e.x):H(e.index)&&(d=e.index);(u==="mouse"?["mouseover","mousemove"]:["touchstart"]).forEach(g=>{i.dispatchEvent(g,d,h)})},hide:function(){var e,t,n;const s=this.internal,{state:{inputType:i},$el:{tooltip:a}}=s,o=a==null?void 0:a.datum();if(o){const{index:r}=JSON.parse(o.current)[0];(i==="mouse"?["mouseout"]:["touchend"]).forEach(l=>{s.dispatchEvent(l,r)})}i==="touch"&&s.callOverOutForTouch(),s.hideTooltip(!0),(e=s.hideGridFocus)==null||e.call(s),(t=s.unexpandCircles)==null||t.call(s),(n=s.expandBarTypeShapes)==null||n.call(s,!1)}}},Eo=Object.defineProperty,ko=(e,t,n)=>t in e?Eo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,is=(e,t,n)=>ko(e,typeof t!="symbol"?t+"":t,n);class Nt{constructor(t){is(this,"plugins",[]),is(this,"internal");const n=new Ut(this);this.internal=n,(function s(i,a,o){Object.keys(i).forEach(r=>{const l=L(i[r]),c=a!==o,u=ot(i[r]),d=u&&Object.keys(i[r]).length>0;l&&(!c&&d||c)?a[r]=i[r].bind(o):u&&!l?a[r]={}:a[r]=i[r],d&&s(i[r],a[r],o)})})(Nt.prototype,this,this),fo.call(n,t),n.beforeInit(),n.init()}}ut(Nt.prototype,[po,xo,_o,To,Ao,wo,So,Ro,Co]);function as(e=!1,t,n,s){const i=this,{config:a,$el:{main:o}}=i,r=a.data_selection_grouped,l=a.data_selection_isselectable.bind(i.api);a.data_selection_enabled&&o.selectAll(`.${st.shapes}`).selectAll(`.${st.shape}`).each(function(c){const u=(0,S.select)(this),{id:d,index:h}=c.data?c.data:c,g=i.getToggle(this,c).bind(i),f=r||!t||t.indexOf(d)>=0,p=!n||n.indexOf(h)>=0,_=u.classed(Q.SELECTED);u.classed(Ct.line)||u.classed(Te.area)||(e?f&&p&&l(c)&&!_?g(!0,u.classed(Q.SELECTED,!0),c,h):H(s)&&s&&_&&g(!1,u.classed(Q.SELECTED,!1),c,h):f&&p&&l(c)&&_&&g(!1,u.classed(Q.SELECTED,!1),c,h))})}var Lo={selected(e){const t=this.internal,n=[];return t.$el.main.selectAll(`.${st.shapes+t.getTargetSelectorSuffix(e)}`).selectAll(`.${st.shape}`).filter(function(){return(0,S.select)(this).classed(Q.SELECTED)}).each(s=>n.push(s)),n},select(e,t,n){const s=this.internal;as.bind(s)(!0,e,t,n)},unselect(e,t){const n=this.internal;as.bind(n)(!1,e,t)}};const os=function(e){var t;const n=this.internal,{axis:s,brush:i,config:a,scale:{x:o,subX:r},state:l}=n;let c;return a.subchart_show&&(c=e,Array.isArray(c)?(s.isTimeSeries()&&(c=c.map(d=>At.bind(n)(d))),n.withinRange(c,n.getZoomDomain("subX",!0),n.getZoomDomain("subX"))&&(l.domain=c,i.move(i.getSelection(),c.map(r)))):c=(t=l.domain)!=null?t:o.orgDomain()),c};ut(os,{show(){var e,t;const n=this.internal,{$el:{subchart:s},config:i}=n,a=i.subchart_show;if(!a){n.unbindZoomEvent(),i.subchart_show=!a,!s.main&&n.initSubchart();let o=s.main.selectAll(`.${D.target}`);n.data.targets.length!==o.size()&&(n.updateSizes(),n.updateTargetsForSubchart(n.data.targets),o=(e=s.main)==null?void 0:e.selectAll(`.${D.target}`)),o==null||o.style("opacity",null),(t=s.main)==null||t.style("display",null),this.resize()}},hide(){const e=this.internal,{$el:{subchart:{main:t}},config:n}=e;n.subchart_show&&(t==null?void 0:t.style("display"))!=="none"&&(n.subchart_show=!1,t.style("display","none"),this.resize())},toggle(){const e=this.internal,{config:t}=e;this.subchart[t.subchart_show?"hide":"show"]()},reset(){const e=this.internal,{brush:t}=e;t.clear(t.getSelection())}});var Po={subchart:os},kt=tt(9);const rs=function(e){var t;const n=this.internal,{axis:s,config:i,org:a,scale:o,state:r}=n,l=s.isCategorized();let c;if(i.zoom_enabled)if(c=e,Array.isArray(c)){if(s.isTimeSeries()&&(c=c.map(d=>At.bind(n)(d))),n.withinRange(c,n.getZoomDomain("zoom",!0),n.getZoomDomain("zoom"))){if(r.domain=c,c=n.getZoomDomainValue(c),n.api.tooltip.hide(),i.subchart_show){const d=o.zoom||o.x;n.brush.getSelection().call(n.brush.move,c.map(d))}else{const d=l?o.x.orgScale():a.xScale||o.x;n.updateCurrentZoomTransform(d,c)}n.setZoomResetButton()}}else c=n.zoom.getDomain();return(t=r.domain)!=null?t:c};ut(rs,{enable(e){const t=this.internal,{config:n}=t;/^(drag|wheel)$/.test(e)&&(n.zoom_type=e),n.zoom_enabled=!!e,t.zoom?e===!1&&t.bindZoomEvent(!1):(t.initZoom(),t.bindZoomEvent()),t.updateAndRedraw()},max(e){const t=this.internal,{config:n,org:{xDomain:s}}=t;return(e===0||e)&&(n.zoom_x_max=Rt("max",[s[1],e])),n.zoom_x_max},min(e){const t=this.internal,{config:n,org:{xDomain:s}}=t;return(e===0||e)&&(n.zoom_x_min=Rt("min",[s[0],e])),n.zoom_x_min},range(e){const t=this.zoom;if(V(e)){const{min:n,max:s}=e;H(n)&&t.min(n),H(s)&&t.max(s)}return{min:t.min(),max:t.max()}}});var Oo={zoom:rs,unzoom(){const e=this.internal,{config:t,$el:{eventRect:n,zoomResetBtn:s},scale:{zoom:i},state:a}=e;i&&(t.subchart_show?e.brush.getSelection().call(e.brush.move,null):e.zoom.updateTransformScale(kt.zoomIdentity),e.updateZoom(!0),s==null||s.style("display","none"),(0,kt.zoomTransform)(n.node())!==kt.zoomIdentity&&e.zoom.transform(n,kt.zoomIdentity),a.domain=void 0)}},Io={initBrush(){const e=this,{config:t,scale:n,$el:{subchart:s},state:i}=e,a=t.axis_rotated,o=t.subchart_size_height;let r,l,c;e.brush=(a?(0,we.brushY)():(0,we.brushX)()).handleSize(5),e.brush.on("start brush end",u=>{const{selection:d,sourceEvent:h,target:g,type:f}=u;f==="start"&&(e.state.inputType==="touch"&&e.hideTooltip(),l=h?d:null),/(start|brush)/.test(f)&&(f==="brush"&&h&&i.domain&&(l==null||l.forEach((p,_)=>{p!==d[_]&&(i.domain[_]=n.x.orgDomain()[_])})),e.redrawForBrush(f!=="start")),f==="end"&&(r=n.x.orgDomain()),g!=null&&g.handle&&(d===null?e.brush.handle.attr("display","none"):e.brush.handle.attr("display",null).attr("transform",(p,_)=>{const x=[d[_],o/2];return`translate(${a?x.reverse():x})`}))}),e.brush.updateResize=function(){c&&clearTimeout(c),c=setTimeout(()=>{const u=this.getSelection();r&&(0,we.brushSelection)(u.node())&&this.move(u,r.map(n.subX.orgScale()))},0)},e.brush.update=function(){var u;return this.extent()()[1].filter(h=>isNaN(h)).length===0&&((u=s.main)==null||u.select(`.${N.brush}`).call(this)),this},e.brush.scale=function(u){const d=t.subchart_size_height;let h=e.axis.getExtent();!h&&u.range?h=[[0,0],[u.range()[1],d]]:Y(h)&&(h=h.map((g,f)=>[g,f>0?d:f])),a&&h[1].reverse(),this.extent(h),this.update()},e.brush.getSelection=()=>s.main?s.main.select(`.${N.brush}`):(0,S.select)([])},initSubchart(){const e=this,{config:t,state:{clip:n,hasAxis:s},$el:{defs:i,svg:a,subchart:o,axis:r}}=e;if(!s)return;const l=t.subchart_show?null:"hidden",c=`${n.id}-subchart`,u=e.getClipPath(c);n.idSubchart=c,e.appendClip(i,c),e.initBrush(),o.main=a.append("g").classed(N.subchart,!0).attr("transform",e.getTranslate("context"));const{main:d}=o;d.style("visibility",l),d.append("g").attr("clip-path",u).attr("class",N.chart),["bar","line","bubble","candlestick","scatter"].forEach(g=>{const f=pt(/^(bubble|scatter)$/.test(g)?"circle":g);if(e.hasType(g)||e.hasTypeOf(f)){const p=d.select(`.${N.chart}`),_=N[`chart${f}s`];p.select(`.${_}`).empty()&&p.append("g").attr("class",_)}});const h=d.append("g").attr("clip-path",u).attr("class",N.brush).call(e.brush);t.subchart_showHandle&&e.addBrushHandle(h),r.subX=d.append("g").attr("class",N.axisX).attr("transform",e.getTranslate("subX")).attr("clip-path",t.axis_rotated?"":n.pathXAxis).style("visibility",t.subchart_axis_x_show?l:"hidden")},addBrushHandle(e){const t=this,{config:n}=t,s=n.axis_rotated,i=n.subchart_init_range,a="handle--custom",o=s?["M8.5 0 a6 6 0 0 0 -6 -6.5 H-2.5 a 6 6 0 0 0 -6 6.5 z m-5 -2 H-3.5 m7 -2 H-3.5z","M8.5 0 a6 -6 0 0 1 -6 6.5 H-2.5 a 6 -6 0 0 1 -6 -6.5z m-5 2 H-3.5 m7 2 H-3.5z"]:["M0 -8.5 A6 6 0 0 0 -6.5 -3.5 V2.5 A6 6 0 0 0 0 8.5 Z M-2 -3.5 V3.5 M-4 -3.5 V3.5z","M0 -8.5 A6 6 0 0 1 6.5 -3.5 V2.5 A6 6 0 0 1 0 8.5 Z M2 -3.5 V3.5 M4 -3.5 V3.5z"];t.brush.handle=e.selectAll(`.${a}`).data(s?[{type:"n"},{type:"s"}]:[{type:"w"},{type:"e"}]).enter().append("path").attr("class",a).attr("cursor",`${s?"ns":"ew"}-resize`).attr("d",r=>o[+/[se]/.test(r.type)]).attr("display",i?null:"none")},updateTargetsForSubchart(e){const t=this,{config:n,state:s,$el:{subchart:{main:i}}}=t;n.subchart_show&&(["bar","line","bubble","candlestick","scatter"].filter(a=>t.hasType(a)||t.hasTypeOf(pt(a))).forEach(a=>{const o=/^(bubble|scatter)$/.test(a),r=pt(o?"circle":a),l=t.getChartClass(r,!0),c=t.getClass(o?"circles":`${a}s`,!0),u=i.select(`.${N[`chart${`${r}s`}`]}`);if(o){const d=u.selectAll(`.${N.circles}`).data(e.filter(t[`is${pt(a)}Type`].bind(t))).attr("class",c);d.exit().remove(),d.enter().append("g").attr("class",c)}else{const d=u.selectAll(`.${N[`chart${r}`]}`).attr("class",l).data(e.filter(t[`is${r}Type`].bind(t))),h=d.enter().append("g").style("opacity","0").attr("class",l).append("g").attr("class",c);d.exit().remove(),a==="line"&&t.hasTypeOf("Area")&&h.append("g").attr("class",t.getClass("areas",!0))}}),i.selectAll(`.${N.brush} rect`).attr(n.axis_rotated?"width":"height",n.axis_rotated?s.width2:s.height2))},redrawSubchart(e,t,n){var s;const i=this,{config:a,$el:{subchart:{main:o}},state:r}=i,l=!!t;if(o.style("visibility",a.subchart_show?null:"hidden"),a.subchart_show&&(((s=r.event)==null?void 0:s.type)==="zoom"&&i.brush.update(),e)){const c=a.subchart_init_range;if(!En(i)&&i.brush.update(),Object.keys(n.type).forEach(u=>{const d=pt(u),h=i[`generateDraw${d}`](n.indices[u],!0);i[`update${d}`](l,!0),i[`redraw${d}`](h,l,!0)}),i.hasType("bubble")||i.hasType("scatter")){const{cx:u}=n.pos,d=i.updateCircleY(!0);i.updateCircle(!0),i.redrawCircle(u,d,l,void 0,!0)}!r.rendered&&c&&(r.domain=c,i.brush.move(i.brush.getSelection(),c.map(i.scale.x)))}},redrawForBrush(e=!0){var t;const n=this,{config:{subchart_onbrush:s,zoom_rescale:i},scale:a,state:o}=n;n.redraw({withTransition:!1,withY:i,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),e&&o.rendered&&s.bind(n.api)((t=o.domain)!=null?t:a.x.orgDomain())},transformContext(e,t){const n=this,{$el:{subchart:s},$T:i}=n,a=t!=null&&t.axisSubX?t.axisSubX:i(s.main.select(`.${N.axisX}`),e);s.main.attr("transform",n.getTranslate("context")),a.attr("transform",n.getTranslate("subX"))}},Do={initZoom(){const e=this;e.scale.zoom=null,e.generateZoom(),e.config.zoom_type==="drag"&&e.initZoomBehaviour()},bindZoomEvent(e=!0){const t=this,{config:n}=t;n.zoom_enabled&&e?!n.subchart_show&&t.bindZoomOnEventRect():e===!1&&(t.api.unzoom(),t.unbindZoomEvent())},generateZoom(){const e=this,{config:t,org:n,scale:s}=e,i=(0,kt.zoom)().duration(0).on("start",e.onZoomStart.bind(e)).on("zoom",e.onZoom.bind(e)).on("end",e.onZoomEnd.bind(e));i.orgScaleExtent=()=>{const a=t.zoom_extent||[1,10];return[a[0],Math.max(e.getMaxDataCount()/a[1],a[1])]},i.updateScaleExtent=function(){const a=Vt(e.scale.x.orgDomain())/Vt(e.getZoomDomain()),o=this.orgScaleExtent();return this.scaleExtent([o[0]*a,o[1]*a]),this},i.updateTransformScale=(a,o)=>{var r;const l=t.axis_rotated;(r=n.xScale)==null||r.range(s.x.range());const c=a[l?"rescaleY":"rescaleX"](n.xScale||s.x);if(c.domain().some(h=>/(Invalid Date|NaN)/.test(h.toString())))return;const u=e.trimXDomain(c.domain()),d=t.zoom_rescale;if(c.domain(u,n.xDomain),o){const h=c(s.x.domain()[0]),g=l?a.x:h,f=l?h:a.y;e.$el.eventRect.property("__zoom",kt.zoomIdentity.translate(g,f).scale(a.k))}s.zoom=e.getCustomizedXScale(c),e.axis.x.scale(s.zoom),d?(!n.xScale&&(n.xScale=s.x.copy()),s.x.domain(u)):n.xScale&&(s.x.domain(n.xScale.domain()),n.xScale=null)},i.getDomain=()=>{const a=s[s.zoom?"zoom":"subX"].domain();return e.axis.isCategorized()&&(a[1]-=2),a},e.zoom=i},onZoomStart(e){const t=this,{sourceEvent:n}=e;n&&(t.zoom.startEvent=n,t.state.zooming=!0,K(t.config.zoom_onzoomstart,t.api,e))},onZoom(e){const t=this,{config:n,scale:s,state:i,org:a}=t,{sourceEvent:o}=e,r=(e==null?void 0:e.transform)===kt.zoomIdentity;if(!n.zoom_enabled||t.filterTargetsToShow(t.data.targets).length===0||!s.zoom&&(o==null?void 0:o.type.indexOf("touch"))>-1&&(o==null?void 0:o.touches.length)===1)return;e.sourceEvent&&(i.zooming=!0,i.domain=void 0);const l=(o==null?void 0:o.type)==="mousemove",c=(o==null?void 0:o.wheelDelta)<0,{transform:u}=e;!l&&c&&s.x.domain().every((f,p)=>f!==a.xDomain[p])&&s.x.domain(a.xDomain),t.zoom.updateTransformScale(u,n.zoom_type==="wheel"&&o);const d=n.transition_duration>0&&!n.subchart_show&&(i.dragging||r||!e.sourceEvent),h=o&&l&&n.zoom_type!=="wheel",g=()=>{var f;t.redraw({withTransition:d,withY:n.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),t.state.cancelClick=l,!r&&K(n.zoom_onzoom,t.api,(f=t.state.domain)!=null?f:t.zoom.getDomain())};h?On(t.state,g):g()},onZoomEnd(e){var t,n;const s=this,{config:i,state:a}=s;let{startEvent:o}=s.zoom,r=e==null?void 0:e.sourceEvent;const l=(e==null?void 0:e.transform)===kt.zoomIdentity;(o==null?void 0:o.type.indexOf("touch"))>-1&&(o=o.changedTouches[0],r=(t=r==null?void 0:r.changedTouches)==null?void 0:t[0]),!(i.zoom_type==="drag"&&r&&o.clientX===r.clientX&&o.clientY===r.clientY)&&(a.zooming=!1,s.redrawEventRect(),s.updateZoom(),!l&&(r||a.dragging)&&K(i.zoom_onzoomend,s.api,(n=s.state.domain)!=null?n:s.zoom.getDomain()))},updateZoom(e){const t=this,{subX:n,x:s,zoom:i}=t.scale;if(i){const a=i.domain(),o=n.domain(),r=.015,l=t.config.axis_x_inverted?(a[0]>=o[0]||a[0]+r>=o[0])&&(o[1]>=a[1]||o[1]>=a[1]+r):(a[0]<=o[0]||a[0]-r<=o[0])&&(o[1]<=a[1]||o[1]<=a[1]-r);(e||l)&&(t.axis.x.scale(n),s.domain(n.orgDomain()),t.scale.zoom=null)}},updateCurrentZoomTransform(e,t){const n=this,{$el:{eventRect:s},config:i}=n,a=i.axis_rotated,o=[-e(t[0]),0],r=kt.zoomIdentity.scale(e.range()[1]/(e(t[1])-e(t[0]))).translate(...a?o.reverse():o);s.call(n.zoom.transform,r)},bindZoomOnEventRect(){var e;const t=this,{config:n,$el:{eventRect:s,svg:i}}=t,a=n.zoom_type==="drag"?t.zoomBehaviour:t.zoom;B.GestureEvent&&/^((?!chrome|android|mobile).)*safari/i.test((e=B.navigator)==null?void 0:e.userAgent)&&i.on("wheel",()=>{}),s==null||s.call(a).on("dblclick.zoom",null)},initZoomBehaviour(){const e=this,{config:t,state:n}=e,s=t.axis_rotated;let i=0,a=0,o,r;const l={axis:s?"y":"x",attr:s?"height":"width",index:s?1:0};e.zoomBehaviour=(0,Un.drag)().clickDistance(4).on("start",function(c){r=e.scale.zoom?null:e.axis.getExtent(),n.event=c,e.setDragStatus(!0),e.unselectRect(),o||(o=e.$el.main.append("rect").attr("clip-path",n.clip.path).attr("class",ze.zoomBrush).attr("width",s?n.width:0).attr("height",s?0:n.height)),i=Tt(c,this)[l.index],r&&(i<r[0]?i=r[0]:i>r[1]&&(i=r[1])),a=i,o.attr(l.axis,i).attr(l.attr,0),e.onZoomStart(c)}).on("drag",function(c){a=Tt(c,this)[l.index],r&&(a>r[1]?a=r[1]:a<r[0]&&(a=r[0])),o.attr(l.axis,Math.min(i,a)).attr(l.attr,Math.abs(a-i))}).on("end",c=>{const u=e.scale.zoom||e.scale.x;n.event=c,o.attr(l.axis,0).attr(l.attr,0),i>a&&([i,a]=[a,i]),i<0&&(a+=Math.abs(i),i=0),i!==a&&e.api.zoom([i,a].map(d=>u.invert(d))),e.setDragStatus(!1)})},setZoomResetButton(){const e=this,{config:t,$el:n}=e,s=t.zoom_resetButton;s&&t.zoom_type==="drag"&&(n.zoomResetBtn?n.zoomResetBtn.style("display",null):n.zoomResetBtn=e.$el.chart.append("div").classed(D.button,!0).append("span").on("click",function(){L(s.onclick)&&s.onclick.bind(e.api)(this),e.api.unzoom()}).classed(ze.buttonZoomReset,!0).text(s.text||"Reset Zoom"))},getZoomTransform(){const e=this,{$el:{eventRect:t}}=e;return t!=null&&t.node()?(0,kt.zoomTransform)(t.node()):{k:1}}},zo={drag(e){const t=this,{config:n,state:s,$el:{main:i}}=t,a=n.data_selection_grouped,o=n.interaction_enabled&&n.data_selection_isselectable;if(t.hasArcType()||!n.data_selection_enabled||n.zoom_enabled&&!t.zoom.altDomain||!n.data_selection_multiple)return;const[r,l]=s.dragStart||[0,0],[c,u]=e,d=Math.min(r,c),h=Math.max(r,c),g=a?s.margin.top:Math.min(l,u),f=a?s.height:Math.max(l,u),p=()=>{!t||!t.$el||!t.$el.main||(i.select(`.${Gt.dragarea}`).attr("x",d).attr("y",g).attr("width",h-d).attr("height",f-g),i.selectAll(`.${st.shapes}`).selectAll(`.${st.shape}`).filter(_=>o==null?void 0:o.bind(t.api)(_)).each(function(_,x){const m=(0,S.select)(this),y=m.classed(Q.SELECTED),$=m.classed(Gt.INCLUDED);let v=!1,b;if(m.classed(ft.circle)){const T=+m.attr("cx")*1,R=+m.attr("cy")*1;b=t.togglePoint,v=d<T&&T<h&&g<R&&R<f}else if(m.classed(yt.bar)){const{x:T,y:R,width:C,height:A}=Rn(this);b=t.togglePath,v=!(h<T||T+C<d)&&!(f<R||R+A<g)}else return;v^$&&(m.classed(Gt.INCLUDED,!$),m.classed(Q.SELECTED,!y),b.call(t,!y,m,_,x))}))};On(t.state,p)},dragstart(e){const t=this,{config:n,state:s,$el:{main:i}}=t;t.hasArcType()||!n.data_selection_enabled||(s.dragStart=e,i.select(`.${D.chart}`).append("rect").attr("class",Gt.dragarea).style("opacity","0.1"),t.setDragStatus(!0))},dragend(){const e=this,{config:t,$el:{main:n},$T:s}=e;e.hasArcType()||!t.data_selection_enabled||(s(n.select(`.${Gt.dragarea}`)).style("opacity","0").remove(),n.selectAll(`.${st.shape}`).classed(Gt.INCLUDED,!1),e.setDragStatus(!1))}},Fo=Object.defineProperty,Mo=Object.defineProperties,Xo=Object.getOwnPropertyDescriptors,ls=Object.getOwnPropertySymbols,No=Object.prototype.hasOwnProperty,Bo=Object.prototype.propertyIsEnumerable,cs=(e,t,n)=>t in e?Fo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Go=(e,t)=>{for(var n in t||(t={}))No.call(t,n)&&cs(e,n,t[n]);if(ls)for(var n of ls(t))Bo.call(t,n)&&cs(e,n,t[n]);return e},Vo=(e,t)=>Mo(e,Xo(t)),Yo=Vo(Go({},zo),{selectPoint(e,t,n){const s=this,{config:i,$el:{main:a},$T:o}=s,r=i.axis_rotated,l=(r?s.circleY:s.circleX).bind(s),c=(r?s.circleX:s.circleY).bind(s),u=s.pointSelectR.bind(s);K(i.data_onselected,s.api,t,e.node()),o(a.select(`.${Q.selectedCircles}${s.getTargetSelectorSuffix(t.id)}`).selectAll(`.${Q.selectedCircle}-${n}`).data([t]).enter().append("circle").attr("class",()=>s.generateClass(Q.selectedCircle,n)).attr("cx",l).attr("cy",c).attr("stroke",s.color).attr("r",d=>s.pointSelectR(d)*1.4)).attr("r",u)},unselectPoint(e,t,n){const s=this,{config:i,$el:{main:a},$T:o}=s;K(i.data_onunselected,s.api,t,e==null?void 0:e.node()),o(a.select(`.${Q.selectedCircles}${s.getTargetSelectorSuffix(t.id)}`).selectAll(`.${Q.selectedCircle}-${n}`)).attr("r",0).remove()},togglePoint(e,t,n,s){this[`${e?"":"un"}selectPoint`](t,n,s)},selectPath(e,t){const n=this,{config:s}=n;K(s.data_onselected,n.api,t,e.node()),s.interaction_brighten&&e.style("filter","brightness(1.25)")},unselectPath(e,t){const n=this,{config:s}=n;K(s.data_onunselected,n.api,t,e.node()),s.interaction_brighten&&e.style("filter",null)},togglePath(e,t,n,s){this[`${e?"":"un"}selectPath`](t,n,s)},getToggle(e,t){const n=this;return e.nodeName==="path"?n.togglePath:n.isStepType(t)?()=>{}:n.togglePoint},toggleShape(e,t,n){var s;const i=this,{config:a,$el:{main:o}}=i;if(a.data_selection_enabled&&a.data_selection_isselectable.bind(i.api)(t)){const r=(0,S.select)(e),l=r.classed(Q.SELECTED),c=i.getToggle(e,t).bind(i);let u;if(!a.data_selection_multiple){const d=(s=i.isPointFocusOnly)==null?void 0:s.call(i);let h=`.${d?Q.selectedCircles:st.shapes}`;a.data_selection_grouped&&(h+=i.getTargetSelectorSuffix(t.id)),o.selectAll(h).selectAll(d?`.${Q.selectedCircle}`:`.${st.shape}.${Q.SELECTED}`).classed(Q.SELECTED,!1).each(function(g){const f=(0,S.select)(this);u=f,c(!1,f,g,g.index)})}(!u||u.node()!==r.node())&&(r.classed(Q.SELECTED,!l),c(!l,r,t,n))}}}),jo={data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:()=>!0,data_selection_multiple:!0,data_selection_draggable:!1,data_onselected:()=>{},data_onunselected:()=>{}},Wo={subchart_show:!1,subchart_showHandle:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_format:void 0,subchart_axis_x_tick_text_show:!0,subchart_init_range:void 0,subchart_onbrush:()=>{}},Ho={zoom_enabled:!1,zoom_type:"wheel",zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0};let ds=()=>(ut(Ut.prototype,Yo),ut(Nt.prototype,Lo),jt.setOptions([jo]),(ds=()=>!0)()),us=()=>(ut(Ut.prototype,Io),ut(Nt.prototype,Po),jt.setOptions([Wo]),(us=()=>!0)()),hs=()=>(ut(Ut.prototype,Do),ut(Nt.prototype,Oo),jt.setOptions([Ho]),(hs=()=>!0)());function gs(e,t,n){const{config:s}=e,i=(a,o)=>{const r=I(o)?o:o===!1?void 0:null;r!==null&&(s[`axis_${a}_${t}`]=r)};H(n)&&(bt(n)?Object.keys(n).forEach(a=>{i(a,n[a])}):(I(n)||n===!1)&&["y","y2"].forEach(a=>{i(a,n)}),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function fs(e,t){const{config:n}=e;return{x:n[`axis_x_${t}`],y:n[`axis_y_${t}`],y2:n[`axis_y2_${t}`]}}var Uo={axis:{labels:function(e){const t=this.internal;let n;return e&&(Object.keys(e).forEach(s=>{t.axis.setLabelText(s,e[s])}),t.axis.updateLabels()),["x","y","y2"].forEach(s=>{const i=t.axis.getLabelText(s);i&&(!n&&(n={}),n[s]=i)}),n},min:function(e){const t=this.internal;return M(e)||e===!1?gs(t,"min",e):fs(t,"min")},max:function(e){const t=this.internal;return M(e)||e===!1?gs(t,"max",e):fs(t,"max")},range:function(e){const{axis:t}=this;if(arguments.length){const{min:n,max:s}=e;H(s)&&t.max(s),H(n)&&t.min(n)}else return{max:t.max(),min:t.min()}}}},Zo={category(e,t){const n=this.internal,{config:s}=n;return arguments.length>1&&(s.axis_x_categories[e]=t,n.redraw()),s.axis_x_categories[e]},categories(e){const t=this.internal,{config:n}=t;if(!e||!Array.isArray(e)){const s=n.axis_x_categories;return vt(s)?Object.values(t.data.xs)[0]:s}return n.axis_x_categories=e,t.redraw(),n.axis_x_categories}},qo={flow(e){const t=this.internal;let n;(e.json||e.rows||e.columns)&&t.convertData(e,i=>{n=i,s()});function s(){let i,a=0,o=0,r,l;if(t.state.redrawing||!n||!xe())return;const c=[],u=t.getMaxDataCount(),d=t.convertDataToTargets(n,!0),h=t.axis.isTimeSeries();t.data.targets.forEach(p=>{let _=!1;for(let x=0;x<d.length;x++)if(p.id===d[x].id){_=!0,p.values[p.values.length-1]&&(o=p.values[p.values.length-1].index+1),a=d[x].values.length;for(let m=0;m<a;m++)d[x].values[m].index=o+m,h||(d[x].values[m].x=o+m);p.values=p.values.concat(d[x].values),d.splice(x,1);break}!_&&c.push(p.id)}),t.data.targets.forEach(p=>{for(let _=0;_<c.length;_++)if(p.id===c[_]){o=p.values[p.values.length-1].index+1;for(let x=0;x<a;x++)p.values.push({id:p.id,index:o+x,x:h?t.getOtherTargetX(o+x):o+x,value:null})}}),t.data.targets.length&&d.forEach(p=>{const _=[];for(let x=t.data.targets[0].values[0].index;x<o;x++)_.push({id:p.id,index:x,x:h?t.getOtherTargetX(x):x,value:null});p.values.forEach(x=>{x.index+=o,h||(x.x+=o)}),p.values=_.concat(p.values)}),t.data.targets=t.data.targets.concat(d);const g=t.data.targets[0],f=g.values[0];H(e.to)?(a=0,l=h?At.call(t,e.to):e.to,g.values.forEach(p=>{p.x<l&&a++})):H(e.length)&&(a=e.length),u?u===1&&h&&(r=(g.values[g.values.length-1].x-f.x)/2,i=[new Date(+f.x-r),new Date(+f.x+r)]):(h?r=g.values.length>1?g.values[g.values.length-1].x-f.x:f.x-t.getXDomain(t.data.targets)[0]:r=1,i=[f.x-r,f.x]),i&&t.updateXDomain(null,!0,!0,!1,i),t.updateTargets(t.data.targets),t.redraw({flow:{index:f.index,length:a,duration:M(e.duration)?e.duration:t.config.transition_duration,done:e.done,orgDataCount:u},withLegend:!0,withTransition:u>1,withTrimXDomain:!1,withUpdateXAxis:!0})}}};function en(e,t){const n=this.internal,{config:s}=n,i=s.transition_duration&&xe(),a=`grid_${t}_lines`;return e&&(s[a]=e,n.updateGrid(),n.redrawGrid(i)),s[a]}function ps(e,t){const n=`grid_${t}_lines`;return en.bind(this)(this.internal.config[n].concat(e||[]),t)}function xs(e,t){this.internal.removeGridLines(e,t)}const _s=function(e){return en.bind(this)(e,"x")};ut(_s,{add(e){return ps.bind(this)(e,"x")},remove(e){return xs.bind(this)(e,!0)}});const ms=function(e){return en.bind(this)(e,"y")};ut(ms,{add(e){return ps.bind(this)(e,"y")},remove(e){return xs.bind(this)(e,!1)}});var Ko={xgrids:_s,ygrids:ms},Jo={groups(e){const t=this.internal,{config:n}=t;return it(e)||(n.data_groups=e,t.redraw()),n.data_groups}};function ys(e,t=!1){const n=this.internal,{config:s}=n,i=s.transition_duration&&xe();return e?(s.regions=t?s.regions.concat(e):e,n.updateRegion(),n.redrawRegion(i),t?s.regions:e):s.regions}const $s=function(e){return ys.bind(this)(e)};ut($s,{add:function(e){return ys.bind(this)(e,!0)},remove:function(e){const t=this.internal,{config:n,$T:s}=t,i=e||{},a=Ft(i,"classes",[fe.region]);let o=t.$el.main.select(`.${fe.regions}`).selectAll(a.map(r=>`.${r}`));return s(o).style("opacity","0").remove(),o=n.regions,Object.keys(i).length?(o=o.filter(r=>{let l=!1;return r.class?(r.class.split(" ").forEach(c=>{a.indexOf(c)>=0&&(l=!0)}),!l):!0}),n.regions=o):n.regions=[],o}});var Qo={regions:$s},tr={x(e){const t=this.internal,{axis:n,data:s}=t,i=n.isCustomX()&&n.isCategorized();return Y(e)&&(i?this.categories(e):(t.updateTargetX(s.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),i?this.categories():s.xs},xs(e){const t=this.internal;return V(e)&&(t.updateTargetXs(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs}},se=tt(10),er=Object.defineProperty,nr=(e,t,n)=>t in e?er(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Le=(e,t,n)=>nr(e,typeof t!="symbol"?t+"":t,n);class sr{constructor(t){Le(this,"owner"),Le(this,"config"),Le(this,"scale"),Le(this,"charSize",{});const n=Ht(),{config:s,params:i}=t;this.owner=t,this.config=s,this.scale=n,(s.noTransition||!i.config.transition_duration)&&(s.withoutTransition=!0),s.range=this.scaleExtent((i.orgXScale||n).range())}getSizeFor1Char(t,n,s=!0){const i={w:5.5,h:11.5};return this.charSize[t]&&s?this.charSize[t]:(!n.empty()&&n.text("0").call(a=>{try{const{width:o,height:r}=Pt(a.node(),!0);o&&r&&(i.w=o,i.h=r)}finally{a.text("")}}),this.charSize[t]=i,i)}getTickTransformSetter(t){const{config:n}=this,s=t==="x"?i=>`translate(${i+n.tickOffset},0)`:i=>`translate(0,${i})`;return(i,a)=>{i.attr("transform",o=>{const r=a(o);return M(o)?s(r):null})}}scaleExtent(t){const n=t[0],s=t[t.length-1];return n<s?[n,s]:[s,n]}generateTicks(t,n){const{tickStepSize:s}=this.owner.params,[i,a]=t.domain();let o=[];if(n&&s){let r=Math.round(i);for(;r<=a;)o.push(r),r+=s}else if(t.ticks){const{tickArguments:r}=this.config;if(t.type==="log"&&!r){const l=Ht("_log").domain([i>0?i:1,a]).range(t.range());o=l.ticks();for(let c=a.toFixed().length;o.length>15;c--)o=l.ticks(c);o.splice(0,1,i),o.splice(o.length-1,1,a)}else o=t.ticks(...this.config.tickArguments||[]);o=o.map(l=>G(l)&&I(l)&&!isNaN(l)&&Math.round(l*10)/10||l)}return o}copyScale(){const t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t.type=this.scale.type,t}textFormatted(t){const n=this.config.tickFormat,s=/\d+\.\d+0{5,}\d$/.test(t)?+String(t).replace(/0+\d$/,""):t,i=n?n(s):s;return H(i)?i:""}transitionise(t){const{config:n}=this;let s=t;if(n.withoutTransition)s=t.interrupt();else if(n.transition||!this.owner.params.noTransition)try{s=t.transition(n.transition)}catch(i){}return s}}var ir=Object.defineProperty,ar=(e,t,n)=>t in e?ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,me=(e,t,n)=>ar(e,typeof t!="symbol"?t+"":t,n);class or{constructor(t={}){me(this,"helper"),me(this,"config"),me(this,"params"),me(this,"g"),me(this,"generatedTicks");const n={innerTickSize:6,outerTickSize:t.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:t.noTransition};n.tickLength=Math.max(n.innerTickSize,0)+n.tickPadding,this.config=n,this.params=t,this.helper=new sr(this)}create(t){const n=this,{config:s,helper:i,params:a}=n,{scale:o}=i,{orient:r}=s,l=this.splitTickText.bind(n),c=/^(left|right)$/.test(r),u=/^(top|bottom)$/.test(r),d=i.getTickTransformSetter(u?"x":"y"),h=d===i.axisX?"y":"x",g=/^(top|left)$/.test(r)?-1:1,f=a.tickTextRotate;this.config.range=o.rangeExtent?o.rangeExtent():i.scaleExtent((a.orgXScale||o).range());const{innerTickSize:p,tickLength:_,range:x}=s,m=a.id,y=m&&/^(x|y|y2)$/.test(m)?a.config[`axis_${m}_tick_text_position`]:{x:0,y:0},$=m==="subX"?"subchart_axis_x":`axis_${m}`,v=a.config[`${$}_show`],b={tick:v?a.config[`${$}_tick_show`]:!1,text:v?a.config[`${$}_tick_text_show`]:!1},T=a.config.axis_evalTextSize;let R;t.each(function(){const C=(0,S.select)(this);let A=this.__chart__||o,w=i.copyScale();R=C,this.__chart__=w,s.tickOffset=a.isCategory?(w(1)-w(0))/2:0;const P=C.selectAll(".domain").data([0]);if(P.enter().append("path").attr("class","domain").merge(P).attr("d",()=>{const E=s.outerTickSize*g;return u?`M${x[0]},${E}V0H${x[1]}V${E}`:`M${E},${x[0]}H0V${x[1]}H${E}`}),b.tick||b.text){const E=s.tickValues||i.generateTicks(w,c||a.config.axis_rotated);n.generatedTicks=E;let O=C.selectAll(".tick").data(E,w);const z=O.enter().insert("g",".domain").attr("class","tick"),U=O.exit().remove();O=z.merge(O),b.tick&&z.append("line"),b.text&&z.append("text");const j=O.select("text"),ht=[];let et={w:0,h:0};L(T)&&(et=T.bind(n.params.owner.api)(j.node(),m),this.classList.contains(D.dummy)&&(this.sizeFor1Char=et)),(!et||et.w===0||et.h===0)&&(et=n.helper.getSizeFor1Char(r,j,!!T));let wt=j.selectAll("tspan").data((gt,Bt)=>{const qt=a.tickMultiline?l(gt,w,E,c,et.w):Y(i.textFormatted(gt))?i.textFormatted(gt).concat():[i.textFormatted(gt)];return ht[Bt]=qt.length,qt.map(Kt=>({index:Bt,splitted:Kt}))});wt.exit().remove(),wt=wt.enter().append("tspan").merge(wt).text(gt=>gt.splitted),wt.attr("x",u?0:_*g).attr("dx",(()=>{let gt=0;return/(top|bottom)/.test(r)&&f&&(gt=8*Math.sin(Math.PI*(f/180))*(r==="top"?-1:1)),gt+(y.x||0)})()).attr("dy",(gt,Bt)=>{const qt=".71em";let Kt=0;return r!=="top"&&(Kt=et.h,Bt===0&&(Kt=c?-((ht[gt.index]-1)*(et.h/2)-3):y.y===0?qt:0)),I(Kt)&&y.y?Kt+y.y:Kt||qt});const he=O.select("line"),ye=O.select("text");if(z.select("line").attr(`${h}2`,p*g),z.select("text").attr(h,_*g),n.setTickLineTextPosition(he,ye,et),a.tickTitle){const gt=ye.select("title");(gt.empty()?ye.append("title"):gt).text(Bt=>a.tickTitle[Bt])}if(w.bandwidth){const gt=w,Bt=gt.bandwidth()/2;A=qt=>gt(qt)+Bt,w=A}else A.bandwidth?A=w:d(U,w);O=a.owner.state.flowing?i.transitionise(O):a.owner.$T(O),d(z,A),d(O.style("opacity",null),w)}}),this.g=R}getGeneratedTicks(t){var n;const s=((n=this.generatedTicks)==null?void 0:n.length)-1;let i=this.generatedTicks;if(s>t){const a=Math.round(s/t+.1);i=this.generatedTicks.map((o,r)=>r%a===0?o:null).filter(o=>o!==null).splice(0,t)}return i}getTickXY(){const{config:t}=this,n={x:0,y:0};return this.params.isCategory&&(n.x=t.tickCentered?0:t.tickOffset,n.y=t.tickCentered?t.tickOffset:0),n}getTickSize(t){const{scale:n}=this.helper,{config:s}=this,{innerTickSize:i,range:a}=s,o=n(t)+(s.tickCentered?0:s.tickOffset);return a[0]<o&&o<a[1]?i:0}setTickLineTextPosition(t,n,s){const i=this.getTickXY(),{innerTickSize:a,orient:o,tickLength:r,tickOffset:l}=this.config,c=this.params.id,u=this.params.tickTextRotate,d=6,h=s.h/2-d,g=y=>{const $=["start","end"];return o==="top"&&$.reverse(),y?$[y>0?0:1]:"middle"},f=y=>y?`rotate(${y})`:null,p=y=>{const $=y/(o==="bottom"?15:23);return y?11.5-2.5*$*(y>0?1:-1):r},{config:{axis_rotated:_,axis_x_tick_text_inner:x}}=this.params.owner,m=this.params.config[`axis_${c}_tick_inner`];switch(o){case"bottom":t.attr("x1",i.x).attr("x2",i.x).attr("y2",y=>this.getTickSize.bind(this)(y)*(m?-1:1)),n.attr("x",0).attr("y",p(u)).style("text-anchor",g(u)).style("text-anchor",(y,$,{length:v})=>!_&&$===0&&(x===!0||x.first)?"start":!_&&$===v-1&&(x===!0||x.last)?"end":g(u)).attr("transform",f(u));break;case"top":t.attr("x2",0).attr("y2",m?a:-a),n.attr("x",0).attr("y",-(p(u)+h+d)).style("text-anchor",g(u)).attr("transform",f(u));break;case"left":t.attr("x2",m?a:-a).attr("y1",i.y).attr("y2",i.y),n.attr("x",-r).attr("y",l+(_?h/4:h)).style("text-anchor","end");break;case"right":t.attr("x2",m?-a:a).attr("y2",0),n.attr("x",r).attr("y",h).style("text-anchor","start")}}splitTickText(t,n,s,i,a){const{params:o}=this,r=this.helper.textFormatted(t),l=G(r)&&r.indexOf(`
`)>-1?r.split(`
`):[];if(l.length)return l;if(Y(r))return r;let c=o.tickWidth;(!c||c<=0)&&(c=i?95:o.isCategory?(o.isInverted?n(s[0])-n(s[1]):n(s[1])-n(s[0]))-12:110);function u(d,h){let g,f,p;for(let _=1;_<h.length;_++)if(h.charAt(_)===" "&&(f=_),g=h.substr(0,_+1),p=a*g.length,c<p)return u(d.concat(h.substr(0,f||_)),h.slice(f?f+1:_));return d.concat(h)}return u(l,String(r))}scale(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale}orient(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?String(t):"bottom",this):this.config.orient}tickFormat(t){const{config:n}=this;return arguments.length?(n.tickFormat=t,this):n.tickFormat}tickCentered(t){const{config:n}=this;return arguments.length?(n.tickCentered=t,this):n.tickCentered}tickOffset(){return this.config.tickOffset}tickInterval(t){var n;const{outerTickSize:s,tickOffset:i,tickValues:a}=this.config;let o;if(this.params.isCategory)o=i*2;else{const r=(n=this.params.owner.scale.zoom)!=null?n:this.helper.scale;o=(this.g.select("path.domain").node().getTotalLength()-s*2)/(t||this.g.selectAll("line").size());const c=a?a.map((u,d,h)=>{const g=d+1;return g<h.length?r(h[g])-r(u):null}).filter(Boolean):[];o=Math.min(...c,o)}return o===1/0?0:o}ticks(...t){const{config:n}=this;return t.length?(n.tickArguments=Yt(t),this):n.tickArguments}tickCulling(t){const{config:n}=this;return arguments.length?(n.tickCulling=t,this):n.tickCulling}tickValues(t){const{config:n}=this;if(L(t))n.tickValues=()=>t(this.helper.scale.domain());else{if(!arguments.length)return n.tickValues;n.tickValues=t}return this}setTransition(t){return this.config.transition=t,this}}var rr=Object.defineProperty,lr=(e,t,n)=>t in e?rr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ot=(e,t,n)=>lr(e,typeof t!="symbol"?t+"":t,n),cr={getAxisInstance:function(){return this.axis||new dr(this)}};class dr{constructor(t){Ot(this,"owner"),Ot(this,"x"),Ot(this,"subX"),Ot(this,"y"),Ot(this,"y2"),Ot(this,"axesList",{}),Ot(this,"tick",{x:null,y:null,y2:null}),Ot(this,"xs",[]),Ot(this,"orient",{x:"bottom",y:"left",y2:"right",subX:"bottom"}),this.owner=t,this.setOrient()}getAxisClassName(t){return`${rt.axis} ${rt[`axis${pt(t)}`]}`}isHorizontal(t,n){const s=t.config.axis_rotated;return n?s:!s}isCategorized(){const{config:t,state:n}=this.owner;return t.axis_x_type.indexOf("category")>=0||n.hasRadar}isCustomX(){const{config:t}=this.owner;return!this.isTimeSeries()&&(t.data_x||ot(t.data_xs))}isTimeSeries(t="x"){return this.owner.config[`axis_${t}_type`]==="timeseries"}isLog(t="x"){return this.owner.config[`axis_${t}_type`]==="log"}isTimeSeriesY(){return this.isTimeSeries("y")}getAxisType(t="x"){let n="linear";return this.isTimeSeries(t)?n=this.owner.config.axis_x_localtime?"time":"utc":this.isLog(t)&&(n="log"),n}getExtent(){const t=this.owner,{config:n,scale:s}=t;let i=n.axis_x_extent;if(i){if(L(i))i=i.bind(t.api)(t.getXDomain(t.data.targets),s.subX);else if(this.isTimeSeries()&&i.every(isNaN)){const a=At.bind(t);i=i.map(o=>s.subX(a(o)))}}return i}init(){const t=this.owner,{config:n,$el:{main:s,axis:i},state:{clip:a}}=t,o=["x","y"];n.axis_y2_show&&o.push("y2"),o.forEach(r=>{const l=this.getAxisClassName(r);i[r]=s.append("g").attr("class",l).attr("clip-path",()=>{let c=null;return r==="x"?c=a.pathXAxis:r==="y"&&(c=a.pathYAxis),c}).attr("transform",t.getTranslate(r)).style("visibility",n[`axis_${r}_show`]?null:"hidden"),this.generateAxes(r)})}setOrient(){const t=this.owner,{axis_rotated:n,axis_y_inner:s,axis_y2_inner:i}=t.config;this.orient={x:n?"left":"bottom",y:n?s?"top":"bottom":s?"right":"left",y2:n?i?"bottom":"top":i?"left":"right",subX:n?"left":"bottom"}}generateAxes(t){const n=this.owner,{config:s}=n,i=[],a=s[`axis_${t}_axes`],o=s.axis_rotated;let r;t==="x"?r=o?se.axisLeft:se.axisBottom:t==="y"?r=o?se.axisBottom:se.axisLeft:t==="y2"&&(r=o?se.axisTop:se.axisRight),a.length&&a.forEach(l=>{const c=l.tick||{},u=n.scale[t].copy();l.domain&&u.domain(l.domain),i.push(r(u).ticks(c.count).tickFormat(L(c.format)?c.format.bind(n.api):(d=>d)).tickValues(c.values).tickSizeOuter(c.outer===!1?0:6))}),this.axesList[t]=i}updateAxes(){const t=this.owner,{config:n,$el:{main:s},$T:i}=t;Object.keys(this.axesList).forEach(a=>{const o=n[`axis_${a}_axes`],r=t.scale[a].copy(),l=r.range();this.axesList[a].forEach((c,u)=>{const d=c.scale().range();l.every((f,p)=>f===d[p])||c.scale().range(l);const h=`${this.getAxisClassName(a)}-${u+1}`;let g=s.select(`.${h.replace(/\s/,".")}`);g.empty()?g=s.append("g").attr("class",h).style("visibility",n[`axis_${a}_show`]?null:"hidden").call(c):(o[u].domain&&r.domain(o[u].domain),i(g).call(c.scale(r))),g.attr("transform",t.getTranslate(a,u+1))})})}setAxis(t,n,s,i){const a=this.owner;t!=="subX"&&(this.tick[t]=this.getTickValues(t)),this[t]=this.getAxis(t,n,s,t==="x"&&(a.scale.zoom||a.config.subchart_show||a.state.resizing)?!0:i)}getAxis(t,n,s,i,a){const o=this.owner,{config:r}=o,l=/^(x|subX)$/.test(t),c=l?"x":t,u=l&&this.isCategorized(),d=this.orient[t],h=a?0:o.getAxisTickRotate(c);let g;if(l)g=t==="subX"?o.format.subXAxisTick:o.format.xAxisTick;else{const m=r[`axis_${t}_tick_format`];L(m)&&(g=m.bind(o.api))}let f=this.tick[c];const p=ee({outerTick:s,noTransition:i,config:r,id:t,tickTextRotate:h,owner:o},l&&{isCategory:u,isInverted:r.axis_x_inverted,tickMultiline:r.axis_x_tick_multiline,tickWidth:r.axis_x_tick_width,tickTitle:u&&r.axis_x_tick_tooltip&&o.api.categories(),orgXScale:o.scale.x});l||(p.tickStepSize=r[`axis_${c}_tick_stepSize`]);const _=new or(p).scale(l&&o.scale.zoom||n).orient(d);if(l&&this.isTimeSeries()&&f&&!L(f)){const m=At.bind(o);f=f.map(y=>m(y))}else!l&&this.isTimeSeriesY()&&(_.ticks(r.axis_y_tick_time_value),f=null);f&&_.tickValues(f),_.tickFormat(g||!l&&o.isStackNormalized()&&o.hasAxisGroupedData(t)&&(m=>`${m}%`)),u&&(_.tickCentered(r.axis_x_tick_centered),vt(r.axis_x_tick_culling)&&(r.axis_x_tick_culling=!1));const x=r[`axis_${c}_tick_count`];return x&&_.ticks(x),_}updateXAxisTickValues(t,n){var s;const i=this.owner,{config:a}=i,o=a.axis_x_tick_fit;let r=a.axis_x_tick_count,l;return(o||r&&o)&&(l=i.mapTargetsToUniqueXs(t),this.isCategorized()&&r>l.length&&(r=l.length),l=this.generateTickValues(l,r,this.isTimeSeries())),n?n.tickValues(l):this.x&&(this.x.tickValues(l),(s=this.subX)==null||s.tickValues(l)),l}getId(t){const{config:n,scale:s}=this.owner;let i=n.data_axes[t];return(!i||!s[i])&&(i="y"),i}getXAxisTickFormat(t){const n=this.owner,{config:s,format:i}=n,a=t&&s.subchart_axis_x_tick_format||s.axis_x_tick_format,o=this.isTimeSeries(),r=this.isCategorized();let l;return a?L(a)?l=a.bind(n.api):o&&(l=c=>c?i.axisTime(a)(c):""):l=o?i.defaultAxisTime:r?n.categoryName:c=>c<0?c.toFixed(0):c,L(l)?c=>l.apply(n,r?[c,n.categoryName(c)]:[c]):l}getTickValues(t){const n=this.owner,s=n.config[`axis_${t}_tick_values`],i=n[`${t}Axis`];return(L(s)?s.call(n.api):s)||(i?i.tickValues():void 0)}getLabelOptionByAxisId(t){return this.owner.config[`axis_${t}_label`]}getLabelText(t){const n=this.getLabelOptionByAxisId(t);return G(n)?n:n?n.text:null}setLabelText(t,n){const s=this.owner,{config:i}=s,a=this.getLabelOptionByAxisId(t);G(a)?i[`axis_${t}_label`]=n:a&&(a.text=n)}getLabelPosition(t,n){const s=this.owner.config.axis_rotated,i=this.getLabelOptionByAxisId(t),a=bt(i)&&i.position?i.position:n[+!s],o=r=>!!~a.indexOf(r);return{isInner:o("inner"),isOuter:o("outer"),isLeft:o("left"),isCenter:o("center"),isRight:o("right"),isTop:o("top"),isMiddle:o("middle"),isBottom:o("bottom")}}getAxisLabelPosition(t){return this.getLabelPosition(t,t==="x"?["inner-top","inner-right"]:["inner-right","inner-top"])}getLabelPositionById(t){return this.getAxisLabelPosition(t)}xForAxisLabel(t){const n=this.owner,{state:{width:s,height:i}}=n,a=this.getAxisLabelPosition(t);let o=a.isMiddle?-i/2:0;return this.isHorizontal(n,t!=="x")?o=a.isLeft?0:a.isCenter?s/2:s:a.isBottom&&(o=-i),o}textAnchorForAxisLabel(t){const n=this.owner,s=this.getAxisLabelPosition(t);let i=s.isMiddle?"middle":"end";return this.isHorizontal(n,t!=="x")?i=s.isLeft?"start":s.isCenter?"middle":"end":s.isBottom&&(i="start"),i}dxForAxisLabel(t){const n=this.owner,s=this.getAxisLabelPosition(t);let i=s.isBottom?"0.5em":"0";return this.isHorizontal(n,t!=="x")?i=s.isLeft?"0.5em":s.isRight?"-0.5em":"0":s.isTop&&(i="-0.5em"),i}dyForAxisLabel(t){const n=this.owner,{config:s}=n,i=s.axis_rotated,a=this.getAxisLabelPosition(t).isInner,o=s[`axis_${t}_tick_rotate`]?n.getHorizontalAxisHeight(t):0,{width:r}=this.getMaxTickSize(t);let l;if(t==="x"){const c=s.axis_x_height;i?l=a?"1.2em":-25-r:a?l="-0.5em":c?l=c-10:o?l=o-10:l="3em"}else l={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[t],i?a?l=l[0]:o?l=o*(t==="y2"?-1:1)-l[1]:l=l[2]:l=a?l[3]:(l[4]+(s[`axis_${t}_inner`]?0:r+l[4]))*(t==="y"?-1:1);return l}getMaxTickSize(t,n){const s=this.owner,{config:i,state:{current:a,resizing:o},$el:{svg:r,chart:l}}=s,c=a.maxTickSize[t],u=`axis_${t}`,d={width:0,height:0};if(o||n||!i[`${u}_show`]||c.width>0&&s.filterTargetsToShow().length===0)return c;if(r){const h=/^y2?$/.test(t),g=s.filterTargetsToShow(s.data.targets),f=s.scale[t].copy().domain(s[`get${h?"Y":"X"}Domain`](g,t)),p=f.domain(),_=p[0]===p[1]&&p.every(A=>A>0),x=Y(c.domain)&&c.domain[0]===c.domain[1]&&c.domain.every(A=>A>0);if(_||x)return c.size;c.domain=p,h||c.ticks.splice(0);const m=this.getAxis(t,f,!1,!1,!0),y=i[`${u}_tick_rotate`],$=i[`${u}_tick_count`];!i[`${u}_tick_values`]&&$&&m.tickValues(this.generateTickValues(p,$,h?this.isTimeSeriesY():this.isTimeSeries())),!h&&this.updateXAxisTickValues(g,m);const b=l.append("svg").style("visibility","hidden").style("position","fixed").style("top","0").style("left","0"),T=b.append("g").attr("class",`${rt[`axis${pt(t)}`]} ${D.dummy}`);m.create(T);const{sizeFor1Char:R}=T.node(),C=b.selectAll("text").attr("transform",I(y)?`rotate(${y})`:null);if(R)C.each(function(A,w){const P=this.textContent.length*R.w,E=R.h;d.width=Math.max(d.width,P),d.height=Math.max(d.height,E),h||(c.ticks[w]=P)});else{const A=[];C.each(function(){A.push(this)}),A.map(w=>dt(w,!0)).forEach((w,P)=>{d.width=Math.max(d.width,w.width),d.height=Math.max(d.height,w.height),h||(c.ticks[P]=w.width)})}b.remove()}return Object.keys(d).forEach(h=>{d[h]>0&&(c[h]=d[h])}),c}getXAxisTickTextY2Overflow(t){const n=this.owner,{axis:s,config:i,state:{current:a,isLegendRight:o,legendItemWidth:r}}=n,l=n.getAxisTickRotate("x"),c=l>0&&l<90;if((s.isCategorized()||s.isTimeSeries())&&i.axis_x_tick_fit&&(!i.axis_x_tick_culling||vt(i.axis_x_tick_culling))&&!i.axis_x_tick_multiline&&c){const u=i.axis_y2_show&&a.maxTickSize.y2.width||0,d=o&&r||0,h=a.width-n.getCurrentPaddingByDirection("left"),g=this.getXAxisTickMaxOverflow(l,h-t)-u-d,f=Math.max(0,g)+t;return Math.min(f,h/2)}return 0}getXAxisTickMaxOverflow(t,n){const s=this.owner,{axis:i,config:a,state:o}=s,r=i.isTimeSeries(),l=o.current.maxTickSize.x.ticks,c=l.length,{left:u,right:d}=o.axis.x.padding;let h=0;const g=c-(r&&a.axis_x_tick_fit?.5:0);for(let _=0;_<c;_++){const x=_+1,m=Math.cos(Math.PI*t/180)*l[_],y=x-(r?1:.5)+u;if(y<=0)continue;const v=(n-m)/y,b=g-x,T=d*v,R=b*v+T,C=m-v/2-R;h=Math.max(h,C)}const f=s.filterTargetsToShow(s.data.targets);let p=0;if(!r&&a.axis_x_tick_count<=f.length&&f[0].values.length){const _=Ht(s.axis.getAxisType("x"),0,n-h).domain([u*-1,s.getXDomainMax(s.data.targets)+1+d]);p=(_(1)-_(0))/2}return h+p}updateLabels(t){const n=this.owner,{config:s,$el:{main:i},$T:a}=n,o=s.axis_rotated;["x","y","y2"].forEach(r=>{const l=this.getLabelText(r),c=`axis${pt(r)}`,u=rt[`${c}Label`];if(l){let d=i.select(`text.${u}`);d.empty()&&(d=i.select(`g.${rt[c]}`).insert("text",":first-child").attr("class",u).attr("transform",["rotate(-90)",null][r==="x"?+!o:+o]).style("text-anchor",()=>this.textAnchorForAxisLabel(r))),a(d,t).attr("x",()=>this.xForAxisLabel(r)).attr("dx",()=>this.dxForAxisLabel(r)).attr("dy",()=>this.dyForAxisLabel(r)).text(l)}})}getPadding(t,n,s,i){const a=I(t)?t:t[n];return M(a)?this.owner.convertPixelToScale(/(bottom|top)/.test(n)?"y":"x",a,i):s}generateTickValues(t,n,s){let i=t;if(n){const a=L(n)?n():n;if(a===1)i=[t[0]];else if(a===2)i=[t[0],t[t.length-1]];else if(a>2){const o=this.isCategorized(),r=a-2,l=t[0],c=t[t.length-1],u=(c-l)/(r+1);let d;i=[l];for(let h=0;h<r;h++)d=+l+u*(h+1),i.push(s?new Date(d):o?Math.round(d):d);i.push(c)}}return s||(i=i.sort((a,o)=>a-o)),i}generateTransitions(t){const n=this.owner,{$el:{axis:s},$T:i}=n,[a,o,r,l]=["x","y","y2","subX"].map(c=>i(s[c],t));return{axisX:a,axisY:o,axisY2:r,axisSubX:l}}redraw(t,n,s){const i=this.owner,{config:a,state:o,$el:r}=i,l=n?"0":null;["x","y","y2","subX"].forEach(c=>{const u=this[c],d=r.axis[c];u&&d&&(!s&&!a.transition_duration&&(u.config.withoutTransition=!0),d.style("opacity",l),u.create(t[`axis${pt(c)}`]))}),this.updateAxes(),!o.rendered&&a.axis_tooltip&&this.setAxisTooltip()}redrawAxis(t,n,s,i,a){var o,r,l;const c=this.owner,{config:u,scale:d,$el:h}=c,g=!!d.zoom;let f;!g&&this.isCategorized()&&t.length===0&&d.x.domain([0,h.axis.x.selectAll(".tick").size()]),d.x&&t.length?(!g&&c.updateXDomain(t,n.UpdateXDomain,n.UpdateOrgXDomain,n.TrimXDomain),u.axis_x_tick_values||this.updateXAxisTickValues(t)):this.x&&(this.x.tickValues([]),(o=this.subX)==null||o.tickValues([])),u.zoom_rescale&&!i&&(f=d.x.orgDomain()),["y","y2"].forEach(p=>{const _=`axis_${p}_`,x=d[p];if(x){const m=u[`${_}tick_values`],y=u[`${_}tick_count`];if(x.domain(c.getYDomain(t,p,f)),!m&&y){const $=c.axis[p],v=x.domain();$.tickValues(this.generateTickValues(v,v.every(b=>b===0)?1:y,this.isTimeSeriesY()))}}}),this.redraw(s,c.hasArcType(),a),this.updateLabels(n.Transition),(n.UpdateXDomain||n.UpdateXAxis||n.Y)&&t.length&&this.setCulling(),n.Y&&((r=d.subY)==null||r.domain(c.getYDomain(t,"y")),(l=d.subY2)==null||l.domain(c.getYDomain(t,"y2")))}setCulling(){const t=this.owner,{config:n,state:{clip:s,current:i},$el:a}=t;["subX","x","y","y2"].forEach(o=>{const r=a.axis[o],c=`axis_${o==="subX"?"x":o}_tick_culling`,u=n[c];if(r&&u){const d=r.selectAll(".tick"),h=ne(d.data(),!n[`${c}_reverse`]),g=h.length,f=n[`${c}_max`],p=n[`${c}_lines`];let _;if(g){for(let x=1;x<g;x++)if(g/x<f){_=x;break}d.each(function(x){const m=p?this.querySelector("text"):this;m&&(m.style.display=h.indexOf(x)%_?"none":null)})}else d.style("display",null);if(o==="x"){const x=i.maxTickSize.x.clipPath?s.pathXAxisTickTexts:null;a.svg.selectAll(`.${rt.axisX} .tick text`).attr("clip-path",x)}}})}setAxisTooltip(){var t;const n=this.owner,{config:{axis_rotated:s,axis_tooltip:i},$el:{axis:a,axisTooltip:o}}=n,r=(t=i.backgroundColor)!=null?t:"black";n.generateTextBGColorFilter(r,{x:-.15,y:-.2,width:1.3,height:1.3}),["x","y","y2"].forEach(l=>{var c,u,d;if(G(r)||r[l])if(o[l]=(c=a[l])==null?void 0:c.append("text").classed(rt[`axis${l.toUpperCase()}Tooltip`],!0).attr("filter",n.updateTextBGColor({id:l},r)),s){const h=l==="x"?"x":"y",g=l==="y"?"1.15em":l==="x"?"-0.3em":"-0.4em";(u=o[l])==null||u.attr(h,g).attr(`d${l==="x"?"y":"x"}`,l==="x"?"0.4em":"-1.3em").style("text-anchor",l==="x"?"end":null)}else{const h=l==="x"?"y":"x",g=l==="x"?"1.15em":`${l==="y"?"-":""}0.4em`;(d=o[l])==null||d.attr(h,g).attr(`d${l==="x"?"x":"y"}`,l==="x"?"-1em":"0.3em").style("text-anchor",l==="y"?"end":null)}})}}var ur={initEventRect(){this.$el.main.select(`.${D.chart}`).append("g").attr("class",St.eventRects).style("fill-opacity","0")},redrawEventRect(){var e;const t=this,{config:n,state:s,$el:i}=t,a=t.isMultipleX(),o=n.axis_x_inverted;if(i.eventRect)t.updateEventRect(i.eventRect,!0);else if(t.data.targets.length){const l=t.$el.main.select(`.${St.eventRects}`).style("cursor",n.zoom_enabled&&n.zoom_type!=="drag"?n.axis_rotated?"ns-resize":"ew-resize":null).classed(St.eventRectsMultiple,a).classed(St.eventRectsSingle,!a).selectAll(`.${St.eventRect}`).data([0]).enter().append("rect");t.updateEventRect(l),t.updateEventType(l),l.call(t.getDraggableSelection()),i.eventRect=l,t.state.inputType==="touch"&&!i.svg.on("touchstart.eventRect")&&!t.hasArcType()&&t.bindTouchOnEventRect(),s.rendered&&t.updateEventRect(i.eventRect,!0)}if(!a){const r=t.getMaxDataCountTarget();(!n.data_xSort||o)&&r.sort((l,c)=>o?c.x-l.x:l.x-c.x),t.updateDataIndexByX(r),t.updateXs(r),(e=t.updatePointClass)==null||e.call(t,!0),s.eventReceiver.data=r}t.updateEventRectData()},bindTouchOnEventRect(){const e=this,{config:t,state:n,$el:{eventRect:s,svg:i}}=e,a=g=>{if(e.isMultipleX())e.selectRectForMultipleXs(g);else{const f=e.getDataIndexFromEvent(n.event);e.callOverOutForTouch(f),f===-1?e.unselectRect():e.selectRectForSingle(g,f)}},o=()=>{e.unselectRect(),e.callOverOutForTouch()},r=t.interaction_inputType_touch.preventDefault,l=Xe(r)&&r||!1,c=!isNaN(r)&&r||null;let u;const d=!l&&c===null,h=g=>{const f=g.type,_=g.changedTouches[0][`client${t.axis_rotated?"Y":"X"}`];f==="touchstart"?l?g.preventDefault():c!==null&&(u=_):f==="touchmove"&&(l||u===!0||c!==null&&Math.abs(u-_)>=c)&&(u=!0,g.preventDefault())};s.on("touchstart",g=>{n.event=g,e.updateEventRect()},{passive:d}).on("touchstart.eventRect touchmove.eventRect",g=>{if(n.event=g,!s.empty()&&s.classed(St.eventRect)){if(n.dragging||n.flowing||e.hasArcType()||g.touches.length>1)return;h(g),a(s.node())}else o()},{passive:d}).on("touchend.eventRect",g=>{n.event=g,!s.empty()&&s.classed(St.eventRect)&&(e.hasArcType()||!e.toggleShape||n.cancelClick)&&n.cancelClick&&(n.cancelClick=!1)},{passive:d}),i.on("touchstart",g=>{n.event=g;const{target:f}=g;f&&f!==s.node()&&o()},{passive:d})},updateEventRect(e,t=!1){const n=this,{state:s,$el:i}=n,{eventReceiver:a,width:o,height:r,rendered:l,resizing:c}=s,u=e||i.eventRect,d=()=>{if(a){const h=kn(i.chart.node());a.rect=dt(u.node(),!0).toJSON(),a.rect.top+=h.y,a.rect.left+=h.x}};(!l||c||t)&&(u.attr("x",0).attr("y",0).attr("width",o).attr("height",r),(!l||t)&&u.classed(St.eventRect,!0)),d()},updateEventType(e){const t=this,n=Xe(e),s=n?t.$el.eventRect:e,i=n?e!==(s==null?void 0:s.datum().multipleX):!1;s&&(i&&(s==null||s.on("mouseover mousemove mouseout click",null)),t.isMultipleX()?t.generateEventRectsForMultipleXs(s):t.generateEventRectsForSingleX(s))},updateEventRectData(){const e=this,{config:t,scale:n,state:s}=e,i=n.zoom||n.x,a=t.axis_rotated,o=e.isMultipleX();let r,l,c,u;if(e.updateEventType(o),o)r=0,l=0,c=s.width,u=s.height;else{let g,f;if(e.axis.isCategorized())g=e.getEventRectWidth(),f=p=>i(p.x)-g/2;else{const p=({index:_})=>({prev:e.getPrevX(_),next:e.getNextX(_)});g=_=>{const x=p(_),m=i.domain();let y;return x.prev===null&&x.next===null?y=a?s.height:s.width:x.prev===null?y=(i(x.next)+i(_.x))/2:x.next===null?y=i(m[1])-(i(x.prev)+i(_.x))/2:(Object.keys(x).forEach(($,v)=>{var b;x[$]=(b=x[$])!=null?b:m[v]}),y=Math.max(0,(i(x.next)-i(x.prev))/2)),y},f=_=>{const x=p(_);let m;return x.prev===null&&x.next===null?m=0:x.prev===null?m=i(i.domain()[0]):m=(i(_.x)+i(x.prev))/2,m}}r=a?0:f,l=a?f:0,c=a?s.width:g,u=a?g:s.height}const{eventReceiver:d}=s,h=(g,f)=>L(g)?g(f):g;d.coords.splice(d.data.length),d.data.forEach((g,f)=>{d.coords[f]={x:h(r,g),y:h(l,g),w:h(c,g),h:h(u,g)}})},selectRectForSingle(e,t){var n,s;const i=this,{config:a,$el:{main:o,circle:r}}=i,l=a.data_selection_enabled,c=a.data_selection_grouped,u=a.data_selection_isselectable,d=a.tooltip_grouped,h=i.getAllValuesOnIndex(t);if(d&&(i.showTooltip(h,e),(n=i.showGridFocus)==null||n.call(i,h),!l||c))return;!r&&o.selectAll(`.${D.EXPANDED}:not(.${st.shape}-${t})`).classed(D.EXPANDED,!1);const g=o.selectAll(`.${st.shape}-${t}`).classed(D.EXPANDED,!0).style("cursor",u?"pointer":null).filter(function(f){return i.isWithinShape(this,f)});g.empty()&&!d&&a.interaction_onout&&((s=i.hideGridFocus)==null||s.call(i),i.hideTooltip(),!c&&i.setExpand(t)),g.call(f=>{var p,_;const x=f.data();l&&(c||u!=null&&u.bind(i.api)(x))&&(e.style.cursor="pointer"),d||(i.showTooltip(x,e),(p=i.showGridFocus)==null||p.call(i,x),(_=i.unexpandCircles)==null||_.call(i),f.each(m=>i.setExpand(t,m.id)))})},selectRectForMultipleXs(e,t=!0){const n=this,{config:s,state:i}=n,a=n.filterTargetsToShow(n.data.targets);if(i.dragging||n.hasArcType(a))return;const o=Tt(i.event,e),r=n.findClosestFromTargets(a,o);if(t&&i.mouseover&&(!r||r.id!==i.mouseover.id)&&(s.data_onout.call(n.api,i.mouseover),i.mouseover=void 0),!r){n.unselectRect();return}const c=(n.isBubbleType(r)||n.isScatterType(r)||!s.tooltip_grouped?[r]:n.filterByX(a,r.x)).map(d=>n.addName(d));n.showTooltip(c,e),n.setExpand(r.index,r.id,!0),n.showGridFocus(c);const u=n.dist(r,o);(n.isBarType(r.id)||u<n.getPointSensitivity(r))&&(n.$el.svg.select(`.${St.eventRect}`).style("cursor","pointer"),t&&(!i.mouseover||i.mouseover.x!==r.x||i.mouseover.id!==r.id)&&(s.data_onover.call(n.api,r),i.mouseover=r))},unselectRect(){const e=this,{$el:{circle:t,tooltip:n}}=e;e.$el.svg.select(`.${St.eventRect}`).style("cursor",null),e.hideGridFocus(),n&&(e.hideTooltip(),e._handleLinkedCharts(!1)),t&&!e.isPointFocusOnly()&&e.unexpandCircles(),e.expandBarTypeShapes(!1)},generateEventRectsForSingleX(e){const t=this,{config:n,state:s}=t,{eventReceiver:i}=s,a=e.style("cursor",n.data_selection_enabled&&n.data_selection_grouped?"pointer":null).on("click",function(o){s.event=o;const{currentIdx:r,data:l}=i,c=l[r===-1?t.getDataIndexFromEvent(o):r];t.clickHandlerForSingleX.bind(this)(c,t)}).datum({multipleX:!1});if(s.inputType==="mouse"){const o=r=>{const l=r?t.getDataIndexFromEvent(r):i.currentIdx;return l>-1?i.data[l]:null};a.on("mouseover",r=>{s.event=r,t.updateEventRect(),Object.values(t.$el.axisTooltip).forEach(l=>l==null?void 0:l.style("display",null))}).on("mousemove",function(r){const l=o(r);if(s.event=r,!l)return;let{index:c}=l;const u=n.line_step_type;if(n.line_step_tooltipMatch&&t.hasType("step")&&/^step\-(before|after)$/.test(u)){const h=t.scale.zoom||t.scale.x,g=t.axis.xs[c],f=h.invert(Tt(r,this)[0]);u==="step-after"&&f<g?c-=1:u==="step-before"&&f>g&&(c+=1)}t.showAxisGridFocus();const d=n.tooltip_grouped&&c===i.currentIdx;if(s.dragging||s.flowing||t.hasArcType()||d){n.tooltip_show&&d&&t.setTooltipPosition();return}c!==i.currentIdx&&(t.setOverOut(!1,i.currentIdx),i.currentIdx=c),c===-1?t.unselectRect():t.selectRectForSingle(this,c),t.setOverOut(c!==-1,c)}).on("mouseout",r=>{s.event=r,!(!n||t.hasArcType()||i.currentIdx===-1||!n.interaction_onout)&&(t.hideAxisGridFocus(),t.unselectRect(),t.setOverOut(!1,i.currentIdx),i.currentIdx=-1)})}return a},clickHandlerForSingleX(e,t){const n=t,{config:s,state:i,$el:{main:a}}=n;if(!e||n.hasArcType()||i.cancelClick){i.cancelClick&&(i.cancelClick=!1);return}const{index:o}=e;a.selectAll(`.${st.shape}-${o}`).each(function(r){var l;(s.data_selection_grouped||n.isWithinShape(this,r))&&((l=n.toggleShape)==null||l.call(n,this,r,o),s.data_onclick.bind(n.api)(r,this))})},generateEventRectsForMultipleXs(e){const t=this,{config:n,state:s}=t;e.on("click",function(i){s.event=i,t.clickHandlerForMultipleXS.bind(this)(t)}).datum({multipleX:!0}),s.inputType==="mouse"&&e.on("mouseover mousemove",function(i){s.event=i,t.selectRectForMultipleXs(this)}).on("mouseout",i=>{s.event=i,!(!t.config||t.hasArcType()||!n.interaction_onout)&&t.unselectRect()})},clickHandlerForMultipleXS(e){const t=e,{config:n,state:s}=t,i=t.filterTargetsToShow(t.data.targets);if(t.hasArcType(i))return;const a=Tt(s.event,this),o=t.findClosestFromTargets(i,a),r=t.getPointSensitivity(o);o&&(t.isBarType(o.id)||t.dist(o,a)<r)&&t.$el.main.selectAll(`.${st.shapes}${t.getTargetSelectorSuffix(o.id)}`).selectAll(`.${st.shape}-${o.index}`).each(function(){var l;(n.data_selection_grouped||t.isWithinShape(this,o))&&((l=t.toggleShape)==null||l.call(t,this,o,o.index),n.data_onclick.bind(t.api)(o,this))})}},hr={generateFlow(e){const t=this,{data:n,state:s,$el:i}=t;return function(){const a=e.flow.length;s.flowing=!0,n.targets.forEach(r=>{r.values.splice(0,a)}),t.updateXGrid&&t.updateXGrid(!0);const o={};["axis.x","grid.x","gridLines.x","region.list","text","bar","line","area","circle"].forEach(r=>{const l=r.split(".");let c=i[l[0]];c&&l.length>1&&(c=c[l[1]]),c!=null&&c.size()&&(o[r]=c)}),t.hideGridFocus(),t.setFlowList(o,e)}},setFlowList(e,t){const n=this,{flow:s,targets:i}=t,{duration:a=t.duration,index:o,length:r,orgDataCount:l}=s,c=n.getFlowTransform(i,l,o,r),u=Nn();let d;u.add(Object.keys(e).map(h=>(d=e[h].transition().ease(g=>+g).duration(a),h==="axis.x"?d=d.call(g=>{n.axis.x.setTransition(g).create(g)}):h==="region.list"?d=d.filter(n.isRegionOnX).attr("transform",c):d=d.attr("transform",c),d))),d.call(u,()=>{n.cleanUpFlow(e,t)})},cleanUpFlow(e,t){const n=this,{config:s,state:i,$el:{svg:a}}=n,o=s.axis_rotated,{flow:r,shape:l,xv:c}=t,{cx:u,cy:d,xForText:h,yForText:g}=l.pos,{done:f=()=>{},length:p}=r;p&&(["circle","text","shape","eventRect"].forEach(_=>{const x=[];for(let m=0;m<p;m++)x.push(`.${N[_]}-${m}`);a.selectAll(`.${N[`${_}s`]}`).selectAll(x).remove()}),a.select(`.${N.xgrid}`).remove()),Object.keys(e).forEach(_=>{const x=e[_];if(_!=="axis.x"&&x.attr("transform",null),_==="grid.x")x.attr(i.xgridAttr);else if(_==="gridLines.x")x.attr("x1",o?0:c).attr("x2",o?i.width:c),x.select("text").attr("x",o?i.width:0).attr("y",c);else if(/^(area|bar|line)$/.test(_))x.attr("d",l.type[_]);else if(_==="text")x.attr("x",h).attr("y",g).style("fill-opacity",n.opacityForText.bind(n));else if(_==="circle")if(n.isCirclePoint())x.attr("cx",u).attr("cy",d);else{const m=$=>u($)-s.point_r,y=$=>d($)-s.point_r;x.attr("x",m).attr("y",y)}else _==="region.list"&&x.select("rect").filter(n.isRegionOnX).attr("x",n.regionX.bind(n)).attr("width",n.regionWidth.bind(n))}),s.interaction_enabled&&n.redrawEventRect(),f.call(n.api),i.flowing=!1},getFlowTransform(e,t,n,s){const i=this,{data:a,scale:{x:o}}=i,r=a.targets[0].values;let l=i.getValueOnIndex(r,n),c=i.getValueOnIndex(r,n+s),u;const d=o.domain(),h=i.updateXDomain(e,!0,!0);t?t===1||(l==null?void 0:l.x)===(c==null?void 0:c.x)?u=o(d[0])-o(h[0]):u=i.axis.isTimeSeries()?o(d[0])-o(h[0]):o((l==null?void 0:l.x)||0)-o(c.x):r.length!==1?u=o(d[0])-o(h[0]):i.axis.isTimeSeries()?(l=i.getValueOnIndex(r,0),c=i.getValueOnIndex(r,r.length-1),u=o(l.x)-o(c.x)):u=Vt(h)/2;const g=Vt(d)/Vt(h);return`translate(${u},0) scale(${g},1)`}},gr={initClip(){const e=this,{clip:t,datetimeId:n}=e.state;t.id=`${n}-clip`,t.idXAxis=`${t.id}-xaxis`,t.idYAxis=`${t.id}-yaxis`,t.idGrid=`${t.id}-grid`,t.path=e.getClipPath(t.id),t.pathXAxis=e.getClipPath(t.idXAxis),t.pathYAxis=e.getClipPath(t.idYAxis),t.pathGrid=e.getClipPath(t.idGrid)},getClipPath(e){const t=this,{config:n}=t;return!n.clipPath&&/-clip$/.test(e)||!n.axis_x_clipPath&&/-clip-xaxis$/.test(e)||!n.axis_y_clipPath&&/-clip-yaxis$/.test(e)?null:`url(#${e})`},appendClip(e,t){t&&e.append("clipPath").attr("id",t).append("rect")},setXAxisClipPath(e){const t=this,{config:n,state:{margin:s,width:i,height:a}}=t,o=n.axis_rotated,r=Math.max(30,s.left)-(o?0:20),l=(o?s.top+a+10:s.bottom)+20,c=o?-(1+r):-(r-1),u=-15,d=o?s.left+20:i+10+r;e.attr("x",c).attr("y",u).attr("width",d).attr("height",l)},setYAxisClipPath(e){const t=this,{config:n,state:{margin:s,width:i,height:a}}=t,o=n.axis_rotated,r=Math.max(30,s.left)-(o?20:0),l=n.axis_y_inner,c=l&&!o?n.axis_y_label.text?-20:-1:o?-(1+r):-(r-1),u=-(o?20:s.top),d=(o?i+15+r:s.left+20)+(l?20:0),h=(o?s.bottom+10:s.top+a)+10;e.attr("x",c).attr("y",u).attr("width",d).attr("height",h)},updateXAxisTickClip(){const e=this,{config:t,state:{clip:n,xAxisHeight:s},$el:{defs:i}}=e,a=e.getHorizontalAxisHeight("x");if(i&&!n.idXAxisTickTexts){const o=`${n.id}-xaxisticktexts`;e.appendClip(i,o),n.pathXAxisTickTexts=e.getClipPath(n.idXAxisTickTexts),n.idXAxisTickTexts=o}!t.axis_x_tick_multiline&&e.getAxisTickRotate("x")&&a!==s&&(e.setXAxisTickClipWidth(),e.setXAxisTickTextClipPathWidth()),e.state.xAxisHeight=a},setXAxisTickClipWidth(){const e=this,{config:t,state:{current:{maxTickSize:n}}}=e,s=e.getAxisTickRotate("x");if(!t.axis_x_tick_multiline&&s){const i=Math.sin(Math.PI/180*Math.abs(s));n.x.clipPath=(e.getHorizontalAxisHeight("x")-20)/i}else n.x.clipPath=null},setXAxisTickTextClipPathWidth(){const e=this,{state:{clip:t,current:n},$el:{svg:s}}=e;s&&s.select(`#${t.idXAxisTickTexts} rect`).attr("width",n.maxTickSize.x.clipPath).attr("height",30)}};const fr=e=>M(e.position)||"end",pr=e=>e.position==="start"?4:e.position==="middle"?0:-4;function bs(e,t,n){return s=>{let i=e?0:t;return s.position==="start"?i=e?-n:0:s.position==="middle"&&(i=(e?-n:t)/2),i}}function vs(e,t){t==="grid"&&e.each(function(){const n=(0,S.select)(this);["x1","x2","y1","y2"].forEach(s=>n.attr(s,+n.attr(s)))})}var xr={hasGrid(){const{config:e}=this;return["x","y"].some(t=>e[`grid_${t}_show`]||e[`grid_${t}_lines`].length)},initGrid(){const e=this;e.hasGrid()&&e.initGridLines(),e.initFocusGrid()},initGridLines(){const e=this,{config:t,state:{clip:n},$el:s}=e;(t.grid_x_lines.length||t.grid_y_lines.length)&&(s.gridLines.main=s.main.insert("g",`.${D.chart}${t.grid_lines_front?" + *":""}`).attr("clip-path",n.pathGrid).attr("class",`${nt.grid} ${nt.gridLines}`),s.gridLines.main.append("g").attr("class",nt.xgridLines),s.gridLines.main.append("g").attr("class",nt.ygridLines),s.gridLines.x=(0,S.selectAll)([]))},updateXGrid(e){const t=this,{config:n,scale:s,state:i,$el:{main:a,grid:o}}=t,r=n.axis_rotated,l=t.generateGridData(n.grid_x_type,s.x),c=t.axis.isCategorized()?t.axis.x.tickOffset():0,u=d=>(s.zoom||s.x)(d)+c*(r?-1:1);i.xgridAttr=r?{x1:0,x2:i.width,y1:u,y2:u}:{x1:u,x2:u,y1:0,y2:i.height},o.x=a.select(`.${nt.xgrids}`).selectAll(`.${nt.xgrid}`).data(l),o.x.exit().remove(),o.x=o.x.enter().append("line").attr("class",nt.xgrid).merge(o.x),e||o.x.each(function(){const d=(0,S.select)(this);Object.keys(i.xgridAttr).forEach(h=>{d.attr(h,i.xgridAttr[h]).style("opacity",()=>d.attr(r?"y1":"x1")===(r?i.height:0)?"0":null)})})},updateYGrid(){const e=this,{axis:t,config:n,scale:s,state:i,$el:{grid:a,main:o}}=e,r=n.axis_rotated,l=u=>s.y(u),c=t.y.getGeneratedTicks(n.grid_y_ticks)||e.scale.y.ticks(n.grid_y_ticks);a.y=o.select(`.${nt.ygrids}`).selectAll(`.${nt.ygrid}`).data(c),a.y.exit().remove(),a.y=a.y.enter().append("line").attr("class",nt.ygrid).merge(a.y),a.y.attr("x1",r?l:0).attr("x2",r?l:i.width).attr("y1",r?0:l).attr("y2",r?i.height:l),vs(a.y,"grid")},updateGrid(){const e=this,{$el:{grid:t,gridLines:n}}=e;!n.main&&e.initGridLines(),t.main.style("visibility",e.hasArcType()?"hidden":null),e.hideGridFocus(),e.updateGridLines("x"),e.updateGridLines("y")},updateGridLines(e){const t=this,{config:n,$el:{gridLines:s,main:i},$T:a}=t,o=n.axis_rotated,r=e==="x";n[`grid_${e}_show`]&&t[`update${e.toUpperCase()}Grid`]();let l=i.select(`.${nt[`${e}gridLines`]}`).selectAll(`.${nt[`${e}gridLine`]}`).data(n[`grid_${e}_lines`]);a(l.exit()).style("opacity","0").remove();const c=l.enter().append("g");c.append("line").style("opacity","0"),l=c.merge(l),l.each(function(u){const d=(0,S.select)(this);d.select("text").empty()&&u.text&&d.append("text").style("opacity","0")}),a(l.attr("class",u=>`${nt[`${e}gridLine`]} ${u.class||""}`.trim()).select("text").attr("text-anchor",fr).attr("transform",()=>r?o?null:"rotate(-90)":o?"rotate(-90)":null).attr("dx",pr).attr("dy",-5)).text(function(u){var d;return(d=u.text)!=null?d:this.remove()}),s[e]=l},redrawGrid(e){const t=this,{config:{axis_rotated:n},state:{width:s,height:i},$el:{gridLines:a},$T:o}=t,r=t.xv.bind(t),l=t.yv.bind(t);let c=a.x.select("line"),u=a.x.select("text"),d=a.y.select("line"),h=a.y.select("text");return c=o(c,e).attr("x1",n?0:r).attr("x2",n?s:r).attr("y1",n?r:0).attr("y2",n?r:i),u=o(u,e).attr("x",bs(!n,s,i)).attr("y",r),d=o(d,e).attr("x1",n?l:0).attr("x2",n?l:s).attr("y1",n?0:l).attr("y2",n?i:l),h=o(h,e).attr("x",bs(n,s,i)).attr("y",l),[c.style("opacity",null),u.style("opacity",null),d.style("opacity",null),h.style("opacity",null)]},initFocusGrid(){const e=this,{config:t,state:{clip:n},$el:s}=e,i=t.grid_front,a=`.${i&&s.gridLines.main?nt.gridLines:D.chart}${i?" + *":""}`,o=s.main.insert("g",a).attr("clip-path",n.pathGrid).attr("class",nt.grid);if(s.grid.main=o,t.grid_x_show&&o.append("g").attr("class",nt.xgrids),t.grid_y_show&&o.append("g").attr("class",nt.ygrids),t.axis_tooltip){const r=o.append("g").attr("class","bb-axis-tooltip");r.append("line").attr("class","bb-axis-tooltip-x"),r.append("line").attr("class","bb-axis-tooltip-y")}t.interaction_enabled&&t.grid_focus_show&&!t.axis_tooltip&&(o.append("g").attr("class",q.xgridFocus).append("line").attr("class",q.xgridFocus),t.grid_focus_y&&!t.tooltip_grouped&&o.append("g").attr("class",q.ygridFocus).append("line").attr("class",q.ygridFocus))},showAxisGridFocus(){var e,t;const n=this,{config:s,format:i,state:{event:a,width:o,height:r}}=n,l=s.axis_rotated,[c,u]=Tt(a,(e=n.$el.eventRect)==null?void 0:e.node()),d={x:c,y:u};for(const[h,g]of Object.entries(n.$el.axisTooltip)){const f=h==="x"&&!l||h!=="x"&&l?"x":"y",p=d[f];let _=(t=n.scale[h])==null?void 0:t.invert(p);_&&(_=h==="x"&&n.axis.isTimeSeries()?i.xAxisTick(_):_==null?void 0:_.toFixed(2),g==null||g.attr(f,p).text(_))}n.$el.main.selectAll("line.bb-axis-tooltip-x, line.bb-axis-tooltip-y").style("visibility",null).each(function(h,g){const f=(0,S.select)(this);g===0?f.attr("x1",c).attr("x2",c).attr("y1",g?0:r).attr("y2",g?r:0):f.attr("x1",g?0:o).attr("x2",g?o:0).attr("y1",u).attr("y2",u)})},hideAxisGridFocus(){const e=this;e.$el.main.selectAll(`line.${rt.axisTooltipX}, line.${rt.axisTooltipY}`).style("visibility","hidden"),Object.values(e.$el.axisTooltip).forEach(t=>t==null?void 0:t.style("display","none"))},showGridFocus(e){var t;const n=this,{config:s,state:{width:i,height:a}}=n,o=s.axis_rotated,r=n.$el.main.selectAll(`line.${q.xgridFocus}, line.${q.ygridFocus}`),l=(e||[r.datum()]).filter(d=>d&&M(n.getBaseValue(d)));if(!s.tooltip_show||l.length===0||!s.axis_x_forceAsSingle&&n.hasType("bubble")||n.hasArcType())return;const c=s.grid_focus_edge&&!s.tooltip_grouped,u=n.xx.bind(n);r.style("visibility",null).data(l.concat(l)).each(function(d){const h=(0,S.select)(this),g={x:u(d),y:n.getYScaleById(d.id)(d.value)};let f;if(h.classed(q.xgridFocus))f=o?[null,g.x,c?g.y:i,g.x]:[g.x,c?g.y:null,g.x,a];else{const p=n.axis.getId(d.id)==="y2";f=o?[g.y,c&&!p?g.x:null,g.y,c&&p?g.x:a]:[c&&p?g.x:null,g.y,c&&!p?g.x:i,g.y]}["x1","y1","x2","y2"].forEach((p,_)=>h.attr(p,f[_]))}),vs(r,"grid"),(t=n.showCircleFocus)==null||t.call(n,e)},hideGridFocus(){var e;const t=this,{state:{inputType:n,resizing:s},$el:{main:i}}=t;(n==="mouse"||!s)&&(i.selectAll(`line.${q.xgridFocus}, line.${q.ygridFocus}`).style("visibility","hidden"),(e=t.hideCircleFocus)==null||e.call(t))},updateGridFocus(){var e;const t=this,{state:{inputType:n,width:s,height:i,resizing:a},$el:{grid:o}}=t,r=o.main.select(`line.${q.xgridFocus}`);if(n==="touch")r.empty()?a&&((e=t.showCircleFocus)==null||e.call(t)):t.showGridFocus();else{const l=t.config.axis_rotated;r.attr("x1",l?0:-10).attr("x2",l?s:-10).attr("y1",l?-10:0).attr("y2",l?-10:i)}return!0},generateGridData(e,t){const n=this,s=n.$el.main.select(`.${rt.axisX}`).selectAll(".tick").size();let i=[];if(e==="year"){const a=n.getXDomain(),[o,r]=a.map(l=>l.getFullYear());for(let l=o;l<=r;l++)i.push(new Date(`${l}-01-01 00:00:00`))}else i=t.ticks(10),i.length>s&&(i=i.filter(a=>String(a).indexOf(".")<0));return i},getGridFilterToRemove(e){return e?t=>{let n=!1;return(Y(e)?e.concat():[e]).forEach(s=>{("value"in s&&t.value===s.value||"class"in s&&t.class===s.class)&&(n=!0)}),n}:()=>!0},removeGridLines(e,t){const n=this,{config:s,$T:i}=n,a=n.getGridFilterToRemove(e),o=u=>!a(u),r=t?nt.xgridLines:nt.ygridLines,l=t?nt.xgridLine:nt.ygridLine;i(n.$el.main.select(`.${r}`).selectAll(`.${l}`).filter(a)).style("opacity","0").remove();const c=`grid_${t?"x":"y"}_lines`;s[c]=s[c].filter(o)}},_r={initRegion(){const e=this,{$el:t}=e;t.region.main=t.main.insert("g",":first-child").attr("clip-path",e.state.clip.path).attr("class",fe.regions)},updateRegion(){const e=this,{config:t,$el:{region:n},$T:s}=e;n.main||e.initRegion(),n.main.style("visibility",e.hasArcType()?"hidden":null);const i=n.main.selectAll(`.${fe.region}`).data(t.regions);s(i.exit()).style("opacity","0").remove();const a=i.enter().append("g");a.append("rect").style("fill-opacity","0"),n.list=a.merge(i).attr("class",e.classRegion.bind(e)),n.list.each(function(o){var r;(0,S.select)(this).select("text").empty()&&((r=o.label)!=null&&r.text)&&(0,S.select)(this).append("text").style("opacity","0")})},redrawRegion(e){const t=this,{$el:{region:n},$T:s}=t,i=t.regionX.bind(t),a=t.regionY.bind(t),o=["width","height"];let r=n.list.select("rect"),l=n.list.selectAll("text");return r=s(r,e).attr("x",i).attr("y",a).attr("width",t.regionWidth.bind(t)).attr("height",t.regionHeight.bind(t)),l=s(l,e).text(c=>{var u;return(u=c.label)==null?void 0:u.text}).attr("transform",({label:c})=>c.rotated?" rotate(-90)":null).attr("transform",function(c){var u;const{x:d=0,y:h=0,center:g=!1,rotated:f=!1}=(u=c.label)!=null?u:{},p=this.previousElementSibling,_={x:0,y:0};return G(g)&&["x","y"].forEach((x,m)=>{g.indexOf(x)>-1&&(_[x]=(+p.getAttribute(o[m])-dt(this)[o[m]])/2)}),`translate(${i(c)+_.x+d}, ${a(c)+_.y+h})${f?" rotate(-90)":""}`}).attr("text-anchor",({label:c})=>c!=null&&c.rotated?"end":null).attr("dy","1em").style("fill",({label:c})=>{var u;return(u=c==null?void 0:c.color)!=null?u:null}),[r.style("fill-opacity",c=>M(c.opacity)?c.opacity:null).on("end",function(){(0,S.select)(this.parentNode).selectAll("rect:not([x])").remove()}),l.style("opacity",null)]},regionX(e){return this.getRegionSize("x",e)},regionY(e){return this.getRegionSize("y",e)},regionWidth(e){return this.getRegionSize("width",e)},regionHeight(e){return this.getRegionSize("height",e)},getRegionSize(e,t){const n=this,{config:s,scale:i,state:a}=n,o=s.axis_rotated,r=/(x|y|y2)/.test(e),l=r?e==="x":e==="width",c=!r&&n[l?"regionX":"regionY"](t);let u=r?"start":"end",d=r?0:a[e],h;if(t.axis==="y"||t.axis==="y2"?(!r&&!l?u="start":r&&!l&&(u="end"),(l?o:!o)&&u in t&&(h=i[t.axis])):(l?!o:o)&&u in t&&(h=i.zoom||i.x),h){let g=0;d=t[u],n.axis.isTimeSeries(t.axis)?d=At.call(n,d):/(x|width)/.test(e)&&n.axis.isCategorized()&&isNaN(d)&&(d=s.axis_x_categories.indexOf(d),g=n.axis.x.tickOffset()*(u==="start"?-1:1)),d=h(d)+g}return r?d:d<c?0:d-c},isRegionOnX(e){return!e.axis||e.axis==="x"}},mr={getAxisSize(e){const t=this,n=t.config.axis_rotated;return n&&e==="x"||!n&&/y2?/.test(e)?t.getAxisWidthByAxisId(e,!0):t.getHorizontalAxisHeight(e)},getAxisWidthByAxisId(e,t){var n,s;const i=this;if(i.axis){const a=(n=i.axis)==null?void 0:n.getLabelPositionById(e),{width:o}=i.axis.getMaxTickSize(e,t),r=o===0?.5:0;return o+(((s=i.config.padding)==null?void 0:s.mode)==="fit"?a.isInner?10+r:10:a.isInner?20+r:40)}else return 40},getHorizontalAxisHeight(e){var t,n;const s=this,{config:i,state:a}=s,{rotatedPadding:o,isLegendRight:r,isLegendInset:l}=a,c=i.axis_rotated,u=((t=i.padding)==null?void 0:t.mode)==="fit",d=i[`axis_${e}_inner`],h=i[`axis_${e}_label`].text,g=13;let f=((n=i.padding)==null?void 0:n.mode)==="fit"?d&&!h?e==="y"?1:0:20:30;if(e==="x"&&!i.axis_x_show)return 8;if(e==="x"&&I(i.axis_x_height))return i.axis_x_height;if(e==="y"&&!i.axis_y_show)return i.legend_show&&!r&&!l?10:1;if(e==="y2"&&!i.axis_y2_show)return u?0:o.top;const p=s.axis.getMaxTickSize(e),_=Math.abs(i.axis_x_tick_rotate)>0&&(!i.axis_x_tick_autorotate||s.needToRotateXAxisTickTexts());return(i.axis_x_tick_multiline||_)&&p.height>g&&(f+=p.height-g),f+(s.axis.getLabelPositionById(e).isInner?0:10)+(e==="y2"&&!c?-10:0)},getEventRectWidth(){const e=this,{config:t,axis:n}=e,s=t.axis_x_inverted,i=n.x.tickInterval();return Math.max(0,s?Math.abs(i):i)},getAxisTickRotate(e){const t=this,{axis:n,config:s,state:i,$el:a}=t;let o=s[`axis_${e}_tick_rotate`];if(e==="x"){const r=n.isCategorized()||n.isTimeSeries();if(s.axis_x_tick_fit&&r){const l=s.axis_x_tick_count,c=i.current.maxTickSize.x.ticks.length;let u=0;if(l?u=l>c?c:l:c&&(u=c),u!==i.axis.x.tickCount){const{targets:d}=t.data;i.axis.x.padding=t.getXDomainPadding([t.getXDomainMinMax(d,"min"),t.getXDomainMinMax(d,"max")],u)}i.axis.x.tickCount=u}a.svg&&s.axis_x_tick_autorotate&&s.axis_x_tick_fit&&!s.axis_x_tick_multiline&&!s.axis_x_tick_culling&&r&&(o=t.needToRotateXAxisTickTexts()?s.axis_x_tick_rotate:0)}return o},needToRotateXAxisTickTexts(){const e=this,{state:{axis:t,current:n,isLegendRight:s,legendItemWidth:i}}=e,a=s&&i,o=n.width-a-e.getCurrentPaddingByDirection("left")-e.getCurrentPaddingByDirection("right"),r=t.x.tickCount+t.x.padding.left+t.x.padding.right,{width:l}=e.axis.getMaxTickSize("x"),c=r?o/r:0;return l>c}},yr={axis_x_clipPath:!0,axis_x_show:!0,axis_x_forceAsSingle:!1,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_culling_lines:!0,axis_x_tick_culling_reverse:!1,axis_x_tick_count:void 0,axis_x_tick_inner:!1,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_inner:!1,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_inverted:!1,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[]},$r={axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:"indexed",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_culling_lines:!0,axis_y_tick_culling_reverse:!1,axis_y_tick_inner:!1,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[]},br={axis_y2_show:!1,axis_y2_type:"indexed",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_culling_lines:!0,axis_y2_tick_culling_reverse:!1,axis_y2_tick_inner:!1,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[]},vr=Object.defineProperty,Ts=Object.getOwnPropertySymbols,Tr=Object.prototype.hasOwnProperty,Ar=Object.prototype.propertyIsEnumerable,As=(e,t,n)=>t in e?vr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nn=(e,t)=>{for(var n in t||(t={}))Tr.call(t,n)&&As(e,n,t[n]);if(Ts)for(var n of Ts(t))Ar.call(t,n)&&As(e,n,t[n]);return e},wr=nn(nn(nn({axis_evalTextSize:!0,axis_rotated:!1,axis_tooltip:!1},yr),$r),br),Sr={grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:void 0,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0},Rr={data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_axes:{},data_regions:{},data_stack_normalize:!1};const Cr=[Uo,Zo,qo,Ko,Jo,Qo,tr],ws={axis:cr,clip:gr,eventrect:ur,flow:hr,grid:xr,region:_r,sizeAxis:mr},Ss={optDataAxis:Rr,optAxis:wr,optGrid:Sr};var Rs=tt(11);const Er=15,Cs=20,Es=.35;function kr(e=!1){const t=this;return["donut","pie","polar","gauge"].find(n=>t.hasType(n)&&!(n==="gauge"&&e&&t.hasMultiArcGauge()))}function ks(){const e=this,{config:t}=e,n=kr.call(e,!0),s=n&&t[`${n}_label_line`],i=bt(s),a=(l,c,u)=>u,o={show:s===!0||i&&(s==null?void 0:s.show)!==!1,distance:i&&(s==null?void 0:s.distance)||Cs};if(s===!0)return{chartType:n,line:o,text:{formatter:a}};if(!i)return{chartType:n,line:{show:!1,distance:Cs},text:{formatter:null}};let r=a;return L(s.text)?r=s.text:s.text===!1&&(r=null),{chartType:n,line:o,text:{formatter:r}}}function Lr(e,t){const n=this,{state:s}=n,i=n.updateAngle(e);if(!i)return null;let{outerRadius:a}=n.getRadius(e),o=a;n.hasType("polar")&&(o=n.getPolarOuterRadius(e,a),a=s.radius);let r=(i.startAngle+i.endAngle)/2;Math.abs(i.endAngle-i.startAngle-2*Math.PI)<.01&&(r=Math.PI/2);const c=Math.sin(r),u=-Math.cos(r),d={x:c*o,y:u*o},h=a+Er,g={x:c*h,y:u*h},f=c>=0,p={x:g.x+t*(f?1:-1),y:g.y};return{startPoint:d,breakPoint:g,endPoint:p,isRight:f,midAngle:r}}function Ls(){return ks.call(this).line.show}function Pr(e){const t=this,{$el:{arcs:n},$T:s}=t,{line:i,text:a}=ks.call(t),o=i.distance;let r=null;n.selectAll(`.${X.chartArc}`).each(function(l){var c,u,d;const h=(0,S.select)(this),g=Lr.call(t,l,o),{ratio:f,meetsThreshold:p,updated:_}=(c=l._cache)!=null?c:{};if(!_||!g)return;const x=t.isTargetToShow(l.data.id)&&p,{startPoint:m,breakPoint:y,endPoint:$,isRight:v}=g,b=`${m.x},${m.y} ${y.x},${y.y} ${$.x},${$.y}`;if(i.show){let R=h.select(`.${X.arcLabelLine}`);R.empty()&&(R=h.append("polyline").attr("class",X.arcLabelLine)),s(R,e).attr("points",b).style("stroke",t.color(l.data)).style("opacity",x?null:"0")}let T=h.select(`.${X.arcLabelLineText}`);if(T.empty()&&(T=h.append("text").attr("class",X.arcLabelLineText).style("pointer-events","none")),x){const{value:R}=_,{id:C}=l.data,A=((d=(u=a.formatter)!=null?u:t.getArcLabelConfig("format"))!=null?d:t.defaultArcValueFormat)(R,f,C).toString();te(T,A,[-1,1],!1);const w={x:$.x+5*(v?1:-1),y:$.y};T.style("text-anchor",v?"start":"end");const P=T.node(),E=P==null?void 0:P.querySelectorAll("tspan");if(r===null&&(r=parseFloat(B.getComputedStyle(P).fontSize)||12),E&&E.length>1){const z=(E.length-3)/2;w.y+=(-z+Es)*r}else w.y+=Es*r;s(T,e).attr("transform",`translate(${w.x},${w.y})`).style("opacity",null).style("fill",t.updateTextColor.bind(t)(l))}else s(T,e).style("opacity","0")})}var Or=Object.defineProperty,Ir=Object.defineProperties,Dr=Object.getOwnPropertyDescriptors,Ps=Object.getOwnPropertySymbols,zr=Object.prototype.hasOwnProperty,Fr=Object.prototype.propertyIsEnumerable,Os=(e,t,n)=>t in e?Or(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mr=(e,t)=>{for(var n in t||(t={}))zr.call(t,n)&&Os(e,n,t[n]);if(Ps)for(var n of Ps(t))Fr.call(t,n)&&Os(e,n,t[n]);return e},Xr=(e,t)=>Ir(e,Dr(t));function Nr(e){return["donut","pie","polar","gauge"].find(t=>e.hasType(t))}function Br(e,t,n,s){var i,a;const{config:o,state:{radiusExpanded:r}}=e,l=n.endAngle-Math.PI/2,c=Math.sin(l),u={x:Math.cos(l)*(r+(s?5:25)),y:c*(r+15-Math.abs(c*10))+3};if(s){const d=o.arc_rangeText_position;if(d){const h=o.arc_rangeText_values,g=L(d)?d(h[t.index]):d;u.x+=(i=g==null?void 0:g.x)!=null?i:0,u.y+=(a=g==null?void 0:g.y)!=null?a:0}}return u}function Gr(e,t,n,s){const{config:i}=e,a=Nr(e);let o=a?i[`${a}_label_ratio`]:void 0;if(o)o=L(o)?o.bind(e.api)(t,n,s):o;else{const d=36/n,h=d>.375;o=n&&s?(h?1.175-d:.8)*n/s:0}return o}function Vr(e,t,n){let{outerRadius:s}=e.getRadius(t);e.hasType("polar")&&(s=e.getPolarOuterRadius(t,s));const[i,a]=e.svgArc.centroid(n).map(l=>isNaN(l)?0:l),o=Math.sqrt(i*i+a*a),r=Gr(e,t,s,o);return{pos:{x:i,y:a},ratio:r}}function Is(e=0){const t=this,{config:n,state:s}=t,i=t.hasMultiArcGauge(),a=s.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length,o=e?Math.min(s.radiusExpanded*e-s.radius,a*.8-(1-e)*100):0;return{inner(r){const{innerRadius:l}=t.getRadius(r);return i?s.radius-a*(r.index+1):I(l)?l:0},outer(r){const{outerRadius:l}=t.getRadius(r);let c;if(i)c=s.radius-a*r.index+o;else if(t.hasType("polar")&&!e)c=t.getPolarOuterRadius(r,l);else if(c=l,e){let{radiusExpanded:u}=s;s.radius!==l&&(u-=Math.abs(s.radius-l)),c=u*e}return c},corner(r,l){const{arc_cornerRadius_ratio:c=0,arc_cornerRadius:u=0}=n,{data:{id:d},value:h}=r;let g=0;return c?g=c*l:g=I(u)?u:u.call(t.api,d,h,l),g}}}function sn(e){return function(t){const n=({startAngle:i=0,endAngle:a=0,padAngle:o=0})=>({startAngle:i,endAngle:a,padAngle:o}),s=(0,Rs.interpolate)(n(this._current),n(t));return this._current=t,function(i){const a=s(i),{data:o,index:r,value:l}=t;return e(Xr(Mr({},a),{data:o,index:r,value:l}))}}}var Yr={initPie(){const e=this,{config:t}=e,n=t.data_type,s=t[`${n}_padding`],i=t[`${n}_startingAngle`]||0,a=(s?s*.01:t[`${n}_padAngle`])||0;e.pie=(0,J.pie)().startAngle(i).endAngle(i+2*Math.PI).padAngle(a).value(o=>{var r,l;return(l=(r=o.values)==null?void 0:r.reduce((c,u)=>c+u.value,0))!=null?l:o}).sort(e.getSortCompareFn.bind(e)(!0))},updateRadius(){const e=this,{config:t,state:n}=e,s=t.data_type,i=t[`${s}_padding`],a=t.gauge_width||t.donut_width,o=e.filterTargetsToShow(e.data.targets).length*t.gauge_arcs_minWidth,r=.85,l=Ls.call(e)?r:1;n.radiusExpanded=Math.min(n.arcWidth,n.arcHeight)/2*(e.hasMultiArcGauge()&&t.gauge_label_show?r:l),n.radius=n.radiusExpanded*.95,n.innerRadiusRatio=a?(n.radius-a)/n.radius:.6,n.gaugeArcWidth=a||(o<=n.radius-n.innerRadius?n.radius-n.innerRadius:o<=n.radius?o:n.radius);const c=t.pie_innerRadius||(i?i*(n.innerRadiusRatio+.1):0);n.outerRadius=t.pie_outerRadius,n.innerRadius=e.hasType("donut")||e.hasType("gauge")?n.radius*n.innerRadiusRatio:c},getRadius(e){const t=this,n=e==null?void 0:e.data;let{innerRadius:s,outerRadius:i}=t.state;return!I(s)&&n&&(s=s[n.id]||0),V(i)&&n&&n.id in i?i=i[n.id]:I(i)||(i=t.state.radius),{innerRadius:s,outerRadius:i}},updateArc(){const e=this;e.updateRadius(),e.svgArc=e.getSvgArc(),e.svgArcExpanded=e.getSvgArcExpanded()},getArcLength(){const e=this,{config:t}=e,n=t.gauge_arcLength*3.6;let s=2*(n/360);return n<-360?s=-2:n>360&&(s=2),s*Math.PI},getStartingAngle(){const e=this,{config:t}=e,n=t.data_type,s=e.hasType("gauge")?t.gauge_fullCircle:!1,i=-1*Math.PI/2,a=Math.PI/2;let o=t[`${n}_startingAngle`]||0;return!s&&o<=i?o=i:!s&&o>=a?o=a:(o>Math.PI||o<-1*Math.PI)&&(o=Math.PI),o},updateAngle(e,t=!1){var n;const s=this,{config:i,state:a}=s,o=t&&s.hasType("gauge");let{pie:r}=s,l=e,c=!1;if(!i)return null;const u=s.getStartingAngle(),d=i.gauge_fullCircle||t&&!o?s.getArcLength():u*-2;if(l.data&&s.isGaugeType(l.data)&&!s.hasMultiArcGauge()){const{gauge_min:h,gauge_max:g}=i,f=s.getTotalDataSum(a.rendered),p=d*((f-h)/(g-h));r=r.startAngle(u).endAngle(p+u)}if(t===!1&&r(s.filterTargetsToShow()).forEach((h,g)=>{var f;!c&&h.data.id===((f=l.data)==null?void 0:f.id)&&(c=!0,l=h,l.index=g)}),isNaN(l.startAngle)&&(l.startAngle=0),isNaN(l.endAngle)&&(l.endAngle=l.startAngle),t||l.data&&(i.gauge_enforceMinMax||s.hasMultiArcGauge())){const{gauge_min:h,gauge_max:g}=i,f=t&&!o?s.getTotalDataSum(a.rendered):g,p=d/(f-h),_=(n=l.value)!=null?n:0,x=_<h?0:_<f?_-h:f-h;l.startAngle=u,l.endAngle=u+p*x}return c||t?l:null},getSvgArc(){const e=this,{inner:t,outer:n,corner:s}=Is.call(e),i=(0,J.arc)().innerRadius(t).outerRadius(n),a=function(o,r){var l;let c="M 0 0";if(o.value||o.data){const u=r?o:(l=e.updateAngle(o))!=null?l:null;u&&(c=i.cornerRadius(s(u,n(u)))(u))}return c};return a.centroid=i.centroid,a},getSvgArcExpanded(e=1){const t=this,{inner:n,outer:s,corner:i}=Is.call(t,e),a=(0,J.arc)().innerRadius(n).outerRadius(s);return o=>{const r=t.updateAngle(o),l=s(r);let c=0;return r&&(c=i(r,l)),r?a.cornerRadius(c)(r):"M 0 0"}},getArc(e,t,n){return n||this.isArcType(e.data)?this.svgArc(e,t):"M 0 0"},redrawArcRangeText(){const e=this,{config:t,$el:{arcs:n},state:s,$T:i}=e,a=t.arc_rangeText_format,o=e.hasType("gauge")&&t.arc_rangeText_fixed;let r=t.arc_rangeText_values;if(r!=null&&r.length){const l=t.arc_rangeText_unit==="%",c=e.getTotalDataSum(s.rendered);l&&(r=r.map(h=>c/100*h));const u=e.pie(r).map((h,g)=>(h.index=g,h));let d=n.selectAll(`.${X.arcRange}`).data(r);d.exit(),d=i(d.enter().append("text").attr("class",X.arcRange).style("text-anchor","middle").style("pointer-events","none").style("opacity","0").text(h=>{const g=l?h/c*100:h;return L(a)?a(g):`${g}${l?"%":""}`}).merge(d)),(!s.rendered||s.rendered&&!o)&&c>0&&d.attr("transform",function(h,g){return e.transformForArcLabel(this,u[g],!0)}),d.style("opacity",h=>!o&&(h>c||c===0)?"0":null)}},transformForArcLabel(e,t,n=!1){const s=this,i=s.updateAngle(t,n);if(!i)return"";let a,o=1;if(n||s.hasMultiArcGauge())a=Br(s,t,i,n);else if(!s.hasType("gauge")||s.data.targets.length>1){const r=Vr(s,t,i);a=r.pos,o=r.ratio}else return"";return Jn.call(s,e,a),`translate(${a.x*o},${a.y*o})`},convertToArcData(e){return this.addName({id:"data"in e?e.data.id:e.id,value:e.value,ratio:this.getRatio("arc",e),index:e.index})},textForArcLabel(e){var t;const n=this,s=n.hasType("gauge"),i=(t=["donut","gauge","pie","polar"].filter(n.hasType.bind(n)))==null?void 0:t[0];n.shouldShowArcLabel()&&e.style("fill",n.updateTextColor.bind(n)).attr("filter",a=>n.updateTextBGColor.bind(n)(a,n.config.data_labels_backgroundColors)).each(function(a){const o=(0,S.select)(this),r=n.updateAngle(a),l=n.getRatio("arc",r),c=Qe.call(n,l,i);if(a._cache={updated:r,ratio:l,meetsThreshold:c},c){const{value:u}=r||a,d=(n.getArcLabelConfig("format")||n.defaultArcValueFormat)(u,l,a.data.id).toString();te(o,d,[-1,1],s)}else o.text("")})},expandArc(e){const t=this,{state:{transiting:n},$el:s}=t;if(n){const a=setInterval(()=>{n||(clearInterval(a),s.legend.selectAll(`.${q.legendItemFocused}`).size()>0&&t.expandArc(e))},10);return}const i=t.mapToTargetIds(e);s.svg.selectAll(t.selectorTargets(i,`.${X.chartArc}`)).each(function(a){if(!t.shouldExpand(a.data.id))return;const o=t.getExpandConfig(a.data.id,"duration"),r=t.getSvgArcExpanded(t.getExpandConfig(a.data.id,"rate"));(0,S.select)(this).selectAll("path").transition().duration(o).attrTween("d",sn(t.svgArcExpanded.bind(t))).transition().duration(o*2).attrTween("d",sn(r.bind(t)))})},unexpandArc(e){const t=this,{state:{transiting:n},$el:{svg:s}}=t;if(n)return;const i=t.mapToTargetIds(e);s.selectAll(t.selectorTargets(i,`.${X.chartArc}`)).selectAll("path").transition().duration(a=>t.getExpandConfig(a.data.id,"duration")).attrTween("d",sn(t.svgArc.bind(t))),s.selectAll(`${X.arc}`).style("opacity",null)},getExpandConfig(e,t){const n=this,{config:s}=n,i={duration:50,rate:.98};let a;return n.isDonutType(e)?a="donut":n.isGaugeType(e)?a="gauge":n.isPieType(e)&&(a="pie"),a?s[`${a}_expand_${t}`]:i[t]},shouldExpand(e){const t=this,{config:n}=t;return t.isDonutType(e)&&n.donut_expand||t.isGaugeType(e)&&n.gauge_expand||t.isPieType(e)&&n.pie_expand},shouldShowArcLabel(){const e=this,{config:t}=e;return["donut","gauge","pie","polar"].some(n=>e.hasType(n)&&t[`${n}_label_show`])},getArcLabelConfig(e="format"){const t=this,{config:n}=t;let s=i=>i;return["donut","gauge","pie","polar"].filter(t.hasType.bind(t)).forEach(i=>{s=n[`${i}_label_${e}`]}),e==="format"&&L(s)?s.bind(t.api):s},updateTargetsForArc(e){const t=this,{$el:n}=t,s=t.hasType("gauge"),i=t.getChartClass("Arc"),a=t.getClass("arcs",!0),o=t.classFocus.bind(t),r=n.main.select(`.${X.chartArcs}`),l=r.selectAll(`.${X.chartArc}`).data(t.pie(e)).attr("class",u=>i(u)+o(u.data)),c=l.enter().append("g").attr("class",i).call(this.setCssRule(!1,`.${X.chartArcs} text`,["pointer-events:none","text-anchor:middle"]));c.append("g").attr("class",a).merge(l),c.append("text").attr("dy",s&&!t.hasMultiTargets()?"-.1em":null).style("opacity","0").style("text-anchor",t.getStylePropValue("middle")).style("pointer-events",t.getStylePropValue("none")),n.text=r.selectAll(`.${D.target} text`)},initArc(){const e=this,{$el:t}=e;t.arcs=t.main.select(`.${D.chart}`).append("g").attr("class",X.chartArcs).attr("transform",e.getTranslate("arc")),e.setArcTitle()},setArcTitle(e){const t=this,n=e||t.getArcTitle(),s=t.hasType("gauge");if(n){const i=s?$t.chartArcsGaugeTitle:X.chartArcsTitle;let a=t.$el.arcs.select(`.${i}`);a.empty()&&(a=t.$el.arcs.append("text").attr("class",i).style("text-anchor","middle")),s&&a.attr("dy","-0.3em"),te(a,n,s?void 0:[-.6,1.35],!0)}},getArcTitle(){const e=this,t=e.hasType("donut")&&"donut"||e.hasType("gauge")&&"gauge";return t?e.config[`${t}_title`]:""},getArcTitleWithNeedleValue(){const e=this,{config:t,state:n}=e,s=e.getArcTitle();if(s&&e.config.arc_needle_show&&/{=[A-Z_]+}/.test(s)){let i=n.current.needle;return I(i)||(i=t.arc_needle_value),pe(s,{NEEDLE_VALUE:~~i})}return!1},redrawArc(e,t,n){const s=this,{config:i,state:a,$el:{main:o}}=s,r=i.interaction_enabled,l=r&&i.data_selection_isselectable;let c=o.selectAll(`.${X.arcs}`).selectAll(`.${X.arc}`).data(s.arcData.bind(s));c.exit().transition().duration(t).style("opacity","0").remove(),c=c.enter().append("path").attr("class",s.getClass("arc",!0)).style("fill",u=>s.color(u.data)).style("cursor",u=>{var d;return(d=l==null?void 0:l.bind)!=null&&d.call(l,s.api)(u)?"pointer":null}).style("opacity","0").each(function(u){s.isGaugeType(u.data)&&(u.startAngle=i.gauge_startingAngle,u.endAngle=i.gauge_startingAngle),this._current=u}).merge(c),s.hasType("gauge")&&(s.updateGaugeMax(),s.hasMultiArcGauge()&&s.redrawArcGaugeLine()),c.attr("transform",u=>!s.isGaugeType(u.data)&&n?"scale(0)":"").style("opacity",function(u){return u===this._current?"0":null}).each(()=>{a.transiting=!0}).transition().duration(e).attrTween("d",function(u){const d=s.updateAngle(u);if(!d)return()=>"M 0 0";isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);const h=(0,Rs.interpolate)(this._current,d);return this._current=h(0),function(g){const f=h(g);return f.data=u.data,s.getArc(f,!0)}}).attr("transform",n?"scale(1)":"").style("fill",u=>{let d;return s.levelColor?(d=s.levelColor(u.data.values[0].value),i.data_colors[u.data.id]=d):d=s.color(u.data),d}).style("opacity",null).call(Re,function(){if(s.levelColor){const u=(0,S.select)(this),d=u.datum(this._current);s.updateLegendItemColor(d.data.id,u.style("fill"))}a.transiting=!1,K(i.onrendered,s.api)}),r&&s.bindArcEvent(c),s.hasType("polar")&&s.redrawPolar(),s.hasType("gauge")&&s.redrawBackgroundArcs(),i.arc_needle_show&&s.redrawNeedle(),s.redrawArcText(e),s.redrawArcRangeText()},redrawNeedle(){const e=this,{$el:t,config:n,state:{hiddenTargetIds:s,radius:i}}=e,a=(i-1)/100*n.arc_needle_length,o=s.length!==e.data.targets.length;let r=e.$el.arcs.select(`.${X.needle}`);const l=n.arc_needle_path,c=n.arc_needle_bottom_width/2,u=n.arc_needle_top_width/2,d=n.arc_needle_top_rx,h=n.arc_needle_top_ry,g=n.arc_needle_bottom_len,f=n.arc_needle_bottom_rx,p=n.arc_needle_bottom_ry,_=e.getNeedleAngle(),x=()=>{const m=e.getArcTitleWithNeedleValue();m&&e.setArcTitle(m)};if(x(),r.empty()&&(r=t.arcs.append("path").classed(X.needle,!0),t.needle=r,t.needle.updateHelper=(m,y=!1)=>{t.needle.style("display")!=="none"&&e.$T(t.needle).style("transform",`rotate(${e.getNeedleAngle(m)}deg)`).call(Re,()=>{y&&(n.arc_needle_value=m),x()})}),o){const m=L(l)?l.call(e,a):`M-${c} ${g} A${f} ${p} 0 0 0 ${c} ${g} L${u} -${a} A${d} ${h} 0 0 0 -${u} -${a} L-${c} ${g} Z`;e.$T(r).attr("d",m).style("fill",n.arc_needle_color).style("display",null).style("transform",`rotate(${_}deg)`)}else r.style("display","none")},getNeedleAngle(e){const t=this,{config:n,state:s}=t,i=t.getArcLength(),a=t.hasType("gauge"),o=t.getTotalDataSum(!0);let r=H(e)?e:n.arc_needle_value,l=n[`${n.data_type}_startingAngle`]||0,c=0;if(I(r)||(r=a&&t.data.targets.length===1?o:0),s.current.needle=r,a){l=t.getStartingAngle();const u=n.gauge_fullCircle?i:l*-2,{gauge_min:d,gauge_max:h}=n;c=u*((r-d)/(h-d))}else c=i*(r/o);return(l+c)*(180/Math.PI)},redrawBackgroundArcs(){const e=this,{config:t,state:n}=e,s=e.hasMultiArcGauge(),i=t.gauge_fullCircle,a=e.filterTargetsToShow(e.data.targets).length===0&&!!t.data_empty_label_text,o=e.getStartingAngle(),r=i?o+e.getArcLength():o*-1;let l=e.$el.arcs.select(`${s?"g":""}.${X.chartArcsBackground}`);if(s){let c=0;l=l.selectAll(`path.${X.chartArcsBackground}`).data(e.data.targets),l.enter().append("path").attr("class",(u,d)=>`${X.chartArcsBackground} ${X.chartArcsBackground}-${d}`).merge(l).style("fill",t.gauge_background||null).attr("d",({id:u})=>{if(a||n.hiddenTargetIds.indexOf(u)>=0)return"M 0 0";const d={data:[{value:t.gauge_max}],startAngle:o,endAngle:r,index:c++};return e.getArc(d,!0,!0)}),l.exit().remove()}else l.attr("d",a?"M 0 0":()=>{const c={data:[{value:t.gauge_max}],startAngle:o,endAngle:r};return e.getArc(c,!0,!0)})},bindArcEvent(e){const t=this,{config:n,state:s}=t,i=s.inputType==="touch",a=s.inputType==="mouse";function o(l,c,u){t.expandArc(u),t.api.focus(u),t.toggleFocusLegend(u,!0),t.showTooltip([c],l)}function r(l){const c=(l==null?void 0:l.id)||void 0;t.unexpandArc(c),t.api.revert(),t.revertLegend(),t.hideTooltip()}if(e.on("click",function(l,c,u){var d;const h=t.updateAngle(c);let g;h&&(g=t.convertToArcData(h),(d=t.toggleShape)==null||d.call(t,this,g,u),n.data_onclick.bind(t.api)(g,this))}),a&&e.on("mouseover",function(l,c){if(s.transiting)return;s.event=l;const u=t.updateAngle(c),d=u?t.convertToArcData(u):null,h=(d==null?void 0:d.id)||void 0;o(this,d,h),t.setOverOut(!0,d)}).on("mouseout",(l,c)=>{if(s.transiting||!n.interaction_onout)return;s.event=l;const u=t.updateAngle(c),d=u?t.convertToArcData(u):null;r(),t.setOverOut(!1,d)}).on("mousemove",function(l,c){const u=t.updateAngle(c),d=u?t.convertToArcData(u):null;s.event=l,t.showTooltip([d],this)}),i&&t.hasArcType()&&!t.radars){const l=c=>{var u,d;const{clientX:h,clientY:g}=(d=(u=c.changedTouches)==null?void 0:u[0])!=null?d:{clientX:0,clientY:0};return(0,S.select)(ct.elementFromPoint(h,g))};t.$el.svg.on("touchstart touchmove",function(c){if(s.transiting)return;s.event=c;const d=l(c).datum(),h=d!=null&&d.data&&d.data.id?t.updateAngle(d):null,g=h?t.convertToArcData(h):null,f=(g==null?void 0:g.id)||void 0;t.callOverOutForTouch(g),it(f)?r():o(this,g,f)},{passive:!0})}},redrawArcText(e){const t=this,{config:n,state:s,$el:{main:i,arcs:a}}=t,o=t.hasType("gauge"),r=t.hasMultiArcGauge();let l;if(o&&t.data.targets.length===1&&n.gauge_title||(l=i.selectAll(`.${X.chartArc}`).select("text").style("opacity","0").attr("class",c=>t.isGaugeType(c.data)?$t.gaugeValue:null).call(t.textForArcLabel.bind(t)).style("font-size",c=>t.isGaugeType(c.data)&&t.data.targets.length===1&&!r?`${Math.round(s.radius/5)}px`:null),Kn.call(t),l.attr("transform",function(c){return t.transformForArcLabel.bind(t)(this,c)}).transition().duration(e).style("opacity",c=>t.isTargetToShow(c.data.id)&&t.isArcType(c.data)?null:"0"),r&&l.attr("dy","-.1em")),i.select(`.${X.chartArcsTitle}`).style("opacity",t.hasType("donut")||o?null:"0"),o){const c=n.gauge_fullCircle;c&&(l==null||l.attr("dy",`${r?0:Math.round(s.radius/14)}`)),n.gauge_label_show&&(a.select(`.${$t.chartArcsGaugeUnit}`).attr("dy",`${c?1.5:.75}em`).text(n.gauge_units),a.select(`.${$t.chartArcsGaugeMin}`).attr("dx",`${-1*(s.innerRadius+(s.radius-s.innerRadius)/(c?1:2))}px`).attr("dy","1.2em").text(t.textForGaugeMinMax(n.gauge_min,!1)),!c&&a.select(`.${$t.chartArcsGaugeMax}`).attr("dx",`${s.innerRadius+(s.radius-s.innerRadius)/2}px`).attr("dy","1.2em").text(t.textForGaugeMinMax(n.gauge_max,!0)))}Ls.call(t)&&Pr.call(t,e)},getArcElementByIdOrIndex(e){const t=this,{$el:{arcs:n}}=t,s=I(e)?i=>i.index===e:i=>i.data.id===e;return n==null?void 0:n.selectAll(`.${D.target} path`).filter(s)}},ie={initArea(e){const t=this,{config:n}=t;e.insert("g",`.${n.area_front?ft.circles:Ct.lines}`).attr("class",t.getClass("areas",!0))},updateAreaColor(e){const t=this;return ts.call(t,e,"area_linearGradient",t.color)},updateArea(e,t=!1){const n=this,{config:s,state:i,$el:a,$T:o}=n,r=t?a.subchart:a;s.area_linearGradient&&n.updateLinearGradient();const l=r.main.selectAll(`.${Te.areas}`).selectAll(`.${Te.area}`).data(n.lineData.bind(n));o(l.exit(),e).style("opacity","0").remove(),r.area=l.enter().append("path").attr("class",n.getClass("area",!0)).style("fill",n.updateAreaColor.bind(n)).style("opacity",function(){return i.orgAreaOpacity=(0,S.select)(this).style("opacity"),"0"}).merge(l),l.style("opacity",i.orgAreaOpacity),n.setRatioForGroupedData(r.area.data())},redrawArea(e,t,n=!1){const s=this,{area:i}=n?this.$el.subchart:this.$el,{orgAreaOpacity:a}=s.state;return[s.$T(i,t,Et()).attr("d",e).style("fill",s.updateAreaColor.bind(s)).style("opacity",o=>String(s.isAreaRangeType(o)?a/1.75:a))]},generateDrawArea(e,t){const n=this,{config:s}=n,i=s.line_connectNull,a=s.axis_rotated,o=n.generateGetAreaPoints(e,t),r=n.getYScaleById.bind(n),l=d=>(t?n.subxx:n.xx).call(n,d),c=(d,h)=>n.isGrouped(d.id)?o(d,h)[0][1]:r(d.id,t)(n.isAreaRangeType(d)?n.getRangedData(d,"high"):n.getShapeYMin(d.id)),u=(d,h)=>n.isGrouped(d.id)?o(d,h)[1][1]:r(d.id,t)(n.isAreaRangeType(d)?n.getRangedData(d,"low"):d.value);return d=>{let h=i?n.filterRemoveNull(d.values):d.values,g=0,f=0,p;if(n.isAreaType(d)){let _=(0,J.area)();_=a?_.y(l).x0(c).x1(u):_.x(l).y0(s.area_above?0:s.area_below?n.state.height:c).y1(u),i||(_=_.defined(x=>n.getBaseValue(x)!==null)),n.isStepType(d)&&(h=n.convertValuesToStep(h)),p=_.curve(n.getCurve(d))(h)}else h[0]&&(g=n.scale.x(h[0].x),f=n.getYScaleById(d.id)(h[0].value)),p=a?`M ${f} ${g}`:`M ${g} ${f}`;return p||"M 0 0"}},generateGetAreaPoints(e,t){const n=this,{config:s}=n,i=n.getShapeX(0,e,t),a=n.getShapeY(!!t),o=n.getShapeOffset(n.isAreaType,e,t),r=n.getYScaleById.bind(n);return function(l,c){const u=r.call(n,l.id,t)(n.getShapeYMin(l.id)),d=o(l,c)||u,h=i(l),g=l.value;let f=a(l);return s.axis_rotated&&(g>0&&f<u||g<0&&u<f)&&(f=u),[[h,d],[h,f-(u-d)],[h,f-(u-d)],[h,d]]}}};function an(e){const t=this.config.bar_connectLine,n=(t==null?void 0:t[e])||t;return/^(start|end)\-(start|end)$/.test(n)?n:null}var jr={initBar(){const{$el:e,config:t,state:{clip:n}}=this;e.bar=e.main.select(`.${D.chart}`),e.bar=t.bar_front?e.bar.append("g"):e.bar.insert("g",":first-child"),e.bar.attr("class",yt.chartBars).call(this.setCssRule(!1,`.${yt.chartBars}`,["pointer-events:none"])),t.clipPath===!1&&(t.bar_radius||t.bar_radius_ratio)&&e.bar.attr("clip-path",n.pathXAxis.replace(/#[^)]*/,`#${n.id}`))},updateTargetsForBar(e){const t=this,{config:n}=t,s=t.getClass("bars",!0),i=n.interaction_enabled&&n.data_selection_isselectable;tn.call(t,e,{type:"Bar",elKey:"bar",containerClass:yt.chartBars,itemClass:yt.chartBar,initFn:t.initBar}).append("g").attr("class",s).style("cursor",o=>{var r;return(r=i==null?void 0:i.bind)!=null&&r.call(i,t.api)(o)?"pointer":null}).call(o=>{t.setCssRule(!0,` .${yt.bar}`,["fill"],t.color)(o),o.each(function(r){an.call(t,r.id)&&(0,S.select)(this).append("path").attr("class",yt.barConnectLine)})})},updateBar(e,t=!1){const n=this,{config:s,$el:i,$T:a}=n,o=t?i.subchart:i,r=n.getClass("bar",!0),l=n.initialOpacity.bind(n);s.bar_linearGradient&&n.updateLinearGradient();const c=o.main.selectAll(`.${yt.bars}`).selectAll(`.${yt.bar}`).data(n.labelishData.bind(n));a(c.exit(),e).style("opacity","0").remove(),o.bar=c.enter().append("path").attr("class",r).style("fill",n.updateBarColor.bind(n)).merge(c).style("opacity",l),n.setRatioForGroupedData(o.bar.data())},updateBarColor(e){const t=this,n=t.getStylePropValue(t.color);return ts.call(t,e,"bar_linearGradient",n||(()=>null))},redrawBar(e,t,n=!1){const s=this,{bar:i}=n?s.$el.subchart:s.$el,a=[];return[s.$T(i,t,Et()).attr("d",function(o,r,l){const c=(I(o.value)||s.isBarRangeType(o))&&e(o,r),u=an.call(s,o.id);if(c.length>1&&(a.push(c[1]),r===l.length-1)){const d=s.$T((0,S.select)(this.parentNode.querySelector(`.${yt.barConnectLine}`)),t,Et());s.updateConnectLine(d,u,a),a.splice(0)}return c[0]}).style("fill",s.updateBarColor.bind(s)).style("clip-path",o=>o.clipPath).style("opacity",null)]},generateDrawBar(e,t){const n=this,{config:s}=n,i=n.generateGetBarPoints(e,t),a=s.axis_rotated,o=s.bar_radius,r=s.bar_radius_ratio,l=I(o)&&o>0?()=>o:I(r)?c=>c*r:null;return(c,u)=>{const d=i(c,u),h=+a,g=+!h,f=c.value<0,p=s[`axis_${n.axis.getId(c.id)}_inverted`],_=!p&&f||p&&!f,x=["",""],m=n.isGrouped(c.id),y=l&&m?n.isStackingRadiusData(c):!1,$=[d[0][h],d[0][g]];let v=0;if(c.clipPath=null,l){const C=a?g:h,A=d[2][C]-d[0][C];v=!m||y?l(A):0;const w=`a${v} ${v} ${_?"1 0 0":"0 0 1"} `;x[+!a]=`${w}${v},${v}`,x[+a]=`${w}${[-v,v][a?"sort":"reverse"]()}`,_&&x.reverse()}const b=a?d[1][h]+(_?v:-v):d[1][g]+(_?-v:v);if(v){let C="";a?_&&$[0]<b?C=`0 ${b-$[0]}px 0 0`:!_&&$[0]>b&&(C=`0 0 0 ${$[0]-b}px`):_&&$[1]>b?C=`${$[1]-b}px 0 0 0`:!_&&$[1]<b&&(C=`0 0 ${b-$[1]}px 0`),C&&(c.clipPath=`inset(${C})`)}const T=a?`H${b} ${x[0]}V${d[2][g]-v} ${x[1]}H${d[3][h]}`:`V${b} ${x[0]}H${d[2][h]-v} ${x[1]}V${d[3][g]}`,R=[`M${d[0][h]},${d[0][g]}${T}z`];return an.call(n,c.id)&&R.push(a?{x:d[0][h],y:d[0][g],width:d[0][h]-b,height:d[2][g]-d[0][g]}:{x:d[0][h],y:b,width:d[2][h]-d[0][h],height:d[3][g]-b}),R}},isStackingRadiusData(e){const t=this,{$el:n,config:s,data:i,state:a}=t,{id:o,index:r,value:l}=e;if(a.hiddenTargetIds.indexOf(o)>-1){const h=n.bar.filter(g=>g.id===o&&g.value===l);return!h.empty()&&/a\d+/i.test(h.attr("d"))}const c=s.data_groups.find(h=>h.indexOf(o)>-1),d=t.orderTargets(t.filterTargetsToShow(i.targets.filter(t.isBarType,t))).filter(h=>c.indexOf(h.id)>-1).map(h=>h.values.filter(g=>g.index===r&&(I(l)&&l>0?g.value>0:g.value<0))[0]).filter(Boolean).map(h=>h.id);return l!==0&&d.indexOf(o)===d.length-1},generateGetBarPoints(e,t){const n=this,{config:s}=n,i=t?n.axis.subX:n.axis.x,a=n.getIndicesMax(e)+1,o=n.getBarW("bar",i,a),r=n.getShapeX(o,e,!!t),l=n.getShapeY(!!t),c=n.getShapeOffset(n.isBarType,e,!!t),u=n.getYScaleById.bind(n);return(d,h)=>{const{id:g}=d,f=u.call(n,g,t)(n.getShapeYMin(g)),p=c(d,h)||f,_=I(o)?o:o[d.id]||o._$width,x=s[`axis_${n.axis.getId(g)}_inverted`],m=d.value,y=r(d);let $=l(d);s.axis_rotated&&!x&&(m>0&&$<f||m<0&&f<$)&&($=f),n.isBarRangeType(d)||($-=f-p);const v=y+_;return[[y,p],[y,$],[v,$],[v,p]]}},updateConnectLine(e,t,n){const s=n.map((i,a,o)=>{const r=this.config.axis_rotated,l=/^start-(start|end)$/.test(t),c=/^end-(start|end)$/.test(t),u=[],d=r?c?i.x-i.width:i.x:i.x+i.width,h=r||l?i.y+i.height:i.y;return a===0?u.push(`${d},${h}`):(u.push(r?`L${i.x-(/\w+-end$/.test(t)?i.width:0)},${i.y}`:`L${i.x},${i.y+(/\w+-start$/.test(t)?i.height:0)}`),a<o.length-1&&u.push(`M${d},${h}`)),u.join(" ")});e.attr("d",`M${s.join("")}z`)}},Wr={initBubble(){const e=this,{config:t}=e;e.hasType("bubble")&&(t.point_show=!0,t.point_type="circle")},getBaseLength(){const e=this,{width:t,height:n}=e.state,s=at.bubbleBaseLength;let i=e.cache.get(s);return i||e.cache.add(s,i=Rt("min",[t,n])),i},getBubbleR(e){const t=this;let n=t.config.bubble_maxR;L(n)?n=n.bind(t.api)(e):I(n)||(n=t.getBaseLength()/(t.getMaxDataCount()*2)+12);const s=Rt("max",t.getMinMaxData().max.map(o=>t.isBubbleZType(o)?t.getBubbleZData(o.value,"y"):V(o.value)?o.value.mid:o.value)),i=n*n*Math.PI,a=(t.isBubbleZType(e)?t.getBubbleZData(e.value,"z"):e.value)*(i/s);return Math.sqrt(a/Math.PI)},getBubbleZData(e,t){return V(e)?e[t]:e[t==="y"?0:1]}},Hr=Object.defineProperty,Ds=Object.getOwnPropertySymbols,Ur=Object.prototype.hasOwnProperty,Zr=Object.prototype.propertyIsEnumerable,zs=(e,t,n)=>t in e?Hr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qr=(e,t)=>{for(var n in t||(t={}))Ur.call(t,n)&&zs(e,n,t[n]);if(Ds)for(var n of Ds(t))Zr.call(t,n)&&zs(e,n,t[n]);return e},Kr={initCandlestick(){es.call(this,{elKey:"candlestick",className:Lt.chartCandlesticks})},updateTargetsForCandlestick(e){tn.call(this,e,{type:"Candlestick",elKey:"candlestick",containerClass:Lt.chartCandlesticks,itemClass:Lt.chartCandlestick,initFn:this.initCandlestick,withFocus:!1,withStyles:!1}).style("pointer-events","none")},updateCandlestick(e,t=!1){const n=this,{$el:s,$T:i}=n,a=t?s.subchart:s,o=n.getClass("candlestick",!0),r=n.initialOpacity.bind(n),l=a.main.selectAll(`.${Lt.chartCandlestick}`).selectAll(`.${Lt.candlestick}`).data(n.labelishData.bind(n));i(l.exit(),e).style("opacity","0").remove();const c=l.enter().filter(u=>u.value).append("g").attr("class",o);c.append("line"),c.append("path"),a.candlestick=l.merge(c).style("opacity",r)},generateDrawCandlestick(e,t){const n=this,{config:s}=n,i=n.generateGetCandlestickPoints(e,t),a=s.axis_rotated,o=s.candlestick_color_down;return(r,l,c)=>{const u=i(r,l),d=n.getCandlestickData(r),h=d==null?void 0:d._isUp,g=+a,f=+!g;c.classed&&c.classed(Lt[h?"valueUp":"valueDown"],!0);const p=a?`H${u[1][1]} V${u[1][0]} H${u[0][1]}`:`V${u[1][1]} H${u[1][0]} V${u[0][1]}`;c.select("path").attr("d",`M${u[0][g]},${u[0][f]}${p}z`).style("fill",m=>(h?n.color(m):V(o)?o[m.id]:o)||n.color(m));const _=c.select("line"),x=a?{x1:u[2][1],x2:u[2][2],y1:u[2][0],y2:u[2][0]}:{x1:u[2][0],x2:u[2][0],y1:u[2][1],y2:u[2][2]};for(const m in x)_.attr(m,x[m])}},generateGetCandlestickPoints(e,t=!1){const n=this,s=t?n.axis.subX:n.axis.x,i=n.getIndicesMax(e)+1,a=n.getBarW("candlestick",s,i),o=n.getShapeX(a,e,!!t),r=n.getShapeY(!!t),l=n.getShapeOffset(n.isBarType,e,!!t),c=n.getYScaleById.bind(n);return(u,d)=>{const h=c.call(n,u.id,t)(n.getShapeYMin(u.id)),g=l(u,d)||h,f=I(a)?a:a[u.id]||a._$width,p=n.getCandlestickData(u);let _;if(p&&I(p.open)&&I(p.close)){const x={start:o(u),end:0};x.end=x.start+f;const m={start:r(p.open),end:r(p.close)},y={x:x.start+f/2,high:r(p.high),low:r(p.low)};m.start-=h-g,_=[[x.start,m.start],[x.end,m.end],[y.x,y.low,y.high]]}else _=[[0,0],[0,0],[0,0,0]];return _}},redrawCandlestick(e,t,n=!1){const s=this,{$el:i,$T:a}=s,{candlestick:o}=n?i.subchart:i,r=Et(!0);return[o.each(function(l,c){const u=a((0,S.select)(this),t,r);e(l,c,u)}).style("opacity",null)]},getCandlestickData({value:e}){let t;if(Y(e)){const[n,s,i,a,o=!1]=e;t={open:n,high:s,low:i,close:a},o!==!1&&(t.volume=o)}else V(e)&&(t=qr({},e));return t&&(t._isUp=t.close>=t.open),t||null}},Jr=Object.defineProperty,Fs=Object.getOwnPropertySymbols,Qr=Object.prototype.hasOwnProperty,tl=Object.prototype.propertyIsEnumerable,Ms=(e,t,n)=>t in e?Jr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,el=(e,t)=>{for(var n in t||(t={}))Qr.call(t,n)&&Ms(e,n,t[n]);if(Fs)for(var n of Fs(t))tl.call(t,n)&&Ms(e,n,t[n]);return e};function ae(e=!1){const t=this,{config:n,state:{current:{width:s,height:i}}}=t,a=t.getCurrentPadding(),o=el({width:s-a.left-a.right,height:i-(n.legend_show?t.getLegendHeight()+10:0)-a.top-a.bottom},a);if(e){const r=on.call(t,o),l=n.funnel_rotated;o.width=Math.max(o.width,l?r.height:r.width),o.height=Math.max(o.height,l?r.width:r.height)}return o}function on(e){const t=this,{config:n}=t,s=n.funnel_rotated,[i,a]=[n.funnel_neck_width,n.funnel_neck_height].map((o,r)=>V(o)?e[s!==!r?"width":"height"]*o.ratio:o);return{width:i,height:a}}function nl(e){const t=this,n=t.config.funnel_rotated,{width:s,height:i}=ae.call(t,!0),a=[];return e.forEach((o,r)=>{const{ratio:l=0}=o,c=r>0?a[r-1][2][n?0:1]:0,u=l+c;a.push(o.coords=n?[[c,0],[u,0],[u,i],[c,i],[c,0]]:[[0,c],[s,c],[s,u],[0,u],[0,c]])}),a}function sl(){const e=this,t=e.config.funnel_rotated,{width:n,height:s}=ae.call(e,!0),i=on.call(e,{width:n,height:s});let a;if(t){const o=(s-i.width)/2,r=n-i.height;a=[[r,o],[n,o],[n,s-o],[r,s-o],[0,s]]}else{const o=(n-i.width)/2,r=s-i.height;a=[[n,0],[n-o,r],[n-o,s],[o,s],[o,r]]}return`M${[[0,0],...a,[0,0]].join("L")}z`}function il(e){const t=this,{config:n}=t,s=e.map(i=>({id:i.id,value:i.values.reduce((a,o)=>a+o.value,0)}));return n.data_order&&s.sort(t.getSortCompareFn.bind(t)(!0)),Xs.call(t,s)}function Xs(e){const t=this,{width:n,height:s}=ae.call(t),i=t.getTotalDataSum(!0),a=t.config.funnel_rotated?n:s;return e.forEach(o=>{o.ratio=o.value/i*a}),e}function al(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}function Ns(e,t,n,s,i){const a=[];for(let r=0;r<=20;r++){const l=r/20,c=e+(t-e)*l,u=n+(s-n)*al(l);a.push(i?[c,u]:[u,c])}return a}function ol(){var e;const t=this,n=t.config.funnel_rotated,{width:s,height:i}=ae.call(t,!0),a=on.call(t,{width:s,height:i}),o=(0,J.line)().x(g=>g[0]).y(g=>g[1]).curve(J.curveLinear),r=(n?i-a.width:s-a.width)/2,l=n?s-a.height:i-a.height,c=Ns(0,l,n?0:s,n?r:s-r,n),u=[];if(a.height>0&&(c.push(n?[s,r]:[s-r,i]),u.push(n?[s,i-r]:[r,i])),u.push(...Ns(l,0,n?i-r:r,n?i:0,n)),c.length>1){const[g,f]=n?[1,0]:[0,1];c.splice(1,0,[c[g][0],c[f][1]]);const p=u.length-1;p>0&&u.splice(p,0,[u[p-g][0],u[p-f][1]])}const d=o(c)||"",h=((e=o(u))==null?void 0:e.replace(/^M/,"L"))||"";return n?`${d}${h}z`:`M0,0${d.replace(/^M/,"L")}${h}z`}var rl={initFunnel(){const e=this,{$el:t}=e;t.funnel=t.main.select(`.${D.chart}`).append("g").classed(ge.chartFunnels,!0),t.funnel.background=t.funnel.append("path").classed(ge.funnelBackground,!0),e.bindFunnelEvent()},bindFunnelEvent(){const e=this,{$el:{funnel:t},config:n,state:s}=e;if(!n.interaction_enabled)return;const i=o=>{var r;const l=o.isTrusted?o.target:(r=s.eventReceiver.rect)==null?void 0:r.node();if(/^path$/i.test(l.tagName))return s.event=o,(0,S.select)(l).datum()},a=s.inputType==="touch";t.on(a?"touchstart":"mouseover mousemove",o=>{const r=i(o);r&&(e.showTooltip([r],o.target),/^(touchstart|mouseover)$/.test(o.type)&&e.setOverOut(!0,r))},a?{passive:!0}:void 0).on(a?"touchend":"mouseout",o=>{const r=i(o);n.interaction_onout&&(e.hideTooltip(),e.setOverOut(!1,r))})},updateTargetsForFunnel(e){const t=this,{$el:{funnel:n}}=t;n||t.initFunnel();const s=t.getChartClass("Funnel"),i=t.getClass("funnel",!0),a=il.call(t,e.filter(t.isFunnelType.bind(t))),o=t.filterNullish(a),r=n.selectAll(`.${ge.chartFunnel}`).data(o);r.exit().remove();const l=r.enter().insert("g",`.${ge.funnelBackground}`);l.append("path"),n.path=l.merge(r).attr("class",s).select("path").attr("class",i).style("opacity","0").style("fill",t.color)},updateFunnel(e){const t=this,{$el:{funnel:n}}=t,s=e.map(({id:i})=>i);n.path=n.path.filter(i=>s.includes(i.id))},generateGetFunnelPoints(){const e=this,{config:t,$el:{funnel:n}}=e,s=t.funnel_rotated,i=e.filterTargetsToShow(n.path),{top:a,left:o,width:r,height:l}=ae.call(e),c={};let u=0;return i.each((d,h)=>{var g;const f=u,p=((g=i==null?void 0:i[h])!=null?g:d).ratio;u+=p;const _=s?o:a,x=_+f,m=_+u,y=(x+m)/2,$=s?a+l/2:o+r/2;c[d.id]=s?[[x,$],[m,$],[y,$]]:[[$,x],[$,m],[$,y]]}),d=>c[d.id]},redrawFunnel(){const e=this,{config:t,$T:n,$el:{funnel:s}}=e,i=e.filterTargetsToShow(s.path),a=nl.call(e,Xs.call(e,i.data())),{top:o,left:r}=ae.call(e),l=(t.funnel_spline?ol:sl).call(e);s.attr("transform",`translate(${r}, ${o})`).attr("clip-path",`path('${l}')`),s.background.attr("d",l),n(i).attr("d",(c,u)=>`M${a[u].join("L")}z`).style("opacity","1"),s.selectAll("g").style("opacity",null)}},ll={initGauge(){const e=this,{config:t,$el:{arcs:n}}=e,s=(i=null,a="")=>{n.append("text").attr("class",i).style("text-anchor","middle").style("pointer-events","none").text(a)};if(e.hasType("gauge")){const i=e.hasMultiArcGauge();n.append(i?"g":"path").attr("class",X.chartArcsBackground).style("fill",!i&&t.gauge_background||null),t.gauge_units&&s($t.chartArcsGaugeUnit),t.gauge_label_show&&(s($t.chartArcsGaugeMin),!t.gauge_fullCircle&&s($t.chartArcsGaugeMax))}},updateGaugeMax(){const e=this,{config:t,state:n}=e,i=e.hasMultiArcGauge()?e.getMinMaxData().max[0].value:e.getTotalDataSum(n.rendered);!t.gauge_enforceMinMax&&i+t.gauge_min*(t.gauge_min>0?-1:1)>t.gauge_max&&(t.gauge_max=i-t.gauge_min)},redrawArcGaugeLine(){const e=this,{config:t,state:n,$el:s}=e,{hiddenTargetIds:i}=e.state,a=s.main.selectAll(`.${X.arcs}`).selectAll(`.${X.arcLabelLine}`).data(e.arcData.bind(e));a.enter().append("rect").attr("class",r=>`${X.arcLabelLine} ${D.target} ${D.target}-${r.data.id}`).merge(a).style("fill",r=>e.levelColor?e.levelColor(r.data.values[0].value):e.color(r.data)).style("display",t.gauge_label_show?null:"none").each(function(r){let l=0;const c=2;let u=0,d=0,h="";if(i.indexOf(r.data.id)<0){const g=e.updateAngle(r),f=n.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length*(g.index+1),p=g.endAngle-Math.PI/2,_=n.radius-f,x=p-(_===0?0:1/_);l=n.radiusExpanded-n.radius+f,u=Math.cos(x)*_,d=Math.sin(x)*_,h=`rotate(${p*180/Math.PI}, ${u}, ${d})`}(0,S.select)(this).attr("x",u).attr("y",d).attr("width",l).attr("height",c).attr("transform",h).style("stroke-dasharray",`0, ${l+c}, 0`)})},textForGaugeMinMax(e,t){const n=this,{config:s}=n,i=s.gauge_label_extents;return L(i)?i.bind(n.api)(e,t):e},getGaugeLabelHeight(){const{config:e}=this;return this.config.gauge_label_show&&!e.gauge_fullCircle?20:0},getPaddingBottomForGauge(){const e=this;return e.getGaugeLabelHeight()*(e.config.gauge_label_show?2:2.5)}},cl=Object.defineProperty,dl=Object.defineProperties,ul=Object.getOwnPropertyDescriptors,Bs=Object.getOwnPropertySymbols,hl=Object.prototype.hasOwnProperty,gl=Object.prototype.propertyIsEnumerable,Gs=(e,t,n)=>t in e?cl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fl=(e,t)=>{for(var n in t||(t={}))hl.call(t,n)&&Gs(e,n,t[n]);if(Bs)for(var n of Bs(t))gl.call(t,n)&&Gs(e,n,t[n]);return e},pl=(e,t)=>dl(e,ul(t));function xl(e,t,n,s=!1){const i=e?[e,0]:n;for(let a=e||n.reduce((o,r)=>o+r);a<=t;)n.forEach(o=>{a+o<=t&&i.push(o),a+=o});return i.length%2!==0&&i.push(s?n[1]:0),{dash:i.join(" "),length:i.reduce((a,o)=>a+o,0)}}function _l(e,t,n){const s=this,i=[],a="2 2";if(H(t)){const o=(r,l)=>it(r)?l:n?At.call(s,r):r;for(let r=0,l;l=t[r];r++){const c=o(l.start,e[0].x),u=o(l.end,e[e.length-1].x),d=l.style||{dasharray:a};i[r]={start:c,end:u,style:d}}}return i}var ml={initLine(){es.call(this,{elKey:"line",className:Ct.chartLines,cssRules:["pointer-events:none"]})},updateTargetsForLine(e){const t=this,{$el:{area:n,main:s}}=t,i=t.getClass("lines",!0),a=e.filter(r=>!(t.isScatterType(r)||t.isBubbleType(r))),o=tn.call(t,a,{type:"Line",elKey:"line",containerClass:Ct.chartLines,itemClass:Ct.chartLine,initFn:t.initLine});if(o.append("g").attr("class",i),t.hasTypeOf("Area")){const r=s.select(`.${Ct.chartLines}`).selectAll(`.${Ct.chartLine}`),l=(!n&&o.empty()?r:o).filter(t.isAreaType.bind(t));t.initArea(l)}t.updateTargetForCircle(a,o)},updateLine(e,t=!1){const n=this,{format:{extraLineClasses:s},$el:i,$T:a}=n,o=t?i.subchart:i,r=o.main.selectAll(`.${Ct.lines}`).selectAll(`.${Ct.line}`).data(n.lineData.bind(n));a(r.exit(),e).style("opacity","0").remove(),o.line=r.enter().append("path").attr("class",l=>`${n.getClass("line",!0)(l)} ${s(l)||""}`).style("stroke",n.color).merge(r).style("opacity",n.initialOpacity.bind(n)).attr("transform",null)},redrawLine(e,t,n=!1){const s=this,{$el:i,$T:a}=s,{line:o}=n?i.subchart:i;return[a(o,t,Et()).attr("d",e).style("stroke",this.color).style("opacity",null)]},getCurve(e){const t=this;return t.config.axis_rotated&&t.isStepType(e)?s=>{const i=t.getInterpolate(e)(s);return i.orgPoint=i.point,i.pointRotated=function(a,o){this._point===1&&(this._point=2);const r=this._y*(1-this._t)+o*this._t;this._context.lineTo(this._x,r),this._context.lineTo(a,r),this._x=a,this._y=o},i.point=function(a,o){this._point===0?this.orgPoint(a,o):this.pointRotated(a,o)},i}:t.getInterpolate(e)},generateDrawLine(e,t){const n=this,{config:s,scale:i}=n,a=s.line_connectNull,o=s.axis_rotated,r=n.generateGetLinePoints(e,t),l=n.getYScaleById.bind(n),c=g=>(t?n.subxx:n.xx).call(n,g),u=(g,f)=>n.isGrouped(g.id)?r(g,f)[0][1]:l(g.id,t)(n.getBaseValue(g));let d=(0,J.line)();d=o?d.x(u).y(c):d.x(c).y(u),a||(d=d.defined(g=>n.getBaseValue(g)!==null));const h=t?i.subX:i.x;return g=>{const f=l(g.id,t);let p=a?n.filterRemoveNull(g.values):g.values,_=0,x=0,m;if(n.isLineType(g)){const y=s.data_regions[g.id];y?(n.isAreaRangeType(g)&&(p=p.map($=>pl(fl({},$),{value:n.getRangedData($,"mid")}))),m=n.lineWithRegions(p,i.zoom||h,f,y)):(n.isStepType(g)&&(p=n.convertValuesToStep(p)),m=d.curve(n.getCurve(g))(p))}else p[0]&&(_=h(p[0].x),x=f(p[0].value)),m=o?`M ${x} ${_}`:`M ${_} ${x}`;return m||"M 0 0"}},lineWithRegions(e,t,n,s){const i=this,{config:a}=i,o=a.axis_rotated,r=i.axis.isTimeSeries(),l="2 2",c=_l.bind(i)(e,s,r),u=i.hasNullDataValue(e);let d,h,g,f;const p=o?A=>n(A.value):A=>t(A.x),_=o?A=>t(A.x):A=>n(A.value),x=A=>`M${A[0][0]},${A[0][1]}L${A[1][0]},${A[1][1]}`,m=r?(A,w,P,E)=>{const O=A.x.getTime(),z=w.x-A.x,U=new Date(O+z*P),j=new Date(O+z*(P+E)),ht=o?[[n(h(P)),t(U)],[n(h(P+g)),t(j)]]:[[t(U),n(h(P))],[t(j),n(h(P+g))]];return x(ht)}:(A,w,P,E)=>{const O=t(w.x,!o),z=n(w.value,o),U=P+E,j=t(d(P),!o),ht=n(h(P),o);let et=t(d(U),!o),wt=n(h(U),o);et>O&&(et=O),A.value>w.value&&(o?wt<z:wt>z)&&(wt=z);const he=[[j,ht],[et,wt]];return o&&he.forEach(ye=>ye.reverse()),x(he)},y={x:i.axis.getAxisType("x"),y:i.axis.getAxisType("y")};let $="";const v=i.$el.line.filter(({id:A})=>A===e[0].id),b=v.clone().style("display","none"),T=(A,w)=>A.attr("d",w).node().getTotalLength(),R={dash:[],lastLength:0};let C=!1;for(let A=0,w;w=e[A];A++){const P=e[A-1],E=P&&M(P.value);let O=i.isWithinRegions(w.x,c);if(M(w.value)){if(it(c)||!O||!E)$+=`${A&&E?"L":"M"}${p(w)},${_(w)}`;else if(E)if(O=((O==null?void 0:O.dasharray)||l).split(" ").map(Number),d=Ht(y.x,P.x,w.x),h=Ht(y.y,P.value,w.value),u){const z=t(w.x)-t(P.x),U=n(w.value)-n(P.value),j=Math.sqrt(Math.pow(z,2)+Math.pow(U,2));g=O[0]/j,f=g*O[1];for(let ht=g;ht<=1;ht+=f)$+=m(P,w,ht,g),ht+f>=1&&($+=m(P,w,1,0))}else{let z=[];if(C=w.x===e[e.length-1].x,r){const et=+P.x,wt=new Date(et),he=new Date(et+(+w.x-et));z=[[t(wt),n(h(0))],[t(he),n(h(1))]]}else z=[[t(d(0)),n(h(0))],[t(d(1)),n(h(1))]];o&&z.forEach(et=>et.reverse());const U=T(b,$),j=T(b,$+=`L${z[1].join(",")}`),ht=xl(U-R.lastLength,j-R.lastLength,O,C);R.lastLength+=ht.length,R.dash.push(ht.dash)}}}return R.dash.length&&(!C&&R.dash.push(T(b,$)),b.remove(),v.attr("stroke-dasharray",R.dash.join(" "))),$},isWithinRegions(e,t){for(let n=0,s;s=t[n];n++)if(s.start<e&&e<=s.end)return s.style;return!1},isWithinStep(e,t){return Math.abs(t-Tt(this.state.event,e)[1])<30},shouldDrawPointsForLine(e){const t=this.config.line_point;return t===!0||Y(t)&&t.indexOf(e.id)!==-1}};const oe=()=>Et();var Pe={initialOpacityForCircle(e){const{config:t,state:{withoutFadeIn:n}}=this;let s=t.point_opacity;return it(s)&&(s=this.getBaseValue(e)!==null&&n[e.id]?this.opacityForCircle(e):"0"),s},opacityForCircle(e){var t;const{config:n}=this;let s=n.point_opacity;return it(s)&&(s=n.point_show&&!((t=this.isPointFocusOnly)!=null&&t.call(this))?null:"0",s=M(this.getBaseValue(e))?this.isBubbleType(e)||this.isScatterType(e)?"0.5":s:"0"),s},initCircle(){const e=this,{$el:{main:t}}=e;!e.point&&(e.point=e.generatePoint()),(e.hasType("bubble")||e.hasType("scatter"))&&t.select(`.${D.chart} > .${ft.chartCircles}`).empty()&&t.select(`.${D.chart}`).append("g").attr("class",ft.chartCircles)},updateTargetForCircle(e,t){const n=this,{config:s,data:i,$el:a}=n,o=s.interaction_enabled&&s.data_selection_enabled,r=o&&s.data_selection_isselectable,l=n.getClass("circles",!0);if(!s.point_show)return;n.initCircle();let c=e,u=t;if(!c){c=n.filterNullish(i.targets).filter(h=>this.isScatterType(h)||this.isBubbleType(h));const d=a.main.select(`.${ft.chartCircles}`).style("pointer-events","none").selectAll(`.${ft.circles}`).data(c);d.exit().remove(),u=d.enter()}o&&u.append("g").attr("class",d=>n.generateClass(Q.selectedCircles,d.id)),u.append("g").attr("class",l).call(d=>{n.setCssRule(!0,`.${ft.circles}`,["cursor:pointer"],r)(d),n.setCssRule(!0,` .${ft.circle}`,["fill","stroke"],n.color)(d)}).style("opacity",function(){return(0,S.select)(this.parentNode).attr("class").indexOf(ft.chartCircles)>-1?"0":null}),o&&c.forEach(d=>{a.main.selectAll(`.${Q.selectedCircles}${n.getTargetSelectorSuffix(d.id)}`).selectAll(`${Q.selectedCircle}`).each(h=>{h.value=d.values[h.index].value})})},updateCircle(e=!1){const t=this,{config:n,state:s,$el:i}=t,a=t.isPointFocusOnly(),o=e?i.subchart:i;if(n.point_show&&!s.toggling){n.point_radialGradient&&t.updateLinearGradient();const r=o.main.selectAll(`.${ft.circles}`).selectAll(`.${ft.circle}`).data(l=>{const c=t.isLineType(l)&&t.shouldDrawPointsForLine(l)||t.isBubbleType(l)||t.isRadarType(l)||t.isScatterType(l)?a?[l.values[0]]:l.values:[];return t.filterNullish(c)});r.exit().remove(),r.enter().filter(Boolean).append(t.point("create",this,t.pointR.bind(t),t.updateCircleColor.bind(t))),o.circle=o.main.selectAll(`.${ft.circles} .${ft.circle}`).style("stroke",t.getStylePropValue(t.color)).style("opacity",t.initialOpacityForCircle.bind(t))}},updateCircleColor(e){const t=this,n=t.getStylePropValue(t.color);return t.config.point_radialGradient?t.getGradienColortUrl(e.id):n?n(e):null},redrawCircle(e,t,n,s,i=!1){const a=this,{state:{rendered:o},$el:r,$T:l}=a,c=i?r.subchart:r,u=c.main.selectAll(`.${Q.selectedCircle}`);if(!a.config.point_show)return[];const d=a.point("update",a,e,t,a.updateCircleColor.bind(a),n,s,u),h=a.isCirclePoint()?"c":"",g=Et(),f=a.opacityForCircle.bind(a),p=[];return c.circle.each(function(_){let x=d.bind(this)(_);x=l(x,n||!o,g).style("opacity",f),p.push(x)}),[p,l(u,n).attr(`${h}x`,e).attr(`${h}y`,t)]},showCircleFocus(e){const t=this,{state:{hasRadar:n,resizing:s,toggling:i,transiting:a},$el:o}=t;let{circle:r}=o;if(a===!1&&r&&t.isPointFocusOnly()){const l=(n?t.radarCircleX:t.circleX).bind(t),c=(n?t.radarCircleY:t.circleY).bind(t),u=i||it(e),d=t.point("update",t,l,c,t.getStylePropValue(t.color),s?!1:u);e&&(r=r.filter(function(h){var g;const f=(g=e.filter)==null?void 0:g.call(e,p=>p.id===h.id);return f.length?(0,S.select)(this).datum(f[0]):!1})),r.attr("class",this.updatePointClass.bind(this)).style("opacity",null).each(function(h){const{id:g,index:f,value:p}=h;let _="hidden";M(p)&&(d.bind(this)(h),t.expandCircles(f,g),_=""),this.style.visibility=_})}},hideCircleFocus(){const e=this,{$el:{circle:t}}=e;e.isPointFocusOnly()&&t&&(e.unexpandCircles(),t.style("visibility","hidden"))},circleX(e){return this.xx(e)},updateCircleY(e=!1){const t=this,n=t.generateGetLinePoints(t.getShapeIndices(t.isLineType),e);return(s,i)=>{const a=s.id;return t.isGrouped(a)?n(s,i)[0][1]:t.getYScaleById(a,e)(t.getBaseValue(s))}},expandCircles(e,t,n){const s=this,i=s.pointExpandedR.bind(s);n&&s.unexpandCircles();const a=s.getShapeByIndex("circle",e,t).classed(D.EXPANDED,!0),o=i(a)/s.config.point_r,r=1-o;s.isCirclePoint()?a.attr("r",i):a.each(function(){const l=(0,S.select)(this);if(this.tagName==="circle")l.attr("r",i);else{const{width:c,height:u}=Pt(this),d=r*(+l.attr("x")+c/2),h=r*(+l.attr("y")+u/2);l.attr("transform",`translate(${d} ${h}) scale(${o})`)}})},unexpandCircles(e){const t=this,n=t.pointR.bind(t),s=t.getShapeByIndex("circle",e).filter(function(){return(0,S.select)(this).classed(D.EXPANDED)}).classed(D.EXPANDED,!1);if(s.attr("r",n),!t.isCirclePoint()){const i=n(s)/t.config.point_r;s.attr("transform",i!==1?`scale(${i})`:null)}},pointR(e){const t=this,{config:n}=t,s=n.point_r;let i=s;return t.isBubbleType(e)?i=t.getBubbleR(e):L(s)&&(i=s.bind(t.api)(e)),e.r=i,i},pointExpandedR(e){const t=this,{config:n}=t,s=t.isBubbleType(e)?1.15:1.75;return n.point_focus_expand_enabled?n.point_focus_expand_r||t.pointR(e)*s:t.pointR(e)},pointSelectR(e){const t=this,n=t.config.point_select_r;return L(n)?n(e):n||t.pointR(e)*4},isPointFocusOnly(){const e=this;return e.config.point_focus_only&&!e.hasType("bubble")&&!e.hasType("scatter")&&!e.hasArcType(null,["radar"])},isWithinCircle(e,t){const{state:n}=this,s=Tt(n.event,e),i=(0,S.select)(e),a=this.isCirclePoint(e)?"c":"",o=this.getPointSensitivity(i==null?void 0:i.datum());let r=+i.attr(`${a}x`),l=+i.attr(`${a}y`);if(!(r||l)&&e.nodeType===1){const{x:c,y:u}=dt(e);r=c,l=u}return Math.sqrt(Math.pow(r-s[0],2)+Math.pow(l-s[1],2))<(t||o)},getPointSensitivity(e){const t=this;let n=t.config.point_sensitivity;if(e)L(n)?n=n.call(t.api,e):n==="radius"&&(n=e.r);else return n;return n},updatePointClass(e){const t=this,{circle:n}=t.$el;let s=!1;return(V(e)||n)&&(s=e===!0?n.each(function(i){let a=t.getClass("circle",!0)(i);this.getAttribute("class").indexOf(D.EXPANDED)>-1&&(a+=` ${D.EXPANDED}`),this.setAttribute("class",a)}):t.getClass("circle",!0)(e)),s},generateGetLinePoints(e,t){const n=this,{config:s}=n,i=n.getShapeX(0,e,t),a=n.getShapeY(t),o=n.getShapeOffset(n.isLineType,e,t),r=n.getYScaleById.bind(n);return(l,c)=>{const u=r.call(n,l.id,t)(n.getShapeYMin(l.id)),d=o(l,c)||u,h=i(l);let g=a(l);s.axis_rotated&&(l.value>0&&g<u||l.value<0&&u<g)&&(g=u);const f=[h,g-(u-d)];return[f,f,f,f]}},custom:{create(e,t,n){return e.append("use").attr("xlink:href",`#${t}`).attr("class",this.updatePointClass.bind(this)).style("fill",n).node()},update(e,t,n,s,i,a,o){const r=this,{width:l,height:c}=Pt(e.node()),u=g=>M(g.value)?t(g)-l/2:0,d=g=>M(g.value)?n(g)-c/2:0;let h=e;return i&&(a&&h.attr("x",u),h=r.$T(h,i,oe()),o&&r.$T(o,i,oe())),h.attr("x",u).attr("y",d).style("fill",s)}},circle:{create(e,t,n){return e.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",t).style("fill",n).node()},update(e,t,n,s,i,a,o){const r=this;let l=e;return r.hasType("bubble")&&l.attr("r",r.pointR.bind(r)),i&&(a&&l.attr("cx",t),l.attr("cx")&&(l=r.$T(l,i,oe())),o&&r.$T(l,i,oe())),l.attr("cx",t).attr("cy",n).style("fill",s)}},rectangle:{create(e,t,n){const s=i=>t(i)*2;return e.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",s).attr("height",s).style("fill",n).node()},update(e,t,n,s,i,a,o){const r=this,l=r.config.point_r,c=h=>t(h)-l,u=h=>n(h)-l;let d=e;return i&&(a&&d.attr("x",c),d=r.$T(d,i,oe()),o&&r.$T(o,i,oe())),d.attr("x",c).attr("y",u).style("fill",s)}}};function yl(e){return bt(e)&&L(e.create)&&L(e.update)}function $l(e,t){var n;const s=this,i=(l,c)=>{const u=l.attributes;for(let d=0,h;h=u[d];d++)h=h.name,c.setAttribute(h,l.getAttribute(h))},o=new DOMParser().parseFromString(Qt(e),"image/svg+xml").documentElement,r=ct.createElementNS(S.namespaces.svg,o.nodeName.toLowerCase());if(r.id=t,r.style.fill="inherit",r.style.stroke="inherit",i(o,r),(n=o.childNodes)!=null&&n.length){const l=(0,S.select)(r);"innerHTML"in r?l.html(Qt(o.innerHTML)):Yt(o.childNodes).forEach(c=>{i(c,l.append(c.tagName).node())})}s.$el.defs.node().appendChild(r)}var re={hasValidPointType(e){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(e||this.config.point_type)},hasLegendDefsPoint(){var e;const{config:t}=this;return t.legend_show&&((e=t.point_pattern)==null?void 0:e.length)&&t.legend_usePoint},getDefsPointId(e){const{state:{datetimeId:t}}=this;return`${t}-point${e}`},getValidPointPattern(){const{config:e}=this,t=/^(circle|rect(angle)?)$/i.test(e.point_type)?e.point_type:"circle";return ot(e.point_pattern)?e.point_pattern:[t]},generatePoint(){const e=this,{$el:t,config:n}=e,s=[],i=e.getValidPointPattern();return function(a,o,...r){return function(l){var c,u,d,h;const g=e.getTargetSelectorSuffix(l.id||((c=l.data)==null?void 0:c.id)||l),f=(0,S.select)(this);s.indexOf(g)<0&&s.push(g);let p=i[s.indexOf(g)%i.length];if(e.hasValidPointType(p))p=e[p];else if(!yl(p||n.point_type)){const _=e.getDefsPointId(g);if(t.defs.select(`#${_}`).size()<1&&$l.call(e,p,_),a==="create")return(u=e.custom)==null?void 0:u.create.bind(o)(f,_,...r);if(a==="update")return(d=e.custom)==null?void 0:d.update.bind(o)(f,...r)}return(h=p[a])==null?void 0:h.bind(o)(f,...r)}}}};function Vs(e){const t=e.config.polar_level_max;let n=e.getMinMaxData().max[0].value;return t&&t>n&&(n=t),n}var bl={initPolar(){const e=this,{$el:{arcs:t},config:n}=e,s=n.polar_level_text_show,i=n.polar_level_text_backgroundColor;t.levels=t.append("g").attr("class",zt.levels),s&&i&&e.generateTextBGColorFilter(i)},getPolarOuterRadius(e,t){var n;const s=Vs(this);return((n=e==null?void 0:e.data.values[0].value)!=null?n:0)/s*t},updateTargetsForPolar(e){this.updateTargetsForArc(e)},redrawPolar(){const e=this,{config:t}=e;t.polar_level_show&&e.updatePolarLevel()},updatePolarLevel(){const e=this,{config:t,state:n,$el:{arcs:{levels:s}}}=e,i=t.polar_level_depth,a=Vs(e),o=Ee(0,i),r=n.radius,l=o.map(h=>r*((h+1)/i)),c=(t.polar_level_text_format||function(){}).bind(e.api),u=s.selectAll(`.${zt.level}`).data(o);u.exit().remove();const d=u.enter().append("g").attr("class",(h,g)=>`${zt.level} ${zt.level}-${g}`);if(d.append("circle"),d.merge(u).selectAll("circle").style("visibility",t.polar_level_show?null:"hidden").attr("cx",0).attr("cy",0).attr("r",h=>l[h]),t.polar_level_text_show){const h=t.polar_level_text_backgroundColor,g=`#${n.datetimeId}-labels-bg${e.getTargetSelectorSuffix(h)}`;d.append("text").style("text-anchor","middle"),d.merge(u).selectAll("text").attr("dy",f=>-l[f]+5).attr("filter",h?`url(${g})`:null).text(f=>c(a/o.length*(f+1)))}}};function vl(e,t,n,s,i,a){const o=e&&s>0?n-s:s,r=2*Math.PI;return i*(1-a*(t==="x"?Math.sin:Math.cos)(o*r/n))}const le=at.radarPoints,Ys=at.radarTextWidth;var Tl={initRadar(){const e=this,{config:t,state:{current:n},$el:s}=e;e.hasType("radar")&&(s.radar=s.main.select(`.${D.chart}`).append("g").attr("class",gn.chartRadars),s.radar.levels=s.radar.append("g").attr("class",zt.levels),s.radar.axes=s.radar.append("g").attr("class",rt.axis),s.radar.shapes=s.radar.append("g").attr("class",st.shapes),n.dataMax=t.radar_axis_max||e.getMinMaxData().max[0].value,t.radar_axis_text_show&&(t.interaction_enabled&&e.bindRadarEvent(),e.updateRadarLevel(),e.updateRadarAxes()))},getRadarSize(){const e=this,{config:t,state:{arcWidth:n,arcHeight:s}}=e,i=t.axis_x_categories.length<4?-20:10,a=(Math.min(n,s)-i)/2;return[a,a]},updateTargetsForRadar(e){const t=this,{config:n}=t;vt(n.axis_x_categories)&&(n.axis_x_categories=Ee(0,Rt("max",e.map(s=>s.values.length)))),t.generateRadarPoints()},getRadarPosition(e,t,n,s){const i=this,{config:a}=i,[o,r]=i.getRadarSize(),l=a.axis_x_categories.length,c=a.radar_direction_clockwise,u=Yt(e).map(d=>vl(c,d,l,t,H(n)?n:e==="x"?o:r,I(s)?s:a.radar_size_ratio));return u.length===1?u[0]:u},generateRadarPoints(){const e=this,t=e.data.targets,[n,s]=e.getRadarSize(),i=e.cache.get(le)||{},a=i._size;(!a||a.width!==n&&a.height!==s)&&(t.forEach(o=>{i[o.id]=o.values.map((r,l)=>e.getRadarPosition(["x","y"],l,void 0,e.getRatio("radar",r)))}),i._size={width:n,height:s},e.cache.add(le,i))},redrawRadar(){const e=this,{radar:t,main:n}=e.$el,s=e.getTranslate("radar");s&&(t.attr("transform",s),n.select(`.${lt.chartTexts}`).attr("transform",s),e.generateRadarPoints(),e.updateRadarLevel(),e.updateRadarAxes(),e.updateRadarShape())},generateGetRadarPoints(){const e=this.cache.get(le);return(t,n)=>{const s=e[t.id][n];return[s,s,s,s]}},updateRadarLevel(){const e=this,{config:t,state:n,$el:{radar:s}}=e,[i,a]=e.getRadarSize(),o=t.radar_level_depth,r=t.axis_x_categories.length,l=t.radar_level_text_show,c=s.levels,u=Ee(0,o),d=t.radar_size_ratio*Math.min(i,a),h=u.map(x=>d*((x+1)/o)),g=(t.radar_level_text_format||function(){}).bind(e.api),f=u.map(x=>{const m=h[x];return Ee(0,r).map($=>e.getRadarPosition(["x","y"],$,m,1).join(",")).join(" ")}),p=c.selectAll(`.${zt.level}`).data(u);p.exit().remove();const _=p.enter().append("g").attr("class",(x,m)=>`${zt.level} ${zt.level}-${m}`);_.append("polygon").style("visibility",t.radar_level_show?null:"hidden"),l&&(c.select("text").empty()&&c.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(()=>g(0)),_.append("text").attr("dx","-.5em").style("text-anchor","end").text(x=>g(n.current.dataMax/u.length*(x+1)))),_.merge(p).attr("transform",x=>`translate(${i-h[x]}, ${a-h[x]})`).selectAll("polygon").attr("points",x=>f[x]),l&&c.selectAll("text").attr("x",x=>it(x)?i:f[x].split(",")[0]).attr("y",x=>it(x)?a:0)},updateRadarAxes(){const e=this,{config:t,$el:{radar:n}}=e,[s,i]=e.getRadarSize(),a=t.axis_x_categories;let o=n.axes.selectAll("g").data(a);o.exit().remove();const r=o.enter().append("g").attr("class",(l,c)=>`${rt.axis}-${c}`);if(t.radar_axis_line_show&&r.append("line"),t.radar_axis_text_show&&r.append("text"),o=r.merge(o),t.radar_axis_line_show&&o.select("line").attr("x1",s).attr("y1",i).attr("x2",(l,c)=>e.getRadarPosition("x",c)).attr("y2",(l,c)=>e.getRadarPosition("y",c)),t.radar_axis_text_show){const{x:l=0,y:c=0}=t.radar_axis_text_position,u=e.cache.get(Ys)||0;if(o.select("text").style("text-anchor","middle").attr("dy",".5em").call(d=>{d.each(function(h){te((0,S.select)(this),String(h),[-.6,1.2])})}).datum((d,h)=>({index:h})).attr("transform",function(d){it(this.width)&&(this.width=dt(this,!0).width/2);let h=e.getRadarPosition("x",d.index,void 0,1),g=Math.round(e.getRadarPosition("y",d.index,void 0,1));return h>s?h+=this.width+l:Math.round(h)<s&&(h-=this.width+l),g>i?(g/2===i&&this.firstChild.tagName==="tspan"&&this.firstChild.setAttribute("dy","0em"),g+=c):g<i&&(g-=c),`translate(${h} ${g})`}),!u){const d=[n.axes,n.levels].map(h=>Rn(h.node()).width);d.every(h=>h>0)&&e.cache.add(Ys,d[0]-d[1])}}},bindRadarEvent(){const e=this,{config:t,state:n,$el:{radar:s,svg:i}}=e,a=e.isPointFocusOnly(),{inputType:o,transiting:r}=n,l=o==="mouse",c=u=>{if(n.event=u,!t.interaction_onout)return;const d=e.getDataIndexFromEvent(u),h=it(d);(l||h)&&(e.hideTooltip(),a?e.hideCircleFocus():e.unexpandCircles(),l?e.setOverOut(!1,d):h&&e.callOverOutForTouch())};s.axes.on(l?"mouseover ":"touchstart",u=>{if(r)return;n.event=u;const d=e.getDataIndexFromEvent(u);e.selectRectForSingle(i.node(),d),l?e.setOverOut(!0,d):e.callOverOutForTouch(d)},l?void 0:{passive:!0}).on("mouseout",l?c:null),l||i.on("touchstart",c,{passive:!0})},updateRadarShape(){const e=this,t=e.data.targets.filter(a=>e.isRadarType(a)),n=e.cache.get(le),s=e.$el.radar.shapes.selectAll("polygon").data(e.filterNullish(t)),i=s.enter().append("g").attr("class",e.getChartClass("Radar"));e.$T(s.exit()).remove(),i.append("polygon").merge(s).style("fill",e.color).style("stroke",e.color).attr("points",a=>n[a.id].join(" ")),e.updateTargetForCircle(t,i)},radarCircleX(e){return this.cache.get(le)[e.id][e.index][0]},radarCircleY(e){return this.cache.get(le)[e.id][e.index][1]}},It=tt(12);function Al(e,t){const n=this,{scale:{x:s,y:i},state:{width:a}}=n;e.selectAll("g").attr("transform",o=>`translate(${o===t?"0,0":`${s(o.x0)},${i(o.y0)}`})`).select("rect").attr("width",o=>o===t?a:s(o.x1)-s(o.x0)).attr("height",o=>o===t?0:i(o.y1)-i(o.y0))}function wl(e){const t=this;return e.map(n=>{const{id:s,values:i}=n,{value:a}=i[0];return{name:s,id:s,value:a,ratio:t.getRatio("treemap",i[0])}})}function Sl(e){const t=this,n=(0,It.hierarchy)(e).sum(i=>i.value),s=t.getSortCompareFn(!0);return[t.treemap(s?n.sort(s):n)]}var Rl={initTreemap(){const e=this,{$el:t,state:{current:{width:n,height:s},clip:i,datetimeId:a}}=e;i.id=`${a}-clip`,e.treemap=(0,It.treemap)().tile(e.getTreemapTile()),t.defs.append("clipPath").attr("id",i.id).append("rect").attr("width",n).attr("height",s),t.treemap=t.main.select(`.${D.chart}`).attr("clip-path",`url(#${i.id})`).append("g").classed(pn.chartTreemaps,!0),e.bindTreemapEvent()},bindTreemapEvent(){const e=this,{$el:t,config:n,state:s}=e,i=a=>{var o;const r=a.isTrusted?a.target:(o=s.eventReceiver.rect)==null?void 0:o.node();let l;return/^rect$/i.test(r.tagName)&&(s.event=a,l=(0,S.select)(r).datum()),l==null?void 0:l.data};if(n.interaction_enabled){const a=s.inputType==="touch";t.treemap.on(a?"touchstart":"mouseover mousemove",o=>{const r=i(o);r&&(e.showTooltip([r],o.currentTarget),/^(touchstart|mouseover)$/.test(o.type)&&e.setOverOut(!0,r))},a?{passive:!0}:void 0).on(a?"touchend":"mouseout",o=>{const r=i(o);n.interaction_onout&&(e.hideTooltip(),e.setOverOut(!1,r))})}},getTreemapTile(){var e,t;const n=this,{config:s,state:{current:{width:i,height:a}}}=n,o=(t={binary:It.treemapBinary,dice:It.treemapDice,slice:It.treemapSlice,sliceDice:It.treemapSliceDice,squarify:It.treemapSquarify,resquarify:It.treemapResquarify}[(e=s.treemap_tile)!=null?e:"binary"])!=null?t:It.treemapBinary;return(r,l,c,u,d)=>{o(r,0,0,i,a);for(const h of r.children)h.x0=l+h.x0/i*(u-l),h.x1=l+h.x1/i*(u-l),h.y0=c+h.y0/a*(d-c),h.y1=c+h.y1/a*(d-c)}},getTreemapData(e){const t=this;return{name:"root",children:wl.bind(t)(t.filterTargetsToShow(e.filter(t.isTreemapType,t)))}},updateTargetsForTreemap(e){const t=this,{$el:{treemap:n}}=t,s=Sl.call(t,t.getTreemapData(e!=null?e:t.data.targets));n.data(t.filterNullish(s))},updateTreemap(e){const t=this,{$el:n,$T:s}=t,i=n.treemap.datum(),a=t.getChartClass("Treemap"),o=t.getClass("treemap",!0),r=n.treemap.selectAll("g").data(i.children);s(r.exit(),e).style("opacity","0").remove(),r.enter().append("g").append("rect"),n.treemap.selectAll("g").attr("class",a).select("rect").attr("class",o).attr("fill",l=>t.color(l.data.name))},generateGetTreemapPoints(){const e=this,{$el:t,scale:{x:n,y:s}}=e,i={};return t.treemap.selectAll("g").each(a=>{i[a.data.name]=[[n(a.x0),s(a.y0)],[n(a.x1),s(a.y1)]]}),a=>i[a.id]},redrawTreemap(e){const t=this,{$el:n,state:{current:{width:s,height:i}}}=t;return n.defs.select("rect").attr("width",s).attr("height",i),[t.$T(n.treemap,e,Et()).call(Al.bind(t),n.treemap.datum())]},treemapDataLabelFormat(e){const t=this,{$el:{treemap:n},config:s,scale:{x:i,y:a}}=t,{id:o,value:r}=e,l=s.treemap_label_format,c=t.getRatio("treemap",e),u=(c*100).toFixed(2),d=s.treemap_label_show&&Qe.call(t,c,"treemap")?null:"0",h=n.selectAll("g").filter(p=>p.data.id===o).datum();let g=0,f=0;if(h){const{x0:p,x1:_,y0:x,y1:m}=h;g=i(_)-i(p),f=a(m)-a(x)}return function(p){return p.style("opacity",d),L(l)?l.bind(t.api)(r,c,o,{width:g,height:f}):`${o}
${u}%`}}},Zt={point_show:!0,point_r:2.5,point_radialGradient:!1,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_focus_only:!1,point_opacity:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle"},ce={area_above:!1,area_below:!1,area_front:!0,area_linearGradient:!1,area_zerobased:!0},Cl={bar_connectLine:!1,bar_front:!1,bar_indices_removeNull:!1,bar_label_threshold:0,bar_linearGradient:!1,bar_overlap:!1,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0},El={bubble_maxR:35,bubble_zerobased:!1},kl={candlestick_width:void 0,candlestick_width_ratio:.6,candlestick_width_max:void 0,candlestick_color_down:"red"},Ll={line_connectNull:!1,line_step_type:"step",line_step_tooltipMatch:!1,line_zerobased:!1,line_classes:void 0,line_point:!0},Pl={scatter_zerobased:!1},rn={spline_interpolation_type:"cardinal"},Oe={arc_cornerRadius:0,arc_cornerRadius_ratio:0,arc_needle_show:!1,arc_needle_color:void 0,arc_needle_value:void 0,arc_needle_path:void 0,arc_needle_length:100,arc_needle_top_rx:0,arc_needle_top_ry:0,arc_needle_top_width:0,arc_needle_bottom_rx:1,arc_needle_bottom_ry:1,arc_needle_bottom_width:15,arc_needle_bottom_len:0,arc_rangeText_values:void 0,arc_rangeText_unit:"absolute",arc_rangeText_fixed:!1,arc_rangeText_format:void 0,arc_rangeText_position:void 0},Ol={donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_line:!1,donut_label_image:void 0,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_rate:.98,donut_expand_duration:50,donut_padAngle:0,donut_startingAngle:0},Il={funnel_neck_width:0,funnel_neck_height:0,funnel_rotated:!1,funnel_spline:!1},Dl={gauge_background:"",gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_extents:void 0,gauge_label_format:void 0,gauge_label_ratio:void 0,gauge_label_threshold:0,gauge_label_line:!1,gauge_label_image:void 0,gauge_enforceMinMax:!1,gauge_min:0,gauge_max:100,gauge_type:"single",gauge_startingAngle:-1*Math.PI/2,gauge_arcLength:100,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_rate:.98,gauge_expand_duration:50},zl={pie_label_show:!0,pie_label_format:void 0,pie_label_ratio:void 0,pie_label_threshold:.05,pie_label_line:!1,pie_label_image:void 0,pie_expand:{},pie_expand_rate:.98,pie_expand_duration:50,pie_innerRadius:0,pie_outerRadius:void 0,pie_padAngle:0,pie_padding:0,pie_startingAngle:0},Fl={polar_label_show:!0,polar_label_format:void 0,polar_label_threshold:.05,polar_label_line:!1,polar_label_image:void 0,polar_label_ratio:void 0,polar_level_depth:3,polar_level_max:void 0,polar_level_show:!0,polar_level_text_backgroundColor:"#fff",polar_level_text_format:e=>e%1===0?e:e.toFixed(2),polar_level_text_show:!0,polar_padAngle:0,polar_padding:0,polar_startingAngle:0},Ml={radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:e=>e%1===0?e:e.toFixed(2),radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1},Xl={treemap_tile:"binary",treemap_label_format:void 0,treemap_label_threshold:.05,treemap_label_show:!0};function de(e,t){ut(Ut.prototype,Object.values(ws).concat(e)),ut(Nt.prototype,Cr),jt.setOptions(Object.values(Ss).concat(t||[]))}function Dt(e,t){de([re,Pe,ml].concat(e||[])),jt.setOptions([Zt,Ll].concat(t||[]))}function ue(e,t){ut(Ut.prototype,[Yr,re].concat(e||[])),jt.setOptions([Zt].concat(t||[]))}let js=()=>(Dt(ie,[ce]),(js=()=>k.AREA)()),Ws=()=>(Dt(ie,[ce]),(Ws=()=>k.AREA_LINE_RANGE)()),Hs=()=>(Dt(ie,[ce]),(Hs=()=>k.AREA_STEP_RANGE)()),Us=()=>(Dt(ie,[ce,rn]),(Us=()=>k.AREA_SPLINE)()),Zs=()=>(Dt(ie,[ce,rn]),(Zs=()=>k.AREA_SPLINE_RANGE)()),qs=()=>(Dt(ie,[ce]),(qs=()=>k.AREA_STEP)()),Ks=()=>(Dt(),(Ks=()=>k.LINE)()),Js=()=>(Dt(void 0,[rn]),(Js=()=>k.SPLINE)()),Qs=()=>(Dt(),(Qs=()=>k.STEP)()),ti=()=>(ue(void 0,[Oe,Ol]),(ti=()=>k.DONUT)()),ei=()=>(ue([ll],[Oe,Dl]),(ei=()=>k.GAUGE)()),ni=()=>(ue(void 0,[Oe,zl]),(ni=()=>k.PIE)()),si=()=>(ue([bl],[Oe,Fl]),(si=()=>k.POLAR)()),ii=()=>(ue([ws.eventrect,Pe,Tl],[Zt,Ml,{axis_x_categories:Ss.optAxis.axis_x_categories}]),(ii=()=>k.RADAR)()),ai=()=>(de([jr,re],[Cl,Zt]),(ai=()=>k.BAR)()),oi=()=>(de([re,Pe,Wr],[El,Zt]),(oi=()=>k.BUBBLE)()),ri=()=>(de([Kr,re],[kl,Zt]),(ri=()=>k.CANDLESTICK)()),li=()=>(de([re,Pe],[Zt,Pl]),(li=()=>k.SCATTER)()),ci=()=>(ue([rl],[Il]),(ci=()=>k.FUNNEL)()),di=()=>(de([Rl],[Xl]),(di=()=>k.TREEMAP)()),ln=Object.create(null);const ui={version:"3.18.0-nightly-20260207005040",generate(e){const t=ee(Object.create(null),ln,e),n=new Nt(t);return n.internal.charts=this.instance,this.instance.push(n),n},defaults(e){return V(e)&&(ln=e),ln},instance:[],plugin:{}};Object.keys(mt).forEach(e=>mt[e]()),Object.keys(F).forEach(e=>F[e]())})(),Ie})()});
