/*!
 * Copyright (c) 2017 ~ present NAVER Corp.
 * billboard.js project is licensed under the MIT license
 *
 * billboard.js, JavaScript chart library
 * https://naver.github.io/billboard.js/
 *
 * @version 3.18.0-nightly-20260207005040
 * @requires billboard.js
 * @summary billboard.js plugin
 */(function(f,_){typeof exports=="object"&&typeof module=="object"?module.exports=_(require("d3-interpolate"),require("d3-scale"),require("d3-brush"),require("d3-selection"),require("d3-axis")):typeof define=="function"&&define.amd?define("bb",["d3-interpolate","d3-scale","d3-brush","d3-selection","d3-axis"],_):typeof exports=="object"?exports.bb=_(require("d3-interpolate"),require("d3-scale"),require("d3-brush"),require("d3-selection"),require("d3-axis")):(f.bb=f.bb||{},f.bb.plugin=f.bb.plugin||{},f.bb.plugin.stanford=_(f.d3,f.d3,f.d3,f.d3,f.d3))})(this,function(j,f,_,J,Q){return(function(){"use strict";var tt={996:(function(t){t.exports=Q}),853:(function(t){t.exports=_}),798:(function(t){t.exports=j}),455:(function(t){t.exports=f}),747:(function(t){t.exports=J})},F={};function p(t){var e=F[t];if(e!==void 0)return e.exports;var n=F[t]={exports:{}};return tt[t](n,n.exports,p),n.exports}(function(){p.d=function(t,e){for(var n in e)p.o(e,n)&&!p.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}})(),(function(){p.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}})();var $={};p.d($,{default:function(){return he}});var et=p(798),C=p(455),nt=Object.defineProperty,I=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,D=(t,e,n)=>e in t?nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,u=(t,e)=>{for(var n in e||(e={}))ot.call(e,n)&&D(t,n,e[n]);if(I)for(var n of I(e))rt.call(e,n)&&D(t,n,e[n]);return t};const st={button:"bb-button",chart:"bb-chart",empty:"bb-empty",main:"bb-main",target:"bb-target",EXPANDED:"_expanded_",dummy:"_dummy_"},at={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcLabelLineText:"bb-arc-label-line-text",arcRange:"bb-arc-range",arcs:"bb-arcs",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsTitle:"bb-chart-arcs-title",needle:"bb-needle"},it={area:"bb-area",areas:"bb-areas"},ct={axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",axisXTooltip:"bb-axis-x-tooltip",axisYTooltip:"bb-axis-y-tooltip",axisY2Tooltip:"bb-axis-y2-tooltip",axisTooltipX:"bb-axis-tooltip-x",axisTooltipY:"bb-axis-tooltip-y"},lt={bar:"bb-bar",bars:"bb-bars",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars",barConnectLine:"bb-bar-connectLine"},ut={candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",valueDown:"bb-value-down",valueUp:"bb-value-up"},bt={chartCircles:"bb-chart-circles",circle:"bb-circle",circles:"bb-circles"},dt={colorPattern:"bb-color-pattern",colorScale:"bb-colorscale"},ft={dragarea:"bb-dragarea",INCLUDED:"_included_"},ht={funnel:"bb-funnel",chartFunnel:"bb-chart-funnel",chartFunnels:"bb-chart-funnels",funnelBackground:"bb-funnel-background"},pt={chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",gaugeValue:"bb-gauge-value"},gt={legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile"},mt={chartLine:"bb-chart-line",chartLines:"bb-chart-lines",line:"bb-line",lines:"bb-lines"},xt={eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single"},_t={focused:"bb-focused",defocused:"bb-defocused",legendItemFocused:"bb-legend-item-focused",xgridFocus:"bb-xgrid-focus",ygridFocus:"bb-ygrid-focus"},yt={grid:"bb-grid",gridLines:"bb-grid-lines",xgrid:"bb-xgrid",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids"},ge={level:"bb-level",levels:"bb-levels"},vt={chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars"},$t={region:"bb-region",regions:"bb-regions"},Et={selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",SELECTED:"_selected_"},St={shape:"bb-shape",shapes:"bb-shapes"},wt={brush:"bb-brush",subchart:"bb-subchart"},Ct={chartText:"bb-chart-text",chartTexts:"bb-chart-texts",text:"bb-text",texts:"bb-texts",title:"bb-title",textBorderRect:"bb-text-border",textLabelImage:"bb-text-label-image",TextOverlapping:"text-overlapping"},R={tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name"},Rt={treemap:"bb-treemap",chartTreemap:"bb-chart-treemap",chartTreemaps:"bb-chart-treemaps"},Pt={buttonZoomReset:"bb-zoom-reset",zoomBrush:"bb-zoom-brush"};var me=u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u({},st),at),it),ct),lt),ut),bt),dt),ft),pt),gt),mt),xt),_t),ht),yt),vt),$t),Et),St),wt),Ct),R),Rt),Pt),xe=p(853),_e=p(747);function Ot(){return typeof globalThis=="object"&&globalThis!==null&&globalThis.Object===Object&&globalThis||typeof global=="object"&&global!==null&&global.Object===Object&&global||typeof self=="object"&&self!==null&&self.Object===Object&&self||Function("return this")()}function At(t){const e=typeof(t==null?void 0:t.requestAnimationFrame)=="function"&&typeof(t==null?void 0:t.cancelAnimationFrame)=="function",n=typeof(t==null?void 0:t.requestIdleCallback)=="function"&&typeof(t==null?void 0:t.cancelIdleCallback)=="function",o=s=>setTimeout(s,1),r=s=>clearTimeout(s);return[e?t.requestAnimationFrame:o,e?t.cancelAnimationFrame:r,n?t.requestIdleCallback:o,n?t.cancelIdleCallback:r]}const E=Ot(),Tt=E==null?void 0:E.document,[ye,ve,$e,Ee]=At(E);var Lt,Mt,h,P,jt,Ft,It=Object.defineProperty,N=Object.getOwnPropertySymbols,Dt=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,B=(t,e,n)=>e in t?It(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,q=(t,e)=>{for(var n in e||(e={}))Dt.call(e,n)&&B(t,n,e[n]);if(N)for(var n of N(e))Nt.call(e,n)&&B(t,n,e[n]);return t};function U(t,e,n=!1){const o=r=>r[t?"getBoundingClientRect":"getBBox"]();return n?o(e):!("rect"in e)||"rect"in e&&e.hasAttribute("width")&&e.rect.width!==+(e.getAttribute("width")||0)?e.rect=o(e):e.rect}function X(t,e){for(let n=0;n<t.length;n++){const o=t[n];o&&e(o,n)}}const Se=t=>t||t===0,O=t=>typeof t=="function",y=t=>typeof t=="string",A=t=>typeof t=="number",Bt=t=>typeof t=="undefined",V=t=>typeof t!="undefined",we=t=>typeof t=="boolean",Ce=t=>Math.ceil(t/10)*10,Re=t=>Math.ceil(t)+.5,Pe=t=>t[1]-t[0],T=t=>typeof t=="object",qt=t=>{for(const e in t)return!1;return!0},Y=t=>Bt(t)||t===null||y(t)&&t.length===0||T(t)&&!(t instanceof Date)&&qt(t)||A(t)&&isNaN(t),Ut=t=>!Y(t),L=t=>Array.isArray(t),v=t=>t&&!(t!=null&&t.nodeType)&&T(t)&&!L(t);function Oe(t,e,n){return V(t[e])?t[e]:n}function Ae(t,e){let n=!1;return Object.keys(t).forEach(o=>t[o]===e&&(n=!0)),n}function Te(t,e,...n){const o=O(t);return o&&t.call(e,...n),o}function Le(t,e){let n=0;const o=function(...r){!--n&&e.apply(this,...r)};"duration"in t?t.each(()=>++n).on("end",o):(++n,t.call(o))}function Me(t,e,n=[-1,1],o=!1){if(!(!t||!y(e)))if(e.indexOf(`
`)===-1)t.text(e);else{const r=[t.text(),e].map(s=>s.replace(/[\s\n]/g,""));if(r[0]!==r[1]){const s=e.split(`
`),a=o?s.length-1:1;t.html(""),s.forEach((i,b)=>{t.append("tspan").attr("x",0).attr("dy",`${b===0?n[0]*a:n[1]}em`).text(i)})}}}function Xt(t){const{x:e,y:n,width:o,height:r}=t.getBBox();return[{x:e,y:n+r},{x:e,y:n},{x:e+o,y:n},{x:e+o,y:n+r}]}function je(t){const{width:e,height:n}=G(t),o=Xt(t),r=o[0].x,s=Math.min(o[0].y,o[1].y);return{x:r,y:s,width:e,height:n}}function Fe(t,e){var n;const o=t&&((n=t.touches||t.sourceEvent&&t.sourceEvent.touches)==null?void 0:n[0]);let r=[0,0];try{r=Mt(o||t,e)}catch(s){}return r.map(s=>isNaN(s)?0:s)}function Vt(t){const{event:e,$el:n}=t,o=n.subchart.main||n.main;let r;return e&&e.type==="brush"?r=e.selection:o&&(r=o.select(".bb-brush").node())&&(r=Lt(r)),r}function G(t,e=!1){return U(!0,t,e)}function Ie(t,e=!1){return U(!1,t,e)}function De(t=!0,e=0,n=1e4){const o=h.crypto||h.msCrypto,r=o?e+o.getRandomValues(new Uint32Array(1))[0]%(n-e+1):Math.floor(Math.random()*(n-e)+e);return t?String(r):r}function k(t,e,n,o,r){if(n>o)return-1;const s=Math.floor((n+o)/2);let{x:a,w:i=0}=t[s];return r&&(a=t[s].y,i=t[s].h),e>=a&&e<=a+i?s:e<a?k(t,e,n,s-1,r):k(t,e,s+1,o,r)}function Ne(t){const e=Vt(t);return e?e[0]===e[1]:!0}function Be(...t){const e=n=>{if(v(n)&&n.constructor){const o=new n.constructor;for(const r in n)o[r]=e(n[r]);return o}return n};return t.map(n=>e(n)).reduce((n,o)=>q(q({},n),o))}function Yt(t={},e){L(e)&&e.forEach(n=>Yt(t,n));for(const n in e)/^\d+$/.test(n)||n in t||(t[n]=e[n]);return t}const qe=t=>t.charAt(0).toUpperCase()+t.slice(1);function Ue(t,e="-"){return t.split(e).map((n,o)=>o?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()).join("")}const Gt=t=>[].slice.call(t);function Xe(t,e,n){const{rootSelector:o="",sheet:r}=t,a=`${o} ${(i=>i.replace(/\s?(bb-)/g,".$1").replace(/\.+/g,"."))(e)} {${n.join(";")}}`;return r[r.insertRule?"insertRule":"addRule"](a,r.cssRules.length)}function Ve(t){let e=[];return t.forEach(n=>{var o;try{n.cssRules&&n.cssRules.length&&(e=e.concat(Gt(n.cssRules)))}catch(r){(o=h.console)==null||o.warn(`Error while reading rules from ${n.href}: ${r.toString()}`)}}),e}function Ye(t){var e,n,o,r,s,a;return{x:((n=(e=h.pageXOffset)!=null?e:h.scrollX)!=null?n:0)+((o=t.scrollLeft)!=null?o:0),y:((s=(r=h.pageYOffset)!=null?r:h.scrollY)!=null?s:0)+((a=t.scrollTop)!=null?a:0)}}function Ge(t,e=0,n=0,o=!0){const r=new DOMPoint(e,n),s=t.getScreenCTM(),a=r.matrixTransform(o?s==null?void 0:s.inverse():s);if(o===!1){const i=G(t);a.x-=i.x,a.y-=i.y}return a}function kt(t){const e=t?t.transform:null,n=e&&e.baseVal;return n&&n.numberOfItems?n.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}}function ke(t,e){var n;const o=(n=t==null?void 0:t.getAttribute)==null?void 0:n.call(t,e);if(o)return parseFloat(o);const r=kt(t);return e==="x"?r.e:r.f}function ze(t){const e=t[0]instanceof Date,n=(e?t.map(Number):t).filter((o,r,s)=>s.indexOf(o)===r);return e?n.map(o=>new Date(o)):n}function He(t){return t&&t.length?t.reduce((e,n)=>e.concat(n)):[]}function M(t,...e){if(!e.length||e.length===1&&!e[0])return t;const n=e.shift();return v(t)&&v(n)&&Object.keys(n).forEach(o=>{if(!/^(__proto__|constructor|prototype)$/i.test(o)){const r=n[o];v(r)?(!t[o]&&(t[o]={}),t[o]=M(t[o],r)):t[o]=L(r)?r.concat():r}}),M(t,...e)}function zt(t,e=!0){let n;return t[0]instanceof Date?n=e?(o,r)=>o-r:(o,r)=>r-o:e&&!t.every(isNaN)?n=(o,r)=>o-r:e||(n=(o,r)=>o>r&&-1||o<r&&1||o===r&&0),t.concat().sort(n)}function Ke(t,e){let n=e.filter(o=>Ut(o));return n.length?A(n[0])?n=Math[t](...n):n[0]instanceof Date&&(n=zt(n,t==="min")[0]):n=void 0,n}const Ht=(t,e,n=1)=>{const o=[],r=Math.max(0,Math.ceil((e-t)/n))|0;for(let s=t;s<r;s++)o.push(t+s*n);return o},We={mouse:(()=>{const t=()=>({bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0});try{return new MouseEvent("t"),(e,n,o=t())=>{e.dispatchEvent(new MouseEvent(n,o))}}catch(e){return(n,o,r=t())=>{const s=Tt.createEvent("MouseEvent");s.initMouseEvent(o,r.bubbles,r.cancelable,E,0,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.dispatchEvent(s)}}})(),touch:(t,e,n)=>{const o=new Touch(M({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},n));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[o],targetTouches:[],changedTouches:[o]}))}};function Ze(t,e){let n=t;for(const o in e)n=n.replace(new RegExp(`{=${o}}`,"g"),e[o]);return Ft(n)}function Kt(t){var e;let n;if(t instanceof Date)n=t;else if(y(t)){const{config:o,format:r}=this;n=(e=r.dataTime(o.data_xFormat)(t))!=null?e:new Date(t)}else A(t)&&!isNaN(t)&&(n=new Date(+t));return(!n||isNaN(+n))&&console&&console.error&&console.error(`Failed to parse x '${t}' to Date object`),n}function Je(t){const e=t.attr("viewBox");return e?/(\d+(\.\d+)?){3}/.test(e):!1}function Qe(t,e,n=!1){const o=!!t.node;let r=!1;for(const[s,a]of Object.entries(e))if(r=o?t.style(s)===a:t.style[s]===a,n===!1&&r)break;return r}function tn(){var t,e;return((t=P)==null?void 0:t.hidden)===!1||((e=P)==null?void 0:e.visibilityState)==="visible"}function en(t,e){const{DocumentTouch:n,matchMedia:o,navigator:r}=h,s=o==null?void 0:o("(pointer:coarse)").matches;let a=!1;if(e)if(r&&"maxTouchPoints"in r)a=r.maxTouchPoints>0;else if("ontouchmove"in h||n&&P instanceof n)a=!0;else if(s)a=!0;else{const b=r.userAgent;a=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(b)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(b)}return t&&!s&&(o==null?void 0:o("(pointer:fine)").matches)&&"mouse"||a&&"touch"||"mouse"}function Wt(t,e){e()===!1?jt(()=>Wt(t,e)):t()}function nn(t){if(v(t)&&!y(t)){const a=t;return{top:a.top||0,right:a.right||0,bottom:a.bottom||0,left:a.left||0}}const e=(y(t)?t.trim().split(/\s+/):[t]).map(a=>+a||0),[n,o=n,r=n,s=o]=e;return{top:n,right:o,bottom:r,left:s}}function on(t,e){t.pendingRaf!==null?(h.cancelAnimationFrame(t.pendingRaf),t.pendingRaf=h.requestAnimationFrame(()=>{t.pendingRaf=null,e()})):(t.pendingRaf=h.requestAnimationFrame(()=>{t.pendingRaf=null}),e())}function rn(t,e=(n=>n)){const n=new Set;return X(t,(o,r)=>{n.add(e(o,r))}),n}function sn(t,e,n=(o=>o)){const o=new Map;return X(t,(r,s)=>{o.set(e(r,s),n(r,s))}),o}function Zt(t){const e=this.config;let n,o,r;const s=()=>{const a=o.shift();if(a&&n&&T(n)&&a in n)return n=n[a],s();if(!a)return n};Object.keys(e).forEach(a=>{n=t,o=a.split("_"),r=s(),V(r)&&(e[a]=r)}),this.api&&(this.state.orgConfig=t)}var Jt=Object.defineProperty,Qt=(t,e,n)=>e in t?Jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,S=(t,e,n)=>Qt(t,typeof e!="symbol"?e+"":e,n);class z{constructor(e={}){S(this,"$$"),S(this,"options"),S(this,"config"),this.options=e}loadConfig(){Zt.call(this,this.options)}$beforeInit(){}$init(){}$afterInit(){}$redraw(){}$willDestroy(){Object.keys(this).forEach(e=>{this[e]=null,delete this[e]})}}S(z,"version","3.18.0-nightly-20260207005040");var te=p(996),g={colorScale:"bb-colorscale",stanfordElements:"bb-stanford-elements",stanfordLine:"bb-stanford-line",stanfordLines:"bb-stanford-lines",stanfordRegion:"bb-stanford-region",stanfordRegions:"bb-stanford-regions"},ee=Object.defineProperty,ne=(t,e,n)=>e in t?ee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H=(t,e,n)=>ne(t,typeof e!="symbol"?e+"":e,n);function oe(t){return t==="d"?e=>Math.round(e).toString():e=>String(e)}class re{constructor(e){H(this,"owner"),H(this,"colorScale"),this.owner=e}drawColorScale(){const{$$:e,config:n}=this.owner,o=e.data.targets[0],r=e.state.height-n.padding_bottom-n.padding_top,s=n.scale_width,a=5,i=Ht(n.padding_bottom,r,a),b=(0,C.scaleSequential)(o.colors).domain([i[i.length-1],i[0]]);this.colorScale&&this.colorScale.remove(),this.colorScale=e.$el.svg.append("g").attr("width",50).attr("height",r).attr("class",g.colorScale),this.colorScale.append("g").attr("transform",`translate(0, ${n.padding_top})`).selectAll("bars").data(i).enter().append("rect").attr("y",(x,pe)=>pe*a).attr("x",0).attr("width",s).attr("height",a).attr("fill",x=>b(x));const d=(0,C.scaleSymlog)().domain([o.minEpochs,o.maxEpochs]).range([i[0]+n.padding_top+i[i.length-1]+a-1,i[0]+n.padding_top]),c=(0,te.axisRight)(d),l=n.scale_format;l==="pow10"?c.tickValues([1,10,100,1e3,1e4,1e5,1e6,1e7]):O(l)?c.tickFormat(l):c.tickFormat(oe("d"));const m=this.colorScale.append("g").attr("class","legend axis").attr("transform",`translate(${s},0)`).call(c);l==="pow10"&&m.selectAll(".tick text").text(null).filter(x=>x/Math.pow(10,Math.ceil(Math.log(x)/Math.LN10-1e-12))===1).text(10).append("tspan").attr("dy","-.7em").text(x=>Math.round(Math.log(x)/Math.LN10)),this.colorScale.attr("transform",`translate(${e.state.current.width-this.xForColorScale()}, 0)`)}xForColorScale(){return this.owner.config.padding_right+this.colorScale.node().getBBox().width}getColorScalePadding(){return this.xForColorScale()+this.owner.config.padding_left+20}}function se(t,e){const n=t.x,o=t.value;let r=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const i=e[s].x,b=e[s].y,d=e[a].x,c=e[a].y;b>o!=c>o&&n<(d-i)*(o-b)/(c-b)+i&&(r=!r)}return r}function ae(t,e){return t.epochs<e.epochs?-1:t.epochs>e.epochs?1:0}function ie(t){let e=0,n,o;for(let r=0,s=t.length,a=s-1;r<s;a=r,r++)n=t[r],o=t[a],e+=n.x*o.y,e-=n.y*o.x;return e/=2,e}function w(t){const e=ie(t);let n=0,o=0,r;for(let s=0,a=t.length,i=a-1;s<a;i=s,s++){const b=t[s],d=t[i];r=b.x*d.y-d.x*b.y,n+=(b.x+d.x)*r,o+=(b.y+d.y)*r}return r=e*6,{x:n/r,y:o/r}}var ce=Object.defineProperty,le=(t,e,n)=>e in t?ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ue=(t,e,n)=>le(t,typeof e!="symbol"?e+"":e,n);class be{constructor(e){ue(this,"owner"),this.owner=e;const n=e.$$.$el.main.select(".bb-chart").append("g").attr("class",g.stanfordElements);n.append("g").attr("class",g.stanfordLines),n.append("g").attr("class",g.stanfordRegions)}updateStanfordLines(e){const{$$:n}=this.owner,{config:o,$el:{main:r}}=n,s=o.axis_rotated,a=this.xvCustom.bind(n),i=this.yvCustom.bind(n),b=r.select(`.${g.stanfordLines}`).style("shape-rendering","geometricprecision").selectAll(`.${g.stanfordLine}`).data(this.owner.config.lines);b.exit().transition().duration(e).style("opacity","0").remove();const d=b.enter().append("g");d.append("line").style("opacity","0"),d.merge(b).attr("class",c=>g.stanfordLine+(c.class?` ${c.class}`:"")).select("line").transition().duration(e).attr("x1",c=>s?i(c,"y1"):a(c,"x1")).attr("x2",c=>s?i(c,"y2"):a(c,"x2")).attr("y1",c=>s?a(c,"x1"):i(c,"y1")).attr("y2",c=>s?a(c,"x2"):i(c,"y2")).transition().style("opacity",null)}updateStanfordRegions(e){const{$$:n}=this.owner,{config:o,$el:{main:r}}=n,s=o.axis_rotated,a=this.xvCustom.bind(n),i=this.yvCustom.bind(n),b=this.owner.countEpochsInRegion.bind(n);let d=r.select(`.${g.stanfordRegions}`).selectAll(`.${g.stanfordRegion}`).data(this.owner.config.regions);d.exit().transition().duration(e).style("opacity","0").remove();const c=d.enter().append("g");c.append("polygon").style("opacity","0"),c.append("text").attr("transform",s?"rotate(-90)":"").style("opacity","0"),d=c.merge(d),d.attr("class",l=>g.stanfordRegion+(l.class?` ${l.class}`:"")).select("polygon").transition().duration(e).attr("points",l=>l.points.map(m=>[s?i(m,"y"):a(m,"x"),s?a(m,"x"):i(m,"y")].join(",")).join(" ")).transition().style("opacity",l=>String(l.opacity?l.opacity:.2)),d.select("text").transition().duration(e).attr("x",l=>s?i(w(l.points),"y"):a(w(l.points),"x")).attr("y",l=>s?a(w(l.points),"x"):i(w(l.points),"y")).text(l=>{if(l.text){const{value:m,percentage:x}=b(l.points);return l.text(m,x)}return""}).attr("text-anchor","middle").attr("dominant-baseline","middle").transition().style("opacity",null)}updateStanfordElements(e=0){this.updateStanfordLines(e),this.updateStanfordRegions(e)}xvCustom(e,n){const o=this,{axis:r,config:s}=o;let a=n?e[n]:o.getBaseValue(e);return r.isTimeSeries()?a=Kt.call(o,a):r.isCategorized()&&y(a)&&(a=s.axis_x_categories.indexOf(e.value)),o.scale.x(a)}yvCustom(e,n){const o=this,r=e.axis&&e.axis==="y2"?o.scale.y2:o.scale.y,s=n?e[n]:o.getBaseValue(e);return r(s)}}class K{constructor(){return{colors:void 0,epochs:[],lines:[],scale_min:void 0,scale_max:void 0,scale_width:20,scale_format:void 0,padding_top:0,padding_right:0,padding_bottom:0,padding_left:0,regions:[]}}}var de=Object.defineProperty,fe=(t,e,n)=>e in t?de(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,W=(t,e,n)=>fe(t,typeof e!="symbol"?e+"":e,n);function Z(t,e,n,o=1){return{h:+t,s:+e,l:+n,opacity:+o}}class he extends z{constructor(e){return super(e),W(this,"colorScale"),W(this,"elements"),this.config=new K,this}$beforeInit(){const{$$:e}=this;e.config.data_xSort=!1,e.isMultipleX=()=>!0,e.showGridFocus=()=>{},e.labelishData=o=>o.values,e.opacityForCircle=()=>1;const n=e.getCurrentPadding.bind(e);e.getCurrentPadding=()=>{const o=n();return o.right+=this.colorScale?this.colorScale.getColorScalePadding():0,o}}$init(){const{$$:e}=this;this.loadConfig(),e.color=this.getStanfordPointColor.bind(e),this.colorScale=new re(this),this.elements=new be(this),this.convertData(),this.initStanfordData(),this.setStanfordTooltip(),this.colorScale.drawColorScale(),e.right+=this.colorScale?this.colorScale.getColorScalePadding():0,this.$redraw()}$redraw(e){var n,o;(n=this.colorScale)==null||n.drawColorScale(),(o=this.elements)==null||o.updateStanfordElements(e)}getOptions(){return new K}convertData(){const e=this.$$.data.targets,n=this.options.epochs;e.forEach(o=>{o.values.forEach((r,s)=>{r.epochs=n[s]}),o.minEpochs=void 0,o.maxEpochs=void 0,o.colors=void 0,o.colorscale=void 0})}initStanfordData(){const{config:e}=this,n=this.$$.data.targets[0];n.values.sort(ae);const o=n.values.map(r=>r.epochs);n.minEpochs=isNaN(e.scale_min)?Math.min(...o):e.scale_min,n.maxEpochs=isNaN(e.scale_max)?Math.max(...o):e.scale_max,n.colors=O(e.colors)?e.colors:(0,et.interpolateHslLong)(Z(250,1,.5),Z(0,1,.5)),n.colorscale=(0,C.scaleSequentialLog)(n.colors).domain([n.minEpochs,n.maxEpochs])}getStanfordPointColor(e){return this.data.targets[0].colorscale(e.epochs)}setStanfordTooltip(){const{config:e}=this.$$;Y(e.tooltip_contents)&&(e.tooltip_contents=function(n,o,r,s){const{data_x:a}=e;let i=`<table class="${R.tooltip}"><tbody>`;return n.forEach(b=>{const{id:d="",value:c=0,epochs:l=0,x:m=""}=b;i+=`<tr>
							<th>${a||""}</th>
							<th class="value">${o(m)}</th>
						</tr>
						<tr>
							<th>${b.id}</th>
							<th class="value">${r(c)}</th>
						</tr>
						<tr class="${R.tooltipName}-${d}">
							<td class="name"><span style="background-color:${s(b)}"></span>Epochs</td>
							<td class="value">${r(l)}</td>
						</tr>`}),`${i}</tbody></table>`})}countEpochsInRegion(e){const o=this.data.targets[0],r=o.values.reduce((a,i)=>a+Number(i.epochs),0),s=o.values.reduce((a,i)=>se(i,e)?a+Number(i.epochs):a,0);return{value:s,percentage:s!==0?+(s/r*100).toFixed(1):0}}}return $=$.default,$})()});
