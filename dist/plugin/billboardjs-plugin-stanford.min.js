/*!
 * Copyright (c) 2017 ~ present NAVER Corp.
 * billboard.js project is licensed under the MIT license
 *
 * billboard.js, JavaScript chart library
 * https://naver.github.io/billboard.js/
 *
 * @version 3.17.4-nightly-20260122004731
 * @requires billboard.js
 * @summary billboard.js plugin
 */(function(f,x){typeof exports=="object"&&typeof module=="object"?module.exports=x(require("d3-color"),require("d3-interpolate"),require("d3-scale"),require("d3-brush"),require("d3-selection"),require("d3-axis"),require("d3-format")):typeof define=="function"&&define.amd?define("bb",["d3-color","d3-interpolate","d3-scale","d3-brush","d3-selection","d3-axis","d3-format"],x):typeof exports=="object"?exports.bb=x(require("d3-color"),require("d3-interpolate"),require("d3-scale"),require("d3-brush"),require("d3-selection"),require("d3-axis"),require("d3-format")):(f.bb=f.bb||{},f.bb.plugin=f.bb.plugin||{},f.bb.plugin.stanford=x(f.d3,f.d3,f.d3,f.d3,f.d3,f.d3,f.d3))})(this,function(D,f,x,Q,ee,te,ne){return(function(){"use strict";var oe={218:(function(e){e.exports=D}),390:(function(e){e.exports=ne}),455:(function(e){e.exports=x}),747:(function(e){e.exports=ee}),798:(function(e){e.exports=f}),853:(function(e){e.exports=Q}),996:(function(e){e.exports=te})},I={};function p(e){var t=I[e];if(t!==void 0)return t.exports;var n=I[e]={exports:{}};return oe[e](n,n.exports,p),n.exports}(function(){p.d=function(e,t){for(var n in t)p.o(t,n)&&!p.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}})(),(function(){p.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}})();var $={};p.d($,{default:function(){return ft}});var F=p(218),re=p(798),C=p(455),se=Object.defineProperty,N=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,B=(e,t,n)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b=(e,t)=>{for(var n in t||(t={}))ae.call(t,n)&&B(e,n,t[n]);if(N)for(var n of N(t))ie.call(t,n)&&B(e,n,t[n]);return e};const ce={button:"bb-button",chart:"bb-chart",empty:"bb-empty",main:"bb-main",target:"bb-target",EXPANDED:"_expanded_",dummy:"_dummy_"},le={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcLabelLineText:"bb-arc-label-line-text",arcRange:"bb-arc-range",arcs:"bb-arcs",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsTitle:"bb-chart-arcs-title",needle:"bb-needle"},ue={area:"bb-area",areas:"bb-areas"},de={axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",axisXTooltip:"bb-axis-x-tooltip",axisYTooltip:"bb-axis-y-tooltip",axisY2Tooltip:"bb-axis-y2-tooltip",axisTooltipX:"bb-axis-tooltip-x",axisTooltipY:"bb-axis-tooltip-y"},be={bar:"bb-bar",bars:"bb-bars",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars",barConnectLine:"bb-bar-connectLine"},fe={candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",valueDown:"bb-value-down",valueUp:"bb-value-up"},pe={chartCircles:"bb-chart-circles",circle:"bb-circle",circles:"bb-circles"},he={colorPattern:"bb-color-pattern",colorScale:"bb-colorscale"},ge={dragarea:"bb-dragarea",INCLUDED:"_included_"},me={funnel:"bb-funnel",chartFunnel:"bb-chart-funnel",chartFunnels:"bb-chart-funnels",funnelBackground:"bb-funnel-background"},_e={chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",gaugeValue:"bb-gauge-value"},xe={legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile"},ye={chartLine:"bb-chart-line",chartLines:"bb-chart-lines",line:"bb-line",lines:"bb-lines"},ve={eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single"},$e={focused:"bb-focused",defocused:"bb-defocused",legendItemFocused:"bb-legend-item-focused",xgridFocus:"bb-xgrid-focus",ygridFocus:"bb-ygrid-focus"},we={grid:"bb-grid",gridLines:"bb-grid-lines",xgrid:"bb-xgrid",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids"},gt={level:"bb-level",levels:"bb-levels"},Ee={chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars"},Se={region:"bb-region",regions:"bb-regions"},Ce={selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",SELECTED:"_selected_"},Re={shape:"bb-shape",shapes:"bb-shapes"},Oe={brush:"bb-brush",subchart:"bb-subchart"},Pe={chartText:"bb-chart-text",chartTexts:"bb-chart-texts",text:"bb-text",texts:"bb-texts",title:"bb-title",textBorderRect:"bb-text-border",textLabelImage:"bb-text-label-image",TextOverlapping:"text-overlapping"},R={tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name"},Te={treemap:"bb-treemap",chartTreemap:"bb-chart-treemap",chartTreemaps:"bb-chart-treemaps"},Ae={buttonZoomReset:"bb-zoom-reset",zoomBrush:"bb-zoom-brush"};var mt=b(b(b(b(b(b(b(b(b(b(b(b(b(b(b(b(b(b(b(b(b(b(b(b(b({},ce),le),ue),de),be),fe),pe),he),ge),_e),xe),ye),ve),$e),me),we),Ee),Se),Ce),Re),Oe),Pe),R),Te),Ae),_t=p(853),xt=p(747);function Le(){return typeof globalThis=="object"&&globalThis!==null&&globalThis.Object===Object&&globalThis||typeof global=="object"&&global!==null&&global.Object===Object&&global||typeof self=="object"&&self!==null&&self.Object===Object&&self||Function("return this")()}function je(e){const t=typeof(e==null?void 0:e.requestAnimationFrame)=="function"&&typeof(e==null?void 0:e.cancelAnimationFrame)=="function",n=typeof(e==null?void 0:e.requestIdleCallback)=="function"&&typeof(e==null?void 0:e.cancelIdleCallback)=="function",o=s=>setTimeout(s,1),r=s=>clearTimeout(s);return[t?e.requestAnimationFrame:o,t?e.cancelAnimationFrame:r,n?e.requestIdleCallback:o,n?e.cancelIdleCallback:r]}const w=Le(),Me=w==null?void 0:w.document,[yt,vt,$t,wt]=je(w);var De=Object.defineProperty,q=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable,U=(e,t,n)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G=(e,t)=>{for(var n in t||(t={}))Ie.call(t,n)&&U(e,n,t[n]);if(q)for(var n of q(t))Fe.call(t,n)&&U(e,n,t[n]);return e};function X(e,t,n=!1){const o=r=>r[e?"getBoundingClientRect":"getBBox"]();return n?o(t):!("rect"in t)||"rect"in t&&t.hasAttribute("width")&&t.rect.width!==+(t.getAttribute("width")||0)?t.rect=o(t):t.rect}function Y(e,t){for(let n=0;n<e.length;n++){const o=e[n];o&&t(o,n)}}const y=(()=>{const e="script|iframe|object|embed|form|input|button|textarea|select|style|link|meta|base|math|isindex",t={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165},n=60,o=62,r={tags:new RegExp(`<(${e})\\b[\\s\\S]*?>([\\s\\S]*?<\\/(${e})\\s*>)?`,"gi"),closingTags:new RegExp(`<\\/(${e})\\s*>`,"gi"),htmlEntity:/&#x([0-9a-f]+);?|&#([0-9]+);?|&([a-z]+);/gi,controlChar:/[\x00-\x1F\x7F]/g,eventHandler:/\s*on\w+\s*=\s*(?:"[^"]*"|'[^']*'|`[^`]*`|[^\s>]*)/gi,dangerousUri:/(href|src|action|xlink:href)\s*=\s*(?:"([^"]*)"|'([^']*)'|`([^`]*)`|([^\s>]+))/gi,dangerousProtocol:/^(javascript|data|vbscript):/};return{ENTITY_MAP:t,LT_CODE:n,GT_CODE:o,rx:r,decodeEntities(s){return s.replace(r.htmlEntity,(a,i,l,d)=>{const c=i?parseInt(i,16):l?parseInt(l,10):d&&t[d.toLowerCase()]||0;return c&&c!==n&&c!==o?String.fromCharCode(c):a})},removeDangerousUris(s){return s.replace(r.dangerousUri,(a,i,l,d,c,u)=>{var h,g,S;const pt=(S=(g=(h=l!=null?l:d)!=null?h:c)!=null?g:u)!=null?S:"",J=l!==void 0?'"':d!==void 0?"'":c!==void 0?"`":"",ht=pt.toLowerCase().replace(/\s/g,"");return r.dangerousProtocol.test(ht)?`${i}=${J}${J}`:a})}}})(),Et=e=>e||e===0,O=e=>typeof e=="function",_=e=>typeof e=="string",P=e=>typeof e=="number",Ne=e=>typeof e=="undefined",V=e=>typeof e!="undefined",St=e=>typeof e=="boolean",Ct=e=>Math.ceil(e/10)*10,Rt=e=>Math.ceil(e)+.5,Ot=e=>e[1]-e[0],T=e=>typeof e=="object",Be=e=>{for(const t in e)return!1;return!0},k=e=>Ne(e)||e===null||_(e)&&e.length===0||T(e)&&!(e instanceof Date)&&Be(e)||P(e)&&isNaN(e),qe=e=>!k(e),A=e=>Array.isArray(e),v=e=>e&&!(e!=null&&e.nodeType)&&T(e)&&!A(e);function Pt(e,t,n){return V(e[t])?e[t]:n}function Tt(e,t){let n=!1;return Object.keys(e).forEach(o=>e[o]===t&&(n=!0)),n}function At(e,t,...n){const o=O(e);return o&&e.call(t,...n),o}function Lt(e,t){let n=0;const o=function(...r){!--n&&t.apply(this,...r)};"duration"in e?e.each(()=>++n).on("end",o):(++n,e.call(o))}function Ue(e){if(!_(e)||!e||e.indexOf("<")===-1)return e;let t=e,n;do n=t,t=y.decodeEntities(t).replace(y.rx.controlChar,"").replace(y.rx.tags,"").replace(y.rx.closingTags,"").replace(y.rx.eventHandler,""),t=y.removeDangerousUris(t);while(t!==n);return t}function jt(e,t,n=[-1,1],o=!1){if(!(!e||!_(t)))if(t.indexOf(`
`)===-1)e.text(t);else{const r=[e.text(),t].map(s=>s.replace(/[\s\n]/g,""));if(r[0]!==r[1]){const s=t.split(`
`),a=o?s.length-1:1;e.html(""),s.forEach((i,l)=>{e.append("tspan").attr("x",0).attr("dy",`${l===0?n[0]*a:n[1]}em`).text(i)})}}}function Ge(e){const{x:t,y:n,width:o,height:r}=e.getBBox();return[{x:t,y:n+r},{x:t,y:n},{x:t+o,y:n},{x:t+o,y:n+r}]}function Mt(e){const{width:t,height:n}=z(e),o=Ge(e),r=o[0].x,s=Math.min(o[0].y,o[1].y);return{x:r,y:s,width:t,height:n}}function Dt(e,t){var n;const o=e&&((n=e.touches||e.sourceEvent&&e.sourceEvent.touches)==null?void 0:n[0]);let r=[0,0];try{r=d3Pointer(o||e,t)}catch(s){}return r.map(s=>isNaN(s)?0:s)}function Xe(e){const{event:t,$el:n}=e,o=n.subchart.main||n.main;let r;return t&&t.type==="brush"?r=t.selection:o&&(r=o.select(".bb-brush").node())&&(r=d3BrushSelection(r)),r}function z(e,t=!1){return X(!0,e,t)}function It(e,t=!1){return X(!1,e,t)}function Ft(e=!0,t=0,n=1e4){const o=window.crypto||window.msCrypto,r=o?t+o.getRandomValues(new Uint32Array(1))[0]%(n-t+1):Math.floor(Math.random()*(n-t)+t);return e?String(r):r}function H(e,t,n,o,r){if(n>o)return-1;const s=Math.floor((n+o)/2);let{x:a,w:i=0}=e[s];return r&&(a=e[s].y,i=e[s].h),t>=a&&t<=a+i?s:t<a?H(e,t,n,s-1,r):H(e,t,s+1,o,r)}function Nt(e){const t=Xe(e);return t?t[0]===t[1]:!0}function Bt(...e){const t=n=>{if(v(n)&&n.constructor){const o=new n.constructor;for(const r in n)o[r]=t(n[r]);return o}return n};return e.map(n=>t(n)).reduce((n,o)=>G(G({},n),o))}function Ye(e={},t){A(t)&&t.forEach(n=>Ye(e,n));for(const n in t)/^\d+$/.test(n)||n in e||(e[n]=t[n]);return e}const qt=e=>e.charAt(0).toUpperCase()+e.slice(1);function Ut(e,t="-"){return e.split(t).map((n,o)=>o?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()).join("")}const Ve=e=>[].slice.call(e);function Gt(e,t,n){const{rootSelector:o="",sheet:r}=e,a=`${o} ${(i=>i.replace(/\s?(bb-)/g,".$1").replace(/\.+/g,"."))(t)} {${n.join(";")}}`;return r[r.insertRule?"insertRule":"addRule"](a,r.cssRules.length)}function Xt(e){let t=[];return e.forEach(n=>{var o;try{n.cssRules&&n.cssRules.length&&(t=t.concat(Ve(n.cssRules)))}catch(r){(o=window.console)==null||o.warn(`Error while reading rules from ${n.href}: ${r.toString()}`)}}),t}function Yt(e){var t,n,o,r,s,a;return{x:((n=(t=window.pageXOffset)!=null?t:window.scrollX)!=null?n:0)+((o=e.scrollLeft)!=null?o:0),y:((s=(r=window.pageYOffset)!=null?r:window.scrollY)!=null?s:0)+((a=e.scrollTop)!=null?a:0)}}function Vt(e,t=0,n=0,o=!0){const r=new DOMPoint(t,n),s=e.getScreenCTM(),a=r.matrixTransform(o?s==null?void 0:s.inverse():s);if(o===!1){const i=z(e);a.x-=i.x,a.y-=i.y}return a}function kt(e){const t=e?e.transform:null,n=t&&t.baseVal;return n&&n.numberOfItems?n.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}}function zt(e){const t=e[0]instanceof Date,n=(t?e.map(Number):e).filter((o,r,s)=>s.indexOf(o)===r);return t?n.map(o=>new Date(o)):n}function Ht(e){return e&&e.length?e.reduce((t,n)=>t.concat(n)):[]}function L(e,...t){if(!t.length||t.length===1&&!t[0])return e;const n=t.shift();return v(e)&&v(n)&&Object.keys(n).forEach(o=>{if(!/^(__proto__|constructor|prototype)$/i.test(o)){const r=n[o];v(r)?(!e[o]&&(e[o]={}),e[o]=L(e[o],r)):e[o]=A(r)?r.concat():r}}),L(e,...t)}function ke(e,t=!0){let n;return e[0]instanceof Date?n=t?(o,r)=>o-r:(o,r)=>r-o:t&&!e.every(isNaN)?n=(o,r)=>o-r:t||(n=(o,r)=>o>r&&-1||o<r&&1||o===r&&0),e.concat().sort(n)}function Kt(e,t){let n=t.filter(o=>qe(o));return n.length?P(n[0])?n=Math[e](...n):n[0]instanceof Date&&(n=ke(n,e==="min")[0]):n=void 0,n}const ze=(e,t,n=1)=>{const o=[],r=Math.max(0,Math.ceil((t-e)/n))|0;for(let s=e;s<r;s++)o.push(e+s*n);return o},Wt={mouse:(()=>{const e=()=>({bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0});try{return new MouseEvent("t"),(t,n,o=e())=>{t.dispatchEvent(new MouseEvent(n,o))}}catch(t){return(n,o,r=e())=>{const s=Me.createEvent("MouseEvent");s.initMouseEvent(o,r.bubbles,r.cancelable,w,0,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.dispatchEvent(s)}}})(),touch:(e,t,n)=>{const o=new Touch(L({identifier:Date.now(),target:e,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},n));e.dispatchEvent(new TouchEvent(t,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[o],targetTouches:[],changedTouches:[o]}))}};function Zt(e,t){let n=e;for(const o in t)n=n.replace(new RegExp(`{=${o}}`,"g"),t[o]);return Ue(n)}function He(e){var t;let n;if(e instanceof Date)n=e;else if(_(e)){const{config:o,format:r}=this;n=(t=r.dataTime(o.data_xFormat)(e))!=null?t:new Date(e)}else P(e)&&!isNaN(e)&&(n=new Date(+e));return(!n||isNaN(+n))&&console&&console.error&&console.error(`Failed to parse x '${e}' to Date object`),n}function Jt(e){const t=e.attr("viewBox");return t?/(\d+(\.\d+)?){3}/.test(t):!1}function Qt(e,t,n=!1){const o=!!e.node;let r=!1;for(const[s,a]of Object.entries(t))if(r=o?e.style(s)===a:e.style[s]===a,n===!1&&r)break;return r}function en(){var e,t;return((e=document)==null?void 0:e.hidden)===!1||((t=document)==null?void 0:t.visibilityState)==="visible"}function tn(e,t){const{DocumentTouch:n,matchMedia:o,navigator:r}=window,s=o==null?void 0:o("(pointer:coarse)").matches;let a=!1;if(t)if(r&&"maxTouchPoints"in r)a=r.maxTouchPoints>0;else if("ontouchmove"in window||n&&document instanceof n)a=!0;else if(s)a=!0;else{const l=r.userAgent;a=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(l)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(l)}return e&&!s&&(o==null?void 0:o("(pointer:fine)").matches)&&"mouse"||a&&"touch"||"mouse"}function Ke(e,t){t()===!1?requestAnimationFrame(()=>Ke(e,t)):e()}function nn(e){if(v(e)&&!_(e)){const a=e;return{top:a.top||0,right:a.right||0,bottom:a.bottom||0,left:a.left||0}}const t=(_(e)?e.trim().split(/\s+/):[e]).map(a=>+a||0),[n,o=n,r=n,s=o]=t;return{top:n,right:o,bottom:r,left:s}}function on(e,t){e.pendingRaf!==null?(window.cancelAnimationFrame(e.pendingRaf),e.pendingRaf=window.requestAnimationFrame(()=>{e.pendingRaf=null,t()})):(e.pendingRaf=window.requestAnimationFrame(()=>{e.pendingRaf=null}),t())}function rn(e,t=(n=>n)){const n=new Set;return Y(e,(o,r)=>{n.add(t(o,r))}),n}function sn(e,t,n=(o=>o)){const o=new Map;return Y(e,(r,s)=>{o.set(t(r,s),n(r,s))}),o}function We(e){const t=this.config;let n,o,r;const s=()=>{const a=o.shift();if(a&&n&&T(n)&&a in n)return n=n[a],s();if(!a)return n};Object.keys(t).forEach(a=>{n=e,o=a.split("_"),r=s(),V(r)&&(t[a]=r)}),this.api&&(this.state.orgConfig=e)}var Ze=Object.defineProperty,Je=(e,t,n)=>t in e?Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,j=(e,t,n)=>Je(e,typeof t!="symbol"?t+"":t,n);class K{constructor(t={}){j(this,"$$"),j(this,"options"),this.options=t}$beforeInit(){}$init(){}$afterInit(){}$redraw(){}$willDestroy(){Object.keys(this).forEach(t=>{this[t]=null,delete this[t]})}}j(K,"version","3.17.4-nightly-20260122004731");var Qe=p(996),et=p(390),m={colorScale:"bb-colorscale",stanfordElements:"bb-stanford-elements",stanfordLine:"bb-stanford-line",stanfordLines:"bb-stanford-lines",stanfordRegion:"bb-stanford-region",stanfordRegions:"bb-stanford-regions"},tt=Object.defineProperty,nt=(e,t,n)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,W=(e,t,n)=>nt(e,typeof t!="symbol"?t+"":t,n);class ot{constructor(t){W(this,"owner"),W(this,"colorScale"),this.owner=t}drawColorScale(){const{$$:t,config:n}=this.owner,o=t.data.targets[0],r=t.state.height-n.padding_bottom-n.padding_top,s=n.scale_width,a=5,i=ze(n.padding_bottom,r,a),l=(0,C.scaleSequential)(o.colors).domain([i[i.length-1],i[0]]);this.colorScale&&this.colorScale.remove(),this.colorScale=t.$el.svg.append("g").attr("width",50).attr("height",r).attr("class",m.colorScale),this.colorScale.append("g").attr("transform",`translate(0, ${n.padding_top})`).selectAll("bars").data(i).enter().append("rect").attr("y",(g,S)=>S*a).attr("x",0).attr("width",s).attr("height",a).attr("fill",g=>l(g));const d=(0,C.scaleSymlog)().domain([o.minEpochs,o.maxEpochs]).range([i[0]+n.padding_top+i[i.length-1]+a-1,i[0]+n.padding_top]),c=(0,Qe.axisRight)(d),u=n.scale_format;u==="pow10"?c.tickValues([1,10,100,1e3,1e4,1e5,1e6,1e7]):O(u)?c.tickFormat(u):c.tickFormat((0,et.format)("d"));const h=this.colorScale.append("g").attr("class","legend axis").attr("transform",`translate(${s},0)`).call(c);u==="pow10"&&h.selectAll(".tick text").text(null).filter(g=>g/Math.pow(10,Math.ceil(Math.log(g)/Math.LN10-1e-12))===1).text(10).append("tspan").attr("dy","-.7em").text(g=>Math.round(Math.log(g)/Math.LN10)),this.colorScale.attr("transform",`translate(${t.state.current.width-this.xForColorScale()}, 0)`)}xForColorScale(){return this.owner.config.padding_right+this.colorScale.node().getBBox().width}getColorScalePadding(){return this.xForColorScale()+this.owner.config.padding_left+20}}function rt(e,t){const n=e.x,o=e.value;let r=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const i=t[s].x,l=t[s].y,d=t[a].x,c=t[a].y;l>o!=c>o&&n<(d-i)*(o-l)/(c-l)+i&&(r=!r)}return r}function st(e,t){return e.epochs<t.epochs?-1:e.epochs>t.epochs?1:0}function at(e){let t=0,n,o;for(let r=0,s=e.length,a=s-1;r<s;a=r,r++)n=e[r],o=e[a],t+=n.x*o.y,t-=n.y*o.x;return t/=2,t}function E(e){const t=at(e);let n=0,o=0,r;for(let s=0,a=e.length,i=a-1;s<a;i=s,s++){const l=e[s],d=e[i];r=l.x*d.y-d.x*l.y,n+=(l.x+d.x)*r,o+=(l.y+d.y)*r}return r=t*6,{x:n/r,y:o/r}}var it=Object.defineProperty,ct=(e,t,n)=>t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lt=(e,t,n)=>ct(e,typeof t!="symbol"?t+"":t,n);class ut{constructor(t){lt(this,"owner"),this.owner=t;const n=t.$$.$el.main.select(".bb-chart").append("g").attr("class",m.stanfordElements);n.append("g").attr("class",m.stanfordLines),n.append("g").attr("class",m.stanfordRegions)}updateStanfordLines(t){const{$$:n}=this.owner,{config:o,$el:{main:r}}=n,s=o.axis_rotated,a=this.xvCustom.bind(n),i=this.yvCustom.bind(n),l=r.select(`.${m.stanfordLines}`).style("shape-rendering","geometricprecision").selectAll(`.${m.stanfordLine}`).data(this.owner.config.lines);l.exit().transition().duration(t).style("opacity","0").remove();const d=l.enter().append("g");d.append("line").style("opacity","0"),d.merge(l).attr("class",c=>m.stanfordLine+(c.class?` ${c.class}`:"")).select("line").transition().duration(t).attr("x1",c=>s?i(c,"y1"):a(c,"x1")).attr("x2",c=>s?i(c,"y2"):a(c,"x2")).attr("y1",c=>s?a(c,"x1"):i(c,"y1")).attr("y2",c=>s?a(c,"x2"):i(c,"y2")).transition().style("opacity",null)}updateStanfordRegions(t){const{$$:n}=this.owner,{config:o,$el:{main:r}}=n,s=o.axis_rotated,a=this.xvCustom.bind(n),i=this.yvCustom.bind(n),l=this.owner.countEpochsInRegion.bind(n);let d=r.select(`.${m.stanfordRegions}`).selectAll(`.${m.stanfordRegion}`).data(this.owner.config.regions);d.exit().transition().duration(t).style("opacity","0").remove();const c=d.enter().append("g");c.append("polygon").style("opacity","0"),c.append("text").attr("transform",s?"rotate(-90)":"").style("opacity","0"),d=c.merge(d),d.attr("class",u=>m.stanfordRegion+(u.class?` ${u.class}`:"")).select("polygon").transition().duration(t).attr("points",u=>u.points.map(h=>[s?i(h,"y"):a(h,"x"),s?a(h,"x"):i(h,"y")].join(",")).join(" ")).transition().style("opacity",u=>String(u.opacity?u.opacity:.2)),d.select("text").transition().duration(t).attr("x",u=>s?i(E(u.points),"y"):a(E(u.points),"x")).attr("y",u=>s?a(E(u.points),"x"):i(E(u.points),"y")).text(u=>{if(u.text){const{value:h,percentage:g}=l(u.points);return u.text(h,g)}return""}).attr("text-anchor","middle").attr("dominant-baseline","middle").transition().style("opacity",null)}updateStanfordElements(t=0){this.updateStanfordLines(t),this.updateStanfordRegions(t)}xvCustom(t,n){const o=this,{axis:r,config:s}=o;let a=n?t[n]:o.getBaseValue(t);return r.isTimeSeries()?a=He.call(o,a):r.isCategorized()&&_(a)&&(a=s.axis_x_categories.indexOf(t.value)),o.scale.x(a)}yvCustom(t,n){const o=this,r=t.axis&&t.axis==="y2"?o.scale.y2:o.scale.y,s=n?t[n]:o.getBaseValue(t);return r(s)}}class Z{constructor(){return{colors:void 0,epochs:[],lines:[],scale_min:void 0,scale_max:void 0,scale_width:20,scale_format:void 0,padding_top:0,padding_right:0,padding_bottom:0,padding_left:0,regions:[]}}}var dt=Object.defineProperty,bt=(e,t,n)=>t in e?dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M=(e,t,n)=>bt(e,typeof t!="symbol"?t+"":t,n);class ft extends K{constructor(t){return super(t),M(this,"config"),M(this,"colorScale"),M(this,"elements"),this.config=new Z,this}$beforeInit(){const{$$:t}=this;t.config.data_xSort=!1,t.isMultipleX=()=>!0,t.showGridFocus=()=>{},t.labelishData=o=>o.values,t.opacityForCircle=()=>1;const n=t.getCurrentPadding.bind(t);t.getCurrentPadding=()=>{const o=n();return o.right+=this.colorScale?this.colorScale.getColorScalePadding():0,o}}$init(){const{$$:t}=this;We.call(this,this.options),t.color=this.getStanfordPointColor.bind(t),this.colorScale=new ot(this),this.elements=new ut(this),this.convertData(),this.initStanfordData(),this.setStanfordTooltip(),this.colorScale.drawColorScale(),t.right+=this.colorScale?this.colorScale.getColorScalePadding():0,this.$redraw()}$redraw(t){var n,o;(n=this.colorScale)==null||n.drawColorScale(),(o=this.elements)==null||o.updateStanfordElements(t)}getOptions(){return new Z}convertData(){const t=this.$$.data.targets,n=this.options.epochs;t.forEach(o=>{o.values.forEach((r,s)=>{r.epochs=n[s]}),o.minEpochs=void 0,o.maxEpochs=void 0,o.colors=void 0,o.colorscale=void 0})}initStanfordData(){const{config:t}=this,n=this.$$.data.targets[0];n.values.sort(st);const o=n.values.map(r=>r.epochs);n.minEpochs=isNaN(t.scale_min)?Math.min(...o):t.scale_min,n.maxEpochs=isNaN(t.scale_max)?Math.max(...o):t.scale_max,n.colors=O(t.colors)?t.colors:(0,re.interpolateHslLong)((0,F.hsl)(250,1,.5),(0,F.hsl)(0,1,.5)),n.colorscale=(0,C.scaleSequentialLog)(n.colors).domain([n.minEpochs,n.maxEpochs])}getStanfordPointColor(t){return this.data.targets[0].colorscale(t.epochs)}setStanfordTooltip(){const{config:t}=this.$$;k(t.tooltip_contents)&&(t.tooltip_contents=function(n,o,r,s){const{data_x:a}=t;let i=`<table class="${R.tooltip}"><tbody>`;return n.forEach(l=>{const{id:d="",value:c=0,epochs:u=0,x:h=""}=l;i+=`<tr>
							<th>${a||""}</th>
							<th class="value">${o(h)}</th>
						</tr>
						<tr>
							<th>${l.id}</th>
							<th class="value">${r(c)}</th>
						</tr>
						<tr class="${R.tooltipName}-${d}">
							<td class="name"><span style="background-color:${s(l)}"></span>Epochs</td>
							<td class="value">${r(u)}</td>
						</tr>`}),`${i}</tbody></table>`})}countEpochsInRegion(t){const o=this.data.targets[0],r=o.values.reduce((a,i)=>a+Number(i.epochs),0),s=o.values.reduce((a,i)=>rt(i,t)?a+Number(i.epochs):a,0);return{value:s,percentage:s!==0?+(s/r*100).toFixed(1):0}}}return $=$.default,$})()});
